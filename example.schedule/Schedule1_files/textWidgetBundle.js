/**
 * IBM Confidential OCO Source Materials IBM Business Platform: Dashboard
 * (C) Copyright IBM Corp. 2016, 2021
 *
 * The source code for this program is not published or otherwise divested of
 * its trade secrets, irrespective of what has been deposited with the U.S.
 * Copyright Office
 */

define("dashboard-core/js/dashboard/widgets/staticwidget/PlaceholderView",["../../../lib/@waca/core-client/js/core-client/ui/core/View"],(function(t){var e=null;return e=t.extend({init:function(){e.inherited("init",this,arguments)},hide:function(){this.$el.find(".placeholder").hide(),this._isShowing=!1},show:function(){this.$el.find(".placeholder").show(),this._isShowing=!0},isShowing:function(){return this._isShowing}})})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/TextPlaceholder.html",[],(function(){return'<div class="staticContent placeholder text" aria-label="{{= it.placeholderText}}" style="padding: 10px;"><span class="textFitted responsiveColor responsiveFontFamily"><p><span>{{= it.placeholderText}}</span></p></span></div>\n'})),define("dashboard-core/js/dashboard/widgets/staticwidget/TextPlaceholderView",["./PlaceholderView","text!./TextPlaceholder.html","../../util/TextFitUtil","../../../app/nls/StringResources"],(function(t,e,i,o){var s=null;return s=t.extend({templateString:e,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.inherited("init",this,arguments),this.text=t.text||o.get("textPlaceHolder")},render:function(){var t=this.dotTemplate({placeholderText:this.text});this.$el.append(t)},show:function(){s.inherited("show",this,arguments),this.fillText()},fillText:function(){var t=this.el.querySelector(".placeholder.text");if(t&&"none"!==t.style.display){t.classList.add("textFillNoScroll");var e={maxFontSize:Math.ceil(t.clientHeight),minFontSize:1,multiLine:!1,detectMultiLine:!1};i.fillText(t,e)}}})})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/IconPlaceholder.html",[],(function(){return"<div class='placeholder icon' aria-label=\"{{= it.placeholderText}}\">\n\t<div class='iconContainer'></div>\n\t{{? it.placeholderHeader}} \n\t\t<div class='instructionTextHeader responsiveColor responsiveFontFamily'>{{= it.placeholderHeader}}</div>\n\t{{?}}\n\t<div class='instructionText responsiveColor responsiveFontFamily'>{{= it.placeholderText}}</div>\n</div>\n"})),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"));else if("function"==typeof define&&define.amd)define("js/gemini/lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/illustrations-js/text-widget_128",["@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"],e);else{var i=e("object"==typeof exports?require("@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"):t["@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"]);for(var o in i)("object"==typeof exports?exports:t)[o]=i[o]}}("undefined"!=typeof self?self:this,(function(t){return webpackJsonPBaGraphics([19],{"1e9f330d9e8a45e87d83":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("6873601dfe1d9459c1a9"),s=(i.n(o),i("ba2af528d66c47d43dcf"));e.default=s.a},"6873601dfe1d9459c1a9":function(e,i){e.exports=t},ba2af528d66c47d43dcf:function(t,e,i){"use strict";var o=i("9689a9c94ae38b47fa2c"),s=i.n(o),n=i("9ce58a7deea14f49ef01"),r=i.n(n),a=new s.a({id:"text-widget_128_v7",use:"text-widget_128_v7-usage",viewBox:"0 0 128 128",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" id="text-widget_128_v7"><path class="ba-graphics-white" d="M20.6 29.8H37.2V46.3H20.6z" /><path class="ba-graphics-gray1" d="M29 8H101V120H29z" /><path class="ba-graphics-white" d="M57.4 33H117.4V92.8H57.4z" /><path class="ba-graphics-gray20" d="M117.4,33v59.8h-60V33H117.4 M119.4,31h-64v63.8h64V31z" /><path class="ba-graphics-highlight" d="M102.9,44.8v12.3h-5.5v-5.5h-5.5v26.1h5.5v5.5H78.2v-5.5h5.5V51.6h-5.5v5.5h-5.5V44.8H102.9z M42.9,38c0,7.7-6.3,14-14,14s-14-6.3-14-14s6.3-14,14-14S42.9,30.3,42.9,38z M34.9,37h-5v-5h-2v5h-5v2h5v5h2v-5h5V37z" /></symbol>'});r.a.add(a),e.a=a}},["1e9f330d9e8a45e87d83"])})),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"));else if("function"==typeof define&&define.amd)define("js/gemini/lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/illustrations-js/box-light",["@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"],e);else{var i=e("object"==typeof exports?require("@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"):t["@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"]);for(var o in i)("object"==typeof exports?exports:t)[o]=i[o]}}("undefined"!=typeof self?self:this,(function(t){return webpackJsonPBaGraphics([192],{"31d6dd3e966609f090d6":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("6873601dfe1d9459c1a9"),s=(i.n(o),i("860899f4e44088f8dfa8"));e.default=s.a},"6873601dfe1d9459c1a9":function(e,i){e.exports=t},"860899f4e44088f8dfa8":function(t,e,i){"use strict";var o=i("9689a9c94ae38b47fa2c"),s=i.n(o),n=i("9ce58a7deea14f49ef01"),r=i.n(n),a=new s.a({id:"box-light_v7",use:"box-light_v7-usage",viewBox:"0 0 80 80",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" id="box-light_v7"><defs><linearGradient id="box-light_v7_a" x1="18.35" y1="74.17" x2="61.65" y2="49.17" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#525252" stop-opacity=".05" /><stop offset="1" stop-opacity=".1" /></linearGradient><linearGradient id="box-light_v7_b" x1="15.16" y1="43.34" x2="40.31" y2="43.34" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#e0e0e0" /><stop offset="1" stop-color="#c6c6c6" /></linearGradient><linearGradient id="box-light_v7_c" x1="40" y1="43.34" x2="68.88" y2="43.34" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#a8a8a8" /><stop offset="1" stop-color="#c6c6c6" /></linearGradient><linearGradient id="box-light_v7_d" x1="18.35" y1="30.83" x2="61.65" y2="5.83" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f4f4f4" /><stop offset="1" stop-color="#e0e0e0" /></linearGradient></defs><path style="fill:none" d="M0 0H80V80H0z" /><path style="fill:url(#box-light_v7_a)" d="M40 78.34L11.13 61.67 40 45.01 68.86 61.67 40 78.34z" /><path style="fill:url(#box-light_v7_b)" d="M40 68.35L11.12 51.68 11.13 18.33 40 34.99 40 68.35z" /><path style="fill:url(#box-light_v7_c)" d="M68.88 51.68L40 68.35 40 34.99 68.87 18.33 68.88 51.68z" /><path style="fill:url(#box-light_v7_d)" d="M40 34.99L11.13 18.33 40 1.66 68.87 18.33 40 34.99z" /><path style="fill:#c6c6c6" d="M25.97 26.67L54.64 10.12 54.22 9.88 25.54 26.44 25.97 26.67z" /><path style="fill:#fff" d="M40 35.24L11.13 18.57 11.13 18.33 11.34 18.21 40.21 34.88 40 34.99 40 35.24z" /><path style="fill:#fff" d="M21.49 33.33L13.29 28.6 13.3 22.91 21.49 27.65 21.49 33.33z" /></symbol>'});r.a.add(a),e.a=a}},["31d6dd3e966609f090d6"])})),define("dashboard-core/js/dashboard/widgets/staticwidget/IconPlaceholderView",["./PlaceholderView","text!./IconPlaceholder.html","../../util/TextFitUtil","../../../lib/@waca/core-client/js/core-client/utils/Utils","../../../app/nls/StringResources","@ba/ba-graphics/dist/illustrations-js/text-widget_128","@ba/ba-graphics/dist/illustrations-js/box-light"],(function(t,e,i,o,s,n,r){var a=null,l={text:{iconName:n.default.id,text:s.get("textWidgetIconPlaceholderText")},list:{text:s.get("textWidgetIconPlaceholderText")},vis:{iconName:r.default.id,headerText:s.get("buildVisHeader"),text:s.get("visIconPlaceholderText")}};return a=t.extend({templateString:e,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.inherited("init",this,arguments),this.type=t.iconType||"text"},render:function(){var t=this.dotTemplate({placeholderHeader:l[this.type].headerText,placeholderText:l[this.type].text});this.$el.append(t),this.resize();var e=l[this.type].iconName;e&&o.setIcon(this.$el.find(".placeholder .iconContainer"),e)},show:function(){a.inherited("show",this,arguments),this.fillText()},resize:function(){this.$el.height()<220||this.$el.width()<180?this.$el.find(".placeholder").addClass("compact"):this.$el.find(".placeholder").removeClass("compact"),this.fillText()},fillText:function(){var t=this.el.querySelector(".instructionText"),e=this.el.querySelector(".instructionTextHeader");if(t&&"none"!==t.parentElement.style.display||e&&"none"!==e.parentElement.style.display){var o={maxFontSize:14,minFontSize:1,multiLine:!0,detectMultiLine:!1,alignHoriz:!0,widthOnly:!0};t&&i.fillText(t,o),e&&i.fillText(e,o)}}})})),define("dashboard-core/js/dashboard/widgets/staticwidget/TextWidget",["jquery","./StaticWidget","../../../lib/@waca/core-client/js/core-client/utils/Utils","../../../lib/@waca/core-client/js/core-client/utils/BidiUtil","../../../dashboard/util/TextEditor","../../../dashboard/util/TextEditorProperties","../../../dashboard/util/TextPropertiesV2","../../../app/nls/StringResources","underscore","../../../app/util/EventChainLocal","./TextPlaceholderView","./IconPlaceholderView","../../../lib/@waca/dashboard-common/dist/api/PropertiesProviderAPI","../../../lib/@waca/dashboard-common/dist/core/APIFactory","authoring-common"],(function(t,e,i,o,s,n,r,a,l,d,h,c,p,u,f){var g=e.extend({init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g.inherited("init",this,arguments),this._didCleanseContent=!1,t&&t.initialConfigJSON&&t.initialConfigJSON.placeholder){var e=t.initialConfigJSON.placeholder,i=e.iconType?c:h;this.placeholder=new i(l.extend({el:this.$el},e)),this.$el.on("primaryaction",this.onSelect.bind(this))}var o=t.dashboardApi.getGlassCoreSvc(".FeatureChecker");this.isPropertiesV2Enabled=o&&o.checkValue&&o.checkValue("dashboard","PropertiesV2","enabled")},destroy:function(){this.textEditor.toggleEditing(!1),this.model.off("change:content",this.textEditor.applyContent,this.textEditor),this.content.off("change:property",this._onPropertyChange,this),this.$el.off("primaryaction",this.onSelect.bind(this)),this.textEditor.selectionUnbindNodeEvents(),this.textEditor.destroy(),g.inherited("destroy",this,arguments)},_onPropertyChange:function(t){this.updateModelContent(),this._applyPropertyChange(t)},onContainerReady:function(){var t=this;g.inherited("onContainerReady",this,arguments),this.$el.append(this._cleanContent(this.model.get("content")));var e={color:"responsiveColor"},i=this.initialConfigJSON&&this.initialConfigJSON.defaults?l.extend(this.initialConfigJSON.defaults,e):e;this.textEditor=new s({node:this.getWidgetStyleNode(),container:this.$widgetContainer,widget:this,toolbarNode:this.$widgetContainer,isResponsive:this.model.isResponsive,isTextWidgetContext:!0,initialState:i});var a={dashboard:this.getDashboardApi(),isTextWidgetContext:!0,textEditor:this.textEditor,widget:this};this.textEditorProperties=this.isPropertiesV2Enabled?new r(a):new n(a),o.initElementForBidi(this.getWidgetStyleNode().get(0)),this.initialConfigJSON&&void 0===this.initialConfigJSON.borderRadius&&(this.model.borderRadius=5),this.model.on("change:content",this.textEditor.applyContent,this.textEditor),this.content.on("change:property",this._onPropertyChange,this),this.addColorProperties(["content"]),this._didCleanseContent&&(this._didCleanseContent=!1,this._silentUpdate()),this.textEditor.initContentEditable("p > span"),this.textEditor.selectionBindNodeEvents(),this.placeholder&&(this.placeholder.render(),this.updatePlaceholder()),this._updateAriaInfo(),this.model.borderRadius>=0&&this.applyBorderRadius({value:this.model.borderRadius}),this._applyBackgroundColorStyle(),this.model.set({content:this.getHtmlRender()},{silent:!0,payloadData:{skipUndoRedo:!0}}),this.textEditor.setInnerMargins();var d=u.createAPI(this,[p]);return this.content.getFeature("Properties").registerProvider(d),new Promise((function(e){setTimeout((function(){t.fillText(),e()}),900)}))},getEditingActionList:function(){return this.textEditorProperties?this.textEditorProperties.getEditingActionList():[]},_updateAriaInfo:function(){this.updateDescription(this.getLabel());var e=this.model.id+"Editable",i=this.$el.find(".note-editable").get(0);i&&(i.setAttribute("id",e),this.$widgetContainer.attr("aria-labelledby",(function(){return t(this).attr("aria-labelledby")+" "+e})))},onShow:function(){this.fillText()},_shouldShowPlaceholder:function(){return"list"===this.initialConfigJSON.placeholder.iconType?!this.textEditor.hasText():!this.textEditor.hasContent()},updatePlaceholder:function(){this._shouldShowPlaceholder()?this._showPlaceholder():this._hidePlaceholder()},showPlaceHolder:function(){this._shouldShowPlaceholder()&&this._showPlaceholder()},_showPlaceholder:function(){this.$widgetContainer.addClass("placeholder"),this.textEditor.hide(),this.placeholder.show()},_hidePlaceholder:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$widgetContainer.removeClass("placeholder"),this.placeholder.hide(),this.textEditor.show(t)},onSelect:function(t){this.isAuthoringMode&&(this.placeholder&&this.placeholder.isShowing()&&!t.metaKey&&!t.ctrlKey?(new d(t).setProperty("preventDefaultContextBar",!0),this._hidePlaceholder(!0)):this.placeholder&&this._shouldShowPlaceholder()&&function(t,e){for(;t;){if(t.classList&&l.contains(t.classList,e))return!0;t=t.parentNode}return!1}(t.target,"moveHandle")?this._showPlaceholder():this.textEditor.isEditing()&&new d(t).setProperty("preventDefaultContextBar",!0))},onChromeSelected:function(t){g.inherited("onChromeSelected",this,arguments),this.isAuthoringMode&&!t&&this.textEditor.attachEnterEditEvents()},onChromeDeselected:function(){g.inherited("onChromeDeselected",this,arguments),this.placeholder&&!this.placeholder.isShowing()&&this._shouldShowPlaceholder()&&this._showPlaceholder(),this.isAuthoringMode&&(this.textEditor.toggleEditing(!1),this.textEditor.detachEnterEditEvents())},onAuthoringMode:function(){g.inherited("onAuthoringMode",this,arguments)},onConsumeMode:function(){g.inherited("onConsumeMode",this,arguments),this.textEditor.toggleEditing(!1)},onEnterContainer:function(){this.textEditor.toggleEditing(!0),this.placeholder&&this.placeholder.isShowing()&&this._hidePlaceholder(!0)},_cleanContent:function(t){var e=s.cleanContentElements(t);if(!e||!this.isValidHtmlContent(e)){var i={text:a.get("textPlaceHolder"),style:"responsive"};e='<div class="staticContent">'+s.getTextHTML(i)+"</div>"}return e!==t&&(this._didCleanseContent=!0),e},_silentUpdate:function(){this.onPropertyUpdate({transactionId:null})},getPropertyLayoutList:function(){var t=g.inherited("getPropertyLayoutList",this,arguments)||[];return t.push.apply(t,this.textEditorProperties.getPropertyLayoutList()),t},getPropertyList:function(){return this.textEditorProperties.getPropertyList()},reset:function(){},selectAll:function(){document.getSelection().selectAllChildren(this.getWidgetStyleNode().get(0))},getHtmlRender:function(){return this.getWidgetStyleNode().get(0)?this.getWidgetStyleNode().get(0).outerHTML:""},fillText:function(){this.placeholder&&this.placeholder.isShowing()?this.placeholder.fillText&&this.placeholder.isShowing()&&this.placeholder.fillText():this.textEditor.fillText()},resize:function(){this.fillText(),this.placeholder&&this.placeholder.resize&&this.placeholder.resize()},registerEventGroup:function(){},updateModelContent:function(t,e){t=t?s.cleanContentElements(t):s.cleanContentElements(this.getHtmlRender());var i={};e?l.extend(i,{payloadData:{undoRedoTransactionId:e}}):l.extend(i,{silent:!0});var o=this.textEditor.getTitleFromHtml(this.getHtmlRender());this.set({content:t,name:o,isResponsive:this.textEditor.isResponsive},i)},getLabel:function(){return a.get("textWidgetTitle")},getTextEditorProperties:function(){return this.textEditorProperties},_applyPropertyChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.info||{},i=Array.isArray(e.events)&&e.events[0]?e.events[0]:{};switch(i.name){case"change:property:fillColor":case"change:property:backgroundOpacity":this._applyBackgroundColorStyle()}},_applyBackgroundColorStyle:function(){var t="",e=this.content.getPropertyValue("fillColor");if(e&&"transparent"!==e){var i=void 0,o=this.dashboardApi.getFeature("Colors");if(o.isCustomColor(e))i=o.getHexColorFromClassName(e);else{var s=o.getDashboardColorSet().find((function(t){return t.id===e}));s&&(i=s.hexValue)}if(i){var n=f.ColorConversion,r=this.content.getPropertyValue("backgroundOpacity"),a=r||0===r?r:1;a<1&&(t=n.convertHexColorToHexColorWithOpacity(i,a))}}this.getWidgetStyleNode().each((function(e,i){i.style.setProperty("background-color",t,t.length?"important":void 0)}))}});return g.getDefaultSpec=function(t,e){var i={style:"responsive",placeholder:{showIcon:!1,text:a.get("textPlaceHolder")}};e=Object.assign({},i,e);var o='<div class="staticContent">'+s.getTextHTML(e)+"</div>",n={model:{type:"text",name:a.get("textPlaceHolder"),content:o,borderRadius:0},layoutProperties:{style:{width:"200px",height:"50px"}}};return"responsive"===e.style&&(n.model.isResponsive=!0),e.placeholder&&(n.model.placeholder=e.placeholder,e.text||(n.model.avatarHtml='<div class="staticContent" style="padding: 10px;">'+s.getTextHTML(l.extend({text:e.placeholder.text},e))+"</div>")),Promise.resolve(n)},g})),define("dashboard-core/js/textWidgetBundle",(function(){}));