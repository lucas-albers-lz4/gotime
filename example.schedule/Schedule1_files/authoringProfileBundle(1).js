/**
 * IBM Confidential OCO Source Materials IBM Business Platform: Dashboard
 * (C) Copyright IBM Corp. 2016, 2021
 *
 * The source code for this program is not published or otherwise divested of
 * its trade secrets, irrespective of what has been deposited with the U.S.
 * Copyright Office
 */

function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t};define("dashboard-core/js/features/dashboard/actions/deleteAction/api/DeleteActionAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.setOnBeforeDeleteCallback=function(){},t}()})),define("dashboard-core/js/features/dashboard/actions/deleteAction/DeleteAction",["../../../../app/nls/StringResources","../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","jquery","underscore","../../../../lib/@waca/dashboard-common/dist/utils/DialogBlocker","../../../../dashboard/glass/util/InstrumentationUtil","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","./api/DeleteActionAPI"],(function(t,e,o,r,n,i,a,s,l){return function(){function u(t){var e=this,o=t.features;_classCallCheck(this,u),o&&(this.dashboard=o.API,this._features=o,o.ContentActions.registerProvider("delete",this.getAPI())),this.id=r.uniqueId("id"),this.dashboard.getCanvasWhenReady().then((function(t){e.canvas=t,t.on("change:selections:select",e.onContentSelectionChange,e),t.on("change:selections:deselect",e.onContentSelectionChange,e)}))}return u.prototype.getAPI=function(){return this._api||(this._api=a.createAPI(this,[s,l])),this._api},u.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0}]},u.prototype.postDashboardInitialize=function(){return this.dashboard&&(this.transactionApi=this.dashboard.getFeature("Transaction"),this.controller=this.dashboard.getFeature("InteractionController.internal")),Promise.resolve()},u.prototype.destroy=function(){this.canvas&&(this.canvas.off("change:selections:select",this.onContentSelectionChange,this),this.canvas.off("change:selections:deselect",this.onContentSelectionChange,this),this.canvas=null),this._deRegisterEvent(),this.dashboard=null,this.controller=null,this.id=null},u.prototype.getNodes=function(t){return e.getNodes(this.controller,t)},u.prototype._isEnabled=function(t){return t.length&&this.dashboard.getMode()===this.dashboard.MODES.EDIT},u.prototype.getContentActionList=function(e){return this._isEnabled(e)?[{name:"delete",label:t.get("toolbarActionDelete"),icon:this._features.Icons.getIcon("dashboard-delete").id,type:"Button",section:s.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:70,actions:{apply:this.deleteContent.bind(this,e)}}]:[]},u.prototype.onContentSelectionChange=function(){var t=this.canvas.getSelectedContentList().map((function(t){return t.getId()})),e=this.dashboard.getAppConfig("interactions");e&&!1===e.delete||(this._deRegisterEvent(),this._isEnabled(t)&&o("html").on("keyup.interactionDeleteKey"+this.id,this.deleteKeyPress.bind(this,t)))},u.prototype._deRegisterEvent=function(){o("html").off("keyup.interactionDeleteKey"+this.id)},u.prototype.deleteKeyPress=function(t,e){var o=e.srcElement||e.target;if(!o.closest(".is-selected.is-label.is-editable")&&!o.tagName.toLowerCase().match(/input|textarea|select/gim)&&!this._elementIsInSlotEditor(o))return e.ctrlKey||46!==e.keyCode&&8!==e.keyCode||n.isShowingDialogBlocker()?void 0:this.deleteContent(t)},u.prototype._elementIsInSlotEditor=function(t){return t.closest(".slotEditor")},u.prototype.setOnBeforeDeleteCallback=function(t){this.onBeforeDeleteCallback=t},u.prototype.deleteContent=function(t){var e=this;if(this.controller.$el.is(":visible")){var o=void 0,r=[],n=[],a=this.transactionApi.startTransaction(),s=a.transactionId;n=this.onBeforeDeleteCallback?this.onBeforeDeleteCallback({currentSelection:t,undoRedoTransactionId:s,transactionToken:a}):this.getNodes(t);for(var l=0;l<n.length;l++)o=this.controller.layoutController.nodeIdToModelId(n[l].id),r.push(o),i.trackWidget("deleted",this.dashboard,null,o),n[l]._layout&&n[l]._layout.widgetChromeEventRouter&&n[l]._layout.widgetChromeEventRouter.trigger("widget:onDeleteAction",{data:{undoRedoTransactionId:s,transactionToken:a}});return this.controller.selectionHandler.deselectAll(),r.forEach((function(t){e.dashboard.getCanvas().removeContent(t,a)})),this._deleteAfter({ids:r,undoRedoTransactionId:s},a)}},u.prototype._deleteAfter=function(t,e){var o=this;return this.dashboard.getFeature(".LifeCycleManager").invokeLifeCycleHandlers("post:widget.delete",t).then((function(){return o.transactionApi.endTransaction(e),o.controller.onSelectionDelete()}))},u}()})),define("dashboard-core/js/features/dashboard/actions/groupAction/GroupAction",["../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../../app/nls/StringResources","jquery","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","../../../../dashboard/util/PxPercentUtil","../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils"],(function(t,e,o,r,n,i,a){return function(){function s(t){var e=t.features;_classCallCheck(this,s),e&&(this.dashboard=e.API,e.ContentActions.registerProvider("group",this.getAPI()),this.deleteAction=e.deleteAction,this._features=e),this._handlers=[]}return s.prototype.getAPI=function(){return this._api||(this._api=r.createAPI(this,[n])),this._api},s.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0},{name:"dashboard.layout.interactions.ready",action:this.onDashboardLayoutInteractionsReady.bind(this)}]},s.prototype.postDashboardInitialize=function(){return this.dashboard&&(this.controller=this.dashboard.getFeature("InteractionController.internal"),this.selectionHandler=this.controller.selectionHandler,this.onDashboardLayoutInteractionsReady()),Promise.resolve()},s.prototype.onDashboardLayoutInteractionsReady=function(){if(this.selectionHandler){this.deRegisterEvents(),this._handlers.push(this.selectionHandler.on("selection:before",this.beforeSelection,this)),this.deleteAction.setOnBeforeDeleteCallback(this.onBeforeDelete.bind(this));var t=this.controller.getInteraction("resize");t&&this._handlers.push(t.on("resize:done",this.recalculateGroupRect,this));var e=this.controller.getInteraction("moveGroupContent");e&&this._handlers.push(e.on("moveGroupContent:done",this.recalculateGroupRect,this))}},s.prototype.deRegisterEvents=function(){this._handlers&&this._handlers.forEach((function(t){t.remove&&t.remove()})),this._handlers=[]},s.prototype.destroy=function(){this.deRegisterEvents(),this.dashboard=null,this.controller=null,this.selectionHandler=null,this.events=null,this._handlers=null},s.prototype.getNodes=function(e){return t.getNodes(this.controller,e)},s.prototype.isGroupEnabled=function(t){var e=!1,o=this.getNodes(t);if(o.length>0){var r=null;e=!o.some((function(t){if(r&&r!==t.parentNode)return!0;r=t.parentNode}))}return this.dashboard.getMode()===this.dashboard.MODES.EDIT&&e&&o.length>1&&!this._getTopGroup(o[0])},s.prototype.isUnGroupEnabled=function(t){var e=this,r=!1,n=this.getNodes(t);return n.length>0&&(r=!n.some((function(t){return!o(t).hasClass("pagegroup")&&!e._getTopGroup(t)}))),this.dashboard.getMode()===this.dashboard.MODES.EDIT&&r},s.prototype.getContentActionList=function(t){var o=[];return this.isGroupEnabled(t)&&o.push({name:"group",label:e.get("toolbarActionGroup"),icon:this._features.Icons.getIcon("dashboard-group").id,type:"Button",section:n.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:20,actions:{apply:this.groupContent.bind(this,t)}}),this.isUnGroupEnabled(t)&&o.push({name:"ungroup",label:e.get("toolbarActionUngroup"),icon:this._features.Icons.getIcon("dashboard-ungroup").id,type:"Button",section:n.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:21,actions:{apply:this.ungroupContent.bind(this,t)}}),o},s.prototype._getTopGroup=function(t){var e=null,r=o(t).parents(".pagegroup");return r.length>0&&(e=r[r.length-1]),e},s.prototype.beforeSelection=function(t){var e=t.newSelection,o=t.currentSelection,r=this._getTopGroup(e),n=o.length;n>0&&this.handleMultipleSelection(o,r,t)||r&&(1===n&&o[0]===r&&"mousedown"!==t.eventType?this.selectionHandler.deselectAll():t.newSelection=r)},s.prototype.handleMultipleSelection=function(t,e,o){var r=this._getTopGroup(t[0]);return!!r&&(r!==e&&(this.selectionHandler.deselectAll(),this.selectionHandler.selectNode(r),e&&(o.newSelection=e)),!0)},s.prototype.groupContent=function(e,o){var r=this,n=this.getNodes(e);if(!(n.length<=0)){for(var a=[],s=0,l=n.length;s<l;s++){var u=n[s];if(u._layout){var d=t.position(u),c=t.widgetSize(u);a.push({position:d,bounds:c})}}var p=n[0]._layout.parentLayout.model,h=this.calculateGroupRect(n),g={type:"group",style:{top:h.top+"px",left:h.left+"px",width:h.width+"px",height:h.height+"px"}},f={containerId:p.id,spec:g},b=this.dashboard.getCanvas(),m=this.dashboard.getFeature("Transaction"),y=m.startTransaction();return b.addContent(f,y).then((function(t){var e=t.getId();return r.controller.layoutController.layoutReady(e).then((function(t){for(var s=n.map((function(t){return t._layout.model.id})),l=b.moveContent(e,s,y),u=0,d=n.length;u<d;u++){if(n[u]._layout){var c=a[u].position,p=a[u].bounds,g={left:c.left-h.left+"px",top:c.top-h.top+"px",width:p.width+"px",height:p.height+"px"};i.changePixelPropertiesToPercent(g,h),l[u].setPropertyValue("left",g.left,y),l[u].setPropertyValue("top",g.top,y),l[u].setPropertyValue("width",g.width,y),l[u].setPropertyValue("height",g.height,y)}}m.endTransaction(y),r.selectionHandler.deselectAll(),t&&r.selectionHandler.selectNode(t.domNode,{isTouch:!!o&&"touchstart"===o.type})}))}))}},s.prototype.ungroupContent=function(t,e,r){var n=this.getNodes(t),i=this.dashboard.getFeature("Transaction"),a=void 0;a=r?i.startTransactionById(r):i.startTransaction(),this.selectionHandler.deselectAll();var s,l,u=[];for(o(n[0]).hasClass("pagegroup")?u=this.ungroupWholeGroups(n,a):(this.ungroupIndividualNodes(n,a),u=n),i.endTransaction(a),s=u.length-1;s>=0;s--)l=u[s],this.selectionHandler.selectNode(l,{isTouch:!!e&&"touchstart"===e.type});return u},s.prototype._calculateNewStyleForEachNode=function(e,o,r){var n=o._layout.parentLayout,i=t.getAngleDegree(e),a=e.getBoundingClientRect(),s=t.getRotatedCoordinates(n.domNode,a.left,a.top),l=window.getComputedStyle(e),u=r+i,d=t.widgetSize(e);return{height:d.height+"px",width:d.width+"px",top:s.y-t.getStyleIntValue(l.marginTop)+"px",left:s.x-t.getStyleIntValue(l.marginLeft)+"px",rotateAngle:u}},s.prototype._ungroupGroupNode=function(e,o){for(var r,n,i=[],a=t.getContentWithoutDecoration(e),s={},l=0,u=a.length;l<u;l++)r=a[l],n=t.getAngleDegree(e),s[r._layout.id]=this._calculateNewStyleForEachNode(r,e,n),i.push(r);var d=this.dashboard.getCanvas(),c=d.getContent(e._layout.id),p=d.moveContent(c.getContainer().getId(),c.getChildren().map((function(t){return t.getId()})),o);return d.removeContent(c.getId(),o),p.forEach((function(t){var e=t.getId();Object.keys(s[e]).forEach((function(r){t.setPropertyValue(r,s[e][r],o)}))})),i},s.prototype.ungroupWholeGroups=function(t,e){var o,r=[],n=void 0;for(n=0,o=t.length;n<o;n++){var i=t[n],a=this._ungroupGroupNode(i,e);r=r.concat(a)}return r},s.prototype.getNodeId=function(t){this.layoutController.modelIdToNodeId(t)},s.prototype._ungroupSingleNode=function(e,r,n,i){var a=o(r).parents(".pagegroup"),s=a.length,l=this.dashboard.getCanvas();if(s>0){var u=n?e:a[s-1],d=t.radianToDegree(t.getAbsoluteAngleRadian(e,u)),c=this._calculateNewStyleForEachNode(r,u,d),p=l.getContent(r._layout.id),h=l.getContent(u._layout.id);l.moveContent(h.getContainer().getId(),[r._layout.id],i),Object.keys(c).forEach((function(t){p.setPropertyValue(t,c[t],i)}))}},s.prototype._ungroupMultipleNodes=function(t,e,r){for(var n=[],i=0;i<t.length;i++){var a=t[i];this._ungroupSingleNode(e,a,!1,r),n.push(a)}var s=this.dashboard.getCanvas(),l=s.getContent(e._layout.id).findContent();if(0==l.length)s.removeContent(e._layout.id,r);else if(1==l.length){var u=l[0].getId(),d=o(e).find("#"+u)[0];this._ungroupSingleNode(e,d,!0,r),s.removeContent(e._layout.id,r),n.push(d)}else n.push(e);return n},s.prototype.ungroupIndividualNodes=function(t,e){for(var o=[],r={},n=0;n<t.length;n++){var i=t[n],a=i.parentNode._layout.id;r[a]||(r[a]=[]),r[a].push(i)}for(var s=this._getAffectedGroups(t),l=void 0,u=void 0,d=0;d<s.length;d++){var c=s[d];l=r[c.id],u=this._ungroupMultipleNodes(l||[],c,e),o=o.concat(u)}for(var p=0;p<s.length;p++)s[p]._layout&&this.recalculateGroupRectForLayout(s[p]._layout,e.transactionId);return o},s.prototype.calculateGroupRect=function(e){var r={},n=t.getMinMaxTopLeft(e,(function(t){var e=o(t).position();e.top+=o(t).parent().scrollTop(),e.left+=o(t).parent().scrollLeft();var r=t.getBoundingClientRect();return e.height=r.height,e.width=r.width,e}));return r.width=n.maxLeft-n.minLeft,r.height=n.maxTop-n.minTop,r.top=Math.round(n.minTop),r.left=Math.round(n.minLeft),r},s.prototype.recalculateGroupRect=function(t){for(var e=t.undoRedoTransactionId,o=this._getAffectedGroups(t.currentSelection),r=0,n=o.length;r<n;r++)this.recalculateGroupRectForLayout(o[r]._layout,e)},s.prototype.onBeforeDelete=function(t){for(var e=this,o=t.currentSelection,r=this.getNodes(o),n=[],i=[],a=0;a<r.length;a++)"group"===r[a]._layout.parentLayout.model.type||"group"===r[a]._layout.model.type?n.push(r[a]):i.push(r[a]);return n.forEach((function(o){i.push.apply(i,e.ungroupContent([o.id],null,t.undoRedoTransactionId))})),i},s.prototype._getAffectedGroups=function(t){var e,r,n=[];for(e=0,r=t.length;e<r;e++)n.push(o(t[e]).parents(".pagegroup"));var i,a=[],s=0;do{i=this._affectedGroupSortStep(n,s,a),s++}while(i);return a},s.prototype._affectedGroupSortStep=function(t,e,o){var r,n,i,a,s,l=!1;for(r=0,n=t.length;r<n;r++)e<(i=t[r]).length&&(l=!0,a=i[e],-1!==(s=o.indexOf(a))&&o.splice(s,1),o.push(a));return l},s.prototype.recalculateGroupRectForLayout=function(t,e){var r=this.dashboard.getFeature("Transaction"),n=r.startTransactionById(e),s=t.domNode,l=a.getContentWithoutDecoration(s),u=a.getMinMaxTopLeft(l,(function(t){var e=a.position(t),r=o(t);return e.height=r.outerHeight(),e.width=r.outerWidth(),r.height(e.height),r.width(e.width),r.css("left",e.left),r.css("top",e.top),e})),d=a.getCenter(l[0]),c=a.getRotatedCoordinates(s.parentNode,d.left,d.top),p=u.maxLeft-u.minLeft+"px";s.style.width=p;var h=u.maxTop-u.minTop+"px";s.style.height=h;var g=a.position(s);s.style.top=g.top+u.minTop+"px",s.style.left=g.left+u.minLeft+"px";var f,b,m,y=this.dashboard.getCanvas(),v={height:s.clientHeight,width:s.clientWidth};for(f=0,b=l.length;f<b;f++)if(m=l[f],g=a.position(m),m.style.top=g.top-u.minTop+"px",m.style.left=g.left-u.minLeft+"px",m._layout){var C={top:m.style.top,left:m.style.left,height:o(m).height()+"px",width:o(m).width()+"px"},_=y.getContent(m._layout.model.id);if(_)for(var I in i.changePixelPropertiesToPercent(C,v),C)_.setPropertyValue(I,C[I],n)}d=a.getCenter(l[0]);var x=a.getRotatedCoordinates(s.parentNode,d.left,d.top),P=(g=a.position(s)).top-x.y+c.y+"px";s.style.top=P;var S=g.left-x.x+c.x+"px";s.style.left=S;var w=y.getContent(t.model.id);w.setPropertyValue("top",P,n),w.setPropertyValue("left",S,n),w.setPropertyValue("height",h,n),w.setPropertyValue("width",p,n),r.endTransaction(n)},s}()})),define("dashboard-core/js/features/dashboard/actions/duplicateAction/DuplicateAction",["../../../../app/nls/StringResources","../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","jquery","underscore","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,o,r,n,i){return function(){function a(t){var e=t.features;_classCallCheck(this,a),e&&(this.dashboard=e.API,e.ContentActions.registerProvider("duplicate",this.getAPI()),this._features=e)}return a.prototype.getAPI=function(){return this._api||(this._api=n.createAPI(this,[i])),this._api},a.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0}]},a.prototype.postDashboardInitialize=function(){return this.dashboard&&(this.controller=this.dashboard.getFeature("InteractionController.internal")),Promise.resolve()},a.prototype.destroy=function(){this.dashboard=null,this.controller=null},a.prototype.getNodes=function(t){return e.getNodes(this.controller,t)},a.prototype._isAvailable=function(t){return t.length&&this._isSupportedVisualizations(t)&&this.dashboard.getMode()===this.dashboard.MODES.EDIT&&void 0===r.find(this.getNodes(t),(function(t){return o(t).hasClass("filterWidget")}))},a.prototype._isSupportedVisualizations=function(t){for(var e=0;e<t.length;e++)if(this._isNotSupportedVisualization(t[e]))return!1;return!0},a.prototype._isNotSupportedVisualization=function(t){var e=this.dashboard.getCanvas().getContent(t);if(!e)return!1;var o=e.getFeature("Visualization");return"widget.live"===e.getType()&&o&&"com.ibm.vis.schematicsPreview"===o.getDefinition().getId()},a.prototype._isDisabled=function(){return this._features.DashboardState.getUiState().focus},a.prototype.getContentActionList=function(e){return this._isAvailable(e)?[{name:"duplicate",label:t.get("duplicate"),icon:this._features.Icons.getIcon("dashboard-duplicate").id,type:"Button",disabled:this._isDisabled.bind(this),section:i.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:40,actions:{apply:this.duplicateContent.bind(this,e)}}]:[]},a.prototype.duplicateContent=function(t,e){var o=this,n=[],i=[],a=this.controller.layoutController.getLayoutContentContainer();r.each(this.getNodes(t),function(t){var e=this.controller.layoutController.nodeIdToModelId(t.id),o=this._checkLayoutBoundLimits(t,a);o.right&&o.bottom||i.push({id:e,right:o.right,bottom:o.bottom}),n.push(e)}.bind(this));var s={modelIds:n};i.length>0&&(s.outBoundIds=i);var l=this.controller.boardModel.duplicateSelection(s);this.controller.selectionHandler.deselectAll();var u=[];return l.forEach((function(t){return u.push(t.then((function(t){return o.controller.layoutController.selectLayouts([t],e)})).catch((function(t){console.log(t)})))})),u},a.prototype._checkLayoutBoundLimits=function(t,e){var o={right:!0,bottom:!0},r=t._layout.parentLayout.getMaximumHeight(),n=t._layout.parentLayout.getMaximumWidth();if(isFinite(r)&&isFinite(n)){var i=e.clientHeight,a=e.clientWidth;if(isFinite(i)&&isFinite(a)){var s=t._layout.model,l=s.style;if(l){var u=parseFloat(s.incrementStyleValue(l.top))/100*i,d=parseFloat(s.incrementStyleValue(l.left))/100*a,c=parseFloat(l.height)/100*i,p=parseFloat(l.width)/100*a;u+c>r&&(o.bottom=!1),d+p>n&&(o.right=!1)}}}return o},a}()})),define("dashboard-core/js/features/dashboard/actions/orderAction/OrderAction",["../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../../app/nls/StringResources","underscore","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,o,r,n){return function(){function i(t){var e=t.features;_classCallCheck(this,i),e&&(this.dashboard=e.API,e.ContentActions.registerProvider("order",this.getAPI()),this._features=e)}return i.prototype.getAPI=function(){return this._api||(this._api=r.createAPI(this,[n])),this._api},i.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0}]},i.prototype.postDashboardInitialize=function(){return this.dashboard&&(this.controller=this.dashboard.getFeature("InteractionController.internal")),Promise.resolve()},i.prototype.destroy=function(){this.dashboard=null,this.controller=null},i.prototype.getNodes=function(e){return t.getNodes(this.controller,e)},i.prototype.getParentModel=function(t){var e=this.getNodes(t);if(e.length>0)return e[0]._layout.model.getParent()},i.prototype.getItems=function(t){var e=this.getParentModel(t);return e&&e.items.filter((function(t){return"templateDropZone"!==t.type&&"templateIndicator"!==t.type}))},i.prototype._isAvailable=function(t){var e=this.getNodes(t),r=this.getItems(t);return e.length&&r.length>1&&this.dashboard.getMode()===this.dashboard.MODES.EDIT&&void 0===o.find(e,(function(t){return-1===r.indexOf(t._layout.model)}))},i.prototype._isDisabled=function(){return this._features.DashboardState.getUiState().focus},i.prototype.getContentActionList=function(t){return this._isAvailable(t)?[{name:"orderToFront",label:e.get("toolbarActionOrderToFront"),icon:this._features.Icons.getIcon("bring-to-front").id,type:"Button",disabled:this._isDisabled.bind(this),section:n.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:50,relatedTag:"zOrder",actions:{apply:this.orderContent.bind(this,t,this.getItems(t).length-this.getNodes(t).length)}},{name:"orderToBack",label:e.get("toolbarActionOrderToBack"),icon:this._features.Icons.getIcon("send-to-back").id,type:"Button",disabled:this._isDisabled.bind(this),section:n.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:60,relatedTag:"zOrder",actions:{apply:this.orderContent.bind(this,t,0)}}]:[]},i.prototype.orderContent=function(t,e){var r=this.getItems(t),n=this.getNodes(t),i=o.map(n,(function(t){return t._layout.model})),a=this.getParentModel(t),s=[],l=[],u=void 0,d=void 0,c=void 0,p=void 0;for(d=0,c=0,p=!1;d<r.length;d++)u=r[d],-1===i.indexOf(u)?(l.push(u),c++):c!==e&&(p=!0);if(p){var h=l[e];for(d=0;d<i.length;d++)u=i[d],s.push({id:u.id,parentId:a.id,insertBefore:h?h.id:null});a.updateModel({updateArray:s})}},i}()})),define("dashboard-core/js/features/dashboard/actions/alignAction/AlignAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.applyAction=function(){},t}()})),define("dashboard-core/js/features/dashboard/actions/alignAction/impl/AlignAction",["../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../AlignAPI","../../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../../../app/nls/StringResources","jquery","../../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,o,r,n,i){return function(){function a(t){var e=t.features;_classCallCheck(this,a),e.ContentActions.registerProvider("align",this.getAPI()),this.dashboard=e.API,this._features=e,this.getHorizontalDistributionStyle=this.getHorizontalDistributionStyle.bind(this),this.getVerticalDistributionStyle=this.getVerticalDistributionStyle.bind(this)}return a.prototype.getAPI=function(){return this.api||(this.api=t.createAPI(this,[e,i])),this.api},a.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0}]},a.prototype.postDashboardInitialize=function(){return this.controller=this.dashboard.getFeature("InteractionController.internal"),Promise.resolve()},a.prototype.destroy=function(){this.dashboard=null,this.controller=null},a.prototype.getNodes=function(t){return o.getNodes(this.controller,t)},a.prototype._isEnabled=function(t){return t.length>1&&this.dashboard.getMode()===this.dashboard.MODES.EDIT},a.prototype.getContentActionList=function(t){return this._isEnabled(t)?[{name:"align",label:r.get("toolbarActionAlign"),icon:this._features.Icons.getIcon("align-horizontally").id,section:i.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:30,type:"NextView",viewModule:"dashboard-core/js/features/dashboard/actions/alignAction/impl/AlignDialog",viewOptions:{height:290,width:110,disableDistribution:this._features.Canvas.getSelectedContentList().length<=2,actions:{apply:this.applyAlignment.bind(this,t)}}}]:[]},a.prototype.applyAction=function(t){if(t&&t.length&&t[0].name){var e=t[0].name,o=t[0].layoutIds;this.applyAlignment(o,e)}},a.prototype.getWidgetBoxes=function(t){var e=o.position(t),r=o.widgetSize(t),i={boundingBox:n(t).position(),widgetBox:{top:e.top,left:e.left,width:r.width,height:r.height}},a=t.getBoundingClientRect();return i.boundingBox.width=a.width,i.boundingBox.height=a.height,i},a.prototype.applyAlignment=function(t,e){var o=this,r={left:this.getLeftAlignmentStyle,center:this.getCenterAlignmentStyle,right:this.getRightAlignmentStyle,top:this.getTopAlignmentStyle,middle:this.getMiddleAlignmentStyle,bottom:this.getBottomAlignmentStyle},n={vertDistrib:this.getVerticalDistributionStyle,horizDistrib:this.getHorizontalDistributionStyle},i=[],a=this.getNodes(t),s=this.getWidgetBoxes(a[0]);i.push(s);for(var l={top:s.boundingBox.top,left:s.boundingBox.left,bottom:s.boundingBox.top+s.boundingBox.height,right:s.boundingBox.left+s.boundingBox.width},u=1;u<a.length;u++){var d=this.getWidgetBoxes(a[u]);i.push(d),l.top=Math.min(l.top,d.boundingBox.top),l.left=Math.min(l.left,d.boundingBox.left),l.bottom=Math.max(l.bottom,d.boundingBox.top+d.boundingBox.height),l.right=Math.max(l.right,d.boundingBox.left+d.boundingBox.width)}var c=[];if(n[e])i.length>2&&(c=n[e](l,i,a));else for(var p=0;p<a.length;p++){var h=r[e](l,i[p],a[p]);h&&c.push({style:h,id:a[p]._layout.model.id})}if(c.length){var g=this.dashboard.getFeature("Transaction"),f=g.startTransaction();c.forEach((function(t){var e=o._features.Canvas.getContent(t.id);Object.keys(t.style).forEach((function(o){e.setPropertyValue(o,t.style[o],f)}))})),g.endTransaction(f)}},a.prototype.getLeftAlignmentStyle=function(t,e,o){var r=t.left;Math.round(e.boundingBox.left)!==Math.round(e.widgetBox.left)&&(r-=e.boundingBox.left-e.widgetBox.left);return{left:(r=Math.max(r,o._layout.parentLayout.getMinimumLeft()))+"px"}},a.prototype.getCenterAlignmentStyle=function(t,e,o){var r=t.left+(t.right-t.left)/2-e.widgetBox.width/2;Math.round(e.boundingBox.left)!==Math.round(e.widgetBox.left)&&(r-=e.boundingBox.left+e.boundingBox.width/2-(e.widgetBox.left+e.widgetBox.width/2));return{left:(r=Math.max(r,o._layout.parentLayout.getMinimumLeft()))+"px"}},a.prototype.getRightAlignmentStyle=function(t,e,o){var r=t.right-e.widgetBox.width;Math.round(e.boundingBox.width)!==Math.round(e.widgetBox.width)&&(r-=e.boundingBox.left+e.boundingBox.width-(e.widgetBox.left+e.widgetBox.width));return{left:(r=Math.max(r,o._layout.parentLayout.getMinimumLeft()))+"px"}},a.prototype.getTopAlignmentStyle=function(t,e,o){var r=t.top;Math.round(e.boundingBox.top)!==Math.round(e.widgetBox.top)&&(r-=e.boundingBox.top-e.widgetBox.top);return{top:(r=Math.max(r,o._layout.parentLayout.getMinimumTop()))+"px"}},a.prototype.getMiddleAlignmentStyle=function(t,e,o){var r=t.top+(t.bottom-t.top)/2-e.widgetBox.height/2;Math.round(e.boundingBox.top)!==Math.round(e.widgetBox.top)&&(r-=e.boundingBox.top+e.boundingBox.height/2-(e.widgetBox.top+e.widgetBox.height/2));return{top:(r=Math.max(r,o._layout.parentLayout.getMinimumTop()))+"px"}},a.prototype.getBottomAlignmentStyle=function(t,e,o){var r=t.bottom-e.widgetBox.height;Math.round(e.boundingBox.height)!==Math.round(e.widgetBox.height)&&(r-=e.boundingBox.top+e.boundingBox.height-(e.widgetBox.top+e.widgetBox.height));return{top:(r=Math.max(r,o._layout.parentLayout.getMinimumTop()))+"px"}},a.prototype.getHorizontalDistributionStyle=function(t,e,o){var r=t.right-t.left,n=this._aggregateWidgetBoxesWithNodes(e,o),i=n.totalWidth,a=n.widgets;a.sort((function(t,e){return t.widgetBox.widgetBox.left+t.widgetBox.widgetBox.width/2-(e.widgetBox.widgetBox.left+e.widgetBox.widgetBox.width/2)}));var s=(r-i)/(a.length-1),l=a[a.length-1].widgetBox.boundingBox.left,u=a[0].widgetBox.boundingBox.left+i-a[a.length-1].widgetBox.boundingBox.width+s*(a.length-1);l-u!=0&&(s+=(l-u)/(a.length-1));for(var d=[],c=a[0].widgetBox.boundingBox.left+a[0].widgetBox.boundingBox.width+s,p=1;p<a.length-1;p++){var h=a[p],g=c;if(Math.round(h.widgetBox.boundingBox.left)!==Math.round(h.widgetBox.widgetBox.left))g-=h.widgetBox.boundingBox.left-h.widgetBox.widgetBox.left;d.push({style:{left:g+"px"},id:h.node._layout.model.id}),c+=a[p].widgetBox.boundingBox.width+s}return d},a.prototype.getVerticalDistributionStyle=function(t,e,o){var r=t.bottom-t.top,n=this._aggregateWidgetBoxesWithNodes(e,o),i=n.totalHeight,a=n.widgets;a.sort((function(t,e){return t.widgetBox.widgetBox.top+t.widgetBox.widgetBox.height/2-(e.widgetBox.widgetBox.top+e.widgetBox.widgetBox.height/2)}));var s=(r-i)/(a.length-1),l=a[a.length-1].widgetBox.boundingBox.top,u=a[0].widgetBox.boundingBox.top+i-a[a.length-1].widgetBox.boundingBox.height+s*(a.length-1);l-u!=0&&(s+=(l-u)/(a.length-1));for(var d=[],c=a[0].widgetBox.boundingBox.top+a[0].widgetBox.boundingBox.height+s,p=1;p<a.length-1;p++){var h=a[p],g=c;if(Math.round(h.widgetBox.boundingBox.top)!==Math.round(h.widgetBox.widgetBox.top))g-=h.widgetBox.boundingBox.top-h.widgetBox.widgetBox.top;d.push({style:{top:g+"px"},id:h.node._layout.model.id}),c+=a[p].widgetBox.boundingBox.height+s}return d},a.prototype._aggregateWidgetBoxesWithNodes=function(t,e){for(var o=0,r=0,n=[],i=0;i<t.length;i++){var a=t[i],s=e[i];o+=a.boundingBox.height,r+=a.boundingBox.width,n.push({widgetBox:a,node:s})}return{widgets:n,totalHeight:o,totalWidth:r}},a}()})),define("dashboard-core/js/features/dashboard/actions/eventGroups/EventGroupActions",["../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","underscore"],(function(t,e,o){return function(){function r(t){var e=t.features;_classCallCheck(this,r),e&&(this.dashboard=e.API,this._features=e)}return r.prototype.getAPI=function(){return this._api||(this._api=t.createAPI(this,[e])),this._api},r.prototype._isAvailable=function(t){return t.length&&this.dashboard.getMode()===this.dashboard.MODES.EDIT_GROUP&&!this._isStaticWidget(t)},r.prototype._isStaticWidget=function(t){for(var e=0;e<t.length;e++)if(!this._features.EventGroups.getGroupId(t[e]))return!0;return!1},r.prototype._getDistinctGroupIdsInSelection=function(t){var e=this,r=o.map(t,(function(t){return e._features.EventGroups.getGroupId(t)}));return r=o.uniq(r)},r.prototype._getPageId=function(t){var e=void 0;if(t.length>0)for(var o=this.dashboard.getCanvas().getContent(t[0]);o;)(o=o.getContainer())&&"page"===o.getType()&&(e=o);return e&&e.getId()},r.prototype._getCountGroupsAffected=function(t){var e=this,r=0,n=this._features.EventGroups.getGroupIdsOnPage(this._getPageId(t));return n.length>0&&t.length>0&&(r=o.filter(n,(function(r){var n=e._features.EventGroups.getContentIdList(r);return n.length===o.intersection(n,t).length})).length),r},r.prototype.getNumberOfGroups=function(t){var e=this._getPageId(t);return e?this._features.EventGroups.getGroupIdsOnPage(e).length:0},r}()})),define("dashboard-core/js/features/dashboard/actions/eventGroups/DisconnectEventGroupAction",["./EventGroupActions","../../../../app/nls/StringResources","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","underscore"],(function(t,e,o,r){return function(t){function n(e){var o=e.features;_classCallCheck(this,n);var r=_possibleConstructorReturn(this,t.call(this,{features:o}));return o.ContentActions.registerProvider("disconnectFilterGroup",r.getAPI()),r}return _inherits(n,t),n.prototype.getContentActionList=function(t){return this._isAvailable(t)?[{name:"disconnectFilterGroup",label:e.get("toolbarActionDisconnectFilterGroup"),icon:this._features.Icons.getIcon("unlink").id,type:"Button",section:o.ACTION_SECTION.DASHBOARD,order:40,actions:{apply:this.execute.bind(this,t)},disabled:this.isDisabled.bind(this,t),update:!0}]:[]},n.prototype.execute=function(t){this._features.EventGroups.removeFromGroup(t)},n.prototype.isDisabled=function(t){var e=this;if(this._isStaticWidget(t))return!0;if(this._features.EventGroups.getGroupIdsOnPage(this._getPageId(t)).length<=0)return!0;var o=this._getCountGroupsAffected(t);return this.getNumberOfGroups(t)+t.length-o>5||0===r.filter(t,(function(t){var o=e._features.EventGroups.getGroupId(t);return e._features.EventGroups.getContentIdList(o).length>1})).length},n}(t)})),define("dashboard-core/js/features/dashboard/actions/eventGroups/LinkEventGroupAction",["underscore","./EventGroupActions","../../../../app/nls/StringResources","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,o,r){return function(t){function e(o){var r=o.features;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,{features:r}));return r.ContentActions.registerProvider("linkFilterGroup",n.getAPI()),n}return _inherits(e,t),e.prototype.getContentActionList=function(t){return this._isAvailable(t)?[{name:"linkFilterGroup",label:o.get("toolbarActionLinkFilterGroup"),icon:this._features.Icons.getIcon("link").id,type:"DropDown",section:r.ACTION_SECTION.DASHBOARD,order:50,className:"linkFilterGroup",view:{state:{idList:t}},actions:{apply:this._execute.bind(this),getMenuItems:this._getGroups.bind(this)},disabled:this._isDisabled.bind(this,t)}]:[]},e.prototype._execute=function(t,e){this._features.EventGroups.addToGroup(t,e)},e.prototype._isDisabled=function(t){return!!this._isStaticWidget(t)||this.getNumberOfGroups(t)<2},e.prototype._getGroups=function(t){if(this._isStaticWidget(t))return[];var e=this._getPageId(t),o=this._features.EventGroups.getGroupIdsOnPage(e),r=this._getDistinctGroupIdsInSelection(t);return 1===r.length&&(o=o.filter((function(t){return t!==r[0]}))),o.map((function(t){return{text:t.split(":")[1],itemId:t}}))},e}(e)})),define("dashboard-core/js/features/dashboard/actions/eventGroups/CreateEventGroupAction",["./EventGroupActions","../../../../app/nls/StringResources","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,o){return function(t){function r(e){var o=e.features;_classCallCheck(this,r);var n=_possibleConstructorReturn(this,t.call(this,{features:o}));return o.ContentActions.registerProvider("createFilterGroup",n.getAPI()),n}return _inherits(r,t),r.prototype.getContentActionList=function(t){return this._isAvailable(t)?[{name:"createFilterGroup",label:e.get("toolbarActionCreateFilterGroup"),icon:this._features.Icons.getIcon("new-link").id,actions:{apply:this.execute.bind(this,t)},disabled:this.isDisabled.bind(this,t),type:"Button",section:o.ACTION_SECTION.DASHBOARD,order:60,update:!0}]:[]},r.prototype.execute=function(t){this._features.EventGroups.createGroup(t)},r.prototype.isDisabled=function(t){if(this._isStaticWidget(t))return!0;var e=this._getDistinctGroupIdsInSelection(t),o=this._features.EventGroups.getContentIdList(e[0]).length;if(1===e.length&&t.length===o)return!0;var r=this._getCountGroupsAffected(t);return this.getNumberOfGroups(t)-r+1>5},r}(t)})),define("dashboard-core/js/features/dashboard/contentMenu/api/ContentMenuAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.registerProvider=function(){},t.prototype.getContentMenuList=function(){},t}()})),define("dashboard-core/js/features/dashboard/contentMenu/ContentMenu",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./api/ContentMenuAPI"],(function(t,e){return function(){function o(){_classCallCheck(this,o),this.api=t.createAPI(this,[e]),this.providers={}}return o.prototype.registerProvider=function(t,e){this.providers[t]=e},o.prototype.getContentMenuList=function(t){var e=[];return Object.values(this.providers).forEach((function(o){if(o.getContentMenuList&&"function"==typeof o.getContentMenuList){var r=null;try{r=o.getContentMenuList(t)}catch(t){console.log(t)}r&&e.push.apply(e,r)}})),e},o.prototype.getAPI=function(){return this.api},o}()})),define("dashboard-core/js/features/dashboard/properties/PropertiesPaneAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.getProviderId=function(){},t}()})),define("dashboard-core/js/features/dashboard/properties/PropertiesPane",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./PropertiesPaneAPI","../../../app/nls/StringResources","../../../app/util/ErrorUtils","../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,o,r,n){return function(){function i(o){var r=o.features;_classCallCheck(this,i),this._dashboardApi=r.API,this._slideout=r.InAppSlideoutState,this._dashboardState=r.DashboardState,this._icons=r.Icons,this._api=t.createAPI(this,[e]),this._registerSlideoutContribution()}return i.prototype.getAPI=function(){return this._api},i.prototype.getProviderId=function(){return"PropertiesPane"},i.prototype._registerSlideoutContribution=function(){var t=this,e=this._dashboardState.getUiState();this._slideout.registerContribution(this.getProviderId(),{name:"properties",label:o.get("commonPropertiesLabel"),icon:this._icons.getIcon("configure").id,type:"Button",section:n.ACTION_SECTION.PANEL,order:40,text:o.get("commonPropertiesLabel"),className:"buttonWithText",disabled:function(){return e.eventGroups},isEnabled:function(){return r.hasCapability(t._dashboardApi,"canAuthorDashboard")&&e.authoring}})},i.prototype.destroy=function(){this._dashboardApi=null,this._api=null},i}()})),define("dashboard-core/js/features/dashboard/properties/PropertiesPaneDOMAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.render=function(){},t.prototype.getPropertiesView=function(){},t.prototype.getProviderId=function(){},t.prototype.getRenderNode=function(){},t.prototype.close=function(){},t}()})),define("dashboard-core/js/features/dashboard/properties/PropertiesPaneDOM",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","underscore","./PropertiesPaneDOMAPI"],(function(t,e,o){return function(){function e(t){var o=t.features;_classCallCheck(this,e),this._dashboard=o.API,this._properties=o.PropertiesPane,this._slideout=o.InAppSlideoutDOM,this._api=null,this._initialize()}return e.prototype.getAPI=function(){return this._api},e.prototype.isEnabled=function(){var t=this._dashboard.getGlassCoreSvc(".FeatureChecker");return!t||!t.checkValue("dashboard","PropertiesV2","enabled")},e.prototype.getProviderId=function(){return this._properties.getProviderId()},e.prototype._initialize=function(){this._api=t.createAPI(this,[o]),this.isEnabled()&&this._slideout.registerView(this._properties.getProviderId(),this._api)},e.prototype.getPropertiesView=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._renderNode=t.parentNode;var e=void 0,o=this._dashboard.getFeature("propertiesManager");if(t.isChild)e=o.updateChildPropertiesView(t);else{var r=this._getSelectedContentIds();e=o.getPropertiesView(r)}return e},e.prototype._getSelectedContentIds=function(){return this._dashboard.getCanvas().getSelectedContentList().map((function(t){return t.getId()}))},e.prototype.getRenderNode=function(){return this._renderNode},e.prototype.render=function(t){var e=this._dashboard.getFeature("propertiesManager").getMostRecentChildOptions(t);return this.getPropertiesView(e).then((function(t){return e&&e.childPanelId&&(t.$el.get(0).dataset.childPanelId=e.childPanelId),t.$el.get(0)}))},e.prototype.close=function(){var t=this._dashboard.getFeature("propertiesManager");t&&t.closeAllChild(),this._renderNode=null},e.prototype.destroy=function(){this.close(),this._api=null,this._dashboard=null,this._properties=null,this._slideout=null},e}()})),define("dashboard-core/js/features/dashboard/properties/PropertiesPaneDOMV2API",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.render=function(){},t.prototype.close=function(){},t.prototype.getProviderId=function(){},t}()})),define("dashboard-core/js/features/dashboard/properties/PropertiesView",["react","prop-types","mobx-react","@ba/ba-ui-carbon-toolkit","@ba/ba-ui-carbon","../../../app/nls/StringResources"],(function(t,e,o,r,n,i){var a=t.Component,s=t.Fragment,l=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(o,e),o.prototype.render=function(){return t.createElement(s,null,this.renderNavigation(),this.renderView())},o.prototype.renderNavigation=function(){var e=this.props,o=e.context,a=e.onNavigateBack;if(0===o.ancestors.length)return null;var s=o.ancestors.map((function(t){return{id:t.id,defaultName:t.label}}));s.push({id:o.definition.id,defaultName:o.definition.label});var l=this.props.factory.getIcon("arrowLeft"),u=s.length>1?a:function(){};return t.createElement(n.Button,{hasIconOnly:!0,kind:"ghost",tooltipAlignment:"center",tooltipPosition:"right",renderIcon:function(e){return t.createElement(r.SVGIcon,_extends({icon:l&&l.id},e))},iconDescription:i.get("navigationBack"),onClick:u})},o.prototype.renderView=function(){var e=this.props,o=e.factory,r=e.context.definition,n=o.makeControls(r.propertyList,r.propertyLayoutList);return t.createElement("div",{className:"v2-properties-control-view"},n)},o}(a);return l.propTypes={context:e.shape({definition:e.shape({id:e.string.isRequired,label:e.string.isRequired,propertyList:e.array.isRequired,propertyLayoutList:e.array.isRequired}).isRequired,ancestors:e.arrayOf(e.shape({id:e.string.isRequired,label:e.string.isRequired}).isRequired).isRequired}).isRequired,factory:e.object.isRequired,onNavigateBack:e.func},l.defaultProps={onNavigateBack:function(){}},o.observer(l)})),define("dashboard-core/js/dashboard/contentpane/PropertiesContainer",["@ba/ba-ui-carbon-toolkit","react","prop-types","mobx-react"],(function(t,e,o,r){"use strict";var n=t.Container,i=t.Accordion,a=e.Component,s=function(t){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(o,t),o.prototype.render=function(){return e.createElement(n,{ref:this.props.useRef,className:"properties--container"},this.props.banner,e.createElement(i,{icon:"right"},this.props.sections))},o}(a);return s.propTypes={banner:o.object,sections:o.arrayOf(o.object).isRequired,useRef:o.object},r.observer(s)})),define("dashboard-core/js/dashboard/contentpane/PropertyUIControlsFactory",["react","@ba/ba-ui-carbon-toolkit","./PropertiesContainer","../../lib/@waca/carbon-icons"],(function(t,e,o,r){var n=e.Label,i=e.AccordionItem,a=r.Reset16,s=["Separator"],l=["SingleLineLinks","Split","FontCombo"],u={Reset16:a},d=function(t){return s.indexOf(t.type)>-1};return function(){function e(o){var r=o.controls,n=o.dashboard,i=o.paletteService,a=o.colorsService;_classCallCheck(this,e),this._dashboard=n,this._controls=r,this._paletteService=i,this._colorsService=a,this._logger=this._dashboard.getFeature("Logger"),this._ref=t.createRef()}return e.prototype._makeBanner=function(e){return t.createElement(n,{className:"properties--title bannerLabel",label:e.value})},e.prototype._collectOrderedGroups=function(t){var e=t.filter((function(t){return t&&"Group"===t.type})),o=[];if(e.length){for(var r=0;r<e.length;r++){var n=e[r];n.items&&n.items.length&&(void 0===n.position&&(n.position=10),o.push(n))}o.sort((function(t,e){return t.position-e.position}))}return o},e.prototype._makeNonCollapsibleSection=function(e){var o=e.items,r=e.label,i=e.id,a=[];return a.push(t.createElement(n,{className:"properties--controls--SectionLabel","data-section-id":i,label:r})),a.concat(this._makeSectionItems(o))},e.prototype._makeSectionItems=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=[];return e.forEach((function(e,r){if(!d(e))if("Section"===e.type&&!1===e.collapsible)o=o.concat(t._makeNonCollapsibleSection(e));else{var n=t.makeSectionItem(e,r);n&&o.push(n)}})),o},e.prototype._makeSection=function(e){var o=e.items,r=e.label,n=e.id,a=this._makeSectionItems(o);return t.createElement(i,{key:n,className:"properties--controls--SectionLabel","data-section-id":n,itemName:r,open:!1,icon:"right"},a)},e.prototype._getProperty=function(t){var e=this._metadata.find((function(e){return e.id===t.id}));if(e&&!e.editor&&t.editor&&t.editor.uiControl&&(e.editor=t.editor),!e&&t){var o=void 0;(o=t.editor&&t.editor.uiControl?t.editor.uiControl:t).value&&(t.value=o.value),o.onChange&&(t.setPropertyValue=o.onChange),e=t}return e},e.prototype._parseItemStyle=function(t){var e={};return(t.style?t.style:t.editor&&t.editor.uiControl&&t.editor.uiControl.style?t.editor.uiControl.style:"").split(";").filter((function(t){return!!t})).forEach((function(t){var o=t.split(":"),r=o[0],n=o[1];e[r.trim()]=n.trim()})),e},e.prototype.getIcon=function(t){return this._dashboard.getFeature("Icons").getIcon(t)},e.prototype.makeSectionItem=function(e,o){var r=this._getControlType(e),n=this._parseItemStyle(e),i=void 0,a=void 0;if("string"==typeof r)i=this._controls[r],a={className:"properties--controls properties--controls--"+r},"ColorPicker"===r&&(a.paletteService=this._paletteService,a.colorsService=this._colorsService);else{i=r;var s={};e.props?s=e.props:e.editor&&e.editor.uiControl&&e.editor.uiControl.props&&(s=e.editor.uiControl.props),a=_extends({},s,{BUILTIN_CONTROLS:this._controls,className:"properties--controls"+(s.className?" "+s.className:"")})}if(i){if(l.indexOf(r)>-1){var d=this.makeSectionItem.bind(this),c=this.getIcon.bind(this);return t.createElement(i,_extends({},a,{key:o,item:e,makeSectionItemCb:d,supportedIcons:u,getIconCb:c,logger:this._logger}))}var p=this._getProperty(e);return p?("ToggleButton"===r&&this._handleToggleButtonRedraw_HACK(p),t.createElement(i,_extends({},a,{key:o,item:p,style:n}))):(this._logger.warn("property not found in metadata: ",e.id),null)}return t.createElement("div",null,t.createElement("span",null,"id: ",e.id?e.id:"id"),t.createElement("span",null,"|"),t.createElement("span",null,"type: ",r))},e.prototype._getTypeFromModule=function(t){var e=t;if(t){var o=t.lastIndexOf("/");o>-1&&o<t.length-1&&(e=t.substring(o+1,t.length))}return e},e.prototype._getControlType=function(t){var e=t.type?t.type:null;if(e&&"string"==typeof e&&e.endsWith("/UiSlider")&&(e="UiSlider"),e||(e=t.module&&this._getTypeFromModule(t.module)),!e){var o=t.editor&&t.editor.uiControl;o&&(e=this._getControlType(o))}return e&&(t.type=e),e},e.prototype._makeSections=function(t){var e=this,o=this._collectOrderedGroups(t),r=[];return o.length?o.forEach((function(t){t.items&&t.items.length&&t.items.forEach((function(t){"Section"===t.type&&r.push(e._makeSection(t))}))})):t.forEach((function(t){t&&("Section"===t.type?t.label?r.push(e._makeSection(t)):r=r.concat(e._makeSectionItems(t.items)):"Banner"!==t.type&&r.push(e.makeSectionItem(t,t.id)))})),r},e.prototype._handleToggleButtonRedraw_HACK=function(t){var e=this,o=t.setPropertyValue;t.setPropertyValue=function(){var t=e._ref.current._node,r=t&&t.closest(".slideout__contributions__item");r&&r.scrollTop>0&&(t.style.setProperty("transform","translateZ(0)"),window.requestAnimationFrame((function(){t.style.removeProperty("transform")}))),o.apply(void 0,arguments)}},e.prototype.makeControls=function(e,r){this._metadata=e;var n=r.find((function(t){return t&&"Banner"===t.type})),i=n&&this._makeBanner(n),a=this._makeSections(r);return t.createElement(o,{useRef:this._ref,banner:i,sections:a})},e}()})),define("dashboard-core/js/dashboard/contentpane/controls/ColorPicker",["react","mobx-react","authoring-common","@ba/ba-ui-carbon-toolkit","prop-types","classnames","../../../app/nls/StringResources"],(function(t,e,o,r,n,i,a){var s=o.ColorPicker,l=r.FlexLayout,u=r.Label,d=function(e){function o(t){_classCallCheck(this,o);var r=_possibleConstructorReturn(this,e.call(this,t));return r._setSelectedColor=function(t){var e=t,o=r.state.colors.findIndex((function(e){return e.hexValue===t})),n=r._getUiControl().paletteType;o>-1&&(e="ColorPalette"===n?o:r.state.colors[o].id);var i=r._getUiControl().onChange;r.setState({hexValue:t},(function(){i?i(e):r.props.item.setPropertyValue&&r.props.item.setPropertyValue(e)}))},r._resetColor=function(){r._setSelectedColor(r._defaultColor)},r._defaultColor="",r.state={colors:[],hexValue:"",favColors:null},r}return _inherits(o,e),o.prototype.componentDidMount=function(){this._updateState()},o.prototype.componentDidUpdate=function(t){this.props.item.value!==t.item.value&&this._updateState()},o.prototype._updateState=function(){var t=this,e=this._getUiControl();Promise.all([this._getColorsList()]).then((function(e){var o=e[0],r=t._getColorFromColorList(o,t._getNormalizedUiControl());r&&(t._defaultColor=r.hexValue,t.setState({colors:o,hexValue:r.hexValue}))})),e.showFavoriteColors&&Promise.all(this.props.paletteService.getFavoriteColors()).then((function(e){t.setState({favColors:e})}))},o.prototype._getNormalizedUiControl=function(){var t=this,e=this._getUiControl(),o=e.addButton,r=e.getCustomColor;return o&&!r&&(e.getCustomColor=function(e){return null!=e&&-1!==e.indexOf("customColor")?{hexValue:t.props.colorsService.getHexColorFromClassName(e)}:null}),e},o.prototype._getColorsList=function(){var t=this._getUiControl(),e=t.getColorsList,o=t.paletteType,r=t.paletteId,n=t.ignoreTransparentColor;return e||(e=this._getColorsListFunction(o,r,n)),e()},o.prototype._getColorsListFunction=function(t,e,o,r){var n=this,i=function(){return[]};if("DashboardColorSet"===t){var a=this.props.colorsService.getDashboardColorSet();o&&(a=a.filter((function(t){return"transparent"!==t.id}))),i=function(){return a.slice(0)}}if(e)if("ConditionalPalette"!==t)i=function(){return n.props.colorsService.getPaletteColors({paletteId:e,paletteType:t,addMissingBaseColors:null!=r&&r}).then((function(t){return t.slice(0)}))};else{var s="ConditionalPalette";i=function(){var t=[];return n.props.colorsService.getPalette({paletteId:e,type:s}).then((function(r){var i=r&&r.fills||[];return i?n.props.colorsService.getPaletteColors({paletteId:e,type:s,addMissingBaseColors:!0}).then((function(e){if(!o&&-1===i.indexOf("No color")){var r=i.slice();r.unshift("No color"),i=r}return i.forEach((function(o){var r=e.find((function(t){return t.label===o}));r&&t.push(r)})),t})):t}))}}return i},o.prototype._getColorFromColorList=function(t,e){var o=void 0;if(t.length){var r=this.props.item.value;(o=this._getColorFromColorIndex(r,t,e)||this._getColorFromColorValue(r,t)||this._getColorFromCustomColorsList(r,e))&&o.hexValue||(o=t[0])}return o},o.prototype._getColorFromColorIndex=function(t,e,o){var r=o.paletteType,n=o.defaultColorIndex;return r&&"ColorPalette"===r?null!=t?t<e.length?e[t]:e[0]:null!=n&&n<e.length?e[n]:e[0]:null},o.prototype._getColorFromColorValue=function(t,e){return e.find((function(e){return e.id===t||e.hexValue===t}))},o.prototype._getColorFromCustomColorsList=function(t,e){var o=e.getCustomColor;return o?o(t):null},o.prototype.render=function(){var e=this._getUiControl(),o=e.addButton,r=e.className,n=e.disabled,a=void 0!==n&&n,d=e.label,c=e.paletteTitle,p=e.showHexValue,h=void 0!==p&&p,g=e.flexOptions,f=e.displayTooltip,b=this.props.item&&this.props.item.id,m={className:i(this.props.className,r,{"no-tooltip":!f}),"data-property-id":b||void 0},y=i({"is-transparent":"transparent"===this.state.hexValue});return t.createElement(l,_extends({},m,{wrap:"nowrap",justifyContent:"space-between",direction:g&&g.direction}),t.createElement(u,{label:d}),t.createElement(l,{wrap:"nowrap"},h&&t.createElement(u,{label:this._getHexValue(),className:"hexLabel"}),t.createElement(s,{className:y,colors:this.state.colors.map((function(t){return t.hexValue})),colorTitles:this.state.colors.map((function(t){return t.label})),colorsLabel:c,onColorSelected:this._setSelectedColor,paletteService:this.props.paletteService,resetColor:this._resetColor,disabled:a,selectedColor:this.state.hexValue,showCustomColorButton:o,favoriteColors:this.state.favColors,title:d})))},o.prototype._getUiControl=function(){return this.props.item&&this.props.item.editor&&this.props.item.editor.uiControl},o.prototype._getHexValue=function(){return this.state.hexValue&&"transparent"!==this.state.hexValue?this.state.hexValue.toUpperCase():a.get("colorNoFillLabel")},o}(t.Component);return d.propTypes={item:n.shape({id:n.string,setPropertyValue:n.func.isRequired,value:n.string,editor:n.shape({uiControl:n.shape({label:n.string.isRequired,paletteTitle:n.string,paletteType:n.string,ignoreTransparentColor:n.bool,getColorsList:n.func,getCustomColor:n.func,onChange:n.func,displayTooltip:n.bool})}).isRequired}),className:n.string,paletteService:n.object.isRequired,colorsService:n.object.isRequired},d.defaultProps={},e.observer(d)})),define("dashboard-core/js/dashboard/contentpane/controls/ComboBox",["react","mobx-react","@ba/ba-ui-carbon","prop-types"],(function(t,e,o,r){var n=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(r,e),r.prototype.render=function(){var e=this.props,r=e.item,n=e.className,i=this._getUIControl(r),a=i.items,s=i.placeholder,l=i.shouldFilterItem,u=i.disabled,d=i.onChange,c={className:n,"data-property-id":r.id};return t.createElement("div",c,t.createElement(o.ComboBox,{id:r.id,items:a||[],placeholder:s,shouldFilterItem:l||this._shouldFilterItem,itemToString:function(t){return t?t.label:""},disabled:u,onChange:d,size:"lg",light:!0}))},r.prototype._getUIControl=function(t){return t&&t.editor&&t.editor.uiControl&&t.editor.uiControl||{}},r.prototype._shouldFilterItem=function(t){var e=t&&t.item.label,o=t&&t.inputValue;return!e||!o||e.toLowerCase().startsWith(o.toLowerCase())},r}(t.Component);return n.propTypes={item:r.shape({editor:r.shape({uiControl:r.shape({id:r.string,placeHolder:r.string,disabled:r.bool,items:r.arrayOf(r.object),onChange:r.func,shouldFilterItem:r.func})}),id:r.string.isRequired}),className:r.string},n.defaultProps={},e.observer(n)})),define("dashboard-core/js/dashboard/contentpane/controls/DropDown",["react","mobx-react","@ba/ba-ui-carbon","prop-types"],(function(t,e,o,r){var n=function(e){function r(t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t));return o._dropdownKey=0,o}return _inherits(r,e),r.prototype.render=function(){var e=this.props,r=e.item,n=e.style,i=e.className,a=r.id,s=r.setPropertyValue,l=r.value;if(!a)return null;var u={style:n,className:i,"data-property-id":a},d=r;r&&r.editor&&r.editor.uiControl&&(d=r.editor.uiControl);var c=d,p=c.options,h=c.getOptions,g=c.ariaDescribedby,f=c.readOnly,b=c.label,m=c.defaultValue;if(!p||!p.length){if(!h||"function"!=typeof h)return null;p=h()}var y=this._getDefaultSelectedItem(l,p,m),v=b||g,C=d&&d.className;return u.className=u.className?u.className.concat(C?" "+C:""):C,t.createElement("div",u,t.createElement(o.Dropdown,{key:this._dropdownKey++,titleText:v,items:p,size:"sm",light:!0,initialSelectedItem:y,disabled:f,onChange:function(t){s(t.selectedItem.value)}}))},r.prototype._getOptionMatchingValue=function(t,e){return t.find((function(t){return t.value===e}))},r.prototype._getDefaultSelectedItem=function(t,e,o){var r=void 0;return void 0!==t&&(r=this._getOptionMatchingValue(e,t)),void 0===r&&void 0!==o&&(r=this._getOptionMatchingValue(e,o)),void 0===r&&(r=e.find((function(t){return!0===t.selected}))||e[0]),r},r}(t.Component);return n.propTypes={item:r.shape({id:r.string.isRequired,ariaDescribedby:r.string,label:r.string,options:r.array,getOptions:r.func,style:r.string,disabled:r.bool,setPropertyValue:r.func.isRequired,value:r.string,editor:r.object}),style:r.object,className:r.string},n.defaultProps={},e.observer(n)})),define("dashboard-core/js/dashboard/contentpane/controls/FlyoutIconPicker",["react","mobx-react","@ba/ba-ui-carbon-toolkit","prop-types","classnames"],(function(t,e,o,r,n){var i="properties--controls--FlyoutIconPicker",a=o.FlexLayout,s=o.FlexItem,l=o.IconPicker,u=o.Label,d=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(o,e),o.prototype.render=function(){var e=function(t){var e=t.item,o=e;return e&&e.editor&&e.editor.uiControl&&(o=e.editor.uiControl),o}(this.props);return t.createElement(a,{className:n(this.props.className,i),"data-property-id":e.id,direction:"row",wrap:"nowrap",justifyContent:"space-between"},this.renderLabel(e),this.renderControl(e))},o.prototype.renderLabel=function(e){return t.createElement(s,{className:i+"--label"},t.createElement(u,{label:e.label}))},o.prototype.renderControl=function(e){var o=e.items,r=this.props.item,n=r.setPropertyValue,a=r.value,u=o.map((function(t){return{icon:{id:t.value},iconId:t.name,label:t.label}})),d=u.find((function(t){return t.icon.id===a}))||u[0],c="none"===d.icon.id;return t.createElement(s,{className:i+"--control"+(c?" "+i+"--control--empty":"")},t.createElement(l,{orientation:"bottomRightStart",icons:u,selectedIcon:d,onIconSelected:function(t){n(t.icon.id)}}))},o}(t.Component);return d.propTypes={item:r.shape({label:r.string.isRequired,value:r.string.isRequired,items:r.arrayOf(r.shape({name:r.string.isRequired,label:r.string.isRequired,value:r.string.isRequired})).isRequired,setPropertyValue:r.func.isRequired}),className:r.string},d.defaultProps={},e.observer(d)})),define("dashboard-core/js/dashboard/contentpane/controls/FontComboOptions",["../../../app/nls/StringResources"],(function(t){return{fontFamily:[{value:"auto",label:t.get("textAutoFontSize")},{value:"anton",label:"Anton",cssClass:"rt_fontFamilyAnton"},{value:"cherrycreamsoda",label:"Cherry Cream Soda",cssClass:"rt_fontFamilyCherryCreamSoda"},{value:"condiment",label:"Condiment",cssClass:"rt_fontFamilyCondiment-Regular"},{value:"didactgothic",label:"Didact Gothic",cssClass:"rt_fontFamilyDidactGothic"},{value:"euphoriascript",label:"Euphoria Script",cssClass:"rt_fontFamilyEuphoriaScript-Regular"},{value:"helvneueforibm",label:"Helvetica Neue",cssClass:"rt_fontFamilyHelvNeueforIBM-Regular"},{value:"kaushanscript",label:"Kaushan Script",cssClass:"rt_fontFamilyKaushanScript-Regular"},{value:"lobster",label:"Lobster",cssClass:"rt_fontFamilyLobster"},{value:"merriweather",label:"Merriweather",cssClass:"rt_fontFamilyMerriweather-Regular"},{value:"merriweathersans",label:"Merriweather Sans",cssClass:"rt_fontFamilyMerriweatherSans-Regular"},{value:"monoton",label:"Monoton",cssClass:"rt_fontFamilyMonoton-Regular"},{value:"montserrat",label:"Montserrat",cssClass:"rt_fontFamilyMontserrat-Regular"},{value:"opensanscondensed",label:"Open Sans Condensed",cssClass:"rt_fontFamilyOpenSansCondensed-Regular"},{value:"oswald",label:"Oswald",cssClass:"rt_fontFamilyOswald-Regular"},{value:"playball",label:"Playball",cssClass:"rt_fontFamilyPlayball"},{value:"ibmplexsans",label:"IBM Plex",cssClass:"rt_fontFamilyPlex-Regular"},{value:"roboto",label:"Roboto",cssClass:"rt_fontFamilyRoboto-Regular"},{value:"sortsmillgoudy",label:"Sorts Mill Goudy",cssClass:"rt_fontFamilySortsMillGoudy-Regular"},{value:"specialelite",label:"Special Elite",cssClass:"rt_fontFamilySpecialElite"}],fontSize:[{value:"auto",label:t.get("textAutoFontSize")},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"14",label:"14"},{value:"16",label:"16"},{value:"18",label:"18"},{value:"20",label:"20"},{value:"22",label:"22"},{value:"24",label:"24"},{value:"26",label:"26"},{value:"28",label:"28"},{value:"30",label:"30"},{value:"36",label:"36"},{value:"48",label:"48"},{value:"60",label:"60"},{value:"72",label:"72"},{value:"96",label:"96"},{value:"120",label:"120"},{value:"170",label:"170"},{value:"230",label:"230"}],fontFamilyLabel:t.get("textFontFamily"),fontSizeLabel:t.get("textFontSize"),textColor:{label:t.get("textFontColor"),addButton:!0}}})),define("dashboard-core/js/dashboard/contentpane/controls/FontCombo",["react","mobx-react","prop-types","./FontComboOptions"],(function(t,e,o,r){var n=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(o,e),o.prototype.render=function(){var e=this._buildFontLayoutSpec(),o=this.props,r=o.className,n=o.id,i={className:r,"data-property-id":n||void 0};return e?t.createElement("div",i,this.props.makeSectionItemCb(e,this.props.key)):t.createElement("div",null)},o.prototype._buildFontLayoutSpec=function(){var t=this.props,e=t.item,o=t.logger,n=e;e.editor&&e.editor.uiControl&&(n=e.editor.uiControl);var i=n,a=i.fontFamily,s=i.fontSize,l=i.textColor;if(!a||!s)return o.warn("The layout "+n.id+" is missing either font-family or font-size"),null;var u={id:a.id,editor:{uiControl:{options:a.options||r.fontFamily,label:a.label?a.label:r.fontFamilyLabel,type:"DropDown",className:"fontFamilyOptions",onChange:a.onChange,value:a.value,style:"width: 145px;"}}},d={id:s.id,editor:{uiControl:{options:s.options||r.fontSize,label:s.label?s.label:r.fontSizeLabel,type:"DropDown",className:"fontSizeOptions",onChange:s.onChange,value:s.value,style:"width: 95px;"}}},c=void 0;l&&(c={id:l.id,editor:{uiControl:{type:"ColorPicker",label:r.textColor.label,addButton:null==l.addButton?r.textColor.addButton:l.addButton,paletteTitle:l.paletteTitle,paletteType:l.paletteType,showHexValue:!1,value:l.value,onChange:l.onChange,className:"textColor",flexOptions:{direction:"column"}}}});var p={id:"fontComboLine",editor:{uiControl:{type:"SingleLineLinks",items:[{id:"fontFamily",align:"left",items:[u]},{id:"fontSize",align:"right",items:[d]}]}}};return c&&(p.editor.uiControl.items[1].align="middle",p.editor.uiControl.items.push({id:"textColor",align:"right",items:[c]})),p},o}(t.Component);return n.propTypes={id:o.string,key:o.string.isRequired,item:o.shape({editor:o.object,fontFamily:o.shape({id:o.string.isRequired,options:o.array,value:o.string,onChange:o.func.isRequired,label:o.string}),fontSize:o.shape({id:o.string.isRequired,options:o.array,value:o.string,onChange:o.func.isRequired,label:o.string}),textColor:o.shape({id:o.string.isRequired,label:o.string,paletteTitle:o.string.isRequired,getColorsList:o.func.isRequired,getCustomColor:o.func.isRequired,addButton:o.bool,showHexValue:o.bool,onChange:o.func.isRequired,value:o.string.isRequired})}),makeSectionItemCb:o.func.isRequired,logger:o.object,className:o.string},e.observer(n)})),define("dashboard-core/js/dashboard/contentpane/controls/HintText",["react","mobx-react","@ba/ba-ui-carbon-toolkit","prop-types"],(function(t,e,o,r){var n=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(r,e),r.prototype._getUiControl=function(){return this.props.item&&this.props.item.editor&&this.props.item.editor.uiControl},r.prototype.render=function(){var e=this._getUiControl().label,r={className:this.props.className};return t.createElement("div",r,t.createElement(o.Label,{label:e}))},r}(t.Component);return n.propTypes={item:r.shape({editor:r.shape({uiControl:r.shape({label:r.string.isRequired}).isRequired}).isRequired}).isRequired,className:r.string},n.defaultProps={},e.observer(n)})),define("dashboard-core/js/dashboard/contentpane/controls/InlineIconPicker",["react","mobx-react","@ba/ba-ui-carbon-toolkit","prop-types","../../../lib/@waca/core-client/js/core-client/ui/KeyCodes"],(function(t,e,o,r,n){var i=o.Label,a=o.SVGIcon,s="properties--controls--InlineIconPicker",l=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(o,e),o.prototype.render=function(){var e=this.props.style,o=function(t){var e=t.item,o=e;return e&&e.editor&&e.editor.uiControl&&(o=e.editor.uiControl),o}(this.props),r={style:e,className:this.props.className+(o.readOnly?" "+s+"--disabled":""),"data-property-id":this.props.item.id};return t.createElement("div",r,this.renderLabel(o),this.renderControl(o))},o.prototype.renderLabel=function(e){return t.createElement(i,{className:s+"--label",label:e.label})},o.prototype.renderControl=function(e){var o=e.items,r=e.values,i=e.readOnly,l=e.allowMultiple,u=this.props.item.setPropertyValue,d=function(){};return i||(d=l?function(t){var e=o.filter((function(t){return r&&-1!==r.indexOf(t.name)})),n=e.findIndex((function(e){return e.name===t.name}));-1===n?e.push(t):e.splice(n,1),u(e)}:function(t){u([t])}),t.createElement("div",{className:s+"--control"},o.map((function(e,o){var i={iconId:e.value,alt:e.label},l=r&&-1!==r.indexOf(e.name);return t.createElement("div",{key:o,tabIndex:"0",onClick:function(){return d(e)},onKeyDown:function(t){-1!==[n.ENTER,n.SPACE].indexOf(t.keyCode)&&(d(e),t.stopPropagation())},className:s+"--control--icon"+(l?" "+s+"--control--icon--selected":"")},t.createElement(a,i))})))},o}(t.Component);return l.propTypes={item:r.shape({id:r.string.isRequired,label:r.string.isRequired,readOnly:r.bool.isRequired,allowMultiple:r.bool.isRequired,items:r.arrayOf(r.shape({label:r.string,name:r.string,value:r.string})),setPropertyValue:r.func.isRequired}).isRequired,style:r.object,className:r.string},l.defaultProps={},e.observer(l)})),define("dashboard-core/js/dashboard/contentpane/controls/InputLabel",["react","mobx-react","@ba/ba-ui-carbon","prop-types","../../../app/nls/StringResources"],(function(t,e,o,r,n){var i=function(t){var e=t.item,o=e;return e&&e.editor&&e.editor.uiControl&&(o=e.editor.uiControl),o},a=function(e){function r(o){_classCallCheck(this,r);var n=_possibleConstructorReturn(this,e.call(this,o));return n.state={_forceRefreshKey:0},n._controlKey=0,n._refInput=t.createRef(),n._delay=o.delay||1e3,n}return _inherits(r,e),r.prototype.render=function(){var e=this.props,o=e.style,r=e.item,n=this.props.className,a={style:o,className:n+=(n?" ":"")+"properties--controls--InputLabel--"+(i(this.props).inputType||"text"),"data-property-id":r.id};return t.createElement("div",a,this.renderControl())},r.prototype.renderControl=function(){var e=this,r=this.props.item,a=r.setPropertyValue,s=r.value,l=i(this.props),u=l.label,d=l.placeHolderText,c=l.readOnly,p=l.inputType,h=l.decimalPlaces,g=l.min,f=l.max,b=l.invalidText,m=void 0===b?n.get("propInputLabel_number_invalid"):b;switch(p){case"number":var y=function(t){var e=Number(t),o=String(t);if(void 0!==h&&-1!==o.indexOf(".")){var r=o.split(".");r[1].length>0&&(0===h?e=Math.round(e):r[1].length>h&&(e=Number(e.toFixed(h))))}return e},v=y(s),C=null!=g?{min:g}:null,_=null!=f?{max:f}:null;return t.createElement(o.NumberInput,_extends({ref:this._refInput,key:this._controlKey++,invalidText:m,label:u,value:v,disabled:c},C,_,{onChange:function(t){var o=t.imaginaryTarget.value;o.length>0&&setTimeout((function(){var t=y(o);a(t),t===v&&e._forceRefresh()}),e._delay)},light:!0}));case"text":default:return t.createElement(o.TextInput,{ref:this._refInput,value:s,labelText:u,placeholder:d,disabled:c,onChange:function(t){a(t.currentTarget.value)},light:!0})}},r.prototype._resetFocus=function(){this._refInput.current.focus()},r.prototype._forceRefresh=function(){this.setState({_forceRefreshKey:this.state._forceRefreshKey+1},this._resetFocus)},r}(t.Component);return a.propTypes={item:r.shape({editor:r.shape({uiControl:r.shape({id:r.string,label:r.string,placeHolderText:r.string,readOnly:r.bool,inputType:r.string,invalidText:r.string,decimalPlaces:r.number,min:r.number,max:r.number})}),id:r.string.isRequired,label:r.string.isRequired,placeHolderText:r.string,readOnly:r.bool,setPropertyValue:r.func.isRequired,value:r.string}),style:r.object,className:r.string,delay:r.number},a.defaultProps={style:{},className:""},e.observer(a)})),define("dashboard-core/js/dashboard/contentpane/controls/SingleLineLinks",["react","mobx-react","@ba/ba-ui-carbon-toolkit","@ba/ba-ui-carbon","prop-types"],(function(t,e,o,r,n){var i=o.FlexLayout,a=o.FlexItem,s=o.HSpacer,l=o.Label,u=o.SVGIcon,d=r.Button,c=r.Link,p=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(o,e),o.prototype.render=function(){var e=this,o=this.props,r=o.item,n=o.className,a=o.logger,s=r;r&&r.editor&&r.editor.uiControl&&(s=r.editor.uiControl);var l=s,u=l.justifyContent,d=l.alignItems,c=this._renderSectionItems(s);if(!c.length)return a.warn("layout '"+(r.id?r.id:"undefined")+"' is of type SingleLineLinks but does not have children"),null;var p={className:n,"data-property-id":r&&r.id?r.id:void 0};return t.createElement(i,_extends({},p,{direction:"row",wrap:"nowrap",justifyContent:u||"space-between",alignItems:d||"baseline",onClick:function(t){return e._onClickItem(t,s)}}),c)},o.prototype._renderSectionItems=function(t){var e=this,o=[];if(t&&t.items&&t.items.length){var r=t.items,n=r.find((function(t){return"left"===t.align})),i=0;n&&n.items&&n.items.length&&this._addSectionItem(n.items[0],"left",i++,o);var a=void 0;3===r.length&&(a=r.find((function(t){return"middle"===t.align})))&&a.items&&a.items.length&&this._addSectionItem(a.items[0],"middle",i++,o);var s=r.find((function(t){return"right"===t.align}));s&&s.items&&s.items.length&&s.items.forEach((function(t){return e._addSectionItem(t,"right",i,o,!0)}))}return o},o.prototype._addSectionItem=function(e,o,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=void 0;(a="text"===e.type||"textLink"===e.type?this._renderText(e,o):"icon"===e.type?this._renderIcon(e,o):this.props.makeSectionItemCb(e,r))&&(n.push(a),i||n.push(t.createElement(s,{size:1})))},o.prototype._renderText=function(e,o){var r=this,n=void 0;e.showRightArrow&&(n=this._renderRightArrowIcon(e));var i=null;if("textLink"===e.type){var s="properties--controls--SingleLineLinks--"+o+"--textLink"+(e.id?" property--"+e.id:"");i=t.createElement(c,{className:s,onClick:function(t){return r._onClickItem(t,e)}},e.value)}else if("text"===e.type){var u="properties--controls--SingleLineLinks--"+o+"--text"+(e.id?" property--"+e.id+" ":"")+(e.class?" "+e.class:"");i=t.createElement(l,{className:u,label:e.value,onClick:function(t){return r._onClickItem(t,e)}})}return t.createElement(a,{className:"properties--controls--SingleLineLinks__textWithIcon",grow:void 0===e.grow||e.grow},i,n)},o.prototype._renderIcon=function(e,o){var r=this;if(!e.svgIcon)return null;var n="properties--controls--SingleLineLinks--"+o+"--icon"+(e.id?" property--"+e.id+" ":"")+(e.class?" "+e.class:""),i=void 0,s=this.props.supportedIcons[e.svgIcon];return i=s?t.createElement(d,{kind:"ghost",className:n,iconDescription:e.iconTooltip,hasIconOnly:!0,renderIcon:s,tooltipPosition:e.tooltipPosition,onClick:function(t){return r._onClickItem(t,e)}}):t.createElement(u,{iconId:e.svgIcon,className:n,alt:e.iconTooltip,onClick:function(t){return r._onClickItem(t,e)}}),t.createElement(a,null,i)},o.prototype._onClickItem=function(t,e){e.clickCallback&&e.clickCallback(t)},o.prototype._renderRightArrowIcon=function(e){var o=this,r=this.props.getIconCb("common-chevron_right_16").id;return t.createElement(a,null,t.createElement(u,{iconId:r,className:"svgIcon",onClick:function(t){return o._onClickItem(t,e)}}))},o}(t.Component);return p.propTypes={item:n.shape({id:n.string,type:"SingleLineLinks",items:n.array.isRequired,editor:n.shape({uiControl:n.object})}),className:n.string,makeSectionItemCb:n.func.isRequired,getIconCb:n.func.isRequired,logger:n.object,supportedIcons:n.object},p.defaultProps={supportedIcons:{}},e.observer(p)})),define("dashboard-core/js/dashboard/contentpane/controls/Slider",["react","mobx-react","@ba/ba-ui-carbon","prop-types"],(function(t,e,o,r){var n=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(r,e),r.prototype.render=function(){var e=this.props,o={style:e.style,className:e.className,"data-property-id":e.item.id};return t.createElement("div",o,this.renderControl())},r.prototype.renderControl=function(){var e=this.props.item,r=e.setPropertyValue,n=e.value,i=void 0,a=function(t){var e=t.item,o=e;return e&&e.editor&&e.editor.uiControl&&(o=e.editor.uiControl),o}(this.props),s=a.id,l=a.sliderType,u=a.readOnly,d=a.label,c=a.step,p=a.range,h=a.defaultValue,g=p.max||1,f=p.min||0;return c=c||1,i=void 0===n?void 0!==h?h:1:n,"percentage"===l&&(i=parseInt(100*i,10)),t.createElement(o.Slider,{id:s,labelText:d,step:c,value:i,stepMultiplier:4*c,max:g,min:f,disabled:u,onChange:function(t){var e=t.value;"percentage"===l&&(e*=.01),r(e)},light:!0})},r}(t.Component);return n.propTypes={item:r.shape({editor:r.shape({uiControl:r.shape({id:r.string.isRequired,label:r.string,readOnly:r.bool,range:r.object,step:r.number,defaultValue:r.number,sliderType:r.string})}),id:r.string.isRequired,setPropertyValue:r.func.isRequired,value:r.any}),style:r.object,className:r.string},n.defaultProps={style:{}},e.observer(n)})),define("dashboard-core/js/dashboard/contentpane/controls/Split",["react","mobx-react","@ba/ba-ui-carbon-toolkit","prop-types"],(function(t,e,o,r){var n=o.FlexLayout,i=o.HSpacer,a=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(o,e),o.prototype.render=function(){var e=this.props,o=e.item,r=e.className,i=e.logger,a=this._getSplitItems(o);if(!a.length)return i.warn("split item '"+o.id+"' does not have 2 children: left and right"),null;var s={className:r,"data-property-id":o.id};return t.createElement(n,_extends({},s,{direction:"row",wrap:"nowrap",justifyContent:"space-between"}),a)},o.prototype._getSplitItems=function(e){var o=[];if(e&&e.items&&2===e.items.length){var r=e.items.find((function(t){return"left"===t.id})),n=e.items.find((function(t){return"top"===t.id||"right"===t.id}));r&&n&&(o.push(this.props.makeSectionItemCb(r.items[0],0)),o.push(t.createElement(i,{size:1})),o.push(this.props.makeSectionItemCb(n.items[0],1)))}return o},o}(t.Component);return a.propTypes={item:r.shape({id:r.string.isRequired,type:"Split",items:r.array.isRequired}),className:r.string,makeSectionItemCb:r.func.isRequired,logger:r.object.isRequired},e.observer(a)})),define("dashboard-core/js/dashboard/contentpane/controls/ToggleButton",["react","mobx-react","@ba/ba-ui-carbon","prop-types","classnames"],(function(t,e,o,r,n){var i=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(r,e),r.prototype.render=function(){var e=this.props,o=e.style,r=e.className,n=e.item,i={style:o,className:r};return i["data-property-id"]=n.id,t.createElement("div",i,this.renderControl())},r.prototype.renderControl=function(){var e=this.props.item,r=e.id,i=e.value,a=e.setPropertyValue,s=function(t){var e=t.item,o=e;return e&&e.editor&&e.editor.uiControl&&(o=e.editor.uiControl),o}(this.props),l=s.label,u=s.readOnly,d=n("bx--label",{"bx--label--disabled":u});return t.createElement(t.Fragment,null,t.createElement("div",{className:d},l),t.createElement(o.ToggleSmall,{id:r,labelA:null,labelB:null,onToggle:function(t){a(t)},toggled:i,disabled:u}))},r}(t.Component);return i.propTypes={item:r.shape({editor:r.shape({uiControl:r.shape({id:r.string,label:r.string,readOnly:r.bool})}),id:r.string.isRequired,label:r.string.isRequired,readOnly:r.bool,setPropertyValue:r.func.isRequired,value:r.bool.isRequired}),style:r.object,className:r.string},i.defaultProps={},e.observer(i)})),define("dashboard-core/js/dashboard/contentpane/controls/ToggledCombo",["react","mobx-react","@ba/ba-ui-carbon","prop-types","../../../lib/@waca/core-client/js/core-client/i18n/Formatter","../../../app/nls/StringResources"],(function(t,e,o,r,n,i){var a=function(t){var e=t.item,o=e;return e&&e.editor&&e.editor.uiControl&&(o=e.editor.uiControl),o},s=function(t,e){return a(t)[e+"Options"]},l=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(r,e),r.prototype.render=function(){var e=this.props,o={style:e.style,className:e.className,"data-property-id":e.item.id},r=a(this.props);return t.createElement("div",o,t.createElement("div",{className:"properties--controls--ToggledCombo--toggle"},this.renderToggleButton(r)),t.createElement("div",{className:"properties--controls--ToggledCombo--options"},this.renderInput(r),this.renderDropdown(r)))},r.prototype.renderToggleButton=function(e){var r=this,n=s(this.props,"checkBox"),i=this._getPropertyValue(n),a=e.id,l=e.label,u=e.readOnly;return t.createElement(t.Fragment,null,t.createElement("div",{className:"ToggleButton--label"},l),t.createElement(o.ToggleSmall,{id:a+"--toggle",labelA:null,labelB:null,onToggle:function(t){r._setPropertyValue(t,"checkBox")},toggled:i,readOnly:u}))},r.prototype.renderDropdown=function(e){var r=this,n=s(this.props,"checkBox"),i=s(this.props,"dropDown"),a=this._getPropertyValue(n),l=this._getPropertyValue(i),u=e.id,d=e.readOnly,c=i.options,p=d||!a,h=c.find((function(t){return t.value===l}))||c[0];return t.createElement(o.Dropdown,{id:u+"--dropdown",items:c,size:"sm",titleText:i.label,initialSelectedItem:h&&h.label,disabled:p,onChange:function(t){var e=t.selectedItem.value;r._setPropertyValue(e,"dropDown")},light:!0})},r.prototype.renderInput=function(e){var r=this,l=e.id,u=e.readOnly,d=e.toggledComboHint,c=a(this.props),p=c.min,h=c.max,g=c.customValidatorCallback,f=void 0,b=s(this.props,"checkBox"),m=s(this.props,"input"),y=s(this.props,"dropDown"),v=this._getPropertyValue(b),C=this._getPropertyValue(y),_=this._getPropertyValue(m),I=u||!v,x=i.get("propInputLabel_number_invalid");return g?_<(f=g(C)).min&&this._setPropertyValue(f.min,"input"):f={min:p||1,max:h},t.createElement(o.NumberInput,_extends({id:l+"--input",invalidText:x,label:m.label,helperText:d,value:_,disabled:I,onChange:function(t){var e=t.imaginaryTarget.value,o=n.format(e,{type:"number"});r._setPropertyValue(o,"input")},light:!0},f))},r.prototype._getPropertyValue=function(t){return(this.props.item.value||{})[t.name]},r.prototype._setPropertyValue=function(t,e){var o=this.props.item,r=o.value,n=o.setPropertyValue,i=s(this.props,e),a=JSON.parse(JSON.stringify(r));a&&i.name&&(a[i.name]=t,n(a))},r}(t.Component);return l.propTypes={item:r.shape({editor:r.shape({uiControl:r.shape({id:r.string,label:r.string,readOnly:r.bool,min:r.number,max:r.number})}),id:r.string.isRequired,label:r.string.isRequired,readOnly:r.bool,setPropertyValue:r.func.isRequired,value:r.object,customValidatorCallback:r.func}),style:r.object,className:r.string},l.defaultProps={},e.observer(l)})),define("dashboard-core/js/features/dashboard/properties/PropertiesPaneDOMV2",["react-dom","react","mobx","../../../lib/@waca/dashboard-common/dist/core/APIFactory","./PropertiesPaneDOMV2API","./PropertiesView","../../../dashboard/contentpane/PropertyUIControlsFactory","../../../dashboard/contentpane/controls/ColorPicker","../../../dashboard/contentpane/controls/ComboBox","../../../dashboard/contentpane/controls/DropDown","../../../dashboard/contentpane/controls/FlyoutIconPicker","../../../dashboard/contentpane/controls/FontCombo","../../../dashboard/contentpane/controls/HintText","../../../dashboard/contentpane/controls/InlineIconPicker","../../../dashboard/contentpane/controls/InputLabel","../../../dashboard/contentpane/controls/SingleLineLinks","../../../dashboard/contentpane/controls/Slider","../../../dashboard/contentpane/controls/Split","../../../dashboard/contentpane/controls/ToggleButton","../../../dashboard/contentpane/controls/ToggledCombo"],(function(t,e,o,r,n,i,a,s,l,u,d,c,p,h,g,f,b,m,y,v){var C={CollapsiblePicker:d,ColorPicker:s,ComboBox:l,DropDown:u,FontCombo:c,HintText:p,IconPicker:h,InputLabel:g,SingleLineLinks:f,Split:m,ToggleButton:y,ToggledCombo:v,UiSlider:b};return function(){function o(t){var e=this,i=t.features;_classCallCheck(this,o),this._onNavigateBack=function(){e._features.InternalProperties.navigateBack()},this._features=i,this._api=r.createAPI(this,[n]),this._mobxDisposeCallbacks=[],this._controlFactory=null,this.isEnabled()&&this._features.InAppSlideoutDOM.registerView(this.getProviderId(),this._api)}return o.prototype.getAPI=function(){return this._api},o.prototype.isEnabled=function(){var t=this._features.API.getGlassCoreSvc(".FeatureChecker");return!(!t||!t.checkValue("dashboard","PropertiesV2","enabled"))},o.prototype.getProviderId=function(){return this._features.PropertiesPane.getProviderId()},o.prototype.render=function(o){var r=this;this._features.InternalProperties.activate();var n=o.parentNode;return new Promise((function(o){t.render(e.createElement(i,{context:r._features.InternalProperties.getContext(),factory:r._getControlFactory(),onNavigateBack:r._onNavigateBack}),n,o)}))},o.prototype._getControlFactory=function(){return this._controlFactory||(this._controlFactory=new a({controls:C,dashboard:this._features.API,paletteService:this._features.Palette,colorsService:this._features.Colors})),this._controlFactory},o.prototype.close=function(){this._features.InternalProperties.deactivate()},o.prototype.destroy=function(){this._mobxDisposeCallbacks.forEach((function(t){return t()})),this._mobxDisposeCallbacks=[],this._api=null,this._features=null},o}()})),define("dashboard-core/js/features/dashboard/dnD/api/CanvasDnDAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.registerProvider=function(){},t.prototype.accepts=function(){},t.prototype.onDrop=function(){},t}()})),define("dashboard-core/js/features/dashboard/dnD/api/impl/CanvasDnD",["../CanvasDnDAPI","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory"],(function(t,e){var o=["pin","widget"];return function(){function r(){_classCallCheck(this,r),this._api=e.createAPI(this,[t]),this.providers=[]}return r.prototype.destroy=function(){this.api=null,this.providers=[]},r.prototype.getAPI=function(){return this._api},r.prototype.registerProvider=function(t){var e=this.providers.find((function(e){return e.getImplType()===t.getImplType()}));null==e&&this.providers.push(t)},r.prototype.accepts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this._getSupportedTypes(e);if(-1!==o.indexOf(t.type))return!0;var r=this.providers.find((function(o){return o.accepts(t,e)}));return!!r},r.prototype.onDrop=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.data&&"new"===t.data.operation)return Promise.resolve(t.data.model);var e=Promise.resolve();return this.providers.forEach((function(o){e=e.then((function(e){return e||o.onDrop(t)}))})),e},r.prototype._getSupportedTypes=function(t){if(t&&t.fromMultipurposeWidget)return[];var e=[].concat(o);return t&&t.fromCanvas&&e.push("groupContent"),e},r}()})),define("dashboard-core/js/authoringProfileBundle",(function(){}));