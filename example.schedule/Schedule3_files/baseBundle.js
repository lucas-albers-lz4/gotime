/**
 * IBM Confidential OCO Source Materials IBM Business Platform: Dashboard
 * (C) Copyright IBM Corp. 2016, 2021
 *
 * The source code for this program is not published or otherwise divested of
 * its trade secrets, irrespective of what has been deposited with the U.S.
 * Copyright Office
 */

function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("dashboard-core/js/dashboard/nls/DashboardResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("dashboard-core/js/dashboard/nls/root/DashboardResources",{createDashboardTitle:"Create dashboard",dashboard:"Dashboard",dashboardTemplate:"Dashboard template",createAV:"Create",createAvEditNameLabel:"1. Name your view",createAvSelectTemplateLabel:"2. Select a template",tabLayoutLabel:"Tabbed template",infographicsLayoutLabel:"Infographic template",singlePageLayoutLabel:"Single page template",customLayoutLabel:"Custom template",freeformTemplate:"Freeform",freeformTemplateDesc:"Visualizations in a freeform layout appear exactly as you size and place them in the view, regardless of the screen size. In the other layouts, the size and position of visualizations adjust to fit into the screen.",NoTemplate:"Free form",Template1:"Blank",Template2:"Title 1 by 2",Template3:"2 over 1",Template4:"4 over 1",Template5:"Footer 1 by 2",Template6:"3 beside 1 over 1",Template7:"4 beside 3 over 1",Template8:"2 over 3 by 2",Template9:"2 by 2",Template10:"1 by 2 beside 2 by 2 over 1",Template11:"3 by 1 over 1 by 2",Template12:"2 over 1 beside 1 by 2",Template13:"One beside 1 by 2 beside 1 by 4",Template22:"1 over 2 by 2",Template14:"1 beside 1",Template15:"1 over 1 beside 1",Template16:"1 beside 1 over 1",Template17:"1 over 1 beside 1 over 1",Template18:"1 over 1 beside 1",Template19:"1 over 2 beside 1",Template20:"1 over 2 by 1",Template21:"1 over 1 over 2 by 1",Template23:"Blank with Dropzone",Infographics1:"Blank",Infographics2:"4 rows",Infographics3:"4 rows with headers",Infographics4:"2 by 4",Infographics5:"Large top display with 2 by 2",Infographics6:"2 by 4 with vertical gap",Infographics7:"2 by 4 staggered",Infographics8:"Tennis court",Infographics9:"3 by 4",Infographics10:"4 by 8",createAvDashboardLabel:"Layout",dashboard_template_save_success:"Your dashboard template has been saved.",dashboard_template_prefix:'Template: "%{name}"',dashboard_template_filters_removed:"Filters on the canvas have been removed.",createAvTabLabel:"Tabbed",createAvInfographicsLabel:"Infographic",createAvSinglepageLabel:"Single Page",createAvCustomLabel:"Custom",loadMoreLabel:"Load more...",backLabel:"Go back",addSourceLabel:"Add a source",pinLabel:"Pin",errorLoadingDataSetMetaData:"An error occurred while reading the metadata",errorLoadingDataSets:"An error occurred while loading the list of data sets",errorLoadingDataSet:'The metadata for data set "%{datasetName}" did not load. Please contact your administrator for details.',okButton:"OK",createButton:"Create",cancelButton:"Cancel",copyButton:"Copy",selectTemplateLabel:"Select a template",createBoardTitle:"Create a dashboard",createBoardSubtitle:"Select a template for your dashboard",noSourcesSelectedLabel:"No sources selected",find_label:"Find",noDashboardFound:"The dashboard cannot be retrieved. Either it no longer exists or you don't have sufficient privileges to view it.",errorLabel:"Error",defaultName:"New dashboard",noDashboardCapability:"You do not have the capability to run the dashboard application",noCapabilityForCreateDashboard:"You do not have the required capability to create a dashboard against the selected assets",noCapabilityForEdit:"You do not have the capability to edit this dashboard",noCapabilityForSave:"You do not have the capability to save this dashboard",noCapabilityForPaste:"You do not have the capability to paste copied widgets in this view",noCapabilityForPin:"You do not have the capability to add this pin",noCapabilityForLaunchInExplore:"You do not have the capability to launch copied widgets in an exploration",noDashboardPermission:"You do not have sufficient privileges to view this dashboard",sourceNotFound:"We can't load the visualization, because its associated source \"%{sourceName}\" isn't available",cmDuplicateName:"An item with this name already exists. Try another name",cmEmptySelection:"The dashboard has been deleted. Try to save as a new dashboard.",propTheme_v1:"Visual theme",propTheme:"Theme",legacyThemeLabel:"Legacy",carbonGrey10Label:"Carbon X Light",carbonGrey100Label:"Carbon X Dark",titleTextLabel:"Title",titleSmallTextLabel:"Title Small",subtitleTextLabel:"Subtitle",bodyTextLabel:"Body",bodySmallTextLabel:"Body Small",captionTextLabel:"Caption",quoteTextLabel:"Quote",quoteSmallTextLabel:"Quote Small",responsiveTextLabel:"Auto-size",mediaWidgetLabel:"Media",webpageWidgetLabel:"Webpage",imageWidgetLabel:"Image",textWidgetLabel:"Text",notebookWidgetLabel:"Notebook",multipurposeWidgetLabel:"Multipurpose",textPlaceHolder:"Click to edit text",titlePlaceHolder:"Click to edit title",toggleEditModeLabel:"Switch to edit",togglePreviewModeLabel:"Switch to preview",editDashboardCoachMarkTitle:"Edit dashboard",editDashboardCoachMarkContents:"Click the pencil icon to edit this dashboard.",addDataCoachMarkTitle:"Add data",addDataDashboardCoachMarkContents:"Drag and drop data from the data panel onto your dashboard.",pageSelectWarning:"Please select a tab.",screenshot_label:"Dashboard %{title}",screenshot_label_tab:"Tab %{tabName} of dashboard %{title}",dataAssetPropertiesLabel:"Visualization properties",modelFilter:"Filter",invertSelectionToolTip:"Invert filter selections",clearFilterValueToolTip:"Clear filter values",invertFilterSelection:"Invert",clearTextFilterValue:"Clear",filterConditionLabel:"Filter condition",applyFilter:"Apply filter",itemCountText:"%{itemCount} Item(s) selected",itemExcludeCountText:"%{itemCount} Item(s) excluded",moreMembers:"Show more...",searchHierarchyMembers:"Use search to find members...",propHideEmpty:"Hide empty",propColorOrder:"Color order",propElementColor:"Visualization element color",propLineColor:"Line color",propLineAndSymbolColor:"Line and symbol color",propColumnColor:"Column color",propBarColor:"Bar color",propWordColor:"Word color",propAreaColor:"Area color",propRadialbarColor:"Radial bar color",propColorPalettes:"Color palettes",propDashboardColorPalette:"Current dashboard palette",propNewDashboardPaletteLabel:"Create a custom dashboard palette",propDashboardChangePaletteLink:"Change dashboard palette",propHideLeafNode:"Hide Lead Labels",propOpacity_v1:"Widget opacity",propOpacity:"Widget opacity (%)",propOpacityDescription:"Make the object more or less opaque. Type in a value between 0 and 100",addATab:"Add a new tab",propFredIsRed:"Color consistency",areaChartCaption:"Area",areaChartDataSlot_categoriesLabel:"Axis label",areaChartDataSlot_valuesLabel:"Value",areaChartProp_colorPaletteLabel:"Color palettes",areaChartProp_lineColorLabel:"Area color",areaChartProp_interpolationLabel:"Smooth lines",areaChartProp_interpolationDescription:"Lines connecting the data points are curved.",areaChartProp_hideGridLinesLabel:"Hide grid lines",areaChartProp_hideGridLinesDescription:"Hide grid lines",areaChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",areaChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",areaChartProp_maintainAxisScalesLabel:"Maintain axis scale",areaChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",areaChartProp_suppressZerosLabel:"Hide empty",areaChartProp_suppressZerosDescription:"Hide categories with no associated values.",barChartCaption:"Bar",barChartDataSlot_categoriesLabel:"Axis label",barChartDataSlot_valuesLabel:"Value",barChartProp_colorPaletteLabel:"Color palettes",barChartProp_elementColorLabel:"Bar color",barChartProp_hideGridLinesLabel:"Hide grid lines",barChartProp_hideGridLinesDescription:"Hide grid lines",barChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",barChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",barChartProp_maintainAxisScalesLabel:"Maintain axis scale",barChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",barChartProp_suppressZerosLabel:"Hide empty",barChartProp_suppressZerosDescription:"Hide categories with no associated values.",columnChartCaption:"Column",columnChartDataSlot_categoriesLabel:"Axis label",columnChartDataSlot_valuesLabel:"Value",columnChartProp_colorPaletteLabel:"Color palettes",columnChartProp_elementColorLabel:"Column color",columnChartProp_hideGridLinesLabel:"Hide grid lines",columnChartProp_hideGridLinesDescription:"Hide grid lines",columnChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",columnChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",columnChartProp_maintainAxisScalesLabel:"Maintain axis scale",columnChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",columnChartProp_suppressZerosLabel:"Hide empty",columnChartProp_suppressZerosDescription:"Hide categories with no associated values.",bubbleChartCaption:"Bubble",bubbleChartDataSlot_xAxisLabel:"Horizontal axis",bubbleChartDataSlot_yAxisLabel:"Vertical axis",bubbleChartDataSlot_sizeLabel:"Size by",bubbleChartDataSlot_colorLabel:"Color by",bubbleChartProp_colorPaletteLabel:"Color palettes",bubbleChartProp_hideGridLinesLabel:"Hide grid lines",bubbleChartProp_hideGridLinesDescription:"Hide grid lines",bubbleChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",bubbleChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",bubbleChartProp_maintainAxisScalesLabel:"Maintain axis scale",bubbleChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",bubbleChartProp_hideLegendLabel:"Hide legend",bubbleChartProp_hideLegendDescription:"Hide the legend.",bubbleChartProp_legendPositionLabel:"Legend position",lineChartCaption:"Line",lineChartDataSlot_categoriesLabel:"Axis label",lineChartDataSlot_valuesLabel:"Value",lineChartProp_colorPaletteLabel:"Color palettes",lineChartProp_lineColorLabel:"Line and symbol color",lineChartProp_symbolShapeLabel:"Symbol shape",lineChartProp_hideSymbolsLabel:"Hide Symbols",lineChartProp_hideSymbolsDescription:"Hide symbols",lineChartProp_hideDataLinesLabel:"Hide line(s)",lineChartProp_hideDataLinesDescription:"Hide line(s)",lineChartProp_interpolationLabel:"Smooth lines",lineChartProp_interpolationDescription:"Lines connecting the data points are curved.",lineChartProp_hideGridLinesLabel:"Hide grid lines",lineChartProp_hideGridLinesDescription:"Hide grid lines",lineChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",lineChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",lineChartProp_maintainAxisScalesLabel:"Maintain axis scale",lineChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",lineChartProp_suppressZerosLabel:"Hide empty",lineChartProp_suppressZerosDescription:"Hide categories with no associated values.",packedBubbleChart1CatCaption:"Packed bubble",packedBubbleChart1CatDataSlot_categoriesLabel:"Categories",packedBubbleChart1CatDataSlot_sizeLabel:"Size by",packedBubbleChart1CatProp_colorPaletteLabel:"Color palettes",packedBubbleChart1CatProp_elementColorLabel:"Bubble color",packedBubbleChart1CatProp_hideLabelLabel:"Hide label",packedBubbleChart1CatProp_hideValueLabel:"Hide value",packedBubbleChart1CatProp_maintainAxisScalesLabel:"Maintain axis scale",packedBubbleChart1CatProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",packedBubbleChart1CatProp_suppressZerosLabel:"Hide empty",packedBubbleChart1CatProp_suppressZerosDescription:"Hide categories with no associated values.",heatChartCaption:"Heat",heatChartDataSlot_valuesLabel:"Heat by",heatChartDataSlot_xAxisLabel:"Horizontal axis",heatChartDataSlot_yAxisLabel:"Vertical axis",heatChartProp_colorPaletteLabel:"Color palettes",heatChartProp_heatScalePaletteLabel:"Color order",heatChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",heatChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",heatChartProp_maintainAxisScalesLabel:"Maintain axis scale",heatChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",heatChartProp_suppressZerosLabel:"Hide empty",heatChartProp_suppressZerosDescription:"Hide categories with no associated values.",heatChartProp_hideLegendLabel:"Hide legend",heatChartProp_hideLegendDescription:"Hide the legend.",heatChartProp_legendPositionLabel:"Legend position",pieChartCaption:"Pie",pieChartDataSlot_categoriesLabel:"Categories",pieChartDataSlot_valuesLabel:"Value",pieChartProp_colorPaletteLabel:"Color palettes",pieChartProp_hideRadialValueLabel:"Hide value",pieChartProp_pieAsDonutLabel:"Display as donut chart",pieChartProp_pieAsDonutDescription:"Display as donut chart",pieChartProp_suppressZerosLabel:"Hide empty",pieChartProp_suppressZerosDescription:"Hide categories with no associated values.",pieChartProp_hideLegendLabel:"Hide legend",pieChartProp_hideLegendDescription:"Hide the legend.",pieChartProp_legendPositionLabel:"Legend position",map1measureCaption:"Map",map1measureDataSlot_categoriesLabel:"Regions",map1measureDataSlot_valuesLabel:"Region heat",map1measureProp_colorPaletteLabel:"Color palettes",map1measureProp_heatScalePaletteLabel:"Color order",map1measureProp_maintainAxisScalesLabel:"Maintain axis scale",map1measureProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",map1measureProp_suppressZerosLabel:"Hide empty",map1measureProp_suppressZerosDescription:"Hide categories with no associated values.",map1measureProp_hideLegendLabel:"Hide legend",map1measureProp_hideLegendDescription:"Hide the legend.",map1measureProp_legendPositionLabel:"Legend position",radialChartCaption:"Radial",radialChartDataSlot_categoriesLabel:"Categories",radialChartDataSlot_valuesLabel:"Value",radialChartProp_colorPaletteLabel:"Color palettes",radialChartProp_elementColorLabel:"Radial bar color",radialChartProp_hideRadialTitleLabel:"Hide title",radialChartProp_hideRadialValueLabel:"Hide value",radialChartProp_maintainAxisScalesLabel:"Maintain axis scale",radialChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",radialChartProp_suppressZerosLabel:"Hide empty",radialChartProp_suppressZerosDescription:"Hide categories with no associated values.",pointChart1catCaption:"Point",pointChart1catDataSlot_valuesLabel:"Value",pointChart1catDataSlot_categoriesLabel:"Axis label",pointChart1catProp_colorPaletteLabel:"Color palettes",pointChart1catProp_elementColorLabel:"Shape color",pointChart1catProp_symbolShapeLabel:"Symbol shape",pointChart1catProp_symbolFillLabel:"Fill shape",pointChart1catProp_symbolFillDescription:"Display fill color for the symbols.",pointChart1catProp_hideGridLinesLabel:"Hide grid lines",pointChart1catProp_hideGridLinesDescription:"Hide grid lines",pointChart1catProp_hideAxisTitleLabelsLabel:"Hide axis title labels",pointChart1catProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",pointChart1catProp_maintainAxisScalesLabel:"Maintain axis scale",pointChart1catProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",pointChart1catProp_suppressZerosLabel:"Hide empty",pointChart1catProp_suppressZerosDescription:"Hide categories with no associated values.",scatterPlotChartNoCatCaption:"Scatter plot",scatterPlotChartNoCatDataSlot_xAxisLabel:"Horizontal axis",scatterPlotChartNoCatDataSlot_yAxisLabel:"Vertical axis",scatterPlotChartNoCatProp_colorPaletteLabel:"Color palettes",scatterPlotChartNoCatProp_elementColorLabel:"Element color",scatterPlotChartNoCatProp_symbolShapeLabel:"Symbol shape",scatterPlotChartNoCatProp_symbolFillLabel:"Fill shape",scatterPlotChartNoCatProp_symbolFillDescription:"Display fill color for the symbols.",scatterPlotChartNoCatProp_hideGridLinesLabel:"Hide grid lines",scatterPlotChartNoCatProp_hideGridLinesDescription:"Hide grid lines",scatterPlotChartNoCatProp_hideAxisTitleLabelsLabel:"Hide axis title labels",scatterPlotChartNoCatProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",radialBarChartCaption:"Radial bar",radialBarChartDataSlot_categoriesLabel:"Categories",radialBarChartDataSlot_valuesLabel:"Value",radialBarChartProp_colorPaletteLabel:"Color palettes",radialBarChartProp_elementColorLabel:"Radial bar color",radialBarChartProp_hideRadialTitleLabel:"Hide title",radialBarChartProp_maintainAxisScalesLabel:"Maintain axis scale",radialBarChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",radialBarChartProp_suppressZerosLabel:"Hide empty",radialBarChartProp_suppressZerosDescription:"Hide categories with no associated values.",lineColumnComboChartCaption:"Line and column",lineColumnComboChartDataSlot_categoryLabel:"Axis label",lineColumnComboChartDataSlot_lineValueLabel:"Line value",lineColumnComboChartDataSlot_columnValueLabel:"Column value",lineColumnComboChartProp_colorPaletteLabel:"Color palettes",lineColumnComboChartProp_elementColorLabel:"Column color",lineColumnComboChartProp_lineColorLabel:"Line and symbol color",lineColumnComboChartProp_symbolShapeLabel:"Symbol shape",lineColumnComboChartProp_hideSymbolsLabel:"Hide symbols",lineColumnComboChartProp_hideSymbolsDescription:"Hide symbols",lineColumnComboChartProp_hideDataLinesLabel:"Hide line(s)",lineColumnComboChartProp_hideDataLinesDescription:"Hide line(s)",lineColumnComboChartProp_interpolationLabel:"Smooth lines",lineColumnComboChartProp_interpolationDescription:"Lines connecting the data points are curved.",lineColumnComboChartProp_hideGridLinesLabel:"Hide grid lines",lineColumnComboChartProp_hideGridLinesDescription:"Hide grid lines",lineColumnComboChartProp_hideAxisTitleLabelsLabel:"Hide axis title labels",lineColumnComboChartProp_hideAxisTitleLabelsDescription:"Hide the titles for the axes.",lineColumnComboChartProp_maintainAxisScalesLabel:"Maintain axis scale",lineColumnComboChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",lineColumnComboChartProp_suppressZerosLabel:"Hide empty",lineColumnComboChartProp_suppressZerosDescription:"Hide categories with no associated values.",lineColumnComboChartProp_hideLegendLabel:"Hide legend",lineColumnComboChartProp_hideLegendDescription:"Hide the legend.",lineColumnComboChartProp_legendPositionLabel:"Legend position",summaryCaption:"Summary",areaName:"Area",areaDescription:"Area",areaDataSlot_colorLabel:"Color by",areaDataSlot_valuesLabel:"Value",areaDataSlot_categoriesLabel:"Axis label",bubbleName:"Bubble",bubbleDescription:"Bubble",bubbleDataSlot_yAxisLabel:"Vertical axis",bubbleDataSlot_xAxisLabel:"Horizontal axis",bubbleDataSlot_sizeLabel:"Size by",bubbleDataSlot_colorLabel:"Color by",clusterBarName:"Bar",clusterBarDescription:"Bar",clusterBarDataSlot_colorLabel:"Color by",clusterBarDataSlot_valuesLabel:"Value",clusterBarDataSlot_categoriesLabel:"Axis label",clusterBarDataSlot_valuesRepeatingLabel:"Value",clusterColumnName:"Column",clusterColumnDescription:"Column",clusterColumnDataSlot_colorLabel:"Color by",clusterColumnDataSlot_valuesLabel:"Value",clusterColumnDataSlot_categoriesLabel:"Axis label",clusterColumnDataSlot_valuesRepeatingLabel:"Value",clusterLineName:"Line",clusterLineDescription:"Line",clusterLineDataSlot_colorLabel:"Color by",clusterLineDataSlot_valuesLabel:"Vertical axis",clusterLineDataSlot_categoriesLabel:"Horizontal axis",clusterLineDataSlot_valuesRepeatingLabel:"Value",gridName:"Grid",gridDescription:"Grid",gridDataSlot_grid_colsLabel:"Column",heatName:"Heat",heatDescription:"Heat",heatDataSlot_yAxisLabel:"Vertical axis",heatDataSlot_xAxisLabel:"Horizontal axis",heatDataSlot_valuesLabel:"Heat by",lineColumnComboName:"Line and column",lineColumnComboDescription:"Line and column",lineColumnComboDataSlot_lineValueLabel:"Line value",lineColumnComboDataSlot_categoryLabel:"Axis label",lineColumnComboDataSlot_columnValueLabel:"Column value",mapName:"Legacy Map",mapDescription:"Legacy Map",mapDataSlot_sizeLabel:"Point size",mapDataSlot_valuesLabel:"Region heat",mapDataSlot_sizeHeatLabel:"Point heat",mapDataSlot_categoriesLabel:"Regions",packedBubbleName:"Packed bubble",packedBubbleDescription:"Packed bubble",packedBubbleDataSlot_sizeLabel:"Size by",packedBubbleDataSlot_colorLabel:"Color by",packedBubbleDataSlot_categoriesLabel:"Categories",pieName:"Pie",pieDescription:"Pie",pieDataSlot_valuesLabel:"Value",pieDataSlot_categoriesLabel:"Categories",playerName:"Data player",playerDescription:"Data player",playerDataSlot_categoriesLabel:"Axis label",pointName:"Point",pointDescription:"Point",pointDataSlot_colorLabel:"Color by",pointDataSlot_valuesLabel:"Value",pointDataSlot_categoriesLabel:"Axis label",radialName:"Radial",radialDescription:"Radial",radialDataSlot_valuesLabel:"Value",radialDataSlot_maxSizeLabel:"Maximum value",radialDataSlot_categoriesLabel:"Categories",radialBarName:"Radial bar",radialBarDescription:"Radial bar",radialBarDataSlot_valuesLabel:"Value",radialBarDataSlot_categoriesLabel:"Categories",scatterPlotName:"Scatter plot",scatterPlotDescription:"Scatter plot",scatterPlotDataSlot_yAxisLabel:"Vertical axis",scatterPlotDataSlot_xAxisLabel:"Horizontal axis",scatterPlotDataSlot_colorLabel:"Color by",scatterPlotDataSlot_categoriesLabel:"Points",stackedBarName:"Stack bar",stackedBarDescription:"Stack bar",stackedBarDataSlot_colorLabel:"Color by",stackedBarDataSlot_valuesLabel:"Value",stackedBarDataSlot_categoriesLabel:"Axis label",stackedBarDataSlot_valuesRepeatingLabel:"Value",stackedColumnName:"Stack column",stackedColumnDescription:"Stack column",stackedColumnDataSlot_colorLabel:"Color by",stackedColumnDataSlot_valuesLabel:"Value",stackedColumnDataSlot_categoriesLabel:"Axis label",stackedColumnDataSlot_valuesRepeatingLabel:"Value",summaryChartName:"Summary",summaryChartDescription:"Summary",summaryChartDataSlot_valuesLabel:"Value",treeMapName:"Tree map",treeMapDescription:"Tree map",treeMapDataSlot_colorLabel:"Heat by",treeMapDataSlot_valuesLabel:"Size by",treeMapDataSlot_categoriesLabel:"Level one",treeMapDataSlot_level3Label:"Level three",treeMapDataSlot_level2Label:"Level two",wordCloudName:"Word cloud",wordCloudDescription:"Word cloud",wordCloudDataSlot_colorLabel:"Color by",wordCloudDataSlot_scaleLabel:"Size by",wordCloudDataSlot_wordLabel:"Words",treeMap1Cat1MeasureChartCaption:"Tree map",treeMap1Cat1MeasureChartDataSlot_categoriesLabel:"Level one",treeMap1Cat1MeasureChartDataSlot_valuesLabel:"Size by",treeMap1Cat1MeasureChartProp_colorPaletteLabel:"Color palettes",treeMap1Cat2MeasureChartProp_colorPaletteLabel:"Color palettes",treeMap2Cat1MeasureChartProp_colorPaletteLabel:"Color palettes",treeMap2Cat2MeasureChartProp_colorPaletteLabel:"Color palettes",treeMap3Cat1MeasureChartProp_colorPaletteLabel:"Color palettes",treeMap3Cat2MeasureChartProp_colorPaletteLabel:"Color palettes",treeMap1Cat1MeasureChartProp_maintainAxisScalesLabel:"Maintain axis scale",treeMap1Cat1MeasureChartProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",treeMap1Cat1MeasureChartProp_suppressZerosLabel:"Hide empty",treeMap1Cat1MeasureChartProp_suppressZerosDescription:"Hide categories with no associated values.",treeMap1Cat1MeasureChartProp_hideLegendLabel:"Hide legend",treeMap1Cat1MeasureChartProp_hideLegendDescription:"Hide the legend.",treeMap1Cat1MeasureChartProp_legendPositionLabel:"Legend position",wordChart1Cat1MeasureCaption:"Word cloud",wordChart1Cat1MeasureDataSlot_wordLabel:"Words",wordChart1Cat1MeasureDataSlot_scaleLabel:"Size by",wordChart1Cat1MeasureProp_colorPaletteLabel:"Color palettes",wordChart1Cat1MeasureProp_elementColorLabel:"Word color",wordChart1Cat1MeasureProp_maintainAxisScalesLabel:"Maintain axis scale",wordChart1Cat1MeasureProp_maintainAxisScalesDescription:"Always display the minimum and maximum values on the axes.",wordChart1Cat1MeasureProp_suppressZerosLabel:"Hide empty",wordChart1Cat1MeasureProp_suppressZerosDescription:"Hide categories with no associated values.",missingDataSetData:"The data for this data set is not available. Refresh the data set or contact your administrator for access to the source.",hideShowSummaries:"Hide show summaries",crosstabName:"Crosstab",value_is_not_available:"N/A",swapRowsAndColumns:"Swap rows and columns",NoPinsCollected:"No pinned visualizations",pinSearchOld:"Search my pins",pinDeletedToast:"Pin was removed",pinAddedToast:"Pin was successfully added to My pins",pinRetrieveError:"We can't retrieve one or more pins. Try again later.",pinErrorTitle:"Pinning Error",renamePinTooltip:"Enter a name...",renamePinInvalidText:"This field is required.",pinRemove:"Remove",deletePin:"Delete the pin",renamePin:"Rename",cancelRenamePin:"Cancel",confirmRenamePin:"Done",dataset_time:"time",dataset_date:"date",dataset_location:"location",dataset_number:"number",dataset_text:"text",widgetConditionalFormatLabel:"Toggle conditional format controls",deletePinConfirmationMessage:"Are you sure you want to delete this pin? This cannot be undone.",deletePinConfirm:"Confirm delete",pinDeleteError:"We can't delete one or more pins. Try again later.",metadataPickerTitle:"Create Data Set",moreTitle:"More",remove_slider_handle:"Remove handle",missingFiltering:"Column missing:",unSupportedPromptType:"The prompt scenario is not currently supported.",preAggregateLabel:"Apply prompt values from the data source",postAggregateLabel:"Apply prompt values in the report",preAggregateText:"The range uses the values in the data source, not the values displayed in the dashboard.",tabName_general:"General",tabName_visDetails:"Details",tabName_textDetails:"Text details",tabName_mediaDetails:"Media details",tabName_webDetails:"Web page details",tabName_imageDetails:"Image details",tabName_visualization:"Visualization",sectionName_canvas:"Canvas",sectionName_colorsAndThemes_v1:"Color and theme",sectionName_colorsAndThemes:"Theme & background",colorsAndThemes_legacyWarning:"The current dashboard is using a theme from an earlier release. Changing the theme and saving the dashboard permanently removes access to the earlier theme palettes.",sectionName_details:"Details",sectionName_positionAndStyle:"Position & style",sectionName_appearance:"Appearance",sectionName_advanced:"Advanced",sectionName_layout:"Layout",sectionName_tabs:"Tab labels",sectionName_tabTitle:"Label",sectionName_tabBackground:"Background",addDataSourceDialogTitle:"Add a data source",addDataSourceDialogButtonLabel:"Add",shapesDoubleChevron:"Double chevron",widgetsPanelTitle:"Widgets",widgetsPanelBasicsTab:"Basics",widgetsPanelImageLibraryTab:"Images",widgetsPanelSectionStandard:"Standard",widgetsPanelSectionAdvanced:"Advanced",widgetsPanelSectionShapes:"Shapes",customWidgetsTitle:"Custom widgets",filterItemCanvasMove:"Add to canvas",filterOverflowMenu_Global:"All tabs overflow menu",filterOverflowMenu_Tab:"This tab overflow menu",filterOverflowMenu_Item:"Filter overflow menu",filterOverflowMenu_Single:"Overflow menu",filterItemEdit:"Edit filter values",filterDeleteAllItems:"Delete all filters",filterClearAllItems:"Clear all filters",filterClearSelection:"Clear filter",filterPlayerMode:"Show player",filterStaticMode:"Show list",filterInvertSelection:"Invert filter",filterIconLabel_Global:"All tabs",filterIconLabel_Single:"Filters",filterIconLabel_Tab:"This tab",filterIconTooltip_Global:"All tabs",filterIconTooltip_Tab:"This tab",filterIconTooltip_Single:"Filters",filterItemDelete:"Delete filter",filterValueSeparator:",",filterRange:"%{from}-%{to}",filterInvertRange:"everything except: %{from}-%{to}",filterExcept:"except %{values}",filterAll:"All",filterBlank:"(blank)",filterDisableRangeInvert:'Unavailable when this column is in "All tabs" filter.',filterDisableHierarchyInvert:"Unavailable when this column is a hierarchy filter.",filterSelectedOfTotal:"%{selected} of %{totalMembers}",filter_date_before:"Before %{to}",filter_date_before_except:"Not before %{to}",filter_date_after:"After %{from}",filter_date_after_except:"Not after %{from}",filter_date_between:"Between %{from}-%{to}",filter_date_between_except:"Not between %{from}-%{to}",filter_drag_and_drop_all_tabs:"Drag and drop data here to filter all tabs.",filter_drag_and_drop_current_tab:"Drag and drop data here to filter this tab.",filter_drag_and_drop_single_dock:"Drag and drop data here to filter.",errMsgFilterItemGenericTitle:"Filter values can't be loaded",widgetChromeRotate:"Rotate",toolbarRegionLabel:"Toolbar",toolbarActionDelete:"Delete",toolbarActionGroup:"Group",toolbarActionUngroup:"Ungroup",toolbarActionOrderToFront:"Send to front",toolbarActionOrderToBack:"Send to back",toolbarActionEditTitle:"Edit the title",toolbarActionWrapTitle:"Wrap the title",toolbarActionPin:"Collect",toolbarActionPinOld:"Pin",toolbarActionAlign:"Align",alignWidgetLeft:"Left",alignWidgetCenter:"Center",alignWidgetRight:"Right",alignWidgetTop:"Top",alignWidgetMiddle:"Middle",alignWidgetBottom:"Bottom",distributeWidgetsVertical:"Distribute vertically",distributeWidgetsHoriz:"Distribute horizontally",toolbarChangeVisualization:"Change visualization",multipurposeHeader:"Select a widget type",multipurposePlaceholderText:"Select one of the widgets to get started.",live_label:"Chart",filter_label:"Filter",one_named_live:"%{name} chart",one_named_live_numbered:"%{name} chart (%{number})",one_unknown_live:"Chart",one_unknown_live_numbered:"Chart (%{number})",few_live:"Group of %{count} charts",many_live:"Group of %{count} charts",one_custom:"Custom widget",one_custom_named:"%{name}",one_custom_named_numbered:"%{name} (%{number})",one_named_filter:"%{name} filter",one_named_filter_numbered:"%{name} filter (%{number})",one_unknown_filter:"Filter",one_unknown_filter_numbered:"Filter (%{number})",few_filter:"Group of %{count} filters",many_filter:"Group of %{count} filters",LIVE_bar_has_mapping:"%{values} bar chart",LIVE_bar_has_mapping_numbered:"%{values} bar chart (%{number})",LIVE_bar_opt_mapping:"%{categories} by %{values} bar chart",LIVE_bar_opt_mapping_numbered:"%{categories} by %{values} bar chart (%{number})",LIVE_bar_no_mapping:"Empty bar chart",LIVE_bar_no_mapping_numbered:"Empty bar chart (%{number})",LIVE_bar_named:"%{name} bar chart",LIVE_bar_named_numbered:"%{name} bar chart (%{number})",LIVE_stacked_bar_has_mapping:"%{values} stacked bar chart",LIVE_stacked_bar_has_mapping_numbered:"%{values} stacked bar chart (%{number})",LIVE_stacked_bar_opt_mapping:"%{categories} by %{values} stacked bar chart",LIVE_stacked_bar_opt_mapping_numbered:"%{categories} by %{values} stacked bar chart (%{number})",LIVE_stacked_bar_no_mapping:"Empty stacked bar chart",LIVE_stacked_bar_no_mapping_numbered:"Empty stacked bar chart (%{number})",LIVE_stacked_bar_named:"%{name} stacked bar chart",LIVE_stacked_bar_named_numbered:"%{name} stacked bar chart (%{number})",LIVE_bubble_has_mapping:"%{categories} by %{x} and %{y} bubble chart",LIVE_bubble_has_mapping_numbered:"%{categories} by %{x} and %{y} bubble chart (%{number})",LIVE_bubble_no_mapping:"Empty bubble chart",LIVE_bubble_no_mapping_numbered:"Empty bubble chart (%{number})",LIVE_bubble_named:"%{name} bubble chart",LIVE_bubble_named_numbered:"%{name} bubble chart (%{number})",LIVE_composite_has_mapping:"%{categories} by %{columnValue} and %{lineValue} composite chart",LIVE_composite_has_mapping_numbered:"%{categories} by %{columnValue} and %{lineValue} composite chart (%{number})",LIVE_composite_no_mapping:"Empty composite chart",LIVE_composite_no_mapping_numbered:"Empty composite chart (%{number})",LIVE_composite_named:"%{name} composite chart",LIVE_composite_named_numbered:"%{name} composite chart (%{number})",LIVE_decision_tree_has_mapping:"%{values} decision tree",LIVE_decision_tree_has_mapping_numbered:"%{values} decision tree (%{number})",LIVE_decision_tree_no_mapping:"Empty decision tree",LIVE_decision_tree_no_mapping_numbered:"Empty decision tree (%{number})",LIVE_decision_tree_named:"%{name} decision tree",LIVE_decision_tree_named_numbered:"%{name} decision tree (%{number})",LIVE_packed_bubble_has_mapping:"%{categories} packed bubble chart",LIVE_packed_bubble_has_mapping_numbered:"%{categories} packed bubble chart (%{number})",LIVE_packed_bubble_no_mapping:"Empty packed bubble chart",LIVE_packed_bubble_no_mapping_numbered:"Empty packed bubble chart (%{number})",LIVE_packed_bubble_named:"%{name} packed bubble chart",LIVE_packed_bubble_named_numbered:"%{name} packed bubble chart (%{number})",LIVE_pie_has_mapping:"%{categories} by %{values} pie chart",LIVE_pie_has_mapping_numbered:"%{categories} by %{values} pie chart (%{number})",LIVE_pie_no_mapping:"Empty pie chart",LIVE_pie_no_mapping_numbered:"Empty pie chart (%{number})",LIVE_pie_named:"%{name} pie chart",LIVE_pie_named_numbered:"%{name} pie chart (%{number})",LIVE_pie_as_donut_has_mapping:"%{categories} by %{values} donut chart",LIVE_pie_as_donut_has_mapping_numbered:"%{categories} by %{values} donut chart (%{number})",LIVE_pie_as_donut_no_mapping:"Empty donut chart",LIVE_pie_as_donut_no_mapping_numbered:"Empty donut chart (%{number})",LIVE_pie_as_donut_named:"%{name} donut chart",LIVE_pie_as_donut_named_numbered:"%{name} donut chart (%{number})",LIVE_line_has_mapping:"%{categories} by %{values} line chart",LIVE_line_has_mapping_numbered:"%{categories} by %{values} line chart (%{number})",LIVE_line_no_mapping:"Empty line chart",LIVE_line_no_mapping_numbered:"Empty line chart (%{number})",LIVE_line_named:"%{name} line chart",LIVE_line_named_numbered:"%{name} line chart (%{number})",LIVE_area_has_mapping:"%{categories} by %{values} area chart",LIVE_area_has_mapping_numbered:"%{categories} by %{values} area chart (%{number})",LIVE_area_no_mapping:"Empty area chart",LIVE_area_no_mapping_numbered:"Empty area chart (%{number})",LIVE_area_named:"%{name} area chart",LIVE_area_named_numbered:"%{name} area chart (%{number})",LIVE_area_as_stacked_percent_has_mapping:"%{categories} by %{values} stacked percent area chart",LIVE_area_as_stacked_percent_has_mapping_numbered:"%{categories} by %{values} stacked percent area chart (%{number})",LIVE_area_as_stacked_percent_no_mapping:"Empty stacked percent area chart",LIVE_area_as_stacked_percent_no_mapping_numbered:"Empty stacked percent area chart (%{number})",LIVE_area_as_stacked_percent_named:"%{name} stacked percent area chart",LIVE_area_as_stacked_percent_named_numbered:"%{name} stacked percent area chart (%{number})",LIVE_heatmap_has_mapping:"%{color} heat map",LIVE_heatmap_has_mapping_numbered:"%{color} heat map (%{number})",LIVE_heatmap_no_mapping:"Empty heat map",LIVE_heatmap_no_mapping_numbered:"Empty heat map (%{number})",LIVE_heatmap_named:"%{name} heat map",LIVE_heatmap_named_numbered:"%{name} heat map (%{number})",LIVE_network_opt_mapping:"%{categories} by %{series} and %{values} network",LIVE_network_opt_mapping_numbered:"%{categories} by %{series} and %{values} network (%{number})",LIVE_network_has_mapping:"%{categories} by %{series} network",LIVE_network_has_mapping_numbered:"%{categories} by %{series} network (%{number})",LIVE_network_no_mapping:"Empty network",LIVE_network_no_mapping_numbered:"Empty network (%{number})",LIVE_network_named:"%{name} network",LIVE_network_named_numbered:"%{name} network (%{number})",LIVE_radial_bar_opt_mapping:"%{categories} by %{values} radial bar chart",LIVE_radial_bar_opt_mapping_numbered:"%{categories} by %{values} radial bar chart (%{number})",LIVE_radial_bar_has_mapping:"%{values} radial bar chart",LIVE_radial_bar_has_mapping_numbered:"%{values} radial bar chart (%{number})",LIVE_radial_bar_no_mapping:"Empty radial bar chart",LIVE_radial_bar_no_mapping_numbered:"Empty radial bar chart (%{number})",LIVE_radial_bar_named:"%{name} radial bar chart",LIVE_radial_bar_named_numbered:"%{name} radial bar chart (%{number})",LIVE_spiral_has_mapping:"%{values} spiral chart",LIVE_spiral_has_mapping_numbered:"%{values} spiral chart (%{number})",LIVE_spiral_no_mapping:"Empty spiral chart",LIVE_spiral_no_mapping_numbered:"Empty spiral chart (%{number})",LIVE_spiral_named:"%{name} spiral chart",LIVE_spiral_named_numbered:"%{name} spiral chart (%{number})",LIVE_treemap_has_mapping:"%{categories} by %{size} tree map",LIVE_treemap_has_mapping_numbered:"%{categories} by %{size} tree map (%{number})",LIVE_treemap_no_mapping:"Empty tree map",LIVE_treemap_no_mapping_numbered:"Empty tree map (%{number})",LIVE_treemap_named:"%{name} tree map",LIVE_treemap_named_numbered:"%{name} tree map (%{number})",LIVE_wordcloud_has_mapping:"%{categories} word cloud",LIVE_wordcloud_has_mapping_numbered:"%{categories} word cloud (%{number})",LIVE_wordcloud_no_mapping:"Empty word cloud",LIVE_wordcloud_no_mapping_numbered:"Empty word cloud (%{number})",LIVE_wordcloud_named:"%{name} word cloud",LIVE_wordcloud_named_numbered:"%{name} word cloud (%{number})",LIVE_data_player_has_mapping:"%{category} data player",LIVE_data_player_has_mapping_numbered:"%{category} data player (%{number})",LIVE_data_player_no_mapping:"Empty data player",LIVE_data_player_no_mapping_numbered:"Empty data player (%{number})",LIVE_data_player_named:"%{name} data player",LIVE_data_player_named_numbered:"%{name} data player (%{number})",LIVE_map_has_mapping:"%{locations} map",LIVE_map_has_mapping_numbered:"%{locations} map (%{number})",LIVE_map_no_mapping:"Empty map",LIVE_map_no_mapping_numbered:"Empty map (%{number})",LIVE_map_named:"%{name} map",LIVE_map_named_numbered:"%{name} map (%{number})",LIVE_point_has_mapping:"%{categories} by %{values} point chart",LIVE_point_has_mapping_numbered:"%{categories} by %{values} point chart (%{number})",LIVE_point_no_mapping:"Empty point chart",LIVE_point_no_mapping_numbered:"Empty point chart (%{number})",LIVE_point_named:"%{name} point chart",LIVE_point_named_numbered:"%{name} point chart (%{number})",LIVE_column_has_mapping:"%{values} column chart",LIVE_column_has_mapping_numbered:"%{values} column chart (%{number})",LIVE_column_opt_mapping:"%{categories} by %{values} column chart",LIVE_column_opt_mapping_numbered:"%{categories} by %{values} column chart (%{number})",LIVE_column_no_mapping:"Empty column chart",LIVE_column_no_mapping_numbered:"Empty column chart (%{number})",LIVE_column_named:"%{name} column chart",LIVE_column_named_numbered:"%{name} column chart (%{number})",LIVE_stacked_column_has_mapping:"%{values} stacked column chart",LIVE_stacked_column_has_mapping_numbered:"%{values} stacked column chart (%{number})",LIVE_stacked_column_opt_mapping:"%{categories} by %{values} stacked column chart",LIVE_stacked_column_opt_mapping_numbered:"%{categories} by %{values} stacked column chart (%{number})",LIVE_stacked_column_no_mapping:"Empty stacked column chart",LIVE_stacked_column_no_mapping_numbered:"Empty stacked column chart (%{number})",LIVE_stacked_column_named:"%{name} stacked column chart",LIVE_stacked_column_named_numbered:"%{name} stacked column chart (%{number})",LIVE_scatter_opt_mapping:"%{categories} by %{x} and %{y} scatter plot",LIVE_scatter_opt_mapping_numbered:"%{categories} by %{x} and %{y} scatter plot (%{number})",LIVE_scatter_has_mapping:"%{x} vs %{y} scatter plot",LIVE_scatter_has_mapping_numbered:"%{x} vs %{y} scatter plot (%{number})",LIVE_scatter_no_mapping:"Empty scatter plot",LIVE_scatter_no_mapping_numbered:"Empty scatter plot (%{number})",LIVE_scatter_named:"%{name} scatter plot",LIVE_scatter_named_numbered:"%{name} scatter plot (%{number})",LIVE_waterfall_has_mapping:"%{values} waterfall chart",LIVE_waterfall_has_mapping_numbered:"%{values} waterfall chart (%{number})",LIVE_waterfall_no_mapping:"Empty waterfall chart",LIVE_waterfall_no_mapping_numbered:"Empty waterfall chart (%{number})",LIVE_waterfall_named:"%{name} waterfall chart",LIVE_waterfall_named_numbered:"%{name} waterfall chart (%{number})",LIVE_empty_visualization_hint_title:"Build your visualization",LIVE_empty_visualization_hint_description:"Drag and drop columns here or onto the slots to the left.",LIVE_slots_required_field_description:"%{asterisk} Indicates a required field",LIVE_slots_drag_and_drop_description:"Drag and drop data to the slots above to build and filter the visualization.",requiredField:"Required Field",fullScreenEnter:"Enter full screen",fullScreenClose:"Exit full screen",noExtraText_multipurpose:"Multipurpose placeholder",noExtraText_multipurpose_numbered:"Multipurpose placeholder (%{number})",one_placeholder_vis:"Visualization placeholder",one_placeholder_vis_numbered:"Visualization placeholder (%{number})",one_placeholder_text:"Text placeholder",one_placeholder_text_numbered:"Text placeholder (%{number})",few_placeholder_text:"Group of %{count} text placeholders",many_placeholder_text:"Group of %{count} text placeholders",filter_includesAll:"Includes all",timeline_filter_moved_to:"Time line filter %{id} moved to %{time}",timelineSettingsButton:"Playback options",autoPlay:"Play all scenes",loop:"Loop",noSceneTransitionLabel:"None",sceneTransitionPropertyLabel:"Scene transition",animatedPathSceneTransitionLabel:"Animated path",sweepSceneTransitionLabel:"Sweep",propAniAnimation:"Animation",propAniTypeEntrance:"Entrance animation",propAniDirectionIn:"Entrance direction",propAniTypeExit:"Exit animation",propAniDirectionOut:"Exit direction",propAniDirection:"Direction",timelineAnimationProperties:"Open animation properties",editStoryCoachMarkTitle:"Edit story",editStoryCoachMarkContents:"Click the pencil icon to edit this story.",addDataStoryCoachMarkContents:"Drag and drop data from the data panel onto your story.",expandSceneCoachmarkTitle:"Open timeline",expandSceneCoachmarkContents:"Animate a scene by adjusting object visibility based on time and duration.",overviewCoachmarkTitle:"Overview scenes",overviewCoachmarkContents:"Use the overview scenes at the start and end of your story to show the big picture of all the scenes. From an overview scene, click and drag a scene to swap it with another scene. You can show or hide the overview scenes in the story properties.",animatedPathCoachmarkTitle:"Animated path",animatedPathCoachmarkContents:"To animate an object from one scene to another, duplicate a scene with an object. Then, move, resize, or rotate the duplicated object on the new scene.",tabName_animation:"Animation",textWidgetIconPlaceholderText:"Click to add text",buildVisHeader:"Create a visualization",visIconPlaceholderText:"Drag and drop fields to build a visualization",launchNewExplore:"New exploration",addTo:"Add to",addToExisting:"Add to existing...",exploreData:"Explore",explore_remove_widget_styles:"Custom visualization properties such as color settings will not persist in your exploration.",editNotebook:"Edit Widget",thumbnails_error_fetching:"Error fetching thumbnails",copy:"%{count} asset(s) copied",specConvertErr:"An error occurred pasting or converting the dashboard specification",specCopyErr:"Error copying dashboard specification",pasteNotSupportedErr:"Pasting from a %{name} is not supported.",reportParam:"report",filterWidgetCopyWarn:"Filter visualization was not copied because Filters are not supported at this time.",upgradingDashboard:'Upgrading "%{name}" for %{version}...',upgradeComplete:"Upgrade complete",individualTabProperties:"Individual tab properties",propMasterTabStylesLabel_v1:"Global tab styling",propMasterTabStylesLabel:"All tabs styling",propTabPosition:"Tab position",propTabTitle:"Title",propTabBackgroundColor:"Fill color",propTabTextColor:"Title color",propTabSelectedBarColor:"Selected bar color",propTabRestoreDefaults:"Restore defaults",propIndividualTabStylesLabel:"Individual tab styling",propIndividualTabStylesAriaLabel:"Open individual tab styling properties",propTabIconPosition:"Icon position",propLeftTitle:"Left of title",propRightTitle:"Right of title",propTopTitle:"Above title",propBottomTitle:"Below title",propTabIconLabel:"Visual",propTabIcon:"Icon",propTabIconColor:"Icon color",no_icon:"Empty",announcement:"Announcement",api:"Api",archive:"Archive",asset:"Asset",attachment:"Attachment",audio:"Audio",bee:"Bee",blog:"Blog",bookmark:"Bookmark",calendar:"Calendar",camera:"Camera",capability:"Capability",catalog:"Catalog",chat_message:"Chat message",checkout_cart:"Checkout cart",client:"Client",clock:"Clock",cloud:"Cloud",code:"Code",data_quality:"Data quality",folder:"Folders",forum:"Forum",glasses:"Glasses",group:"Group",hat:"Hat",headphone:"Headphone",hills:"Hills",home:"Home",idea:"Idea",image:"Image",inventory:"Inventory",like:"Like",link:"Link",location:"Location",manage:"Manage",pen:"Pen",mobile_phone:"Mobile phone",music:"Music",notifications:"Notifications",paint:"Paint",payment:"Payment",password_key:"Password key",people:"People",person:"Person",phone:"Phone",pin:"Pin",print:"Print",recording:"Recording",repository:"Repository",role:"Role",search:"Search",properties:"Properties",speaker:"Speaker",star:"Star",tag:"Tag",thumbs_up:"Thumbs up",thumbs_down:"Thumbs down",tools:"Tools",traffic:"Traffic",trash:"Trash",twitter:"Twitter",unknown:"Unknown",user:"User",venn_diagram:"Venn diagram",video:"Video",view:"View",warning:"Warning",watch:"Watch",watson:"Watson",wikis:"Wikis",workspace:"Workspace",world:"World",eventGroupButtonLabel:"View widget connections",dockToolbar:"Dock toolbar",undockToolbar:"Undock toolbar",propShowTitle:"Show title",textAutoFontSize:"Auto",zoomFitToWidth:"Fit to width",zoomWholePage:"Fit to page",defaultZoomValue:"Default zoom value",zoomCategoryLabel:"Page zoom (Absolute layout only)"}),define("dashboard-core/js/app/nls/DashboardResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("dashboard-core/js/app/nls/root/DashboardResources",{appTitle:"Project Gemini",appExit:"Go to Welcome page",widgetsListLabel:"Widgets list. Select a widget and press enter to add.",listSeparator:", ",pointSeparator:":",insync:"Up-to-date",dirty:"Not up-to-date",conflict:"Conflict saving the view",error:"Problem saving the view",failure:"Unable to contact the server",saveFailed:"Unable to save the view",wa_insync:"Saved",wa_conflict:"Conflict saving the view",wa_error:"Unable to save the view",wa_failure:"Unable to contact the server",changeDisplay:"Change display",changeToColumnChart:"Change to column chart",changeToBubbleChart:"Change to bubble chart",toggleMoveHandles:"Toggle move handles",undo:"Undo",redo:"Redo",mode:"Change the mode",untitled:"Untitled",remove:"Remove",editTitle:"Edit the title",edit:"Edit",done:"Done",dataTrayHandleOpenLabel:"Open data tray",dataTrayHandleCloseLabel:"Close data tray",dlg_loading:"Loading...",dlg_ok:"OK",dlg_create:"Create",dlg_cancel:"Cancel",dlg_close:"Close",dlg_update:"Update",dlg_renameBoardTitle:"Rename this object",dlg_renameDatasetTitle:"Rename this data set",dlg_renameSceneTitle:"Rename this scene",dlg_NameLabel:"Name:",dlg_NewNameLabel:"New name:",dlg_DefaultNameWithDataSet:"%{name} View",dlg_ShareTitle:"Share content",dlg_UnshareTitle:"Remove content sharing",dlg_ShareUser:"User ID:",dlg_NewColumnLabel:"New calculation name",dlg_new:"New...",dlg_open:"Open...",dlg_makeACopy:"Make a copy",dlg_rename:"Rename...",dlg_moreToCome:"More actions coming...",dlg_use:"Use",dlg_RelinkDatasetTitle:"Replace data set '%{datasetName}' with ...",open_error:"A problem occurred while opening the view.",del_dialogTitle:"Confirm deletion",del_itemMsg:"Are you sure you want to delete '%{name}'?",del_itemsMsg:"Are you sure you want to delete %{count} items?",del_deleteErr:"Unable to delete '%{name}'",dlg_ascending:"ascending",dlg_descending:"descending",dlg_custom:"custom",dlg_none:"none",search:"Search",searchHint:"Search all your data",clearSearchResult:"Clear search results",shapesCircle:"Circle",shapesHexagon:"Hexagon",shapesLine:"Line",shapesOctagon:"Octagon",shapesPentagon:"Pentagon",shapesSquare:"Square",shapesTriangle:"Triangle",shapesDiamond:"Diamond",shapesTitle:"Shape properties",shapesSquareRounded:"Rounded square",shapesStar:"Star",shapesChevron:"Chevron",shapesBadge_ribbon:"Badge ribbon",shapesBadge:"Badge",shapesHeart:"Heart",shapesExclamation:"Exclamation",shapesTrendingup:"Trending up",shapesTrendingdown:"Trending down",shapesX:"X",shapesPeopleCat:"People",shapesFemale:"Female",shapesHappyface:"Happy face",shapesMale:"Male",shapesMan:"Man",shapesNeutralface:"Neutral face",shapesSadface:"Sad face",shapesShakehands:"Shake hands",shapesThumbsdown:"Thumbs down",shapesThumbsup:"Thumbs up",shapesWoman:"Woman",shapesPlacesWeatherCat:"Places & weather",shapesCity:"City",shapesCloud:"Cloud",shapesEducation:"Education",shapesGovernment:"Government",shapesHalfcloud:"Half cloud",shapesHouse:"House",shapesMoon:"Moon",shapesRain:"Rain",shapesSunny:"Sunny",shapesVehiclesCat:"Vehicles",shapesAirplane:"Airplane",shapesCar:"Car",shapesShip:"Ship",shapesShoppingcart:"Shopping cart",shapesTrain:"Train",shapesTruck:"Truck",shapesObjectsCat:"Objects",shapesBook:"Book",shapesBriefcase:"Briefcase",shapesCalendar:"Calendar",shapesCheck:"Check",shapesClock:"Clock",shapesDesktop:"Desktop",shapesDocument:"Document",shapesFood:"Food",shapesGear:"Gear",shapesHealth:"Health",shapesIdea:"Idea",shapesMobile:"Mobile",shapesMoney_bill:"Money bill",shapesMoney_coin:"Money coin",shapesPiggybank:"Piggy bank",shapesStackofpaper:"Stack of paper",shapesStickynote1:"Sticky note 1",shapesStickynote2:"Sticky note 2",shapesTarget:"Target",shapesTool:"Tool",shapesUmbrella:"Umbrella",shapesBrain:"Brain",shapesSkull:"Skull",shapesEye:"Eye",shapesArrowsCat:"Arrows",shapesRightArrow:"Right arrow",shapesLeftArrow:"Left arrow",shapesDoubleArrow:"Double arrow",shapesCurvedArrow:"Curved arrow",shapesCalloutsCat:"Callouts",shapesRectCallout:"Callout",imagesCat:"Images",imageWidgetTitle:"Image widget",imgUrl:"Image URL",noImgSelected:"No image selected",enterImgUrl:"Enter image URL here",imgPasteLink:"Paste the URL and press Enter to save it.",imgResizeToFit:"Resize to fit the image's size",imgHeight:"Height:",imgWidth:"Width:",imgTransparency:"Transparency:",imgMissingUrl:"The image URL is missing.",imgUrlValidationError:"The image URL is not valid.",imgUrlInvalidDomainError:'The image URL is pointing to a domain that has not been approved by your administrator. The domains approved by your administrator are "%{domains}".',notPositiveNumberError:"Positive values only",propStrokeWidth:"Line thickness",propStrokeDashArray:"Line style",propStrokeSolidline:"Solid line",propStrokeLineCap:"Line cap",propStrokeLineCapButt:"Butt",propStrokeLineCapRound:"Round",propStrokeLineCapSquare:"Square",playButtonLabel:"Play",dataPlayerValueListLabel:"Data player values",textWidgetTitle:"Text widget",textStyle:"Styles",textStyleDescription:"Preformatted text styles",textTitleStyle:"Title",textTitleSmallStyle:"Title small",textSubtitleStyle:"Subtitle",textBodyStyle:"Body",textBodySmallStyle:"Body small",textCaptionStyle:"Caption",textQuoteStyle:"Quote",textQuoteSmallStyle:"Quote small",textResponsiveStyle:"Auto-size",textFontFamilySubClassHairline:"Hairline",textFontFamilySubClassThin:"Thin",textFontFamilySubClassThinItalic:"Thin Italic",textFontFamilySubClassExtraLight:"Extra Light",textFontFamilySubClassExtraLightItalic:"Extra Light Italic",textFontFamilySubClassLight:"Light",textFontFamilySubClassLightItalic:"Light Italic",textFontFamilySubClassRegular:"Regular",textFontFamilySubClassRegularItalic:"Regular Italic",textFontFamilySubClassItalic:"Italic",textFontFamilySubClassMedium:"Medium",textFontFamilySubClassMediumItalic:"Medium Italic",textFontFamilySubClassHeavy:"Heavy",textFontFamilySubClassHeavyItalic:"Heavy Italic",textFontFamilySubClassDemiBold:"Demi Bold",textFontFamilySubClassDemiBoldItalic:"Demi Bold Italic",textFontFamilySubClassBold:"Bold",textFontFamilySubClassBoldItalic:"Bold Italic",textFontFamilySubClassExtraBold:"Extra Bold",textFontFamilySubClassExtraBoldItalic:"Extra Bold Italic",textFontFamilySubClassBlack:"Black",textFontFamilySubClassBlackItalic:"Black Italic",textFontFamilySubClassStencil:"Stencil",responsiveCoachmarkTitle:"Auto-size font",responsiveCoachmarkContents:"The font size automatically resizes to fit when you resize this text type. You can set the font size in the text properties.",propText:"Text details",propTextReturn:"Text properties",textFontSize:"Font size",textFontFamily:"Font family",textFontWeight:"Font weight",textFontColor:"Color",textLineHeight:"Line height",textIndentation:"Indentation",textIncreaseIndentation:"Increase indent",textDecreaseIndentation:"Decrease indent",textInnerMargins:"Inner margins (px)",propImageLink:"Image link",propMissingURL:"Enter URL",propImgTop:"Image properties",propGeneralReturn:"General properties",propStyle:"General",propStyleReturn:"General",propFillColor:"Fill color",propTextColor:"Text color",propBorderColor:"Border color",propBorderRadius:"Corner radius (px)",propShowBorderInPreview:"Show selected border in preview",propMaintainAxisScales:"Maintain axis scale",propShowItemLabel:"Show the item label",propHideLegend:"Hide the legend",propColorPalette:"Palette",propLegendPosition:"Legend position",propHideAxisTitleLabels:"Hide axis titles",propLineColor:"Line color",propBubbleColor:"Bubble color",propInterpolation:"Smooth lines",propElementColor:"Visualization element color",propSymbolShape:"Symbol shape",propHeatScalePalette:"Color order",propHeatScalePalette_tooltipDarkerForLowerValue:"Darker colors represent smaller values.",propHeatScalePalette_tooltipDarkerForHigherValue:"Darker colors represent larger values.",propImageDetails:"Image details",propWebDetails:"Web page details",propMediaDetails:"Media details",propPasteLink:"Enter the URL and press Enter.",sectionName_positionAndStyle:"Position & style",propPositionLabel:"Position",propPositionXAxis_v1:"X",propPositionXAxis:"X position (%{unit})",propPositionYAxis_v1:"Y",propPositionYAxis:"Y position (%{unit})",propResizeLabel:"Size",propResizeWidth_v1:"Width",propResizeWidth:"Width (%{unit})",propResizeHeight_v1:"Height",propResizeHeight:"Height (%{unit})",propRotateLabel_v1:"Rotate",propRotateLabel:"Rotate ()",propRotateAngle:"Angle",propScaleLabel:"Quantity of icons",propScaleDescription:"Select the quantity of icons",propScaleFew:"Low",propScaleDefault:"Default",propScaleMany:"High",propInputLabel_number_invalid:"This value must be numeric",mediaAriaLabel:"url input",dropdownAriaLabel:"Dropdown",ariaGroupLabel:"Dropdown list category: %{cateoryLabel} item: %{itemLabel}. Press DOWN key to expand. Press UP and DOWN key to navigate or Press ESCAPE key to collapse.",colorNoFillLabel:"No fill",lastRefresh:"Last refresh: %{timeInterval} ago",widgetTimer:"Widget timer",transparent:"No color",white:"White",lightGrey:"Light grey",grey:"Grey",darkGrey:"Dark grey",black:"Black",lightBlue:"Light blue",blue:"Blue",darkBlue:"Dark blue",yellow:"Yellow",orange:"Orange",lime:"Lime",green:"Green",peach:"Peach",red:"Red",violet:"Violet",aqua:"Aqua",purple:"Purple",plum:"plum",gray10:"Grey 10",gray20:"Grey 20",gray30:"Grey 30",gray50:"Grey 50",gray60:"Grey 60",gray70:"Grey 70",gray80:"Grey 80",gray90:"Grey 90",gray100:"Grey 100",blue50:"Blue 50",blue60:"Blue 60",blue70:"Blue 70",green40:"Green 40",green50:"Green 50",red50:"Red 50",red60:"Red 60",themeLabel:"Theme",paletteLabel:"IBM palette %{number}",heatPaletteLabel:"IBM heat palette %{number}",conditionalPaletteLabel:"IBM conditional palette %{number}",carbonPaletteXLight:"Carbon X Light",carbonPaletteXDark:"Carbon X Dark",carbonPalettePurple:"Purple",carbonPaletteTeal:"Teal",carbonPaletteCyan:"Cyan",carbonPaletteMagenta:"Magenta",carbonPalettePurpleTeal:"Purple Teal",carbonPaletteCyanMagenta:"Cyan Magenta",carbonPaletteGreenRed:"Green Red",carbonPaletteGreenYellowRed:"Green Yellow Red",carbonPalettePurpleTealConvergent:"Purple Teal Convergent",carbonPaletteCyanMagentaConvergent:"Cyan Magenta Convergent",userPaletteColor_lightTheme:"IBM light palette",userPaletteColor_defaultTheme:"IBM default palette",userPaletteColor_darkTheme:"IBM dark palette",propDashboardBackgroundColor:"Background color",propLayoutPositioning:"Layout positioning",propLayoutRelative:"Relative",propLayoutAbsolute:"Absolute",propLayoutPositioningCoachmarkTitle:"Select a layout style",propLayoutPositioningCoachmarkContent:"In a relative layout, the size and position of widgets adjust to fit into the screen. Widgets in an absolute layout appear exactly as you size and place them in the view, regardless of the screen size.",gridText:"Show grid",snapText:"Snap to grid",snapObjectsText:"Snap to objects",fitPageText:"Fit page",gridLabel:"Grid",heightUnit:"h",widthUnit:"w",pixelUnit:"px",propPageSizeLabel:"Page size",propPageSizePresetAriaLabel:"Page size preset",propPageSizePreset_v1:"Preset",propPageSizePreset:"Page size",propPageSizePresetCustom:"Custom",propPageSizePreset16x9:"Screen 16:9",propPageSizePreset4x3:"Screen 4:3",propPageSizePresetInfographic:"Infographic",propPageSizeWidth_v1:"Width",propPageSizeWidth:"Width (px)",propPageSizeHeight_v1:"Height",propPageSizeHeight:"Height (px)",propPageSizeWidthAriaLabel:"Page size width",propPageSizeHeightAriaLabel:"Page size height",propPageSizeAdjustedMessage:"The page size was increased because your entry was below the minimum or would not fit your dashboard.",propTabShow:"Show tabs",propShowTabsInPreview:"Show tabs in preview",multilingualDashboardsLabel:"Languages",multilingualDashboardsDefault:"%{defaultLanguage} -- Default",multilingualDashboardsAddLinkText:"Add another language",multilingualDashboardsSelect:"Select",multilingualDashboardsButtonLabel:"Add",multilingualDashboardTranslationMode:"You are now in translation mode (%{currentLanguage})",multilingualDashboardTranslationDone:"Done",multilingualDashboardRemainingStrings:"%{numTranslationsLeft} translations remaining",multilingualDashboardRemainingString:"1 translation remaining",multilingualDashboardsSetDefault:"Set default language",multilingualDashboardIconMore:"More actions for language %{currentLanguage}",multilingualDashboardIconTranslatableArea:"Translatable area",multilingualDeleteTitle:"Delete language",multilingualDeleteLanguageWarning:"Are you sure you want to delete the language '%{language}'?",multilingualSelectLanguage:"Select a language",confirmLayoutStyleUpgradeTitle:"Apply to all tabs",confirmLayoutStyleUpgrade:"Apply this layout style to all tabs in your dashboard?",defaultBackgroundColorLabel:"Default",tabDeleteDialogPrimaryButton:"Delete",tabDeleteDialogTitle:"Delete this tab?",tabDeleteDialogMessage:"All content on this tab will also be deleted.",propVisTypeReturn:"Visualization types",propVisDetails:"Details",propAlignPickTop:"Align top",propAlignPickRight:"Align right",propAlignPickBottom:"Align bottom",propAlignPickLeft:"Align left",propAlignPickCenter:"Align center",propAlignPickMiddle:"Align middle",propAlignPicker:"Horizontal alignment",propVerticalAlignPicker:"Vertical alignment",propToolbarPickBold:"Bold",propToolbarPickUnderline:"Underline",propToolbarPickItalic:"Italic",propToolbarPickJustifyLeft:"Align left",propToolbarPickJustifyCenter:"Align center",propToolbarPickJustifyRight:"Align right",propToolbarPickJustify:"Justify",propList:"List",propOrderedList:"Ordered list",propUnorderedList:"Unordered list",propCircle:"Circle",propTriangle:"Triangle",propSquare:"Square",propRect:"Rectangle",propStar:"Star",propCross:"Cross",propPlus:"Plus",propPoly:"Polygon",propTrue:"True",propFalse:"False",propLeft:"Left",propRight:"Right",propTop:"Top",propBottom:"Bottom",propSmooth:"Smooth",propStraight:"Straight",srILVTreeLabel:"List",srWidgetMoveLeft:"Move left",srWidgetMoveUp:"Move up",srWidgetMoveRight:"Move right",srWidgetMoveDown:"Move down",srWidgetResizeBigger:"Increase the size proportionally",srWidgetResizeSmaller:"Decrease the size proportionally",srWidgetResizeBiggerV:"Increase the size vertically",srWidgetResizeSmallerV:"Decrease the size vertically",srWidgetResizeBiggerH:"Increase the size horizontally",srWidgetResizeSmallerH:"Decrease the size horizontally",srWidgetRotateCW:"Rotate clockwise",srWidgetRotateCCW:"Rotate counterclockwise",visChange:"Change visualization",visualizationLabel:"Visualization",chartLabel:"%{chartName} chart",dataWidgetDescription:"%{widgetLabel}: %{columnNames}",f12KeyDescription:"Press F12 to navigate within the widget",f10KeyDescription:"Press F10 to launch the widget focus view",WidgetLabelWithDescripion:"%{label}. %{description}",summaryLabel:"%{label} with value %{value}",shapeColorLabel:"Shape color",showLegendLabel:"Show legend",webpageWidgetTitle:"Webpage widget",webpagePasteLink:"Paste the URL and press Enter to save it.",propWebpageLink:"Web page URL",propWebpageTitle:"Web page title",propWebpageTitleDescription:"Title of the web page",webpageUrl:"Webpage URL",noWebpageSelected:"No webpage selected",enterWebpageUrl:"Enter webpage URL here",propWebpageTop:"Web page properties",webpageMissingUrl:"The web page URL is missing.",webpageUrlValidationError:"The web page URL is not valid.",webpageHttpValidationError:"The web page must be accessed using an HTTPS link.",webpageInvalidDomainError:'The web page URL is pointing to a domain that has not been approved by your administrator. The domains approved by your administrator are "%{domains}".',vzErrorLoading:"Unable to load visualization",vzErrorLoadingMissingData:"Unable to load visualization, missing context data",mediaWidgetTitle:"Media widget",mediaPasteLink:"Paste the URL and press Enter to save it.",mediaUrl:"Media URL",noMediaSelected:"No media selected",enterMediaUrl:"Enter media URL here",videoHeight:"Height:",videoWidth:"Width:",propMediaLink:"Media link",propMediaTitle:"Media title",propMediaTitleDescription:"Title of the media",propMediaTop:"Media properties",mediaMissingUrl:"The media link URL is missing.",mediaUrlValidationError:"The media file URL is not valid.",mediaUnknownValidationError:"This type of media is not supported.",mediaHttpValidationError:"The media file must be accessed using an HTTPS link.",mediaInvalidDomainError:'The media file URL is pointing to a domain that has not been approved by your administrator. The domains approved by your administrator are "%{domains}".',commonPropertiesLabel:"Properties",dataSetsLabel:"Data set",dataViewsLabel:"View",columnQuality:"Data quality",columnProperties:"Data properties",dataQuality:"Data quality",dataQualityRowCount:"Number of rows",dataQualityDistribution:"Distribution",dataRowLabel:"Data",typeColumn:"Type",modellingColumnType:"Type",modellingColumnAggregation:"Aggregation",modellingColumnUsage:"Usage",modellingColumnSort:"Sort",modellingColumnFormat:"Format",modellingColumnCategory:"Category",modellingLoading:"Loading...",modellingProcessing:"Processing...",modellingImport:"Import",modellingReimport:"Re-import",modellingDatasourceTitle:"Data source",modellingImportStartedTitle:"Importing started",modellingImportStartedText:"Importing your data may take a bit of time.\n\n(You can create a view while the data is imported.)",importDatasourceTitle:"Connections",dropHere:"Drop here to create a new data source...",browseButton:"Browse",errorNoData:"There is no data to process.",errorNoFile:"There is no file to upload.",errorUploadFailed:"Unable to upload.",uploadSucceessful:"Upload succeessful",del_datasourceTitle:"Delete data set",del_datasourceMsg:"Are you sure you wish to delete '%{name}'?",modellingFileUpdate:"Update",modellingFileUpdateTitle:"Update data set",modellingFileUpdateDescription:"Do you want to update '%{name}'?",modellingFileUpdatingTitle:"Updating '%{name}'",modellingUpdateStartedTitle:"Update import started",modellingUpdateStartedText:"Updating your data may take a bit of time.\n\n(You can create a view while the data is updated.)",modellingErrorImportUploadNoFile:"No file to upload.",modellingErrorImportUploadFailed:"Unable to upload.",modellingErrorImportUploadInvalidType:"The file type is not valid.",modellingErrorImportUploadTableFailed:"Unable to get tables.",modellingIntentResultsTitle:"Select the proposed data set to use",modellingColumnViewRelationships:"View related tables",modellingTableRelatedTables:"Tables related to '%{name}'",modellingTable:"%{name} - Table",modellingColumnIncludedInDataSet:"Added",modellingDataSet:"Data set",modellingViewInDataSet:"View in data set",modellingViewRelatedTables:"View related",modellingRelatedTablesNoneFound:"No related tables found",modellingValidatingDataset:"Validating...",datasetFinishedRefreshing:"Data set %{datasetName} has been refreshed.",modellingJoinTable:"Resolve join path:",modellingJoinColumns:"Define a join path for table: %{name}",modellingJoinToTable:"Join to table: %{name}",excluded:"Excluded",metricPrefixThousand:"K",metricPrefixMillion:"M",metricPrefixBillion:"B",metricPrefixTrillion:"T",metricPrefixQuadrillion:"Q",modellingColumnFilter:"Filter",modellingColumnSortNone:"Clear the sort",modellingColumnSortAsc:"Sort ascending",modellingColumnSortDesc:"Sort descending",modellingColumnRemove:"Remove this column",dropboxPageTitle:"New Dropbox connection",sizeColumn:"Size",dataType_string:"String",dataType_date:"Date",dataType_integer:"Integer",dataType_double:"Double",dataType_float:"Float",dataType_boolean:"Boolean",defaultAggregation_count:"Count",defaultAggregation_countdistinct:"Count distinct",defaultAggregation_max:"Maximum",defaultAggregation_min:"Minimum",defaultAggregation_avg:"Average",defaultAggregation_sum:"Sum",defaultAggregation_auto:"Auto (%{aggregationType})",type_fact:"Fact",type_attribute:"Attribute",defaultSort_none:"Do not sort",defaultSort_asc:"Sort ascending",defaultSort_desc:"Sort descending",category_none:"None",category_location:"Location",category_monetary:"Monetary",category_time:"Time",rootMenuTitle:"Main menu",errorMessageTitle:"Error",errorMessageDetails:"Details: ",errorMessageTitleAssetAlreadyExists:"Asset already exists",defaultTabTitle:"Tab %{index}",tabAddBtnTitle:"Add a new tab",defaultInfographicTitle:"Infographic",unsupportedConditionalFormattingEncountered:"Conditional formatting is no longer applied to some columns.",nameColumn:"Name",creatorColumn:"Created by",creationDateColumn:"Date created",versionColumn:"Version",modifiedColumn:"Last Modified",filterBy:"Filter items",allFilter:"All items",createdByMeFilter:"Created by me",sharedWithMeFilter:"Shared with me",favoritesFilter:"My favorites",recentsFilter:"Recently added",sortBy:"Sort by",sortModified:"Modified",sortUpdated:"Updated",sortName:"Name",viewAs:"View as",thumbnailsView:"View as thumbnails",listView:"View as a list",createMenu:"Create",newAppItem:"Dashboard",newDataSet:"Data set",menuSelectionState_a11y:'"%{item}" selector set to "%{selectedItem}"',unableToShareItem:'Unable to share item "%{item}".',toastFetchingContent:"Getting more content...",unableToGetData:"Unable to get content.",unableToFavorite:"Unable to change the Favorite status.",hpErrorMissingRequiredOptions:"Missing required initialization options",unableToOpenBoard:'Unable to open "%{name}".',unableToDuplicateBoard:'Unable to duplicate "%{name}".',unableToCreateBoard:'Unable to create "%{name}".',unableToCreateBoardNameConflict:"An asset with the same name already exists.",status:"Status",numberOfRows:"Rows",importWarnings:"Warnings",lineNumbers:"Lines",excerptFromSource:"Excerpt",reason:"Reason",numberOfRowsDropped:"rows dropped",oneRowDropped:"1 row was dropped",typeMenuLabel:"Type",dashboardsLabel:"Dashboards",datasetsLabel:"Data sets",storiesLabel:"Stories",allLabel:"All types",datasets:"Data sets",settings:"Properties",add:"Add",widgets:"Widgets",dashboardProperties:"Dashboard properties",searchPanel:"Search",pins:"Collection",pinsOld:"My pins",pinsDateFilterHeading:"Date Pinned",pinCount:"%{smart_count} pin |||| %{smart_count} pins",pinSearch:"Search",pinSearchOld:"Search for pins",pinListView:"List view",pinIconView:"Icon view",pinRemove:"Remove",pinCreate:"Create",pinDeleteError:"We can't delete one or more assets from the collection. Try again later.",pinDeleteErrorOld:"We can't delete one or more pins. Try again later.",pinRetrieveError:"We can't retrieve one or more pins. Try again later.",NoPinsCollected:"No pinned visualizations",pinDeletedToast:"Pin was removed",pinRenamedToast:"Pin was renamed",pinAddedToast:"Pin was successfully added to My pins",pinningToast:"Processing pin...",pinDateFilter:"Date Filter",pinDateFilterAll:"All",pinDateFilterToday:"Today",pinDateFilterYesterday:"Yesterday",pinDateFilterPastWeek:"Past week",pinDateFilterPastMonth:"Past month",pinDateFilterEarlier:"Earlier",toolbarActionEditTitle:"Edit title",toolbarActionSort:"Sort",toolbarActionSortAscending:"Sort ascending",toolbarActionSortDescending:"Sort descending",toolbarActionSortAuto:"Auto (%{sortOrder})",toolbarActionFormat:"Format data",toolbarActionFormatAbbreviation:"Abbreviate",toolbarActionFormatNone:"Auto",toolbarActionFilter:"Filter",toolbarActionTopBottom:"Top or bottom",toolbarActionAddShape:"Add shape",toolbarActionRmvShape:"Remove shape",toolbarActionToggleShapeDrop:"Infographic shape",toolbarActionToggleShapeDropTitle:"Create an infographic",toolbarActionToggleShapeDropText:"Drag a shape to this field to create an infographic.",toolbarActionAggregationType:"Summarize",toolbarDeleteActionText:"Remove column",toolbarActionFilterLocalKeepSelected:"Keep",toolbarActionFilterLocalExcludeSelected:"Exclude",toolbarActionFilterAllKeepSelected:"Filter",toolbarActionSimpleCalculation:"Simple calculation",toolbarActionDrillBack:"Back",toolbarActionDrillUp:"Drill up",toolbarActionDrillDown:"Drill down",toolbarActionNavigate:"Navigate",toolbarActionCreateFilterGroup:"Create new connection",toolbarActionDisconnectFilterGroup:"Break all links",toolbarActionLinkFilterGroup:"Add to an existing connection",toolbarLabel:"%{labelName}:",toolbarNoValueLabel:"%{labelName}",sidebarAdd:"Add",sidebarMultiselect:"Toggle multiple selection",multiselectMsg:"%{count} selected",multiselectWithTotalMsg:"%{count} of %{total}",sidebarGoBack:"Go back",errorLoadingDataSets:"We can't load this data set",errorLoadingDataSetMetaData:"We can't load this data set",dataSetPaneLastUpdated:"Last updated: %{date}",dataSetPaneDateUnknown:"Unknown",sourcePaneLabel:"Selected sources",addSourceLabel:"Add a source",find_label:"Find",navigationPathsLabel:"Navigation paths",errorLoadingWidgetList:"We can't load the objects.",errorLoadingThemeFile:"We can't load the theme definition",errorLoadingLayoutFile:"We can't load the view.",dwErrorLoadingAvailableVisualizations:"We can't load the available visualization definitions",dwErrorLoadingVisualizationNotFound:"We can't load the object, because it is missing a visualization definition",dwErrorLoadingVisualizationListNotFound:"We can't load the visualization.",dwErrorRunningQuery:"We can't retrieve the data from data set %{datasetName}.",dwErrorGeoData:"We're having trouble displaying the geographic data in a map. Please choose another visualization type. ",dwPromptSignonCancelWarning:"The data for this visualization is unavailable. Please provide the correct credentials.",dwErrorMissingDataset:"We can't load the visualization, because its associated data set '%{datasetName}' isn't available.",dwErrorRenderingVisualization:"We can't load this visualization.",dwErrorVisualizationTooSmall:"The visualization is too small to display the data it contains. Make the visualization larger or limit the data it contains.",aria_label_datatable:"Data table",aria_key_navi_datatable_desc:"Use arrow keys to navigate to each cell. Press Control and Home key to move to the first row, Control and End key to move to the last row.",geomapUnrecognizedLocations:"Unrecognized locations:",geomapAmbiguousLocations:"Ambiguous regions:",customWidget:"Custom widget",customWidgetsTitle:"Custom widgets",noCustomWidgets:"No custom widgets",toggleContextBar:"Toggle the context bar",delete:"Delete",share:"Share",unshare:"Unshare",rename:"Rename",close:"Close",duplicate:"Duplicate",retry:"Retry",changeTemplate:"Change template",sum:"Sum",count:"Count",countdistinct:"Count distinct",avg:"Average",min:"Minimum",max:"Maximum",custom:"Custom",calculated:"Calculated",aggregatedColumnLabel:"%{column} (%{aggregationTypeLabel})",percDifferenceOp:"% change",calculationTitle:"%{col1} %{operator} %{col2}",templateWidgetPlaceholderInput:"Visualization criteria...",QuickAddResultsHeader:"Data visualizations",NoQuickAddResults:"Nothing matched your intent. Create a new data set?",NoQuickAddResultsRetry:"We can't find any matches. Try again with different terms.",templateWidgetTitle:"Template",nullValueLabel:"(blank)",nullValueContent:"(no value)",nullValueText:"Null",textFilterControlRegionLabel:"Text filter - %{columnName}",textFilterSelectTab:"Select",textFilterConditionTab:"Set a condition",textFilterItemsSelected:"(%{selected})",textFilterItemsNotFound:"No items are available.",textFilterEquals:"Equals",textFilterContains:"Contains",textFilterBeginsWith:"Begins with",textFilterEndsWith:"Ends with",textFilterDoesNotEqual:"Does not equal",textFilterDoesNotContain:"Does not contain",textFilterDoesNotBeginWith:"Does not begin with",textFilterDoesNotEndWith:"Does not end with",textFilterSampleText:"For example: A",textFilterAndButton:"And",textFilterOrButton:"Or",dateFilterMessage:"Select a range of dates",dateRangeControlRegionLabel:"Date range filter - %{columnName}",dateFilterRangeOption:"Range option",dateFilterDateLabel:"Date",dateFilterBlank:"(blank)",dateFilterBefore:"Before",dateFilterAfter:"After",dateFilterBetween:"Between",dateFilterSampleText:"YYYY-MM-DD",dateTitle:"Date",dateIncludeBlankLabel:"Include blank date",timeTitle:"Time",timeFilterMessage:"Select a range of times",dateTimeFilterMessage:"Select a range of dates and times",topbottomNumberOfResultsLabel:"Number of results",topbottomPercentLabel:"Percent",topbottomNumberOfResultsLimit:"Between %{lower}-%{higher}",topbottomSelectOption:"Top or bottom option",topbottomOptionLabel:"Show",searchByLabel:"By",searchNoMatches:"No matches found",topbottomRankColumnLabel:"Add a rank column to table",topbottomNone:"None",topCount:"Top count",topPercent:"Top %",bottomCount:"Bottom count",bottomPercent:"Bottom %",topbottomSearchColumn:"Find a column",searchColumnAriaLabel:"Find a column. Type the name of the column to search for then use the down arrow to find the column in a list",rankColumnLabel:"Rank (%{columnLabel})",topbottomClearLabel:"Clear",rangeFilterControlRegionLabel:"Range filter - %{columnName}",sliderRegionLabel:"Slider control, use right and left arrows to move the slider handles",sliderHandleLabel:"Slider handle",a11ySliderHandleLabel:"Slider handle %{sliderValue}",sliderInputLabel:"value",datasetItemsUnavailable:"Some data set items used in this visualization are unavailable.",datasetItemUnavailable:"This data set item is unavailable",topOperator:"Top",bottomOperator:"Bottom",topBottomFact:"%{operator} %{value} by %{columnLabel}",topBottomDimension:"%{operator} %{value}",topBottomTitle:"This object only",deleteTopBottom:"Delete top or bottom count",editTopBottom:"Edit top or bottom count",deleteDrillState:"Delete current drill state",ariaDeleteDrillStateLabel:"Press ENTER key to edit top or bottom count.",drillUpStateTitle:"Drill Up",drillDownStateTitle:"Drill Down",ariaEditTopBottomLabel:"Press ENTER key to edit top or bottom count.",ariaDeleteTopBottomLabel:"Press DELETE key to delete top or bottom count.",dimFilterIn:"Includes: %{in}",dimFilterNotIn:"Excludes: %{out}",measureFilterBetween:"Between %{lowerBound} and %{upperBound}",measureFilterNotBetween:"Not between %{lowerBound} and %{upperBound}",gtFilter:"After %{lowerBound}",ltFilter:"Before %{upperBound}",notGtFilter:"Not after %{lowerBound}",notLtFilter:"Not before %{upperBound}",localFilterTitle:"This object only",globalFilterTitle:"All objects",deleteFilter:"Delete filter",editFilter:"Edit filter",ariaEditFilterLabel:"Press ENTER key to edit filter.",ariaDeleteFilterLabel:"Press DELETE key to delete filter.",ariaEditPrompt:"Press ENTER key to change the prompt value",moreDataIndicator:"Your data was clipped at %{threshold} items. Apply a filter to show less.",dataPointFilterTitle:"Data points",dataPointFilterIncludeSummary:"Included %{valueCount} data points",dataPointFilterExcludeSummary:"Excluded %{valueCount} data points",db2Database:"DB2 Database (%{jdbcConnection})",db2Title:"Connect to IBM DB2",databaseConnectionMessage:"Provide your database connection details:",connectionString:"Database connection string",databaseCredentials:"Credentials: ",databaseUserName:"User name",databasePassword:"Password",databaseConnect:"Connect",twitterTitle:"Twitter",twitterKeywordMessage:"Enter a search term:",twitterKeyword:"Keyword",twitterSearch:"Search",twitterProvider:"Twitter",dropboxProvider:"Dropbox",db2Provider:"DB2",workbookCreateFailed:"We can't create the view: %{error}\nFailed operation: %{lastOp}",widgetFiltersLabel:"Widget filters",missingColumn:"Missing: %{columnLabel}",missingFiltering:"Missing filters on following column IDs:",heatByLabel:"Heat by",evColumns:"Columns",evLocalFilters:"Local filters",evExpand:"Expand",evFilterTooltip:"Filter",evAdd:"Add a column",navigationBack:"Back",contentPinFail:"We can't collect the content. Try again later.",contentPinFailOld:"We can't pin the content. Try again later.",pinRenameFail:"We can't rename the pin. Try again later.",dropZoneLabel:"Drop here to maximize",shareDefaultPageTitle:"Page %{index}",nextPage:"Next page",previousPage:"Previous page",assetAssembly:"view",toolbar_save:"Save",brgr_saveAs:"Save as",brgr_refresh:"Refresh",saving:"Saving...",save_success:"Your view has been saved.",save_failure:"We're sorry. Your view could not be saved. Please try again later.",dashboard_save_success:"Your dashboard has been saved.",geminiLeave:"You are about to leave IBM Watson Analytics.",warning:"Warning",missingDataSetData:"The data for this data set is not available. Refresh the data set or contact your administrator for access to the source.",error_calculation_in_use:"The selected calculation is in use and cannot be deleted.",resize:"Resize",rotate:"Rotate",moveHandle:"Move widget",expandHandle:"Expand",panHandle:"Pan",navigateTitle:"Navigate to",shapeSlideoutTitle:"Shapes",textSlideoutTitle:"Text",mediaSlideoutTitle:"Media",visualizationSlideoutTitle:"Visualizations",invalidJSONResponse:"Provided JSON is invalid. See error log for more information.",shape_label:"Shape",image_label:"Image",data_label:"Chart",media_label:"Media",text_label:"Text",embedMedia_label:"Media",youtube_label:"YouTube video",webpage_label:"Webpage",one_name:"%{name}",one_name_numbered:"%{name} (%{number})",noExtraText_shape:"Shape",noExtraText_shape_numbered:"Shape (%{number})",few_shape:"Group of %{count} shapes",many_shape:"Group of %{count} shapes",one_image:"%{text} image",one_image_numbered:"%{text} image (%{number})",noExtraText_image:"Image",noExtraText_image_numbered:"Image (%{number})",few_image:"Group of %{count} images",many_image:"Group of %{count} images",noExtraText_text:"Empty text box",noExtraText_text_numbered:"Empty text box (%{number})",few_text:"Group of %{count} text boxes",many_text:"Group of %{count} text boxes",pacubeviewer_no_mapping:"Cube viewer",pacubeviewer_named:"%{name} Cube viewer",crosstab_opt_mapping:"%{values} by %{row_level1} and %{column_level1} crosstab",crosstab_opt_mapping_numbered:"%{values} by %{row_level1} and %{column_level1} (%{number}) crosstab",crosstab_has_mapping:"%{values} by %{row_level1} crosstab",crosstab_has_mapping_numbered:"%{values} by %{row_level1} (%{number}) crosstab",crosstab_no_mapping:"Empty crosstab",crosstab_no_mapping_numbered:"Empty crosstab (%{number})",crosstab_named:"%{name} crosstab",crosstab_named_numbered:"%{name} crosstab (%{number})",JQGrid_has_mapping:"%{grid_cols} table",JQGrid_has_mapping_numbered:"%{grid_cols} table (%{number})",JQGrid_no_mapping:"Empty table",JQGrid_no_mapping_numbered:"Empty table (%{number})",JQGrid_named:"%{name} table",JQGrid_named_numbered:"%{name} table (%{number})",hierarchy_has_mapping:"%{level1} hierarchy",hierarchy_has_mapping_numbered:"%{level1} hierarchy (%{number})",hierarchy_no_mapping:"Empty hierarchy",hierarchy_no_mapping_numbered:"Empty hierarchy (%{number})",hierarchy_named:"%{name} hierarchy",hierarchy_named_numbered:"%{name} hierarchy (%{number})",map_has_mapping:"%{categories} map",map_has_mapping_numbered:"%{categories} map (%{number})",map_no_mapping:"Empty map",map_no_mapping_numbered:"Empty map (%{number})",map_named:"%{name} map",map_named_numbered:"%{name} map (%{number})",summary_has_mapping:"%{actual} summary value",summary_has_mapping_numbered:"%{actual} summary value (%{number})",summary_no_mapping:"Empty summary value",summary_no_mapping_numbered:"Empty summary value (%{number})",summary_named:"%{name} summary value",summary_named_numbered:"%{name} summary value (%{number})",kpi_opt_mapping:"%{actual} by %{sparkline.time} KPI",kpi_opt_mapping_numbered:"%{actual} by %{sparkline.time} KPI (%{number})",kpi_has_mapping:"%{actual} KPI",kpi_has_mapping_numbered:"%{actual} KPI (%{number})",kpi_no_mapping:"Empty KPI",kpi_no_mapping_numbered:"Empty KPI (%{number})",kpi_named:"%{name} KPI",kpi_named_numbered:"%{name} KPI (%{number})",infographicSummary_has_mapping:"%{actual} infographic",infographicSummary_has_mapping_numbered:"%{actual} infographic (%{number})",infographicSummary_no_mapping:"Empty infographic",infographicSummary_no_mapping_numbered:"Empty infographic (%{number})",infographicSummary_named:"%{name} infographic",infographicSummary_named_numbered:"%{name} infographic (%{number})",noExtraText_youtube:"YouTube video",noExtraText_youtube_numbered:"YouTube video (%{number})",one_youtube:"%{text} YouTube video",one_youtube_numbered:"%{text} YouTube video (%{number})",few_youtube:"Group of %{count} YouTube videos",many_youtube:"Group of %{count} YouTube videos",noExtraText_embedMedia:"Media link",noExtraText_embedMedia_numbered:"Media link (%{number})",one_embedMedia:"%{text} media link",one_embedMedia_numbered:"%{text} media link (%{number})",few_embedMedia:"Group of %{count} media links",many_embedMedia:"Group of %{count} media links",noExtraText_media:"Media",noExtraText_media_numbered:"Media (%{number})",one_media:"%{text} media",one_media_numbered:"%{text} media (%{number})",few_media:"Group of %{count} media",many_media:"Group of %{count} media",noExtraText_webpage:"Web page",noExtraText_webpage_numbered:"Web page (%{number})",one_webpage:"%{text} web page",one_webpage_numbered:"%{text} web page (%{number})",few_webpage:"Group of %{count} web pages",many_webpage:"Group of %{count} web pages",one_unknown:"An object",one_unknown_numbered:"An object (%{number})",few_unknown:"Group of %{count} objects",many_unknown:"Group of %{count} objects",next:"Next",previous:"Previous",current_nav_group:"Current navigation group is %{navigation_group_name}",filterBlank:"(blank)",errMsgFilterItemGenericTitle:"Filter values can't be loaded",editTimelineHighlight:"Edit highlight",filterDockChevronLeft:"Scroll through the data",filterDockChevronRight:"Scroll through the data",expand:"Expand",collapse:"Collapse",dashboardResetTitle:"Reset dashboard",dashboardResetMessage:"Are you sure you want to reset all changes applied to this dashboard?",dashboardResetToast:"Your dashboard has been reset.",buildingPDF:"Building PDF...",exportPDF:"Export to PDF",pageSize:"Page size",orientation:"Orientation",filtersPresentPDF:"Filter(s) applied to the visualization(s) on the previous page:",errorPDF:"Unable to generate PDF. Please refresh and try again.",errorPrintPDF:"Unable to generate PDF. Please try again.",printPDFInfo:"View documentation",pdfWidget:"Widget",includeFilters:"Show filter details",portrait:"Portrait",landscape:"Landscape",letter:"Letter",legal:"Legal",a4:"A4",tabloid:"Tabloid",toastUpgradeDone:"Your dashboard has been upgraded. Save now to maintain optimum performance.",migratingDashboard:"Your dashboard data needs to be migrated, dashboard will be saved when the migration is complete...",migrateDone:"Your dashboard data has been migrated.",migrateNoPermission:"Your dashboard data needs to be migrated; This requires write permission; visualizations will render with error.",migratingDataSourcesFailed:"one or several data sources failed data migration",ariaFullScreenMessage:"Press Escape to exit full screen",LIVE_hierarchy_packed_bubble_has_mapping:"%{categories} packed hierarchy bubble chart",LIVE_hierarchy_packed_bubble_has_mapping_numbered:"%{categories} packed hierarchy bubble chart (%{number})",LIVE_hierarchy_packed_bubble_no_mapping:"Empty packed hierarchy bubble chart",LIVE_hierarchy_packed_bubble_no_mapping_numbered:"Empty packed hierarchy bubble chart (%{number})",LIVE_hierarchy_packed_bubble_named:"%{name} packed hierarchy bubble chart",LIVE_hierarchy_packed_bubble_named_numbered:"%{name} packed hierarchy bubble chart (%{number})",LIVE_marimekko_has_mapping:"%{categories} by %{values} marimekko chart",LIVE_marimekko_has_mapping_numbered:"%{categories} by %{values} marimekko chart (%{number})",LIVE_marimekko_no_mapping:"Empty marimekko chart",LIVE_marimekko_no_mapping_numbered:"Empty marimekko chart (%{number})",LIVE_marimekko_named:"%{name} marimekko chart",LIVE_marimekko_numbered:"%{name} marimekko chart (%{number})",LIVE_sunburst_has_mapping:"%{values} sunburst chart",LIVE_sunburst_has_mapping_numbered:"%{values} sunburst chart (%{number})",LIVE_sunburst_no_mapping:"Empty sunburst chart",LIVE_sunburst_no_mapping_numbered:"Empty sunburst chart (%{number})",LIVE_sunburst_named:"%{name} sunburst chart",LIVE_sunburst_named_numbered:"%{name} sunburst chart (%{number})",LIVE_decision_analysis_has_mapping:"%{values} driver analysis chart",LIVE_decision_analysis_has_mapping_numbered:"%{values} driver analysis chart (%{number})",LIVE_decision_analysis_no_mapping:"Empty driver analysis chart",LIVE_decision_analysis_no_mapping_numbered:"Empty driver analysis chart (%{number})",LIVE_decision_analysis_named:"%{name} driver analysis chart",LIVE_decision_analysis_named_numbered:"%{name} driver analysis chart (%{number})",LIVE_line_column_opt_mapping:"%{categories} by %{columnValue} and %{lineValue} line and column chart",LIVE_line_column_opt_mapping_numbered:"%{categories} by %{columnValue} and %{lineValue} line and column chart (%{number})",LIVE_line_column_has_mapping:"%{columnValue} and %{lineValue} line and column chart",LIVE_line_column_has_mapping_numbered:"%{categories} by %{columnValue} and %{lineValue} line and column chart (%{number})",LIVE_line_column_no_mapping:"Empty line and column chart",LIVE_line_column_no_mapping_numbered:"Empty line and column chart (%{number})",LIVE_line_column_named:"%{name} line and column chart",LIVE_line_column_named_numbered:"%{name} line and column chart (%{number})",LIVE_bubble_chart_has_mapping:"%{x} by %{y} and %{size} bubble chart",LIVE_bubble_chart_has_mapping_numbered:"%{x} by %{y} and %{size} bubble chart (%{number})",LIVE_bubble_chart_no_mapping:"Empty bubble chart",LIVE_bubble_chart_no_mapping_numbered:"Empty bubble chart (%{number})",LIVE_bubble_chart_named:"%{name} bubble chart",LIVE_bubble_chart_named_numbered:"%{name} bubble chart (%{number})",LIVE_bullet_has_mapping:"%{actual} bullet chart",LIVE_bullet_has_mapping_numbered:"%{actual} bullet chart (%{number})",LIVE_bullet_no_mapping:"Empty bullet chart",LIVE_bullet_no_mapping_numbered:"Empty bullet chart (%{number})",LIVE_bullet_named:"%{name} bullet chart",LIVE_bullet_named_numbered:"%{name} bullet chart (%{number})",ibmDb2:"IBM Db2",dashboardPoweredByPrefix:"Data on this dashboard is provided by",showFooterToggleButtonText:"Show footer",showFooterSectionText:"Footer"}),define("dashboard-core/js/app/nls/StringResources",["i18n!../../dashboard/nls/DashboardResources","i18n!./DashboardResources","polyglot"],(function(e,t,r){var n=new r({phrases:e,allowMissing:!0}),i=new r({phrases:t});return new(function(){function e(){_classCallCheck(this,e)}return e.prototype.get=function(e,t){var r=n.t(e,t);return r===e&&(r=i.t(e,t)),r},e}())})),define("dashboard-core/js/dashboard/glass/controllers/NewDashboardActionHandler",["../../../app/nls/StringResources"],(function(e){return function(){function t(){_classCallCheck(this,t)}return t.prototype.onSelectItem=function(e){this._openCreateView(e)},t.prototype.isItemVisible=function(e){if(this._isSelectionValid(e,!0)){var t=e.target&&e.target.activeObject&&e.target.activeObject.aSelectedContext;return this._hasCapability(t)}return!1},t.prototype.doAction=function(e){if(this._validateSelectionCapabilities(e))return this._openCreateView(e)},t.prototype.canExecute=function(e){return this._isSelectionValid(e,!0)},t.prototype._validateSelectionCapabilities=function(t){var r=t.target&&t.target.activeObject&&t.target.activeObject.aSelectedContext;return!!this._hasCapability(r)||(t.glassContext.appController.showToast(e.get("noCapabilityForCreateDashboard"),{type:"error",preventDuplicates:!0}),!1)},t.prototype._openCreateView=function(e){var t={content:{}},r=this._getSources(e);return r&&r.length>0&&(t.content.sources=r),e.glassContext.appController.openAppView("createBoard",t)},t.prototype._getSources=function(e){var t=null;if(this._isSelectionValid(e,!1)){t=[];for(var r=e.target.activeObject.aSelectedContext,n=0;n<r.length;n++)t.push({assetId:r[n].id,type:r[n].type,name:r[n].defaultName,searchPath:r[n].searchPath,isOlapPackage:r[n].userInterfaces&&r[n].userInterfaces.length&&-1!==r[n].userInterfaces.indexOf("analysisStudio")})}return t},t.prototype._isSelectionValid=function(e,t){var r=["module","dataSet2","uploadedFile","package"],n=e.target&&e.target.activeObject&&e.target.activeObject.aSelectedContext;if(n){for(var i=0;i<n.length;i++){var o=n[i];if(-1===r.indexOf(o.type))return!1;if(!o.permissions||!o.permissions.length||-1===o.permissions.indexOf("read"))return!1;if(o.disabled&&"true"===o.disabled.toString().toLowerCase())return!1}return!0}return t||!1},t.prototype._hasCapability=function(e){if(e)for(var t=0;t<e.length;t++){var r=e[t];if(!r.effectiveUserCapabilities||!r.effectiveUserCapabilities.length||-1===r.effectiveUserCapabilities.indexOf("canAuthorDashboard"))return!1}return!0},t}()})),define("dashboard-core/js/dashboard/glass/BaseView",["../../lib/@waca/baglass/js/baglass/app/ContentView","jquery","underscore","bspopover"],(function(e,t,r){var n=e.extend({init:function(e){n.inherited("init",this,arguments),this.options=e||{}},getCDNUrl:function(){var e=require.toUrl("dashboard-cdn"),t="";return-1===e.indexOf("empty:")&&(t=e),t+"dashboard-core/"},render:function(){return Promise.resolve()},remove:function(){n.inherited("remove",this,arguments)},getTitle:function(){},deactivate:function(){t(".popover").popover("hide"),this.$children=this.$el.children(),this.$children.detach();var e=this.getContent();return e&&r.extend(this.options,e),Promise.resolve()},activate:function(){return this.$children&&(this.$el.append(this.$children),setTimeout((function(){try{t(window).resize()}catch(e){}}),100),this.$children=null),Promise.resolve()},clearTransientState:function(){this.transientState={}},setTransientState:function(e,t){this.transientState||(this.transientState={}),this.transientState[e]=t},getTransientState:function(e){var t=null;return this.transientState&&(t=this.transientState[e]),t}});return n})),define("dashboard-core/js/dashboard/services/LifeCycleManager",[],(function(){var e={init:function(){this._cycleEvents={},this._invokedEvents={}},registerLifeCycleHandler:function(e,t,r,n){if("function"!=typeof t)throw new Error("Action for "+e+" must be a function");if(r&&("number"!=typeof r||!isFinite(r)||Math.floor(r)!==r))throw new Error("Priority for "+e+" must be an integer");this._createEvent(e);var i={handler:t,priority:r||0};this._cycleEvents[e].actions.push(i);var o=void 0;return n&&this._invokedEvents[e]&&this._invokedEvents[e].invoked&&(o=i.handler.call(i.handler,this._invokedEvents[e].payload)),{remove:function(){null!==this._cycleEvents&&this._cycleEvents.hasOwnProperty(e)&&(this._cycleEvents[e].actions=this._cycleEvents[e].actions.filter((function(e){return e!==i})))}.bind(this),invokeCallPromise:o}},invokeLifeCycleHandlers:function(e,t){return Promise.resolve().then(function(){var r=Promise.resolve();return this._invokedEvents[e]=this._invokedEvents[e]||{},this._invokedEvents[e].invoked=!0,this._invokedEvents[e].payload=t,this._cycleEvents.hasOwnProperty(e)&&(this._cycleEvents[e].actions.sort((function(e,t){return t.priority-e.priority})),this._cycleEvents[e].actions.forEach((function(e){r=r.then(e.handler.bind(e.handler,t))}))),r}.bind(this))},destroy:function(){this._cycleEvents=null},_getCycleEvents:function(){return this._cycleEvents},_createEvent:function(e){this._cycleEvents.hasOwnProperty(e)||(this._cycleEvents[e]={actions:[]})}};function t(e){this.init(e)}return Object.keys(e).forEach((function(r){t.prototype[r]=e[r]})),t})),define("dashboard-core/js/canvas/CanvasAPISpec",[],(function(){return function(){function e(t){_classCallCheck(this,e),this.transaction=t.dashboardFeatures.getFeature("Transaction")}return e.prototype.getAPISpec=function(){var e=this;return this.apiSpec||(this.apiSpec={name:"canvas api",features:{"Dashboard.Transaction":this.transaction},events:{propagationInfo:{namespace:"canvas",callStack:{name:"getCanvas"}},actions:{selectContent:{eventName:"selections:select",getInfo:function(e){return{value:e[0]}},getUndoActions:function(e){return[{name:"deselectContent",params:[e[0]]}]}},deselectContent:{eventName:"selections:deselect",getInfo:function(e){return{value:e[0]}},getUndoActions:function(e){return[{name:"selectContent",params:[e[0]]}]}},moveContent:{type:"move",eventName:"content",transactionParamIndex:2,transactionAPI:this.transaction,autoCreateTransaction:!0,getInfo:function(e,t,r){return{containerId:e[0],contentIdList:e[1],previousContainerId:r.undoActions[0].params[0],supportsUndoRedo:!0}},getUndoActions:function(t){var r=t[1],n=[],i=void 0,o=void 0;if(r)for(var a=r.length-1;a>=0;a--){i=r[a];var s,l=(o=e.getContent(i)).getFeature("Models.internal").getLayoutModel().getNextSiblingId(),d=[o.getContainer().getId(),[i]];if(l)d.push(void 0),d.push(((s={})[i]=l,s));n.push({name:"moveContent",params:d})}return n}},setPropertyValue:{eventName:"property",getEventName:function(e){return"property:"+e[0]},getInfo:function(t){var r=e._propertiesMap&&e._propertiesMap[t[0]];r||(r=e._getProperty(t[0]));var n={name:t[0],value:t[1],supportsUndoRedo:!(!r||!r.supportsUndoRedo)};return t[2]&&(n.options=JSON.parse(JSON.stringify(t[2]))),n},getUndoActions:function(t){return[{params:[t[0],e.getPropertyValue(t[0])]}]}}}}}),this.apiSpec},e}()})),define("dashboard-core/js/api/CanvasAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.on=function(){},e.prototype.off=function(){},e.prototype.addContent=function(){},e.prototype.moveContent=function(){},e.prototype.getContent=function(){},e.prototype.getContentActionList=function(){},e.prototype.selectContent=function(){},e.prototype.deselectContent=function(){},e.prototype.getSelectedContentList=function(){},e.prototype.removeContent=function(){},e.prototype.findContent=function(){},e.prototype.copy=function(){},e.prototype.paste=function(){},e.prototype.getPropertyLayoutList=function(){},e.prototype.getPropertyList=function(){},e.prototype.getPropertyNameList=function(){},e.prototype.setPropertyValue=function(){},e.prototype.getPropertyValue=function(){},e}()})),define("dashboard-core/js/dashboard/util/PropertyLayoutHelper",["underscore"],(function(e){return function(){function t(){_classCallCheck(this,t)}return t.getExpandedLayoutList=function(e,r,n,i){var o=[];return i&&t._convertV1LayoutSpec(e,r),t._expandSpec(e,r,o,n,i),t._expandSpec(e,e,o,n,i),t._sortItems(o)},t._convertV1LayoutSpec=function(e,r){var n=e.filter((function(e){return"Group"===e.type}));if(n.length){var i=t._sortByPosition(n),o=[],a={},s=1e3;i.forEach((function(r){var n=e.filter((function(e){return"Section"===e.type&&e.id.startsWith(r.id+".")}));n.length?(o.push(r.id),t._fixV1Sections(n,a,s++),s+=n.length):(console.log("warning: convert group "+r.id+" to section to be consumable by properties V2"),r.type="Section",r.position=s++)})),o.forEach((function(t){var r=e.findIndex((function(e){return e.id===t}));r>-1&&(console.log("warning: V1 group "+t+" is not displayed in properties V2"),e.splice(r,1))}));var l=Object.keys(a);l.length&&r.forEach((function(e){-1!==l.indexOf(e.editor.sectionId)&&(e.editor.sectionId=a[e.editor.sectionId])}))}},t._fixV1Sections=function(e,t,r){e.forEach((function(e){var n=e.id.split(".");if(n.length){var i=n[0],o=e.id.substring(i.length+1);t[e.id]=o,e.id=o,e.position=r++}}))},t._expandSpec=function(e,r,n,i,o){r.forEach((function(r){var a=r.editor;if(!a||a.hidden||i&&!t._shouldFilterProfile(r,i))o&&r.expanded?n.push(r):"Banner"===r.type&&(r.position=r.position||0,n.push(r));else{var s=void 0;if(o?s={editor:a,id:r.id,position:a.position||0}:((s=a.uiControl).id=r.id,s.position=a.position||0,s.readOnly=!!a.readOnly),a.sectionId){var l=[];t.splitEscapedString(a.sectionId,".",l);var d=t._findLayoutSection(e,n,l);if(!d)throw new Error("Could not create the needed layout section "+a.sectionId);d.push(s)}else n.push(s)}}))},t._shouldFilterProfile=function(e,t){return e.profile&&-1!==e.profile.indexOf(t)},t._sortItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){!e.position&&e.editor&&e.editor.position&&(e.position=e.editor.position)})),(e=t._sortByPosition(e)).forEach((function(e){delete e.position,e.items&&(e.items=t._sortItems(e.items))})),e},t._findLayoutSection=function(r,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=i.shift();if(!o)return n;var a=e.find(n,(function(e){return e.id===o}));if(a){if(!a.items)throw new Error("Layout section "+a.id+" with no items array.");return t._findLayoutSection(r,a.items,i)}var s=e.find(r,(function(e){return e.id===o}));if(!s)throw new Error("Section "+o+" is referenced but isn't defined anywhere.");return(s=e.extend({},s)).items||(s.items=[]),n.push(s),t._findLayoutSection(r,s.items,i)},t.splitEscapedString=function(e,r,n){var i=e.indexOf(r);if(-1!==i&&i!==e.length&&"\\"!==e[i-1]){var o=e.slice(0,i);e=e.slice(i+1,e.length),n.push(o),t.splitEscapedString(e,r,n)}else n.push(e)},t._sortByPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.position-t.position}))},t}()})),define("dashboard-core/js/canvas/Canvas",["jquery","../lib/@waca/dashboard-common/dist/core/APIFactory","./CanvasAPISpec","../api/CanvasAPI","underscore","../dashboard/util/PropertyLayoutHelper"],(function(e,t,r,n,i,o){var a=["widget","group","tab"];return function(r){function s(e){_classCallCheck(this,s);var n=_possibleConstructorReturn(this,r.call(this,e));n.boardModel=e.boardModel,n.extensions=e.extensions,n.contentFeatureCollection=e.contentFeatureCollection,n.dashboardFeatures=e.dashboardFeatures,n.logger=n.dashboardFeatures.getFeature("Logger"),n.contentFactory=n.dashboardFeatures.getFeature("ContentFactory"),n._dashboard=n.dashboardFeatures.getFeature("API"),n.canvasContent=n.contentFactory.createContent({dashboardFeatures:n.dashboardFeatures,contentFeatureCollection:n.contentFeatureCollection,boardModel:n.boardModel,layoutModel:n.boardModel.layout,canvas:n,profile:e.profile,type:n.boardModel.layout.type}),n.copyCallback=e.copyCallback,n.pasteCallback=e.pasteCallback,n._createDashboardContent(),t.setParentChildRelation(n,n.canvasContent);var i=n._dashboard.getGlassCoreSvc(".FeatureChecker");return n._isPropertiesV2Enabled=i.checkValue("dashboard","PropertiesV2","enabled"),n}return _inherits(s,r),s.prototype._createDashboardContent=function(){var e={featureLoader:this.dashboardFeatures,dashboardFeatures:this.dashboardFeatures,boardModel:this.boardModel,type:"dashboard"},t=this.dashboardFeatures.getFeature("ContentFactory");this._dashboardContent=t.createContent(e)},s.prototype.getRootContentInstance=function(){return this.canvasContent},s.prototype.isLayoutType=function(e){var t=this.extensions.getLayoutViewExtensions(),r=Object.keys(t.authoringViews),n=Object.keys(t.consumeViews);return-1!==r.indexOf(e)||-1!==n.indexOf(e)},s.prototype.getAPI=function(){return this.api||(this.api=t.createAPI(this,[n])),this.api},s.prototype.initializeContentFeatures=function(e){var t=this;return this.canvasContent.setContentFeatures(e),Promise.all([this._dashboardContent.initialize(),this.canvasContent.initialize()]).then((function(){t._contentTargets=[t._dashboardContent,t.canvasContent]}))},s.prototype.destroy=function(){this.boardModel=null,this.canvasContent.destroy(),this.canvasContent=null,this.dashboardFeatures=null,this.api=null,this._dashboardContent.destroy(),this._dashboardContent=null},s.prototype.getContentActionList=function(e){return e.length?this.dashboardFeatures.getFeature("ContentActions").getContentActionList(e):[]},s.prototype.copy=function(){return this.copyCallback.apply(null,arguments)},s.prototype.paste=function(){return this.pasteCallback.apply(null,arguments)},s.prototype.addContent=function(e,t){return this.getContentInstance(e.containerId).getAPI().addContent(e,t)},s.prototype.moveContent=function(e,t,r,n){return this.getContentInstance(e).moveContent(e,t,r,n)},s.prototype.removeContent=function(e,t){var r=this.getContent(e);if(r){var n=r.getContainer();n&&n.removeContent(e,t)}},s.prototype.getContentInstance=function(e){return e&&e!==this.boardModel.layout.id?this.canvasContent.getContentInstance(e):this.canvasContent},s.prototype.registerContentFeatures=function(e,t){var r=this.getContentInstance(e);return r?r.registerFeatures(t):Promise.reject('The content with id "'+e+'" does not exist.')},s.prototype.registerContentFeature=function(e,t,r,n,i){var o=this.getContentInstance(e);return o?o.registerFeature(t,r,n,i):Promise.reject('The content with id "'+e+'" does not exist.')},s.prototype.getContentFeature=function(e,t){if(e===this.boardModel.layout.id)return this.canvasContent.getFeature(t);var r=this.canvasContent.getContentInstance(e);return r?r.getFeature(t):void 0},s.prototype.getContent=function(e){return e&&e!==this.boardModel.layout.id?this.canvasContent.getContent(e):this.canvasContent.getAPI()},s.prototype.findContent=function(e){return e&&e.type===this.boardModel.layout.type?[this.canvasContent.getAPI()]:this.canvasContent.findContent(e)},s.prototype.selectContent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){var r=e.boardModel.layout.findModel(t);if(r){var n=r.getParent();n&&n.select(r.id)}}))},s.prototype.deselectContent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){var r=e.boardModel.layout.findModel(t);if(r){var n=r.getParent();n&&n.deselect(r.id)}}))},s.prototype.getSelectedContentList=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=[];if(this.boardModel){var n=this.dashboardFeatures.getFeature("ContentTypeRegistry"),o=t.type?[t.type]:a,s=this.boardModel.layout.getSelectedChildLayouts(),l=s.filter((function(t){var r=e.getContent(t.id),i=!1;return n&&(i=n.isTypeRegistered(t.type)),i||(i=-1!==o.indexOf(t.type)||-1!==o.indexOf(r.getType())),i})),d=i.filter(l,(function(e){return i.isArray(e.items)})),c=i.filter(l,(function(e){return!i.find(d,(function(t){return t.findChildItem(t.items,e.id)}))}));r=i.map(c,(function(t){return e.getContent(t.id)}))}return r},s.prototype.getPropertyNameList=function(){return Object.keys(this._getPropertyMap())},s.prototype.setPropertyValue=function(e,t,r){if(this._isPropertiesV2Enabled){(-1!==this._dashboardContent.getPropertyNameList().indexOf(e)?this._dashboardContent:this.canvasContent).setPropertyValue(e,t,r)}else{var n=this._getProperty(e);if(n.validatePropertyValue){var i=n.validatePropertyValue(t)||{};if(!i.isValid)return void this.logger.error(i.message,e,t)}n.setPropertyValue(t,r)}},s.prototype.getPropertyValue=function(e){return this._getProperty(e).getPropertyValue()},s.prototype.getPropertyLayoutList=function(){for(var t={},r=0;r<this._contentTargets.length;r++)for(var n=this._contentTargets[r].getFeature("Properties").getPropertyLayoutList(),a=0;a<n.length;a++){var s=n[a];t[s.id]?e.extend(!0,t[s.id],s):t[s.id]=s}return o.getExpandedLayoutList(i.values(t),this.getPropertyList(),null,this._isPropertiesV2Enabled)},s.prototype.getPropertyList=function(){return this._initProperties(),this._propertiesList},s.prototype._getPropertyMap=function(){return this._initProperties(),this._propertiesMap},s.prototype._initProperties=function(){this._propertiesMap={},this._contentTargets=this._contentTargets||[];for(var t=0;t<this._contentTargets.length;t++)for(var r=this._contentTargets[t].getPropertyList()||[],n=0;n<r.length;n++){var o=r[n];this._propertiesMap[o.id]?e.extend(!0,this._propertiesMap[o.id],o):this._propertiesMap[o.id]=o}this._propertiesList=i.values(this._propertiesMap)},s.prototype._getProperty=function(e){var t=this._getPropertyMap()[e];if(!t)throw new Error("Property "+e+" does not exist.");return t},s.prototype.whenContentReady=function(e){var t=this.getContentInstance(e);return t?t.initialize():Promise.reject("Could not find content with id "+e)},s}(r)})),define("dashboard-core/js/features/content/InlineFeatures",[],(function(){"use strict";return[{containerId:"com.ibm.bi.dashboard.content-features",name:"Renderer",id:"com.ibm.bi.dashboard.content-features.renderer",class:"dashboard-core/js/view/features/content/contentView/api/impl/ContentView",dependencies:["Dashboard.API"],profiles:["core"]},{containerId:"com.ibm.bi.dashboard.content-features",name:"Properties",id:"com.ibm.bi.dashboard.content-features.properties",class:"dashboard-core/js/features/common/properties/api/impl/Properties",dependencies:["Dashboard.API"],profiles:["core"]},{containerId:"com.ibm.bi.dashboard.content-features",name:"Properties",id:"com.ibm.bi.dashboard.content-features.propertiesV2",class:"dashboard-core/js/features/common/properties/api/impl/PropertiesV2",dependencies:["Dashboard.API"],profiles:["core"]},{containerId:"com.ibm.bi.dashboard.content-features",name:"AlignPropertiesProvider",id:"com.ibm.bi.dashboard.content-features.alignPropertiesProvider",class:"dashboard-core/js/features/content/alignProperties/AlignPropertiesProvider",types:["widget","group"],dependencies:["Properties"],runtimeDependencies:["Dashboard.Icons"],profiles:["consume"]},{containerId:"com.ibm.bi.dashboard.content-features",name:"PagePropertiesProvider",id:"com.ibm.bi.dashboard.content-features.pageProperties",class:"dashboard-core/js/features/content/pageProperties/PagePropertiesProvider",types:["page"],dependencies:["Properties"],runtimeDependencies:["Colors","Dashboard.Icons","internal","Transaction"],profiles:["consume"]},{containerId:"com.ibm.bi.dashboard.content-features",name:"ContentMenu",id:"com.ibm.bi.dashboard.content-features.ContentMenu",class:"dashboard-core/js/features/dashboard/contentMenu/ContentMenu",types:["widget"],profiles:["authoring"]},{containerId:"com.ibm.bi.dashboard.content-features",name:"ContentFilterPropertiesProvider",id:"com.ibm.bi.dashboard.content-features.contentFilterPropertiesProvider",class:"dashboard-core/js/features/content/contentFilter/ContentFilterPropertiesProvider",dependencies:["ContentFilter"],profiles:["consume"]}]})),define("dashboard-core/js/canvas/CanvasFactory",["./Canvas","../features/content/InlineFeatures"],(function(e,t){return function(){function r(e){_classCallCheck(this,r),this.dashboardAPI=e.dashboardAPI,this.logger=e.logger,this.featureLoader=e.featureLoader,this.inlineFeature=e.inlineFeature||t,this.extensions=e.extensions,this.boardModel=e.boardModel,this.eventRouter=e.eventRouter,this.widgetRegistry=e.widgetRegistry,this.profile=this.dashboardAPI.getAppConfig("profile")||null,this._initialContentSelection=e.settings.get("applicationSettings").subView}return r.prototype.createCanvas=function(){var t=this,r={dashboardFeatures:this.featureLoader,boardModel:this.boardModel,extensions:this.extensions,copyCallbabck:this.dashboardAPI.copy.bind(this.dashboardAPI),pasteCallback:this.dashboardAPI.paste.bind(this.dashboardAPI),profile:this.profile},n=new e(r),i={initializeContentFeatures:function(){return t.dashboardAPI.findGlassCollection("com.ibm.bi.dashboard.content-features").then((function(e){var r=t._filterFeatures(t.inlineFeature.concat(e||[])),i=t.dashboardAPI.getFeature("ContentTypeRegistry");return i&&(r=i.processFeatureCollection(r)),n.initializeContentFeatures(r)}))},whenContentReady:function(e){return n.whenContentReady(e)},registerFeatureCollection:function(e,r){return t.dashboardAPI.findGlassCollection(r).then((function(t){return n.registerContentFeatures(e,t||[])}))},registerFeature:function(e,t,r,i){return n.registerContentFeature(e,t,r,i)},registerDeprecatedFeature:function(e,t,r,i){return n.registerContentFeature(e,t,r,i,!0)},getContentInstance:function(e){return n.getContentInstance(e)},destroy:function(){n.destroy()}};return this.boardModel.deleteInitialSpec(),this._selectTab(n),{canvasImpl:n,internalCanvas:i}},r.prototype._selectTab=function(e){this._initialContentSelection&&e.getContent(this._initialContentSelection)?e.selectContent([this._initialContentSelection]):this.boardModel.layout.items&&this.boardModel.layout.items.length&&e.selectContent([this.boardModel.layout.items[0].id])},r.prototype._filterFeatures=function(e){var t=this.dashboardAPI&&this.dashboardAPI.getGlassCoreSvc(".FeatureChecker"),r=t&&t.checkValue("dashboard","PropertiesV2","enabled");return e.filter((function(e){return r&&"com.ibm.bi.dashboard.content-features.properties"!==e.id||!r&&"com.ibm.bi.dashboard.content-features.propertiesV2"!==e.id}))},r}()})),define("dashboard-core/js/dashboard/services/DashboardStringService",["underscore","../../app/nls/StringResources","../../lib/@waca/core-client/js/core-client/utils/Lexicon"],(function(e,t,r){var n={init:function(){this.polys=[{priority:100,resource:t}]},register:function(t,r){var n={priority:r,resource:t};if(!e.find(this.polys,(function(e){return e.priority===r&&e.resource===t}))){var i=e.sortedIndex(this.polys,n,"priority");this.polys.splice(i,0,n)}},get:function(e,t){for(var n=e,i=0;i<this.polys.length&&(e==(n=this.polys[i].resource.get(e,t))||0===n.indexOf(r.NOT_TRANSLATED));i++);return n},destroy:function(){this.polys=null}};function i(e){this.init(e)}return Object.keys(n).forEach((function(e){i.prototype[e]=n[e]})),i})),define("dashboard-core/js/features/FeatureLoaderAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.registerFeature=function(){},e.prototype.updateCurrentProfile=function(){},e.prototype.getCurrentProfile=function(){},e}()})),define("dashboard-core/js/features/FeatureProfileHelper",[],(function(){"use strict";var e=!1;try{e=!!window.localStorage.getItem("performance.log.featureLoaderOpt")}catch(e){}return function(){function t(r){_classCallCheck(this,t),this.currProfileList=r||["core"],this.currProfileList=JSON.parse(JSON.stringify(this.currProfileList)),e&&console.log("FeatureProfileHelper current profile ",this.currProfileList),this._parkedFeatures=[]}return t.prototype.filterAndTrackFeaturesForProfile=function(t){var r=this.filterFeaturesForProfile(t);return this.addToParkedFeatures(t.excludedList),e&&console.log("loadFeaturesFromArray, loading",r.length,r,"from ",t.collectionItemsIn.length,"excluded",t.excludedList,"current profile",this.currProfileList," input list ",t.collectionItemsIn),r},t.prototype.filterFeaturesForProfile=function(e){var t=this,r=e.collectionItemsIn,n=e.profileIn,i=e.strict,o=e.excludedList,a=e.logger;i=i||!1;var s=n?[].concat(n):this.currProfileList,l=[];return r.forEach((function(e){t._doesProfileMatch(e,s)?l.push(e):e.profiles||i?o&&o.push(e):(a&&a.warn("Feature missing profile: "+e.id||e.name),l.push(e))})),l},t.prototype._doesProfileMatch=function(e,t){for(var r=e&&e.profiles||[],n=0;n<r.length;n++){var i=r[n];if(-1!==t.indexOf(i))return!0}return!1},t.prototype.addToParkedFeatures=function(e){for(var t=0;t<e.length;t++){var r=e[t];-1===this._parkedFeatures.indexOf(r)&&this._parkedFeatures.push(r)}},t.prototype.getParkedFeatureList=function(){return this._parkedFeatures},t.prototype.setParkedFeatureList=function(e){this._parkedFeatures=e},t.prototype.getCurrentProfile=function(){return this.currProfileList},t.prototype.addToCurrentProfile=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1,r=0;r<e.length;r++){var n=e[r];-1===this.currProfileList.indexOf(n)&&(this.currProfileList.push(n),t=!0)}return t},t.prototype.removeFromCurrentProfile=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.currProfileList,r=function(r){var n=e[r];t=t.filter((function(e){if(e!==n)return e}))},n=0;n<e.length;n++)r(n);this.currProfileList=t},t}()})),define("dashboard-core/js/features/FeatureLoader",["../lib/@waca/dashboard-common/dist/core/APIFactory","../lib/@waca/core-client/js/core-client/utils/ClassFactory","./FeatureLoaderAPI","./FeatureProfileHelper","underscore"],(function(e,t,r,n,i){"use strict";var o=function(e,t,r){var n={};if(t){var i=function(i){var o=t[i];Object.defineProperty(n,i,{get:function(){if(!o.init&&!r.loaded)throw new Error('The required feature "'+o.name+'" cannot be accessed at init time by the feature"'+e+'". The feature "'+o.name+'" must be added to the initDependencies of feature "'+ +e+'" if it is needed at init time.');return o.loader.getFeature(o.name)}})};for(var o in t)i(o)}return n},a={},s=function(){function s(e){_classCallCheck(this,s),this.externalFeatureLoader=e.externalFeatures,this.featureNamePrefix=e.featureNamePrefix,this.featureParams=e.featureParams,this.features={},this.lifeCycleManager=e.lifeCycleManager,this.loadingOrder=[],this.errors={},this.logger=e.logger||console,this.types=e.types||[],this.parentAPI=e.parentAPI,this.featureSet=e.featureSet,e.enableProfileFeatureLoading?(this._profileHelper=new n(e.profileList),this._enableProfileFeatureLoading=!0):this._enableProfileFeatureLoading=!1,this.feature2ProfileMap={}}return s.prototype.getAPI=function(){return this._api||(this._api=e.createAPI(this,[r])),this._api},s.prototype.getCurrentProfile=function(){return this._profileHelper&&this._profileHelper.getCurrentProfile()},s.prototype.updateCurrentProfile=function(e){if(!this._profileHelper)return Promise.resolve(!0);var t=e.remove,r=e.add;if(this._profileHelper.removeFromCurrentProfile(t),!this._profileHelper.addToCurrentProfile(r))return Promise.resolve(!0);for(var n=this._profileHelper.getParkedFeatureList(),i=[],o=0;o<n.length;o++){var a=n[o];this.features[a.name]||i.push(a)}return this._profileHelper.setParkedFeatureList(i),this.loadFeaturesFromArray(i,[],!0)},s.prototype._getFeatureListThatInitDependsOn=function(e){var t=[];for(var r in this.features)-1!==this._getInitDependencies(r).indexOf(e)&&t.push(r);return t},s.prototype._getFeatureModule=function(e){return e.module.default&&i.isFunction(e.module.default)?e.module.default:e.module},s.prototype._createFeature=function(e){e.isCreated=!0;var t=e.params,r=this._getFeatureModule(e);return e.instance=new r(t),e.instance},s.prototype._getFeatureInstance=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{create:!0},n=void 0;if(this.features[e]){if(r.create&&!this.features[e].instance&&!this._getError(e))try{var i=this._createFeature(this.features[e]);this._postFeatureInitialize(this.features[e]),this.setParentChildRelation(e,i),this._getFeatureListThatInitDependsOn(e).forEach((function(e){t.features[e].isCreated||t._getFeatureInstance(e)}))}catch(t){this._setError(e,"Error while creating the feature:"+e,t,this.features)}n=this.features[e].instance}return n},s.prototype._getFeatureTags=function(e){return this.features[e]&&this.features[e].spec&&this.features[e].spec.tags||[]},s.prototype._getOptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features;return t[e]&&t[e].spec&&t[e].spec.options},s.prototype._getInitDependencies=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features,r=t[e]&&t[e].spec&&t[e].spec.dependencies||[];return Array.isArray(r)?r:Object.keys(r)},s.prototype._getRuntimeDependencies=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features,r=t[e]&&t[e].spec&&t[e].spec.runtimeDependencies||[];return Array.isArray(r)?r:Object.keys(r)},s.prototype._getDependencies=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features;return this._getInitDependencies(e,t).concat(this._getRuntimeDependencies(e,t))},s.prototype._getDependenciesPreferredName=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.features,n=e,i=r[t]&&r[t].spec&&r[t].spec.dependencies,o=r[t]&&r[t].spec&&r[t].spec.runtimeDependencies;return i&&!Array.isArray(i)&&i[e]?n=i[e]:o&&!Array.isArray(o)&&o[e]&&(n=o[e]),n},s.prototype._getError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features;return t[e]&&t[e].error},s.prototype.setParentChildRelation=function(t,r){this.parentAPI&&e.setParentChildRelation(this.parentAPI,r,{propagationInfo:{namespace:t.toLowerCase(),info:{featureName:t},callStack:{name:"getFeature",params:[t]}}})},s.prototype.registerFeature=function(e,t,r,n){var i=this;this.features[e]={instance:t,spec:r||{},preparePromise:Promise.resolve(e)},this.featureNamePrefix&&(this.features[this.featureNamePrefix+"."+e]=this.features[e]);return(n?Promise.resolve():this._initializeFeature(e)).then((function(){i.setParentChildRelation(e,t)}))},s.prototype.loadFeaturesFromArray=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;if(this._enableProfileFeatureLoading){var o={collectionItemsIn:e,profileIn:this.getCurrentProfile(),strict:n,excludedList:[],logger:this.logger};i=this._profileHelper.filterAndTrackFeaturesForProfile(o)}else i=e;t&&Object.keys(t).length>0&&(this.featureParams=this.featureParams?this.featureParams:{},this.featureParams.featureSpecs=Object.assign({},this.featureParams.featureSpecs,t));var l=Promise.resolve(),d={},c={loaded:!1,readyPromises:[]},u=[],h=[];return i.forEach((function(e){var t=e.name||e.id,n=!1;r.types.length>0&&e.types&&e.types.length>0&&(n=!r.types.find((function(t){return-1!==e.types.indexOf(t)})));n||r.featureSet&&-1===r.featureSet.indexOf(t)||(d[t]={spec:e},a[e.class]?r._setError(t,"Failed to require feature",a[e.class].causedBy,d):void 0===e.class?r._setError(t,"feature with no defined class","",d):s.classes[e.class]||void 0!==e.class.prototype?r._registerModuleInfeatures(s.classes[e.class]||e.class,t,d):(u.push(e.class),h.push(t)))})),u.length>0&&(l=this._loadFeatureClasses(u,h,d)),l.then((function(){r._validateDependencies(d);var e=void 0;for(e in d)r._prepareFeature(e,c,d);return Promise.all(c.readyPromises).then((function(){c.loaded=!0}))}))},s.prototype.getLoadedFeatureProfileInfo=function(){var e=this,t=[],r=this.getLoadedFeatures();return Object.keys(r).forEach((function(r){var n=e.feature2ProfileMap[r];t.push({id:r,profiles:n})})),t},s.prototype.getFeatureLoadingOrder=function(){return this.loadingOrder},s.prototype._registerModuleInfeatures=function(e,t,r){r[t].module=e,this.feature2ProfileMap[t]=r[t].spec.profiles},s.prototype._loadFeatureClasses=function(e,r,n){var i=this;return new Promise((function(o){var l=!1,d=i;require(e,(function(){for(var t=0;t<arguments.length;t++)d._registerModuleInfeatures(arguments[t],r[t],n),s.classes[e[t]]=arguments[t];o(n)}),(function(c){if(d.logger.log(c),!l){l=!0;for(var u=[],h=function(o){u.push(t.loadModule(e[o]).then((function(t){i._registerModuleInfeatures(t,r[o],n),s.classes[e[o]]=t})).catch((function(e){i._setError(r[o],"Failed to require feature",e.causedBy,n),a[n[r[o]].spec.class]=e})))},p=0;p<e.length;p++)h(p);Promise.all(u).then((function(){o(n)}))}}))}))},s.prototype._setError=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;n[e]||(n[e]={}),r instanceof ErrorEvent&&(r={message:r.message,lineno:r.lineno,filename:r.filename}),n[e].error={message:t,details:r},this.features[e]=n[e],this.logger.log("Feature loader:"+t,",loading feature:",e,",details:",r)},s.prototype.getFeatureErrors=function(){var e={},t=void 0;for(t in this.features)this.features[t].error&&(e[t]=this.features[t].error);return e},s.prototype._prepareFeature=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.features;if(!n[e]&&this.features[e]&&(n=this.features),!n[e]){var a=this._resolvePartialFeatureName(e,n);a?e=a.name:(a=this._resolvePartialFeatureName(e,this.features))&&(e=a.name,n=this.features)}n[e]||this._setError(e,"Attempting to load an undefined feature:"+e,"",n),this._getError(e,n)&&(n[e].preparePromise=Promise.resolve(e));var s=n[e].preparePromise;if(!s){var l={},d=[];this._getInitDependencies(e,n).forEach((function(i){r.isFeature(i,n)||r.isFeature(i)?(l[r._getDependenciesPreferredName(i,e,n)]={loader:r,init:!0,name:i},d.push(r._prepareFeature(i,t,n))):r.externalFeatureLoader&&r.externalFeatureLoader.isFeature(i)&&(l[r._getDependenciesPreferredName(i,e,n)]={loader:r.externalFeatureLoader,init:!0,name:i})})),this._getRuntimeDependencies(e,n).forEach((function(t){r.isFeature(t,n)||r.isFeature(t)?l[r._getDependenciesPreferredName(t,e,n)]={loader:r,init:!1,name:t}:r.externalFeatureLoader&&r.externalFeatureLoader.isFeature(t)?l[r._getDependenciesPreferredName(t,e,n)]={loader:r.externalFeatureLoader,init:!1,name:t}:l[r._getDependenciesPreferredName(t,e,n)]={loader:r,init:!1,name:t}})),s=Promise.all(d).then((function(){var a=[];r._getDependencies(e,n).forEach((function(e){var t=r._getError(e,n);t&&a.push(t)}));var s=!0;if(r._getInitDependencies(e,n).forEach((function(e){s&&(s=r._canSkipIsCreatedCheck(e)||!(r._isCreated(e,n)||r._isCreated(e,r.features)))})),0===a.length){r.loadingOrder.push(e);try{var d=i.extend({},r.featureParams),c=r._getOptions(e,n);c&&(d.options=c),d.features=o(e,l,t),n[e].params=d,d.featureSpecs&&(d.spec=d.featureSpecs[e]);var u=r._getFeatureModule(n[e]);if(!s||u.prototype.initialize){var h=r._createFeature(n[e]);return r._initializeFeature(e,n).then((function(){r.features[e]=n[e],r.featureNamePrefix&&(r.features[r.featureNamePrefix+"."+e]=n[e]),r.setParentChildRelation(e,h)}))}r.features[e]=n[e],r.featureNamePrefix&&(r.features[r.featureNamePrefix+"."+e]=n[e])}catch(t){r._setError(e,"Error while creating the feature:"+e,t,n)}}else r._setError(e,"Dependency failed to load",a,n)})),n[e].preparePromise=s,t.readyPromises.push(s)}return s},s.prototype._canSkipIsCreatedCheck=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=["API","Logger","internal","DashboardSettings","Canvas","state","state.internal","Transaction","DashboardTheme","Palette","Models.internal","DashboardState","UserProfile","DashboardPreferences"];return-1!==t.indexOf(e)||-1!==t.indexOf("Dashboard."+e)},s.prototype._initializeFeature=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features,n=r[e],i=null;try{var o=n.instance;"function"==typeof o.initialize&&(i=o.initialize()),i&&i.then?i=i.then((function(){t._postFeatureInitialize(n)})):this._postFeatureInitialize(n)}catch(t){this._setError(e,"Failed to initialize feature:"+e,t,r)}return i||(i=Promise.resolve()),i.catch((function(n){t._setError(e,"Failed to initialize feature: "+e,n,r)}))},s.prototype._deregisterLifeCycleHandlers=function(e){e&&(e.registeredHandlers&&e.registeredHandlers.forEach((function(e){return e.remove()})),e.registeredHandlers=[])},s.prototype._postFeatureInitialize=function(e){var t=this,r=e.instance;if(this._deregisterLifeCycleHandlers(e),this.lifeCycleManager&&"function"==typeof r.getLifeCycleHandlers){var n=r.getLifeCycleHandlers();if(!Array.isArray(n))throw new Error("serviceExtension getLifeCycleHandlers method is expected to return an array");n.forEach((function(r){if(!r.name||!r.action)throw new Error("serviceExtension handlers are expected to have a name and action property");e.registeredHandlers.push(t.lifeCycleManager.registerHandler(r.name,r.action,r.priority,r.triggerIfEventAlreadySent))}))}},s.prototype._validateDependencies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features,t=void 0;for(t in e)this._validateFeatureDependencies(t,null,e)},s.prototype._validateFeatureDependencies=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.features,i=t||[];if(-1!==i.indexOf(e))throw new Error('The feature with id "'+e+'" has a a circular dependency: '+t);i.push(e),this._getDependencies(e,n).forEach((function(t){if(!r._getFeatureSpec(t,n))throw new Error('The feature with id "'+e+'" has a missing dependency "'+t+'"');var o=i.concat([]);r._validateFeatureDependencies(t,o,n)}))},s.prototype._getFeatureSpec=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features;return t[e]&&t[e].spec||{}},s.prototype.setFeatureEnabled=function(e,t){this.features[e]&&(t?(this.features[e].disabled=!1,this._postFeatureInitialize(this.features[e])):(this.features[e].disabled=!0,this._deregisterLifeCycleHandlers(this.features[e])))},s.prototype.destroy=function(){var e=this;for(var t in i.each(i.keys(this.features),(function(t){if(e.featureNamePrefix&&t.startsWith(e.featureNamePrefix+"."))delete e.features[t];else{if(e.features[t].instance){e._deregisterLifeCycleHandlers(e.features[t]);var r=e._getFeatureInstance(t);if(r&&r.destroy)try{r.destroy()}catch(r){e._setError(t,"Error while destroying the feature:"+t,r)}}delete e.features[t]}})),this)Object.prototype.hasOwnProperty.call(this,t)&&delete this[t]},s.prototype.getFeature=function(e){var t,r=this._getFeatureInstance(e),n=void 0;if(!r&&e){var i=this._resolvePartialFeatureName(e);i&&(e=i.name,n=i.apiType,r=this._getFeatureInstance(e))}return this.isFeatureEnabled(e)&&!this._getError(e)&&r.getAPI&&(t=r.getAPI(n)),t},s.prototype.isFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features,r=t[e];if(!r){var n=this._resolvePartialFeatureName(e,t);n&&(r=t[n.name])}return!!r},s.prototype._isCreated=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features,r=t[e];if(!r){var n=this._resolvePartialFeatureName(e,t);n&&(r=t[n.name])}return r&&r.instance},s.prototype.getLoadedFeatures=function(){var e=this,t={};return Object.keys(this.features).forEach((function(r){if(!r.startsWith(e.featureNamePrefix+".")){var n=e._getFeatureInstance(r,{create:!1});n&&(t[r]=n)}})),t},s.prototype._resolvePartialFeatureName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.features,r=e.split(".");if(r.length>1){var n=r[0],i=r[r.length-1],o=r.splice(1,r.length-2).join(".");if(t[e=o?n+"."+o:n])return{name:e,apiType:i};if(t[e=n])return{name:e,apiType:i?o+"."+i:o}}return null},s.prototype.isFeatureEnabled=function(e){var t=this._getFeatureInstance(e,{create:!1});return t&&!this.features[e].disabled&&(!t.isEnabled||t.isEnabled())},s.prototype.getMatchingFeatures=function(e){var t=this,r=[];return i.each(i.keys(this.features),(function(n){if(t.isFeatureEnabled(n)&&t._getFeatureTags(n).indexOf(e)>=0){var i=t.getFeature(n);i&&r.push(i)}})),r},s.prototype.setMatchingFeaturesEnabled=function(e,t){var r=this;i.each(i.keys(this.features),(function(n){r.features[n]&&r._getFeatureTags(n).indexOf(e)>=0&&r.setFeatureEnabled(n,t)}))},s}();return s.classes={},s})),define("dashboard-core/js/dashboard/services/InlineFeatures",[],(function(){return[{containerId:"com.ibm.bi.dashboard.features",name:"DashboardProperties",id:"com.ibm.bi.dashboard.core-features.dashboardProperties",class:"dashboard-core/js/features/dashboard/dashboardProperties/DashboardPropertiesProvider",dependencies:["API","Properties","internal"],profiles:["core"]},{containerId:"com.ibm.bi.dashboard.features",name:"Serviceability",id:"com.ibm.bi.dashboard.features.serviceability",class:"dashboard-core/js/features/dashboard/dashboardServiceability/DashboardServiceability",dependencies:["API","DashboardState"],profiles:["core"]},{containerId:"com.ibm.bi.dashboard.features",name:"Print",id:"com.ibm.bi.dashboard.core-features.print",class:"dashboard-core/js/features/dashboard/print/api/impl/Print",dependencies:["API"],profiles:["consume"]},{containerId:"com.ibm.bi.dashboard.features",name:"DashboardPrint",id:"com.ibm.bi.dashboard.core-features.dashboardPrint",class:"dashboard-core/js/features/dashboard/dashboardPrint/api/impl/DashboardPrint",runtimeDependencies:["Zoom"],profiles:["consume"]},{containerId:"com.ibm.bi.dashboard.features",name:"ContentActions",id:"com.ibm.bi.dashboard.core-features.contentActions",class:"dashboard-core/js/features/dashboard/actions/ContentActions",dependencies:[],profiles:["core"]},{containerId:"com.ibm.bi.dashboard.features",name:"Notification",id:"com.ibm.bi.dashboard.features.notification",class:"dashboard-core/js/features/dashboard/notification/Notification",dependencies:["API"],profiles:["core"]}]})),define("dashboard-core/js/dashboard/services/DeprecatedInlineFeatures",[],(function(){return[{containerId:"com.ibm.bi.dashboard.core-features",name:"segment",id:"com.ibm.bi.dashboard.core-features.segment",class:"dashboard-core/js/features/dashboard/segment/SegmentFeature"},{containerId:"com.ibm.bi.dashboard.core-features",name:"CoachMark",id:"com.ibm.bi.dashboard.core-features.coachMark",class:"dashboard-core/js/features/dashboard/coachMark/api/impl/CoachMark"}]})),define("dashboard-core/js/features/dashboard/contentFactory/api/ContentFactoryAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.addModel=function(){},e.prototype.createContent=function(){},e.prototype.registerProvider=function(){},e}()})),define("dashboard-core/js/features/dashboard/contentFactory/api/impl/ContentFactory",["../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../ContentFactoryAPI"],(function(e,t){return function(){function r(){_classCallCheck(this,r),this._providers=[]}return r.prototype.getAPI=function(){return e.createAPI(this,[t])},r.prototype.registerProvider=function(e){this._providers.push(e)},r.prototype._searchProviders=function(e){return this._providers.find((function(t){return-1!==t.getTypeList().indexOf(e)}))},r.prototype.addModel=function(e){var t=this._searchProviders(e.type)||this._searchProviders();return t.addModel.apply(t,arguments)},r.prototype.createContent=function(e){var t=this._searchProviders(e.type)||this._searchProviders();return t.createContent.apply(t,arguments)},r}()})),define("dashboard-core/js/canvas/ContentAPISpec",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getAPISpec=function(){var e=this;return this.apiSpec||(this.apiSpec={name:"content API",features:{"Dashboard.Transaction":this.transaction},events:{propagationInfo:{namespace:"content",info:{contentId:this.getId()},callStack:{name:"getContent",params:[this.getId()]}},actions:{addContent:{eventName:"child",type:"add",isResolvePostResponse:!0,transactionAPI:this.transaction,transactionParamIndex:1,autoCreateTransaction:!0,getInfo:function(e,t){return{value:e[0],newContentId:t.getId(),parentId:t.getContainer().getId(),supportsUndoRedo:!0}},getAction:function(e,t){var r=JSON.parse(JSON.stringify(e[0]));return r.spec&&(r.spec=t.getFeature("Serializer").toJSON()),r.modelIdsValid=!0,{name:"addContent",params:[r]}},getUndoActions:function(e,t){return[{name:"removeContent",params:t?[t.getId()]:[]}]}},removeContent:{eventName:"child",type:"remove",isResolvePostResponse:!1,transactionParamIndex:1,transactionAPI:this.transaction,autoCreateTransaction:!0,getInfo:function(e){return{value:e[0],supportsUndoRedo:!0}},getUndoActions:function(t){var r=e.dashboardFeatures.getFeature("API").getCanvas().getContent(t[0]);if(r){var n={containerId:r.getContainer().getId(),spec:r.getFeature("Serializer").toJSON(),modelIdsValid:!0},i=e.getContentPosition(t[0]);return-1!==i&&(n.position=i),[{name:"addContent",params:[n]}]}return[]}},setPropertyValue:{eventName:"property",getEventName:function(e){return"property:"+e[0]},getInfo:function(t){var r={name:t[0],value:t[1],supportsUndoRedo:!0};t[2]&&(r.options=JSON.parse(JSON.stringify(t[2])));var n=e.getPropertyList().find((function(e){return e.id===t[0]}));return n?(n.onPropertyChange&&n.onPropertyChange.refresh?r.refresh=n.onPropertyChange.refresh:r.refresh={},n.onPropertyChange&&!0===n.onPropertyChange.resizing&&(r.resizing=n.onPropertyChange.resizing),r):r},getUndoActions:function(t){var r=e.dashboardFeatures.getFeature("API").getFeature("TranslationService");if(!r.isInTranslationMode())return[{params:[t[0],e.getPropertyValue(t[0])]}];var n=e._getModel(),i=r.getMultilingualProperty(n.id,t[0]),o=i?i.getValue(r.getTranslationModeLocale()):e.getPropertyValue(t[0]);return[{params:[t[0],o]}]}}}}}),this.apiSpec},e}()})),define("dashboard-core/js/api/ContentAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getId=function(){},e.prototype.getType=function(){},e.prototype.getPropertyLayoutList=function(){},e.prototype.getPropertyNameList=function(){},e.prototype.getPropertyList=function(){},e.prototype.setPropertyValue=function(){},e.prototype.getPropertyValue=function(){},e.prototype.getFeature=function(){},e.prototype.setFeatureEnabled=function(){},e.prototype.on=function(){},e.prototype.off=function(){},e.prototype.getContent=function(){},e.prototype.findContent=function(){},e.prototype.getContainer=function(){},e.prototype.getChildren=function(){},e.prototype.addContent=function(){},e.prototype.removeContent=function(){},e}()})),define("dashboard-core/js/features/content/state/StateAPI",[],(function(){var e=function(){function e(){_classCallCheck(this,e)}return e.prototype.getStatus=function(){},e.prototype.whenStatusChanges=function(){},e.prototype.getError=function(){},e.prototype.onChangeError=function(){},e}();return e.STATUS={CREATED:"created",INITIALIZED:"init",RENDERING:"rendering",RENDERED:"rendered"},e})),define("dashboard-core/js/features/content/state/PrivateStateAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.setStatus=function(){},e.prototype.setError=function(){},e.prototype.clearError=function(){},e}()})),define("dashboard-core/js/api/DashboardAPI",[],(function(){var e=function(){function e(){_classCallCheck(this,e)}return e.prototype.setMode=function(){},e.prototype.setDirty=function(){},e.prototype.getMode=function(){},e.prototype.getSpec=function(){},e.prototype.undo=function(){},e.prototype.redo=function(){},e.prototype.toggleProperties=function(){},e.prototype.on=function(){},e.prototype.off=function(){},e.prototype.addSources=function(){},e.prototype.relink=function(){},e.prototype.getCanvas=function(){},e.prototype.getCanvasWhenReady=function(){},e.prototype.getType=function(){},e.prototype.getName=function(){},e.prototype.canAuthor=function(){},e.prototype.getService=function(){},e.prototype.getServiceWhenReady=function(){},e.prototype.getFeature=function(){},e.prototype.triggerDashboardEvent=function(){},e.prototype.showToast=function(){},e.prototype.showMessage=function(){},e.prototype.showSlideOut=function(){},e.prototype.showContextMenu=function(){},e.prototype.getPluginExtension=function(){},e.prototype.getCollectionExtension=function(){},e.prototype.getConfiguration=function(){},e.prototype.getAppConfig=function(){},e.prototype.openApplication=function(){},e.prototype.closeApplication=function(){},e.prototype.showErrorMessage=function(){},e.prototype.getApplicationName=function(){},e.prototype.getApplicationLabel=function(){},e.prototype.getGlassSvc=function(){},e.prototype.getGlassCoreSvc=function(){},e.prototype.getDashboardSvc=function(){},e.prototype.getDashboardCoreSvc=function(){},e.prototype.findGlassPlugin=function(){},e.prototype.findGlassCollection=function(){},e.prototype.getLayout=function(){},e.prototype.deselectAllWidgets=function(){},e.prototype.getToolbarActions=function(){},e.prototype.openAppView=function(){},e.prototype.addContentToCanvas=function(){},e.prototype.getCollectionConfig=function(){},e.prototype.getCurrentContentView=function(){},e.prototype.getSources=function(){},e.prototype.getDataSourceList=function(){},e.prototype.setActiveDataSourceId=function(){},e.prototype.getActiveDataSourceId=function(){},e.prototype.copy=function(){},e.prototype.paste=function(){},e.prototype.destroy=function(){},e}();return e.MODES={EDIT:"authoring",VIEW:"consumption",EDIT_GROUP:"eventGroups"},e.GLOBAL_SERVICES={AJAX:".Ajax",LOGGER:".Logger",LIVEWIDGET:".LiveWidgetService"},e.GLOBAL_INTERNAL_SERVICES={CONTENT:".Content",USER_PROFILE:".UserProfile",PINNING:".DashboardPinning",THEME:".DashboardTheme",CONVERSION:".ConversionService",DRILL_INFO:".DrillInfoService",CONTENT_DIALOG:".ContentDialogFactory",DATA_CONNECTION:".DataConnectionServiceFactory"},e})),define("dashboard-core/js/features/content/state/impl/StateAPISpec",["../../../../api/DashboardAPI","../../../../lib/@waca/dashboard-common/dist/api/impl/CallbackInvoker"],(function(e,t){return function(e){function t(r){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,r))}return _inherits(t,e),t.prototype.getAPISpec=function(){return this.apiSpec||(this.apiSpec={name:"State API",events:{actions:{setStatus:{eventName:"status"},setError:{eventName:"error"}}}}),this.apiSpec},t}(t)})),define("dashboard-core/js/features/content/state/impl/StateImpl",["underscore","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/Error","../StateAPI","../PrivateStateAPI","./StateAPISpec"],(function(e,t,r,n,i,o){var a=function(o){function a(e){_classCallCheck(this,a);var r=_possibleConstructorReturn(this,o.call(this,e));return r._pendingStatusMap={},r._status=n.STATUS.CREATED,r._error=void 0,r._api=t.createAPI(r,[n]),r._privateApi=t.createAPI(r,[n,i]),r._statusCountTracker={},r}return _inherits(a,o),a.prototype.getAPI=function(e){return"internal"===e?this._privateApi:this._api},a.prototype.destroy=function(){this._api=null},a.prototype._isValidStatus=function(t){return e.values(n.STATUS).indexOf(t)>-1},a.prototype.getStatus=function(){return this._status},a.prototype.setStatus=function(t){if(!this._isValidStatus(t))throw new Error("Invalid status: "+t);if(this._status=t,this._statusCountTracker[t]?this._statusCountTracker[t]++:this._statusCountTracker[t]=1,e.isArray(this._pendingStatusMap[t]))for(;this._pendingStatusMap[t].length>0;)this._pendingStatusMap[t][0].resolve(this._getResolveState(t)),this._pendingStatusMap[t].splice(0,1)},a.prototype._getResolveState=function(e){return{status:e,count:this._statusCountTracker[e]}},a.prototype.whenStatusChanges=function(e){var t=this;if(!this._isValidStatus(e))throw new Error("Invalid status: "+e);return e===this._status?Promise.resolve(this._getResolveState(e)):(this._pendingStatusMap[e]||(this._pendingStatusMap[e]=[]),new Promise((function(r,n){t._pendingStatusMap[e].push({resolve:r,reject:n})})))},a.prototype.getError=function(){return this._error},a.prototype.setError=function(e){null==e||e instanceof r||(e=new r(e)),this._error=e,this.invokeCallbacks(a.ON_CHANGE_ERROR,e)},a.prototype.clearError=function(){this.setError()},a.prototype.onChangeError=function(e){this.registerCallback(a.ON_CHANGE_ERROR,e)},a}(o);return a.ON_CHANGE_ERROR="onChangeError",a})),define("dashboard-core/js/features/content/internalModels/api/InternalModelsAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getWidgetModel=function(){},e.prototype.getLayoutModel=function(){},e.prototype.toJSON=function(){},e}()})),define("dashboard-core/js/features/content/internalModels/InternalModels",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./api/InternalModelsAPI"],(function(e,t){return function(){function r(n){var i=n.widgetModel,o=n.layoutModel;_classCallCheck(this,r),this.widgetModel=i,this.layoutModel=o,this._api=e.createAPI(this,[t])}return r.prototype.getAPI=function(){return this._api},r.prototype.getWidgetModel=function(){return this.widgetModel},r.prototype.getLayoutModel=function(){return this.layoutModel},r.prototype.toJSON=function(){if(this.widgetModel)return this.widgetModel.toJSON()},r}()})),define("dashboard-core/js/features/content/contentFilter/api/ContentFilterAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.registerProvider=function(){},e.prototype.match=function(){},e}()})),define("dashboard-core/js/features/content/contentFilter/ContentFilter",["underscore","./api/ContentFilterAPI","../../../lib/@waca/dashboard-common/dist/core/APIFactory"],(function(e,t,r){return function(){function e(n){_classCallCheck(this,e),this.content=n.content,this.logger=n.logger||console,this._api=r.createAPI(this,[t]),this._providers={type:{match:function(e){var t=e.selector,r=e.layout;return!!t.type&&(r&&r.type===t.type||this.content.getType()===t.type)}.bind(this)}}}return e.prototype.getAPI=function(){return this._api},e.prototype.registerProvider=function(e,t){this._providers[e]=t},e.prototype.match=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(var r in e.selector)try{if(!this._providers[r]||!this._providers[r].match(e)){t=!1;break}t=!0}catch(e){this.logger.error(e)}return t},e}()})),define("dashboard-core/js/features/dashboard/serializer/SerializerAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.toJSON=function(){},e}()})),define("dashboard-core/js/dashboard/model/content/properties/PropertiesModel",["../../../../lib/@waca/dashboard-common/dist/core/Model"],(function(e){var t=e.extend({init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var r in t.inherited("init",this,arguments),e)this.whitelistAttrs.push(r)},setPropertyValue:function(e,t,r){-1===this.whitelistAttrs.indexOf(e)&&this.whitelistAttrs.push(e);var n={};n[e]=t&&"object"===(void 0===t?"undefined":_typeof(t))?JSON.parse(JSON.stringify(t)):t,this.set(n,r)},getPropertyValue:function(e){var t=this.get(e);return t&&"object"===(void 0===t?"undefined":_typeof(t))&&(t=JSON.parse(JSON.stringify(t))),t}});return t})),define("dashboard-core/js/dashboard/model/content/ContentModel",["../../../lib/@waca/dashboard-common/dist/core/Model","./properties/PropertiesModel"],(function(e,t){var r=e.extend({nestedModels:{properties:t},whitelistAttrs:["properties","features"],init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.inherited("init",this,arguments),e.conditionalFormatting&&this.whitelistAttrs.push("conditionalFormatting"),this.features=e.features||{}},setPropertyValue:function(e,r,n){this.properties||(this.properties=new t),this.properties.setPropertyValue(e,r,n)},getPropertyValue:function(e){if(this.properties)return this.properties.getPropertyValue(e)},getConditionalFormatting:function(){return this.get("conditionalFormatting")},setConditionalFormatting:function(e,t){-1===this.whitelistAttrs.indexOf("conditionalFormatting")&&this.whitelistAttrs.push("conditionalFormatting");var r={conditionalFormatting:e};this.set(r,t)}});return r})),define("dashboard-core/js/dashboard/model/ModelUtils",["./content/ContentModel"],(function(e){return function(){function t(){_classCallCheck(this,t)}return t.initializeContentModel=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.content||{};return t.hasOwnProperty("properties")&&(n.properties={},Object.keys(t.properties).forEach((function(e){-1===r.indexOf(e)&&(n.properties[e]=t.properties[e],delete t.properties[e])})),0===Object.keys(t.properties).length&&delete t.properties),t.hasOwnProperty("features")&&(n.features=t.features,delete t.features),delete t.content,new e(n)},t.pullPropertiesFromContentModelSpec=function(e){var t=e.content;t&&(["properties","features"].forEach((function(r){t.hasOwnProperty(r)&&(t[r]&&Object.keys(t[r]).length&&(e[r]=Object.assign({},e[r],t[r])),delete t[r])})),0===Object.keys(t).length&&delete e.content)},t}()})),define("dashboard-core/js/features/content/serializer/Serializer",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../dashboard/serializer/SerializerAPI","../../../dashboard/model/ModelUtils"],(function(e,t,r){return function(){function n(r){var i=r.layoutModel,o=r.content,a=r.logger;_classCallCheck(this,n),this._layoutModel=i,this._content=o,this._logger=a,this._api=e.createAPI(this,[t])}return n.prototype.getAPI=function(){return this._api},n.prototype.destroy=function(){delete this._layoutModel,delete this._content,delete this._api},n.prototype.toJSON=function(){var e=this,t=this._layoutModel.toJSON(null,["items"]),n=this._layoutModel.items;return n&&(t.items=[],n.forEach((function(r){var n=e._content.getContent(r.id);n?t.items.push(n.getFeature("Serializer").toJSON()):e._logger.log("Cannot get the child content")}))),r.pullPropertiesFromContentModelSpec(t),t},n}()})),define("dashboard-core/js/app/util/GlassUtil",["../../lib/@waca/core-client/js/core-client/ui/core/Class"],(function(e){return new(e.extend({isDevMode:function(e){return!!(e&&e.biGlass&&e.biGlass.glassContext&&e.biGlass.glassContext.isDevInstall)&&e.biGlass.glassContext.isDevInstall()},getAjaxService:function(e){return e.services.ajax}}))})),define("text!dashboard-core/js/dashboard/schema/schemaDefs.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "schemaDefs.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "Definitions",\n    "definitions": {\n        "id": {\n            "type": "string"\n        },\n        "modelId": {\n            "type": "string"\n        },\n        "queryId": {\n            "type": "string"\n        },\n        "name": {\n            "type": ["string", "null"]\n        },\n        "theme": {\n            "oneOf": [{\n                "enum": ["carbonGrey10", "carbonGrey100"]\n            }, {\n                "type": "string"\n            }]\n        },\n        "type": {\n            "type": "string",\n            "enum": ["templateDropZone", "scalingAbsolute", "container", "uploadedFile", "theme"]\n        },\n        "style": {\n            "height": { "type": "string" },\n            "width": { "type": "string" },\n            "left": { "type": "string" },\n            "top": { "type": "string" },\n            "transform": { "type": "string" },\n            "-webkit-transform": { "type": "string" }\n        },\n        "assetId": {\n            "type": "string",\n            "pattern": "^i[0-9,A-F]"\n        },\n        "strArray": {\n            "type": "array",\n            "items": {\n                "type": "string"\n            }\n        },\n        "uniqueId": {\n            "type": "string",\n            "pattern": "[0-9,a-f,-]*"\n\n        },\n        "layoutItem": {\n            "type": "object",\n            "properties": {\n                "id": { "$ref": "#/definitions/id" },\n                "style": { "$ref": "#/definitions/style" },\n                "type": { "$ref": "#/definitions/layoutType" },\n                "relatedLayouts": { "type": "string" },\n                "items": { "$ref": "#/definitions/layoutItems" },\n                "css": { "type": "string" },\n                "title": { "type": "string" },\n                "templateName": { "type": "string" }\n            },\n            "required": [ "id", "type" ]\n        },\n        "layoutItems": {\n            "type": "array",\n            "minItems": 0,\n            "items": { "$ref": "#/definitions/layoutItem" }\n        },\n        "layoutType": {\n            "type": "string",\n            "enum": ["tab", "absolute", "widget", "group"]\n        }\n    }\n}\n'})),define("text!dashboard-core/js/dashboard/schema/schemaMappings.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "name": "nameSchema.json",\n    "version": "versionSchema.json",\n    "layout": "layoutSchema.json",\n    "layoutFragment": "layoutFragmentSchema.json",\n    "theme": "themeSchema.json",\n    "specVersion": "versionSchema.json",\n    "eventGroups": "eventGroupsSchema.json",\n    "drillThrough": "drillThroughSchema.json",\n    "properties": "propertiesSchema.json",\n    "pageContext": "pageContextSchema.json",\n    "widgets": "widgetsSchema.json",\n    "widgetsFragment": "widgetsFragmentSchema.json"\n}\n'})),define("text!dashboard-core/js/dashboard/schema/nameSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "nameSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "name",\n    "description": "The name of the dashboard specification",\n    "type": "string"\n}\n'})),define("text!dashboard-core/js/dashboard/schema/layoutSchema.json",[],(function(){return'{\n\t"copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018, 2022. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n\t"$id": "layoutSchema.json",\n\t"$schema": "http://json-schema.org/draft-07/schema#",\n\t"title": "layout",\n\t"description": "The layout of the dashboard specification, representing ...",\n\t"definitions": {\n\t\t"item": {\n\t\t\t\t"type": "object",\n\t\t\t\t"properties": {\n\t\t\t\t\t"id": { "$ref": "schemaDefs.json#/definitions/id" },\n\t\t\t\t\t"style": { "$ref": "schemaDefs.json#/definitions/style" },\n\t\t\t\t\t"type": { "$ref": "#/definitions/layoutType" },\n\t\t\t\t\t"relatedLayouts": { "type": "string" },\n\t\t\t\t\t"items": { "$ref": "#/definitions/items" },\n\t\t\t\t\t"css": { "type": "string" },\n\t\t\t\t\t"title": { "type": "string" },\n\t\t\t\t\t"templateName": { "type": "string" },\n\t\t\t\t\t"features": { "$ref": "#/definitions/features" },\n\t\t\t\t\t"layoutPositioning": { "type": "string" },\n\t\t\t\t\t"properties": { "$ref": "#/definitions/contentProperties" }\n\t\t\t\t},\n\t\t\t\t"required": [ "id", "type"]\n\t\t},\n\t\t"features": {\n\t\t\t"type": "object",\n\t\t\t"patternProperties": {\n\t\t\t\t"[0-9,a-z,-,_]*": { "$ref": "widgetsTemplateSchema.json#/definitions/widget" }\n\t\t\t}\n\t\t},\n\t\t"forecastProperties": {\n\t\t\t"type:": "object",\n\t\t\t"properties": {\n\t\t\t\t"toggleEnabled": { "type": "boolean" },\n\t\t\t\t"settings": { "type": "string" }\n\t\t\t}\n\t\t},\n\t\t"contentProperties": {\n\t\t\t"type": "object",\n\t\t\t"properties": {\n\t\t\t\t"forecasting": { "$ref": "#/definitions/forecastProperties" }\n\t\t\t},\n\t\t\t"patternProperties": {\n\t\t\t\t"^[a-z,A-Z,0-9]*$": { "type": "string" }\n\t\t\t}\n\t\t},\n\t\t"items": {\n\t\t\t\t"type": "array",\n\t\t\t\t"minItems": 0,\n\t\t\t\t"items": { "$ref": "#/definitions/item" }\n\t\t},\n\t\t"layoutType": {\n\t\t\t\t"type": "string",\n\t\t\t\t"enum": ["tab", "absolute", "widget", "group", "genericPage", "container"]\n\t\t}\n\t},\n\t"type": "object",\n\t"properties": {\n\t\t"id": { "$ref": "schemaDefs.json#/definitions/id" },\n\t\t"style": { "$ref": "schemaDefs.json#/definitions/style" },\n\t\t"items": { "$ref": "#/definitions/items" },\n\t\t"type": { "$ref": "#/definitions/layoutType" },\n\t\t"showGrid": { "type": "boolean" },\n\t\t"snapGrid": { "type": "boolean" },\n\t\t"snapObjects": { "type": "boolean" },\n\t\t"tabTextColor": { "type": "string" },\n\t\t"tabSelectedLineColor": { "type": "string" },\n\t\t"tabBackgroundColor": { "type": "string" },\n\t\t"hideTab": { "type": "boolean" },\n\t\t"tabPosition": { "type": "string" },\n\t\t"tabIconPosition": { "type": "string" },\n\t\t"tabIcon": { "type": "string" },\n\t\t"tabIconColor": { "type": "string" },\n\t\t"fitPage": { "type": "boolean" },\n\t\t"fillColor": { "type": "string" },\n\t\t"pageSize": {\n\t\t\t\t"type": "object",\n\t\t\t\t"properties": {\n\t\t\t\t\t"height": { "type": "number" },\n\t\t\t\t\t"width": { "type": "number" }\n\t\t\t\t}\n\t\t},\n\t\t"layoutPositioning": { "type": "string" },\n\t\t"features": { "$ref": "#/definitions/features" }\n\t},\n\t"required": [ "id", "type", "items" ]\n}\n'})),define("text!dashboard-core/js/dashboard/schema/layoutFragmentSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "layoutFragmentSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "layout Fragment",\n    "description": "The layout fragment of the dashboard specification fragment, representing ...",\n    "type": "array",\n    "items": { "$ref": "layoutSchema.json#/definitions/item" },\n    "required": [ "id", "type", "items" ]\n}\n'})),define("text!dashboard-core/js/dashboard/schema/themeSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "themeSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "theme",\n    "description": "The theme for the dashboard specification",\n    "properties": {\n        "theme": {"$ref": "schemaDefs.json#/definitions/theme"}\n    }\n}\n'})),define("text!dashboard-core/js/dashboard/schema/versionSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "versionSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "version",\n    "description": "The version of the dashboard specification",\n    "type": "integer",\n    "minimum": 1000\n}\n'})),define("text!dashboard-core/js/dashboard/schema/eventGroupsSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "eventGroupsSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "eventGroups",\n    "description": "The event groups of the dashboard specification, representing ...",\n    "type": "array",\n    "items": {\n        "type": "object",\n        "properties": {\n            "id": {\n                "$ref": "schemaDefs.json#/definitions/id"\n            },\n            "widgetIds": {\n                "description": "The model id of ...",\n                "type": "array",\n                "minItems": 1,\n                "items": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                "uniqueItems": true\n            }\n        },\n        "required": ["id", "widgetIds"]\n    }\n}\n'})),define("text!dashboard-core/js/dashboard/schema/drillThroughSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "drillThroughSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "drillThrough set",\n    "description": "The drill through of the dashboard specification, representing ...",\n    "type": "array",\n    "minItems": 0,\n    "items": {\n        "title": "drillThrough",\n        "type": "object",\n        "properties": {\n            "id": {\n                "$ref": "schemaDefs.json#/definitions/modelId"\n            },\n            "name": {\n                "$ref": "schemaDefs.json#/definitions/name"\n            },\n            "targetName": {\n                "$ref": "schemaDefs.json#/definitions/name"\n            },\n            "type": {\n                "type": "string",\n                "enum": ["report"]\n            },\n            "assetId": {\n                "$ref": "schemaDefs.json#/definitions/assetId"\n            },\n            "modelRefs": {\n                "type": "array",\n                "minItems": 0,\n                "items": {"$ref": "schemaDefs.json#/definitions/modelId" }\n            },\n            "mappings": {\n                "description": "...",\n                "type": "array",\n                "minItems": 0,\n                "items": {\n                    "type": "object",\n                    "properties": {\n                        "name": {\n                            "$ref": "schemaDefs.json#/definitions/name"\n                        },\n                        "modelFilterItem": {\n                            "$ref": "schemaDefs.json#/definitions/name"\n                        },\n                        "type": {\n                            "type": "string",\n                            "enum": ["xsdString"]\n                        },\n                        "capabilities": {\n                            "description": "...",\n                            "type": "array",\n                            "minItems": 0,\n                            "items": { "type": "string" },\n                            "uniqueItems": true\n                        },\n                        "mapTo": {\n                            "type": "string"\n                        }\n                    }\n                },\n                "uniqueItems": true\n            },\n            "ownerId": { "$ref": "schemaDefs.json#/definitions/modelId" }\n        }\n    }\n}\n'})),define("text!dashboard-core/js/dashboard/schema/propertiesSchema.json",[],(function(){return'{\n\t"copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018, 2022. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n\t"$id": "propertiesSchema.json",\n\t"$schema": "http://json-schema.org/draft-07/schema#",\n\t"title": "properties",\n\t"description": "The properties of the dashboard specification",\n\t"type": "object",\n\t"properties": {\n\t\t"customColors": {\n\t\t\t"type": "object",\n\t\t\t"properties": {\n\t\t\t\t"colors": {\n\t\t\t\t\t"type": "array",\n\t\t\t\t\t"items": {\n\t\t\t\t\t\t"color": {\n\t\t\t\t\t\t\t"$ref": "schemaDefs.json#/definitions/name"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t"localCache": {\n\t\t\t"type": "string"\n\t\t},\n\t\t"dashboardColorSet": {\n\t\t\t"type": "string"\n\t\t},\n\t\t"fredIsRed": {\n\t\t\t"type": "boolean"\n\t\t},\n\t\t"defaultLocale": {\n\t\t\t"type": "string"\n\t\t},\n\t\t"colorSet": {\n\t\t\t"oneOf": [\n\t\t\t\t{\n\t\t\t\t\t"type": "string"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"type": "object",\n\t\t\t\t\t"properties": {\n\t\t\t\t\t\t"type": {\n\t\t\t\t\t\t\t"type": "string"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t"defaultZoom": {\n\t\t\t"type": "string"\n\t\t}\n\t}\n}\n'})),define("text!dashboard-core/js/dashboard/schema/widgetsSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018, 2020. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "widgetsSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "widget set",\n    "description": "The widget of the dashboard specification, representing ...",\n    "definitions": {\n        "widgetData": {\n            "type": "object",\n            "properties": {\n                "id": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                "itemId": { "$ref": "schemaDefs.json#/definitions/queryId" },\n                "itemLabel": { "$ref": "schemaDefs.json#/definitions/name" },\n                "selection": {\n                    "type": "array",\n                    "items": {\n                        "type": "object",\n                        "properties": {\n                            "operation": {\n                                "type": "string",\n                                "enum": ["add", "remove", "order", "keep"]\n                            },\n                            "selectDepth": { "type": "string"},\n                            "set": { "$ref": "schemaDefs.json#/definitions/strArray" },\n                            "filter": {\n                                "type": "object",\n                                "properties": {\n                                    "not": { "$ref": "#/definitions/filterEntry" },\n                                    "or": {\n                                        "type": "array",\n                                        "items": {\n                                            "type": "object",\n                                            "properties": {\n                                                "type": { "$ref": "#/definitions/filterEntry" },\n                                                "not": { "$ref": "#/definitions/filterEntry" }\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            "children": { "$ref": "schemaDefs.json#/definitions/strArray" },\n                            "sort": {\n                                "type": "object",\n                                "properties": {\n                                    "type": {\n                                        "type": "string",\n                                        "enum": ["asc", "desc"]\n                                    },\n                                    "priority": { "type": "number" },\n                                    "by": {\n                                        "type": "string",\n                                        "enum": ["caption"]\n                                    }\n                                }\n                            },\n                            "topBottom": {\n                                "type": "object",\n                                "properties": {\n                                    "type": {\n                                        "type": "string",\n                                        "enum": ["topcount", "bottomcount", "toppercent", "bottompercent"]\n                                    },\n                                    "value": { "type": "number" }\n                                }\n                            },\n                            "context": {\n                                "type": "array",\n                                "items": {\n                                    "itemId": { "$ref": "schemaDefs.json#/definitions/id" }\n                                }\n                            }\n                        }\n                    }\n                },\n                "format": {\n                    "type": "object",\n                    "properties": {\n                        "formatSpec": {\n                            "type": "object",\n                            "properties": {\n                                "local": { "type": "boolean" },\n                                "type": {\n                                    "type": "string",\n                                    "enum": ["number","percent","currency"]\n                                },\n                                "timezone": { "type": "string" },\n                                "locale": { "type": "string" },\n                                "convertPercent": { "type": "boolean" },\n                                "currencyCode": { "type": "string" },\n                                "currencyDisplay": {\n                                    "type": "string",\n                                    "enum": ["symbol", "code"]\n                                },\n                                "maximumFractionDigits": { "type": "number" },\n                                "minimumFractionDigits": { "type": "number" },\n                                "dateStyle": {\n                                    "type": "string",\n                                    "enum": ["short", "medium", "full", "long"]\n\n                                },\n                                "timeStyle": {\n                                    "type": "string",\n                                    "enum": ["short", "full", "long"]\n                                }\n                            }\n                        }\n                    }\n                },\n                "aggregate": { "$ref": "#/definitions/aggregationType" }\n            }\n        },\n        "filterEntry": {\n            "type": "object",\n            "properties": {\n                "id": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                "columnId": { "$ref": "schemaDefs.json#/definitions/id" },\n                "operator": { "$ref": "#/definitions/operatorType" },\n                "values": { "$ref": "#/definitions/values" },\n                "excludedValues": {\n                    "type": "array",\n                    "items": { "$ref": "#/definitions/values" }\n                },\n                "idSuffix": { "type": "integer" },\n                "valueDataItem": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                "aggregationType": { "$ref": "#/definitions/aggregationType" },\n                "preOrPost": {\n                    "type": "string",\n                    "enum": ["pre", "post"]\n                },\n                "conditions": {\n                    "type": "object",\n                    "properties": {\n                        "operator": { "$ref": "#/definitions/operatorType" },\n                        "itemId": { "$ref": "schemaDefs.json#/definitions/queryId" },\n                        "ignoreCase": { "type": "boolean" },\n                        "values": { "$ref": "#/definitions/values" },\n                        "valueType": {\n                            "type": "string",\n                            "enum": ["display"]\n                        },\n                        "and" : {\n                            "type": "array",\n                            "minItems": 2,\n                            "items": {\n                                "operator": { "$ref": "#/definitions/operatorType" },\n                                "itemId": { "$ref": "schemaDefs.json#/definitions/queryId" },\n                                "ignoreCase": { "type": "boolean" },\n                                "values": { "$ref": "#/definitions/values" },\n                                "valueType": {\n                                    "type": "string",\n                                    "enum": ["display"]\n                                }\n                            }\n                        },\n                        "or" : {\n                            "type": "array",\n                            "minItems": 2,\n                            "items": {\n                                "operator": { "$ref": "#/definitions/operatorType" },\n                                "itemId": { "$ref": "schemaDefs.json#/definitions/queryId" },\n                                "ignoreCase": { "type": "boolean" },\n                                "values": { "$ref": "#/definitions/values" },\n                                "valueType": {\n                                    "type": "string",\n                                    "enum": ["display"]\n                                }\n                            }\n                        }\n                    }\n                },\n                "overrideHierarchyDefaultSelection": { "type": "boolean" },\n                "visualizationId": { "$ref": "schemaDefs.json#/definitions/id" }\n            }\n        },\n        "slotmapping": {\n            "type": "object",\n            "properties": {\n                "slots": {\n                    "type": "array",\n                    "items": {\n                        "type": "object",\n                        "properties": {\n                            "name": { "$ref": "schemaDefs.json#/definitions/name" },\n                            "caption": { "$ref": "schemaDefs.json#/definitions/name" },\n                            "id": { "$ref": "schemaDefs.json#/definitions/name" },\n                            "layerId": { "$ref": "schemaDefs.json#/definitions/name" },\n                            "dataItems": {\n                                "type": "array",\n                                "items": { "$ref": "schemaDefs.json#/definitions/modelId" }\n                            },\n                            "type": {\n                                "type": "string",\n                                "enum": ["categorical", "ordinal", "any"]\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        "possibleKeyDrivers": {\n            "type": "array",\n            "items": {\n                "$ref": "schemaDefs.json#/definitions/queryId"\n            }\n        },\n        "localFilters": {\n            "type": "array",\n            "items": {\n                "$ref": "#/definitions/filterEntry"\n            }\n        },\n        "aggregationType": {\n            "type": "string",\n            "enum": ["avg", "sum", "min", "max", "count", "countdistinct"]\n        },\n        "operatorType": {\n            "type": "string",\n            "enum": ["containsignorecase", "eq", "beginswith", "endswith", "in", "notin", "between", "notbetween", "or", "not", "gt", "lt"]\n        },\n        "values": {\n            "anyOf": [ {\n                "$ref": "schemaDefs.json#/definitions/strArray"\n            },\n            {\n                "type": "array",\n                "items": {\n                    "type": "object",\n                    "properties": {\n                        "u": {"type": ["string", "number"] },\n                        "d": {"type": ["string", "number"] }\n                    }\n                }\n            } ]\n        },\n        "data" :{\n            "type": "object",\n            "properties": {\n                "dataViews": {\n                    "type": "array",\n                    "items": {\n                        "type": "object",\n                        "properties": {\n                            "id": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                            "modelRef": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                            "dataItems": {\n                                "type": "array",\n                                "items": { "$ref": "#/definitions/widgetData" }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    },\n    "type": "object",\n    "patternProperties": {\n        "[0-9,a-z,-,_]*": {\n            "type": "object",\n            "allOf": [\n                { "$ref": "widgetsTemplateSchema.json#/definitions/widget" },\n                {\n                    "properties": {\n                        "data": { "$ref": "#/definitions/data" },\n                        "slotmapping": { "$ref": "#/definitions/slotmapping" },\n                        "possibleKeyDrivers": { "$ref": "#/definitions/possibleKeyDrivers" },\n                        "localFilters": { "$ref": "#/definitions/localFilters" }\n                    }\n                }\n            ]\n        }\n    }\n}\n'})),define("text!dashboard-core/js/dashboard/schema/widgetsFragmentSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2018. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "widgetsFragmentSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "widget set",\n    "description": "The widget fragment of the dashboard specification, representing ...",\n    "type": "array",\n    "items": {\n        "type": "object",\n        "properties": {\n            "id": { "$ref": "schemaDefs.json#/definitions/modelId" },\n            "type": {"$ref": "widgetsTemplateSchema.json#/definitions/widgetType" },\n            "data": {\n                "type": "object",\n                "properties": {\n                    "dataViews": {\n                        "type": "array",\n                        "items": {\n                            "type": "object",\n                            "properties": {\n                                "id": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                                "modelRef": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                                "dataItems": {\n                                    "type": "array",\n                                    "items": { "$ref": "widgetsSchema.json#/definitions/widgetData" }\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n            "visTypeLocked": { "$ref": "widgetsTemplateSchema.json#/definitions/visTypeLocked" },\n            "slotmapping": { "$ref": "widgetsSchema.json#/definitions/slotmapping" },\n            "possibleKeyDrivers": { "$ref": "widgetsSchema.json#/definitions/possibleKeyDrivers" },\n            "name": { "$ref": "schemaDefs.json#/definitions/name" },\n            "localFilters": { "$ref": "widgetsSchema.json#/definitions/localFilters" },\n            "properties": { "$ref": "widgetsTemplateSchema.json#/definitions/properties" },\n            "borderColor": { "$ref": "schemaDefs.json#/definitions/name" },\n            "titleAlign": { "$ref": "widgetsTemplateSchema.json#/definitions/titleAlign" },\n            "titleState": { "$ref": "schemaDefs.json#/definitions/name" },\n            "content": { "$ref": "widgetsTemplateSchema.json#/definitions/content" }\n        }\n    }\n}\n'})),define("text!dashboard-core/js/dashboard/schema/widgetsTemplateSchema.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2019, 2020. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "widgetsTemplateSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "widget set",\n    "description": "The widget of the dashboard specification, representing ...",\n    "definitions": {\n        "visTypeLocked": { "type": "boolean" },\n        "properties": {\n            "type": "array",\n            "items": {\n                "type": "object",\n                "properties": {\n                    "id": { "$ref": "schemaDefs.json#/definitions/name" },\n                    "value": {\n                        "anyOf": [\n                            { "type": "string" },\n                            { "type": "integer" },\n                            { "type": "boolean" },\n                            { "type": "null" },\n                            {\n                                "type": "object",\n                                "properties": {\n                                    "r": { "type": "integer" },\n                                    "g": { "type": "integer" },\n                                    "b": { "type": "integer" },\n                                    "a": { "type": "number" },\n                                    "name": { "$ref": "schemaDefs.json#/definitions/name" },\n                                    "caption": { "type":  "string" },\n                                    "description": {\n                                        "type": ["null", "string"]\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                }\n            }\n        },\n        "titleAlign": {\n            "type": "string",\n            "enum": ["align_left", "align_center", "align_right"]\n        },\n        "widgetType": {\n            "type": "string",\n            "enum": ["live", "text", "shape", "webpage", "media", "image", "filter"]\n        },\n        "content": { "type": "string" },\n        "widget": {\n            "type": "object",\n            "properties": {\n                "id": { "$ref": "schemaDefs.json#/definitions/modelId" },\n                "type": { "$ref": "#/definitions/widgetType" },\n                "visId": { "type": "string" },\n                "isResponsive": { "type" : "boolean"},\n                "visTypeLocked": { "$ref": "#/definitions/visTypeLocked" },\n                "properties": { "$ref": "#/definitions/properties" },\n                "borderColor": { "$ref": "schemaDefs.json#/definitions/name" },\n                "title": { "$ref": "schemaDefs.json#/definitions/name" },\n                "titleAlign": { "$ref": "#/definitions/titleAlign" },\n                "titleState": { "$ref": "schemaDefs.json#/definitions/name" },\n                "titleHtml": { "$ref": "schemaDefs.json#/definitions/name" },\n                "altText": { "type": "string" },\n                "content": { "$ref": "#/definitions/content" },\n                "imageLink": { "type": "string" },\n                "fillColor" : { "type": "string" },\n                "showTitle" : { "type": "boolean" },\n                "placeholder": {\n                    "type": "object",\n                    "properties" : {\n                        "showIcon": { "type": "boolean" },\n                        "text": { "type": "string" }\n                    }\n                },\n                "params": {\n                    "type": "object",\n                    "properties": {\n                        "notebookId": {"type": "string" },\n                        "notebookSelectedCellIndex": {"type": "number" },\n                        "showTimestamp": {"type": "boolean" }\n                    }\n                },\n                "mediaLink": { "type": "string" },\n                "mediaType": { "type": "string" },\n                "url": { "type": "string" },\n                "name": { "$ref": "schemaDefs.json#/definitions/name" }\n            }\n        }\n    },\n    "type": "object",\n    "patternProperties": {\n        "[0-9,a-z,-,_]*": { "$ref": "#/definitions/widget" }\n    }\n}\n'})),define("dashboard-core/js/dashboard/util/DashboardSpecHelper",["underscore","../../app/util/GlassUtil","text!../schema/schemaDefs.json","text!../schema/schemaMappings.json","text!../schema/nameSchema.json","text!../schema/layoutSchema.json","text!../schema/layoutFragmentSchema.json","text!../schema/themeSchema.json","text!../schema/versionSchema.json","text!../schema/eventGroupsSchema.json","text!../schema/drillThroughSchema.json","text!../schema/propertiesSchema.json","text!../schema/widgetsSchema.json","text!../schema/widgetsFragmentSchema.json","text!../schema/widgetsTemplateSchema.json","jquery"],(function(e,t,r,n,i,o,a,s,l,d,c,u,h,p,g,f){return function(){function m(e){_classCallCheck(this,m),this.controller=e,this.dashboardApi=e.dashboardApi,this.glassContext=e.glassContext,this.logger=this.glassContext&&this.glassContext.getCoreSvc?this.glassContext.getCoreSvc(".Logger"):null}return m.prototype.getContents=function(e,t){var r=this,n=[],i=[],o=this.dashboardApi.getFeature("internal").getBoardModel(),a=o.version,s=this.dashboardApi.getCanvas();if(t)i=[t];else{var l=this.controller.getSelectedNodes().map((function(e){return e.id})),d=void 0;l.forEach((function(e){(d=s.getContent(e))&&i.push(d)}))}return i.forEach((function(t){for(var i=t.getFeature("Models.internal").getLayoutModel(),l=i.listWidgets([i.id]),d=[],c=[],u=[],h=[],p=void 0,g=void 0,f=0;f<l.length;f++){var m=s.getContent(l[f])||t.getContent(l[f])||t;g=m.getFeature("Models.internal").getWidgetModel();var b=r._addFilterToWidgetModel(g);e?d.push(b):"filter"!==g.type?(c.push(g),d.push(b)):p="filterWidgetCopyWarn";var y=r._getTimeLineEpisodeForPinning(o,l[f]);y&&u.push(y);var v=m.getFeature("Visualization");if(v){var _=v.getDataSource(),C=_?_.getId():null;C&&-1===h.indexOf(C)&&h.push(C)}}var w=r._getDataSources(h,o.dataSources),P={specVersion:a,layout:i,widgets:d,dataSources:w,dashboardID:"",errMsg:p,nodeCopied:!0};if(p&&(P.nodeCopied=!1),P.nonMergedWidgets=c,t.getContainer()&&(P.parentID=t.getContainer().getId()),g&&o.drillThrough&&"function"==typeof o.drillThrough.getModels){var S=r.dashboardApi.getDashboardCoreSvc("DrillThroughService");P.drillThrough=S.getDrillThroughByWidgetAndGroups(g,e)}(o.properties&&o.properties.customColors&&(P.properties={customColors:{colors:o.properties.customColors.colors}}),o.fredIsRed&&(P.fredIsRed=o.fredIsRed),i.content&&i.content.properties)&&(-1!==Object.keys(i.content&&i.content.properties).indexOf("explicitScale")&&delete P.layout.content.properties.explicitScale);u.length>0&&(P.episodes=u),n.push(P)})),n},m.prototype._addFilterToWidgetModel=function(e){var t=this.dashboardApi.getCanvas().getContent(e.id),r=t&&t.getFeature("Visualization.legacy");if(r){var n=f.extend(!0,{},e),i=r.getLegacyManagers().visFilterSupport.getAllFiltersAsLocalFiltersForPinning();return i&&(n.localFilters=i,delete n.filters),n}return e},m.prototype._removeModelsInternal=function(e){if(e.content&&e.content.features&&(delete e.content.features.Models_internal,0===Object.keys(e.content.features).length&&delete e.content.features,0===Object.keys(e.content).length&&delete e.content),e.items)for(var t=0;t<e.items.length;t++)this._removeModelsInternal(e.items[t])},m.prototype.getContentsToJSONSpec=function(t){var r=this,n={},i=void 0,o=this.getContents(!1,t),a=e.countBy(o,(function(e){return e.nodeCopied?"copied":"notCopied"}));if((o=this._removeErrorsFromSpec(o,n)).length){o[0].specVersion&&(n.specVersion=o[0].specVersion),n.layout=o.map((function(e){var t=e.layout.toJSON();return r._removeModelsInternal(t),t})),n.parentID=e.map(o,(function(e){return e.parentID})),n.dashboardID=o[0].dashboardID,n.widgets=e.chain(o).map((function(e){return e.widgets})).flatten().map((function(e){return e.toJSON()})).value(),n.nonMergedWidgets=e.chain(o).map((function(e){return e.nonMergedWidgets})).flatten().map((function(e){return e.toJSON()})).value(),n.dataSources={},n.dataSources.version=o[0].dataSources.version,n.dataSources.sources=[];var s=[];e.each(o,(function(t){e.each(t.dataSources.sources,(function(e){var t=-1;if(n.dataSources.sources.length>0&&(t=n.dataSources.sources.findIndex((function(t){return t.id===e.id}))),t<0){var r=e.toJSON();r&&r.shaping&&r.shaping.embeddedModuleId&&(delete r.shaping.embeddedModuleId,delete r.shaping.embeddedModuleName,r.shaping.embeddedModuleUpToDate=!1),n.dataSources.sources.push(r)}})),t.drillThrough&&t.drillThrough.length&&t.drillThrough.forEach((function(t){e.find(s,(function(e){return e.id===t.id}))||s.push(t.toJSON())}))})),o[0].properties&&(n.properties=o[0].properties),o[0].fredIsRed&&(n.fredIsRed=o[0].fredIsRed),s.length&&(n.drillThrough=s);var l=e.chain(o).map((function(e){return e.episodes})).flatten().filter(Boolean).map((function(e){return e.toJSON()})).value();l.length&&(n.episodes=l)}return n&&(i=JSON.stringify(n,null,4)),{spec:i,count:a.copied,errMsg:n.errMsg}},m.prototype.validateDashboardSpec=function(r,i){var o=this;return Promise.resolve().then((function(){var a={schema:"noSchema",schemaCondition:"noSchemaCondition",schemaKeyword:"noSchemaKeyword",schemaDataPath:"noSchemaDataPath",data:"noData",msg:"noMsg"},s=void 0;try{s=JSON.parse(r)}catch(t){var l="Invalid JSON provided";if(o.logger&&o.logger.error(l,t,o),null!=i&&e.isArray(i)){var d=Object.create(a);return d.data=t,d.msg=l,i.push(d),null}throw new Error("invalidJSONResponse")}function c(t,r,n){"widget"===r&&(function(t,r){return e.find(t,(function(e){return r===e.id}))}(s.widgets,t)||n.push(t))}function u(t,r){e.each(t,(function(e){return e.items?u(e.items,r):c(e.id,e.type,r)}))}var h=[],p=!1;if(!s||void 0===Object.keys(s).length||0===Object.keys(s).length){var g="Spec is empty";if(null!=i&&e.isArray(i)){var f=Object.create(a);return f.msg=g,i.push(f),null}throw new Error(g)}return Array.isArray(s.layout)&&(p=!0),t.isDevMode(o.glassContext)?o._getAjv().then((function(t){var r=JSON.parse(n);Object.keys(s).forEach((function(e){var n=r[e];p&&"layout"===e&&(n=r.layoutFragment),p&&"widgets"===e&&(n=r.widgetsFragment);var i=s[e];if(n){var o=t.getSchema(n);o&&(o(i)||o.errors.forEach((function(e){var t=Object.create(a);t.schema=e.schemaPath,t.schemaCondition=e.parentSchema,t.schemaKeyword=e.keyword,t.schemaDataPath=e.dataPath,t.data=e.data,t.msg=e.message,h.push(t)})))}}));var l=[];if(s.widgets&&(s.layout.items?u(s.layout.items,l):u(s.layout,l),l.length)){var d=Object.create(a);d.schema="noSchema",d.schemaDataPath="noSchemaDataPath",d.schemaKeyword="noSchemaKeyword",d.data="noData",d.schemaCondition="semantic layout widget id check",d.msg="No widget objects in the specification for layout ids "+l.toString(),h.push(d)}if(h.length){if(s=null,null==i||!e.isArray(i))throw o.logger&&e.each(h,(function(e){var t=void 0;"noMsg"!==e.msg&&(t=" error: "+e.msg),"noData"!==e.data&&(t+=" data: "+e.data),"noSchema"!==e.schema&&(t+=" schema: "+e.schema),"noSchemaCondition"!==e.schemaCondition&&(t+=" schema defn: "+e.schemaCondition.$id),o.logger.error("schema validation error:",t,o)})),new Error("schema validation errors logged above");i.push(h)}return s})):s}))},m.prototype._getAjv=function(){var e=this;return this.ajv?Promise.resolve(this.ajv):new Promise((function(t,n){require(["ajv"],(function(o){try{var f=JSON.parse(r),m=JSON.parse(i),b=e._getLayoutSchema(),y=JSON.parse(a),v=JSON.parse(s),_=JSON.parse(l),C=JSON.parse(d),w=JSON.parse(c),P=JSON.parse(u),S=JSON.parse(h),I=JSON.parse(p),L=JSON.parse(g);e.ajv=new o({allErrors:!0,verbose:!0,schemas:[f,m,b,y,v,_,C,w,P,S,I,L]}),t(e.ajv)}catch(e){n(e)}}),n)}))},m.prototype._getLayoutSchema=function(){var e=JSON.parse(o),t=this.dashboardApi.getFeature("ContentTypeRegistry"),r=e.definitions.layoutType.enum;return e.definitions.layoutType.enum=r.concat(t.getRegisteredTypes()),e},m.prototype._getDataSources=function(e,t){var r={version:"0.0",sources:[]};if(t&&"object"===(void 0===t?"undefined":_typeof(t))){r.version=t.version;var n=r.sources;e.forEach((function(e){n.push(t.get("sources").get(e))}))}return r},m.prototype._getTimeLineEpisodeForPinning=function(e,t){return e.timeline&&"function"==typeof this.controller.boardModel.timeline.get?e.timeline.episodes.get(t):null},m.prototype._removeErrorsFromSpec=function(t,r){return r.errMsg=e.first(e.compact(e.map(t,(function(e){return e.errMsg})))),r.errMsg?e.filter(t,(function(e){return void 0===e.errMsg})):t},m}()})),define("dashboard-core/js/canvas/Content",["underscore","../lib/@waca/dashboard-common/dist/core/APIFactory","../lib/@waca/core-client/js/core-client/utils/PerfUtils","./ContentAPISpec","../api/ContentAPI","../features/FeatureLoader","../dashboard/util/PropertyLayoutHelper","../features/content/state/impl/StateImpl","../features/content/internalModels/InternalModels","../features/content/contentFilter/ContentFilter","../features/content/serializer/Serializer","../dashboard/util/DashboardSpecHelper"],(function(e,t,r,n,i,o,a,s,l,d,c,u){return function(n){function h(e){_classCallCheck(this,h);var t=_possibleConstructorReturn(this,n.call(this));t.boardModel=e.boardModel,t.layoutModel=e.layoutModel,t.profile=e.profile,t.creationTransactionToken=e.transactionToken,t.widgetModel=e.widgetModel,t.contentMap={},t.container=e.container,t.featureLoaderClass=e.featureLoaderClass||o,t.featureLoader=e.featureLoader,t.canvas=e.canvas,t.dashboardFeatures=e.dashboardFeatures,t.transaction=t.dashboardFeatures.getFeature("Transaction"),t.lifeCycleManager=t.dashboardFeatures.getFeature("LifeCycle"),t.logger=t.dashboardFeatures.getFeature("Logger"),t.contentFactory=t.dashboardFeatures.getFeature("ContentFactory"),t.dashboardSettings=t.dashboardFeatures.getFeature("DashboardSettings"),t.featureLoader||t.createFeatureLoader(),t._updateContentModelFeatures();var r=t._getModel();r.on("add:item",t.onAddItem,t),r.on("remove:item",t.onRemoveItem,t),r.on("change:parent",t.onChangeParent,t),r.on("pre:remove:item",t.preRemoveItem,t);var i=t.dashboardFeatures.getFeature("API").getGlassCoreSvc(".FeatureChecker");return t._isPropertiesV2Enabled=i&&i.checkValue("dashboard","PropertiesV2","enabled"),t._contentFeatureCollection=e.contentFeatureCollection||[],t.createChildren(),t}return _inherits(h,n),h.prototype._updateContentModelFeatures=function(){var e=this,t=this.featureLoader.getLoadedFeatures.bind(this.featureLoader),r=this._getModel().getContentModel().features,n=["toJSON","Serializer"];r.toJSON=function(){var i=t(),o=Object.keys(i).concat(Object.keys(r)).filter((function(e){return-1===n.indexOf(e)})),a={};return o.forEach((function(t){var n=null;i[t]&&"function"==typeof i[t].toJSON?n=i[t].toJSON():r[t]?n=r[t]:e.logger.info('Data for feature "'+t+'" is not persisted'),n&&Object.keys(n).length>0&&(a[t]=n)})),a.hasOwnProperty("Models.internal")&&(a.Models_internal=a["Models.internal"],delete a["Models.internal"]),a}},h.prototype.onAddItem=function(e){var t=e.value.parameter.model.id;this.getContentInstance(t,!1,e.data?e.data.transactionToken:null)},h.prototype.preRemoveItem=function(e){var t=e.value.parameter,r=this.getContentInstance(t);if(r){var n=r.getAPI().getFeature("ContentViewDOM"),i=n&&n.getNode();if(i)this.dashboardFeatures.getFeature("API").getFeature("InteractionController.internal").selectionHandler.deselectNode(i)}},h.prototype.onRemoveItem=function(e){var t=e.value.parameter,r=this.getContentInstance(t);r&&(r.destroy(),delete this.contentMap[t])},h.prototype.onChangeParent=function(e){var t=e.value.parameter.parentId;if(this.getContainer().getId()!==t){var r=this.canvas.getRootContentInstance().getContentInstance(t);this.moveToContainer(r)}},h.prototype.createFeatureLoader=function(){var e=this,t=this.getType(),r=[t];t!==this._getModel().type&&r.push(this._getModel().type);var n=this.dashboardFeatures&&this.dashboardFeatures.getCurrentProfile&&this.dashboardFeatures.getCurrentProfile(),i=void 0!==n;this.featureLoader=new this.featureLoaderClass({featureParams:{dashboardAPI:this.dashboardFeatures.getFeature("API"),content:this.getAPI(),featureSpecs:this._getModel().getContentModel().features,transactionToken:this.creationTransactionToken},profileList:n,enableProfileFeatureLoading:i,externalFeatures:this.dashboardFeatures,lifeCycleManager:this.lifeCycleManager,types:r,parentAPI:this}),this.featureLoader.registerFeature("state",new s({logger:this.logger}),{containerId:"com.ibm.bi.dashboard.content-features",name:"state",types:["widget"],profiles:["core"]}),this.featureLoader.registerFeature("Models.internal",new l({widgetModel:this.widgetModel,layoutModel:this.layoutModel}),{containerId:"com.ibm.bi.dashboard.content-features",name:"InternalModels",profiles:["core"]}),this.featureLoader.registerFeature("ContentFilter",new d({content:this,logger:this.logger}),{containerId:"com.ibm.bi.dashboard.content-features",name:"ContentFilter",profiles:["core"]}),this.featureLoader.registerFeature("Serializer",new c({layoutModel:this.layoutModel,content:this,logger:this.logger}),{containerId:"com.ibm.bi.dashboard.content-features.Serializer",name:"Serializer",profiles:["core"]}),this.featureLoader.registerFeature("FeatureRegistry.internal",{getAPI:function(){return e.featureLoader.getAPI()}},{containerId:"com.ibm.bi.dashboard.content-features",name:"FeatureRegistry.internal",profiles:["core"]}),this._createdFeatureLoader=!0},h.prototype.createChildren=function(){var e=this,t=this._getModelItems();t&&t.forEach((function(t){e.getContentInstance(t.id,!0,e.creationTransactionToken)}))},h.prototype.setContentFeatures=function(e){for(var t in this._contentFeatureCollection=e,this.contentMap)this.contentMap[t].setContentFeatures(e)},h.prototype.initialize=function(){var e=this;if(!this._initializePromise){var t="content "+this.api.getId()+" initialize";r.createPerformanceMark({component:"dashboard",name:t,state:"start"});var n=[];n.push(this.featureLoader.loadFeaturesFromArray(this._contentFeatureCollection));var i=this._getModelItems();if(i)if(this.dashboardSettings.get("contentFeatureDelayLoadTabs")&&"tab"===this.getType()){var o=this.getContentInstance(i[0].id,!0,this.creationTransactionToken);o&&n.push(o.initialize())}else i.forEach((function(t){var r=e.getContentInstance(t.id,!0,e.creationTransactionToken);r&&n.push(r.initialize())}));this._initializePromise=Promise.all(n).then((function(){var n=e.getFeature("state.internal");n&&n.setStatus(n.STATUS.INITIALIZED),r.createPerformanceMark({component:"dashboard",name:t,state:"end"})}))}return this._initializePromise.then((function(){return e.getAPI()}))},h.prototype.registerFeatures=function(e){return this.featureLoader.loadFeaturesFromArray(e)},h.prototype.registerFeature=function(e,t,r,n){var i=this;return this.initialize().then((function(){return i.featureLoader.registerFeature(e,t,r,n)}))},h.prototype.getAPI=function(){return this.api||(this.api=t.createAPI(this,[i])),this.api},h.prototype.destroyContentMap=function(){var e=this;Object.keys(this.contentMap).forEach((function(t){var r=e.contentMap[t];r&&r.destroy&&r.destroy()}))},h.prototype.destroy=function(){var e=this._getModel();e.off("add:item",this.onAddItem,this),e.off("remove:item",this.onRemoveItem,this),e.off("change:parent",this.onChangeParent,this),this.destroyContentMap(),this._createdFeatureLoader&&this.featureLoader.destroy(),this.featureLoader=null,this.dashboardFeatures=null,this.boardModel=null,this.layoutModel=null,this.widgetModel=null,this.contentMap=null,this.canvas=null,this.api=null},h.prototype.getId=function(){return this._getModel().getId()},h.prototype._getWidgetModel=function(){return this.widgetModel||(this.widgetModel=this.boardModel.getWidgetModel(this.getId())),this.widgetModel},h.prototype.getType=function(){var e=this.layoutModel.type,t=this._getWidgetModel();return t&&(e+="."+t.type),e},h.prototype.addContent=function(t,r){var n=this;if(e.isNumber(t.position)){var i=this.getChildren()[t.position];t.insertBefore=i&&i.getId()}return t.content?this._getContentSpec(t.content).then((function(e){return e&&(t.type=t.content.getType(),e.layout=e.layout[0],t.spec=e),n._addModel(t,r)})):this._addModel(t,r)},h.prototype._addModel=function(e,t){var r=this;return e.properties=Object.assign(e.properties||{},e.layout),delete e.layout,this.contentFactory.addModel(e,{boardModel:this.boardModel,canvas:this.canvas,canvasContent:this},t).then((function(e){return r.getContentInstance(e).initialize()})).then((function(r){var n=e.properties||{};return Object.keys(n).forEach((function(e){r.setPropertyValue(e,n[e],t)})),r}))},h.prototype._getContentSpec=function(e){return e.getFeature("Models.internal").getLayoutModel().boardModel.dashboardApi.getFeature("LegacyViewControllers").getLayoutController().getInteractionController().then((function(t){var r=new u(t),n=r.getContentsToJSONSpec(e).spec;return r.validateDashboardSpec(n)}))},h.prototype.removeChildContent=function(e,t){this.getContentInstance(e)&&this.boardModel.removeLayouts(e,"api",this._convertOptions(t))},h.prototype.removeContentReference=function(e){delete this.contentMap[e.getId()]},h.prototype.addContentReference=function(e){this.contentMap[e.getId()]=e},h.prototype.moveToContainer=function(e){this.container.removeContentReference(this),this.container=e,e.addContentReference(this)},h.prototype.moveContent=function(e,t,r,n){var i=this,o=e===this.getId()?this:this.getContentInstance(e);if(o){var a={updateArray:[]},s=t.map((function(e){return i.canvas.getContentInstance(e)}));return s.forEach((function(e){if(e){var t=e.getId(),r={id:t,parentId:o.getId()};n&&n[t]&&(r.insertBefore=n[t]),a.updateArray.push(r),e.moveToContainer(o)}})),a.updateArray.length>0&&this.layoutModel.getTopLayoutModel().updateModel(a,null,this._convertOptions(r)),s.map((function(e){return e.getAPI()}))}this.logger.error("cannot find container "+e)},h.prototype.removeContent=function(e,t){this.removeChildContent(e,t)},h.prototype.updateCurrentProfile=function(e){var t=this,r=[];return r.push(this.featureLoader.updateCurrentProfile(e)),Object.keys(this.contentMap).forEach((function(n){var i=t.contentMap[n];r.push(i.updateCurrentProfile(e))})),Promise.all(r)},h.prototype.getCurrentProfile=function(){return this.featureLoader.getCurrentProfile()},h.prototype.getLoadedFeatureProfileInfo=function(){var e={};return this._getLoadedFeatureProfileInfo(e),e},h.prototype._getLoadedFeatureProfileInfo=function(e){var t=this,r=this.featureLoader.getLoadedFeatureProfileInfo();e[this.getId()]=r,Object.keys(this.contentMap).forEach((function(r){t.contentMap[r]._getLoadedFeatureProfileInfo(e)}))},h.prototype.getContentInstance=function(e,r,n){var i=this.contentMap[e],o=this._getModelItems();if(!i&&o){var a=o.find((function(t){return t.id===e}));if(a)(i=this.contentFactory.createContent({dashboardFeatures:this.dashboardFeatures,boardModel:this.boardModel,layoutModel:a,featureLoaderClass:this.featureLoaderClass,canvas:this.canvas,container:this,profile:this.profile,transactionToken:n,type:a.type})).setContentFeatures(this._contentFeatureCollection),t.setParentChildRelation(this.canvas,i),r||i.initialize(),this.contentMap[e]=i;else for(var s=0;s<o.length&&!i;s++){i=this.getContentInstance(o[s].id,!1,n).getContentInstance(e,r,n)}}return i},h.prototype.getContentPosition=function(e){var t=-1,r=this._getModelItems();if(r&&r.length&&-1===(t=r.findIndex((function(t){return t.id===e}))))for(var n=0;n<r.length&&-1===t;n++){t=this.getContentInstance(r[n].id).getContentPosition(e)}return t},h.prototype.getContent=function(e){var t=this.getContentInstance(e);return t?t.getAPI():null},h.prototype.getContainer=function(){var e=this.getContainerInstance();return e&&e.getAPI()},h.prototype.getContainerInstance=function(){return this.container},h.prototype.getChildren=function(){var e=this;return(this._getModelItems()||[]).map((function(t){return e.getContent(t.id)}))},h.prototype.findContent=function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.isEmpty(r)&&(r.type="widget");var n=[],i=this._getModelItems();return i&&i.forEach((function(e){var i=t.getContent(e.id);i.getFeature("ContentFilter").match({selector:r,layout:e})&&n.push(i),n.push.apply(n,i.findContent(r))})),n},h.prototype._convertOptions=function(e){var t={skipUndoRedo:!0};return e&&e.transactionId&&(t.undoRedoTransactionId=e.transactionId,t.transactionToken=e),t},h.prototype.getPropertyLayoutList=function(){var e=this.getFeature("Properties").getPropertyLayoutList();return a.getExpandedLayoutList(e,this.getPropertyList(),this.profile,this._isPropertiesV2Enabled)},h.prototype.getPropertyNameList=function(){return this.getFeature("Properties").getPropertyList().map((function(e){return e.id}))},h.prototype.setPropertyValue=function(e,t,r){var n=this.getPropertyList().find((function(t){return t.id===e}));return n?n.setPropertyValue(t,r):this._getModel().getContentModel().setPropertyValue(e,t,r)},h.prototype.getPropertyValue=function(e){var t=this.getPropertyList().find((function(t){return t.id===e}));return t?t.getPropertyValue():this._getModel().getContentModel().getPropertyValue(e)},h.prototype.__getPropertyValueFunc=function(e,t){var r=void 0;return null==(r=e?e():this._getModel().getContentModel().getPropertyValue(t.id))&&null!=t.defaultValue&&(r=t.defaultValue),r},h.prototype.getPropertyList=function(){var e=this,t=this.getFeature("Properties");if(!t)return[];for(var r=t.getPropertyList(),n=function(t){var n=r[t];if(!n.isGetterSet){n.isGetterSet=!0;var i=n.getPropertyValue&&n.getPropertyValue.bind(n);n.getPropertyValue=e.__getPropertyValueFunc.bind(e,i,n)}n.setPropertyValue||(n.setPropertyValue=function(t,r){e._getModel().getContentModel().setPropertyValue(n.id,t,r)})},i=0;i<r.length;i++)n(i);return r},h.prototype.getFeature=function(e){if(this.featureLoader)return this.featureLoader.getFeature(e)},h.prototype.setFeatureEnabled=function(e,t){this.featureLoader&&this.featureLoader.setFeatureEnabled(e,t)},h.prototype._getModel=function(){return this.layoutModel},h.prototype._getModelItems=function(){return this.layoutModel.items},h}(n)})),define("dashboard-core/js/app/util/DeepClone",["underscore"],(function(e){e.deepClone=function(e){return JSON.parse(JSON.stringify(e))}})),define("dashboard-core/js/dashboard/layout/LayoutHelper",["jquery","underscore","../../app/util/DeepClone"],(function(e,t){return function(){function r(){_classCallCheck(this,r)}return r.setPreferredAddOptions=function(e,t,n){if(!e.parentId){var i=r.getLastVisiblePage(t.id,null,n);i&&(e.parentId=r.nodeIdToModelId(i.id))}var o=e.model;r.setPreferredLocation(e),e.copyPaste&&r._setCopyPasteLayout(e,o,t,n)},r.setPreferredLocation=function(t){if(t.parentId){var n=e("#"+r.modelIdToNodeId(t.parentId),this.$el)[0];n&&n._layout&&n._layout.setPreferredLocation&&(t.layoutProperties||(t.layoutProperties={}),n._layout.setPreferredLocation(t))}},r._setCopyPasteLayout=function(e,t,n,i){var o=r.getLayoutContentContainer(n.id,null,i),a=r.nodeIdToModelId(o.id),s=n.findModel(a);if(o&&s&&(t.layout&&t.layout.style||t.style)){e.insertBefore=null,e.parentId=s.id;var l=e.layoutProperties;l.style||(l.style={});var d=t.layout&&t.layout.style?t.layout.style:t.style,c=d.top,u=d.left;if(r._isOffsetAdjustmentRequired(a,n,i))for(var h=s.items.map((function(e){return e.style})),p=0,g=0,f=0;p<30;){var m=h.filter((function(e){return e.top===c&&e.left===u}));if(m&&0===m.length)break;if(g=r._incrementStyleValue(c),f=r._incrementStyleValue(u),!0===r._isOutOfBounds(g,d.height,o.clientHeight)||!0===r._isOutOfBounds(f,d.width,o.clientWidth))break;c=g,u=f,p++}l.style.top=c,l.style.left=u,l.style.width=d.width,l.style.height=d.height}},r._isOffsetAdjustmentRequired=function(e,t,r){var n=t.findModel(e),i=["widget","tab"],o=r.getFeature("ContentTypeRegistry");return i=i.concat(o.getRegisteredTypes()),n.findDescendantsWithType(i).length>0},r._incrementStyleValue=function(e){var t=e.match(/[0-9\\.]+/g),r=e.match(/[^0-9\\.]+/g);if(null==t||null==r||t.isEmpty||r.isEmpty)return e;var n=parseFloat(t[0]);return"%"===r[0]?n+=5:n+=25,n+r[0]},r._isOutOfBounds=function(e,t,n){return r._getPixelValue(e,n)>n-r._getPixelValue(t,n)},r._getPixelValue=function(e,t){return"%"===e[e.length-1]?parseFloat(e)/100*parseFloat(t):parseFloat(e)},r.nodeIdToModelId=function(e){return e},r.modelIdToNodeId=function(e){return e},r.getLayoutContentContainer=function(t,r,n){return function(t){var i=!1,o=e(t).find(".pageTabContent"),a=o.find(".pagegenericPage").last();if(o.length>1&&(i=!0,a=o.filter((function(t,n){return r?e("#"+r,n).length>0:e(n).hasClass("selected")})).map((function(t,r){return e(r).find(".pagegenericPage")[0]})).last()),!i){var s=e(".page:not(.pagegroup):not(.pagetemplateDropZone):not(.pagetemplateIndicator)",e(t)).filter((function(t,n){return i=!0,r?e("#"+r,n).length>0:e(this).is(":visible")})).last();return s&&s[0]||t}if(a&&a[0])return a[0];if(n){var l=n.getDashboardCoreSvc(".StringResources").get("pageSelectWarning");n.showToast(l,{type:"info"})}}(document.getElementById(t))},r.getLayoutContentContainerForDropTarget=function(t,n,i){if(t){var o=e(t).attr("id"),a=n&&n.findModel(o);if(a&&"genericPage"===a.type)return t}return r.getLayoutContentContainer(n.id,null,i)},r.getLastVisiblePage=function(t,n,i){var o=r.getLayoutContentContainer(t,n,i),a=e(o).find(".pagetemplateDropZone.empty");return a.length>0?a[0]:o},r.getContainerPageId=function(e,t){var r=e.findTopLevelParentItem(t);if(r)return r.id},r.getBoundingPageSize=function(e,n){if(e){var i={width:0,height:0},o=void 0;o="genericPage"===e.type?[e]:e.findDescendantsWithType("genericPage"),n&&(i=t.deepClone(n));var a=o,s=Array.isArray(a),l=0;for(a=s?a:a[Symbol.iterator]();;){var d;if(s){if(l>=a.length)break;d=a[l++]}else{if((l=a.next()).done)break;d=l.value}var c=d;if("absolute"===c.layoutPositioning){var u=c.findDescendantsWithType(["widget","group"]),h=Array.isArray(u),p=0;for(u=h?u:u[Symbol.iterator]();;){var g;if(h){if(p>=u.length)break;g=u[p++]}else{if((p=u.next()).done)break;g=p.value}var f=g,m=r._getRawStyle(f.style,"px");if(m){var b=m.left+m.width;b>i.width&&(i.width=b);var y=m.top+m.height;y>i.height&&(i.height=y)}}}}return i&&i.width?i:void 0}},r._getRawStyle=function(e,t){if(-1!==e.left.indexOf(t)&&-1!==e.top.indexOf(t)&&-1!==e.width.indexOf(t)&&-1!==e.height.indexOf(t))return{left:parseInt(e.left,10),top:parseInt(e.top,10),width:parseInt(e.width,10),height:parseInt(e.height,10)}},r.styleIntToPx=function(e){e.top=e.top+"px",e.left=e.left+"px",e.width=e.width+"px",e.height=e.height+"px"},r}()})),define("dashboard-core/js/features/dashboard/segment/api/impl/Segment",["underscore"],(function(e){var t={uploadedFile:"custom.counts.uploadedFile",module:"custom.counts.dataModule",package:"custom.counts.fmPackage"},r={data:"custom.counts.data_widget",nondata:"custom.counts.nondata_widget"};return function(){function n(e){_classCallCheck(this,n),this.dashboardApi=e.dashboardApi,this.instrumentationSvc=e.instrumentationSvc,this.logger=e.logger,this.infoCallback=void 0,this._mapping=e.mapping||{}}return n.prototype.registerInfoCallback=function(e){this.infoCallback=e},n.prototype.unregisterInfoCallback=function(){this.infoCallback=null},n.prototype.track=function(e,t){try{var r=this.infoCallback?this.infoCallback():{},n=t?t():{};(n=_extends({},r,n)).action=e;var i=n.trackType||"application";if(delete n.trackType,this._canTrack(i)){var o=this.getInfo(n,i);o.action=e,o.milestoneName=o.milestoneName?o.milestoneName:e+"_"+o.objectType,this.instrumentationSvc.track(o)}}catch(e){this.logger.error(e)}},n.prototype._canTrack=function(e){return"application"===e||"explore"!==this.dashboardApi.getApplicationName()},n.prototype.getInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application";return"application"===t?this._getApplicationInfo(e):this._getWidgetInfo(e,t)},n.prototype._getApplicationInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getApplicationDetailsInfo();return _extends({type:e.type,objectType:this.dashboardApi.getApplicationName(),object:this._getBoardId()},t,e)},n.prototype._getWidgetInfo=function(t,r){var n={};(t=t||{}).details&&e.each(t.details,(function(e,t){n["custom."+t]=e}));var i=_extends({type:t.type,objectType:r,category:"InProduct"},n);return t.object&&(i.object=t.object),i.milestoneName=t.action+"_"+r+"_in_"+this.dashboardApi.getApplicationName(),i},n.prototype._getBoardId=function(){return this.dashboardApi.getDashboardInfo().boardId},n.prototype._getApplicationDetailsInfo=function(){var e=this._getApplicationDataSourcesInfo(),t=this._getApplicationWidgetsInfo();return _extends({},e,t,{"custom.counts.tabs":this._getApplicationTabsCount()})},n.prototype._getApplicationDataSourcesInfo=function(){var e=this.dashboardApi.getFeature("DataSources").getDataSourceList();return n.getDataSourcesTypeCount(e,this._mapping.dataSources)},n.prototype._getApplicationWidgetsInfo=function(){var e=this.dashboardApi.getCanvas().findContent({type:"widget"});return n.getWidgetsTypeCount(e)},n.prototype._getApplicationTabsCount=function(){return this.dashboardApi.getCanvas().findContent({type:"container"}).length},n.prototype.destroy=function(){this.dashboardApi=null,this.glassContext=null,this.instrumentationSvc=null,this._mapping=null},n.getDataSourcesTypeCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=e.reduce((function(e,t){var n,i=t.getType(),o=r[i]||"custom.counts.unknown",a=e[o]||0;return _extends({},e,((n={})[o]=a+1,n))}),{});return n},n.getWidgetsTypeCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){var n,i="live"===t.getType()||"widget.live"===t.getType()?"data":"nondata";return _extends({},e,((n={})[r[i]]=(e[r[i]]||0)+1,n))}),{});return t},n}()})),define("dashboard-core/js/dashboard/glass/util/InstrumentationUtil",["../../../features/dashboard/segment/api/impl/Segment"],(function(e){return function(){function t(){_classCallCheck(this,t)}return t.track=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.getCoreSvc(".Instrumentation");if(i&&i.enabled){var o={},a={};if(n.sources&&n.sources.length>0){var s=n.sources.map((function(e){return e.getType?e:{getType:function(){return e.type}}}));a=e.getDataSourcesTypeCount(s)}if(n.widgets&&n.widgets.length>0){var l=n.widgets.map((function(e){return e.getType?e:{getType:function(){return e.type}}}));o=e.getWidgetsTypeCount(l)}var d=_extends({type:n.type,objectType:n.objectType,action:r,milestoneName:r+"_"+n.objectType},a,o);n.object&&(d.object=n.object),i.track(d)}},t.trackWidget=function(e,t,r,n){var i=void 0,o=void 0,a=void 0,s=r||{};if("deleted"===e){var l=t.getCanvas().getContent(n);if(l)if("widget.live"===l.getType()){o="data_widget";var d=t.getDashboardCoreSvc(".StringResources"),c=l.getFeature("Visualization"),u=l.getFeature("state").getError()||null,h=u?u.getParams():null,p=h?h.errorInfo:null;i=p?p.id:c.getDefinition()?c.getDefinition().getType():d.get("one_unknown_live")}else o="nonData_widget",i=l.getType()}else a=this._getWidgetSource(r),"live"===s.type?(o="data_widget",i=this._getVisualizationTypeFromVisId(s.visId,t)||s.name||s.type):(o="nonData_widget",i=s.subType||s.type);this._createPayload(i,e,t,s.visId,n,o,a)},t._getWidgetSource=function(e){return e.visTypeLocked?"manual":"fromRecommendation"},t._getVisualizationTypeFromVisId=function(e,t){if(e&&t){var r=t.getFeature("VisDefinitions").getById(e);return r&&r.getType()}return null},t._createPayload=function(e,t,r,n,i,o,a){if(e){var s=r.getFeature("VisDefinitions"),l=void 0;s&&(l=s.getById(n).getProperty("legacySegmentType")),e=l||e;r.getFeature("segment").track(t,(function(){var n={details:{widgetType:e,assetType:r.getApplicationName()},type:"deleted"===t?"Deleted Object":"Created Object",trackType:o,widgetType:e};i&&(n.object=i);var s=r.getDashboardInfo().boardId;return s&&(n.details.assetId=s),a&&(n.widgetSource=a,n.details.widgetSource=a),n}))}},t}()})),define("dashboard-core/js/features/dashboard/contentProvider/api/impl/BaseContentProvider",["../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../../canvas/Content","../../../../../dashboard/layout/LayoutHelper","../../../../../dashboard/glass/util/InstrumentationUtil","../../../../../lib/@waca/dashboard-common/dist/api/ContentProviderAPI"],(function(e,t,r,n,i){return function(){function o(e){_classCallCheck(this,o),this.dashboardApi=e.features.API,e.features.ContentFactory.registerProvider(this)}return o.prototype.getAPI=function(){return e.createAPI(this,[i])},o.prototype.getTypeList=function(){var e=[null,void 0,""];return this._contentTypes||(this._contentTypes=this.dashboardApi.getFeature("ContentTypeRegistry")),this._contentTypes?this._contentTypes.getRegisteredTypes().concat(e):e},o.prototype.addModel=function(e,t,n){var i=t.canvas,o=t.boardModel,a=t.canvasContent,s={parentId:e.containerId,insertBefore:e.insertBefore,copyPaste:e.copyPaste,model:e.spec,modelIdsValid:!0===e.modelIdsValid,layoutProperties:{style:e.spec.style||{}}};e.properties&&["left","top","height","width","opacity"].forEach((function(t){void 0!==e.properties[t]&&(s.layoutProperties.style[t]=e.properties[t],delete e.properties[t])}));var l=e.containerId?o.layout.findModel(e.containerId):o.layout;r.setPreferredAddOptions(s,l,this.dashboardApi),s.parentId||a.getFeature("ContentViewDOM")||(s.parentId=a.getId());var d=i.isLayoutType(e.spec.type),c=this.dashboardApi.getFeature("ContentTypeRegistry"),u=!!c&&c.isTypeRegistered(e.spec.type),h=("widget"===e.spec.type?this._addContent.bind(this):!d&&(e.spec.widgets||e.spec.layout&&e.spec.layout.items)?this._addFragment.bind(this):d?this._addLayout.bind(this):u?this._addContent.bind(this):this._addWidget.bind(this))(s,o,{undoRedoTransactionId:n.transactionId,transactionToken:n,skipUndoRedo:!0});return h&&h.then?h:Promise.resolve(h)},o.prototype.createContent=function(e){return new t(e)},o.prototype._addWidget=function(e,t,r){return this._track(e),t.addWidget(e,null,r).then((function(e){var t=e&&e.value&&e.value.parameter;return t&&t.model&&t.model.id}))},o.prototype._addFragment=function(e,t,r){var n=t.addFragment(e,null,r),i=n&&n.value&&n.value.parameter;return i&&i.model&&i.model.layout&&i.model.layout.id},o.prototype._addContent=function(e,t,r){return this._track(e),t.addContent(e,null,r)},o.prototype._addLayout=function(e,t,r){return t.addLayouts({addLayoutArray:[e]},null,r).value.parameter.addLayoutArray[0].model.id},o.prototype._track=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.model;if(t){var r=t.features&&t.features.Models_internal,i=t.data||!r?t:r;n.trackWidget("created",this.dashboardApi,{name:i.name,type:i.type,data:i.data,visId:i.visId,visTypeLocked:i.visTypeLocked})}},o}()})),define("dashboard-core/js/canvas/DashboardContent",["./Content"],(function(e){return function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.initialize=function(){return Promise.resolve(this.getAPI())},t.prototype.getType=function(){return"dashboard"},t.prototype.getContentInstance=function(){},t.prototype._getModel=function(){return this.boardModel},t.prototype._getModelItems=function(){return[]},t.prototype.createFeatureLoader=function(){},t.prototype.onAddItem=function(){},t.prototype.onRemoveItem=function(){},t.prototype.onChangeParent=function(){},t.prototype.preRemoveItem=function(){},t.prototype.removeChildContent=function(){throw new Error("Not supported.")},t.prototype.removeContentReference=function(){throw new Error("Not supported.")},t.prototype.addContentReference=function(){throw new Error("Not supported.")},t.prototype.moveToContainer=function(){throw new Error("Not supported.")},t.prototype.moveContent=function(){throw new Error("Not supported.")},t.prototype.removeContent=function(){throw new Error("Not supported.")},t}(e)})),define("dashboard-core/js/features/dashboard/contentProvider/api/impl/DashboardContentProvider",["../../../../../canvas/DashboardContent","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../../lib/@waca/dashboard-common/dist/api/ContentProviderAPI"],(function(e,t,r){return function(){function n(e){var i=e.features;_classCallCheck(this,n),this._api=t.createAPI(this,[r]),i.ContentFactory.registerProvider(this._api)}return n.prototype.getAPI=function(){return this._api},n.prototype.getTypeList=function(){return["dashboard"]},n.prototype.addModel=function(){throw new Error("Not supported.")},n.prototype.createContent=function(t){return new e(t)},n}()})),define("dashboard-core/js/canvas/PageContent",["./Content"],(function(e){return function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.getType=function(){return"page"},t.prototype.getChildren=function(){var e=this,t=this.layoutModel.items[0];return t.items?t.items.map((function(t){return e.getContent(t.id)})):[]},t.prototype.addContent=function(t){var r;return t.containerId===this.layoutModel.id&&(t.containerId=this.layoutModel.items[0].id),(r=e.prototype.addContent).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))},t.prototype.moveContent=function(t,r,n){return t=this.layoutModel.items[0].id,e.prototype.moveContent.call(this,t,r,n)},t}(e)})),define("dashboard-core/js/features/dashboard/contentProvider/api/impl/PageContentProvider",["../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../../canvas/PageContent","../../../../../lib/@waca/dashboard-common/dist/api/ContentProviderAPI","./BaseContentProvider"],(function(e,t,r,n){return function(n){function i(e){return _classCallCheck(this,i),_possibleConstructorReturn(this,n.call(this,e))}return _inherits(i,n),i.prototype.getAPI=function(){return e.createAPI(this,[r])},i.prototype.getTypeList=function(){return["page","container"]},i.prototype.addModel=function(e,t){var r=this,i=arguments,o=t.canvasContent;return new Promise((function(t,a){try{var s=e.properties.templateName||"Template1";delete e.properties.templateName,require(["text!dashboard/layout/templates/"+s+".json"],(function(a){var s;e.spec=e.spec||JSON.parse(a),e.containerId=e.containerId||o.getId(),(s=n.prototype.addModel).call.apply(s,[r].concat(Array.prototype.slice.call(i))).then((function(e){t(e)}))}),a)}catch(e){a(e)}}))},i.prototype.createContent=function(e){return new t(e)},i}(n)})),define("dashboard-core/js/features/dashboard/transaction/api/TransactionAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.startTransaction=function(){},e.prototype.startTransactionById=function(){},e.prototype.endTransaction=function(){},e.prototype.getTransactionById=function(){},e.prototype.isValidTransaction=function(){},e.prototype.registerTransactionHandler=function(){},e.prototype.getActiveTransactionList=function(){},e}()})),define("dashboard-core/js/features/dashboard/transaction/api/impl/Transaction",["underscore","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../TransactionAPI"],(function(e,t,r){return function(){function n(){_classCallCheck(this,n),this._transactions=new Map,this._handlers=new Map}return n.prototype.getAPI=function(){return t.createAPI(this,[r])},n.prototype.startTransaction=function(t){if(t&&t.transactionId){var r=this._get(t.transactionId);if(r){var n=this._addSubTransaction(r),i=e.extend({subTransaction:n},r.token);return t&&t.source&&(i.source=t.source,i.eventGenerated=t.eventGenerated),i}return console.warn("Invalid transactionId: "+t.transactionId),t}var o=this._createTransactionEntry(e.uniqueId("__transaction__"));return t&&t.source&&(o.token.source=t.source,o.token.eventGenerated=t.eventGenerated),o.token},n.prototype.startTransactionById=function(e){var t=this._get(e);return t?this.startTransaction(t.token):(t=this._createTransactionEntry(e)).token},n.prototype.endTransaction=function(e){var t=e&&e.transactionId,r=this._get(t);return r&&Number.isInteger(e.subTransaction)&&(r=r.children[e.subTransaction]),r?(r.timestamp.end=Date.now(),r.end()):console.warn("Invalid transactionId: "+t),e},n.prototype.getTransactionById=function(e){var t=this._get(e);return t?t.token:{}},n.prototype.registerTransactionHandler=function(e,t,r,n){if(this.isValidTransaction(e))return this._register(t,r,e.transactionId,n),this._invoke(t);var i=r([n]);return i instanceof Promise?i:Promise.resolve()},n.prototype.whenTransactionComplete=function(e){return this._get(e.transactionId)._promise.then(this._dispose.bind(this,e.transactionId))},n.prototype.isValidTransaction=function(e){return!!this._get(e.transactionId)},n.prototype.getActiveTransactionList=function(){return e.map(this._getAll(),(function(e){return e.token}))},n.prototype._createTransactionEntry=function(e){var t={token:{transactionId:e},timestamp:{start:Date.now()}};return t._promise=new Promise(function(e){this.end=function(){this.children&&this.children.length>0?this.children[0]._promise.then(e):e()}.bind(this)}.bind(t)),this._set(e,t),t},n.prototype._addSubTransaction=function(e){e.children||(e.children=[]);var t={timestamp:{start:Date.now()}},r=e.children.length,n=e.children&&e.children[e.children.length-1];return t._promise=new Promise(function(e){this.end=function(){this.next?this.next._promise.then(e):e()}.bind(this)}.bind(t)),n&&(n.next=t,n._promise=Promise.all([n._promise,t._promise])),e.children.push(t),r},n.prototype._getAll=function(){var e=[];return this._transactions.forEach((function(t){e.push(t)})),e},n.prototype._get=function(e){return this._transactions.get(e)},n.prototype._set=function(e,t){this._transactions.set(e,t)},n.prototype._dispose=function(e){this._transactions.delete(e)},n.prototype._register=function(e,t,r,n){var i=this._handlers.get(e);i?(i.transactionIds.indexOf(r)<0&&i.transactionIds.push(r),i.args.push(n)):this._handlers.set(e,{transactionIds:[r],handler:t,args:[n]})},n.prototype._isRegistered=function(e){return!!this._handlers.get(e)},n.prototype._waitForAllTransactions=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.length>r){var n=this._get(e[r]);return n?n._promise.then((function(){return t._waitForAllTransactions(e,r+1)})):this._waitForAllTransactions(e,r+1)}return Promise.resolve()},n.prototype._invoke=function(t){var r=this,n=this._handlers.get(t);if(!n._promise){var i=e.map(n.transactionIds,(function(e){return r._get(e)._promise}));n._promise=Promise.all(i).then((function(){e.each(n.transactionIds,r._dispose.bind(r));try{return n.handler(n.args)}finally{r._handlers.delete(t)}}))}return n._promise},n}()})),define("dashboard-core/js/dashboard/services/ServicesHelper",["../../lib/@waca/core-client/js/core-client/utils/ClassFactory","./LifeCycleManager","../../lib/@waca/dashboard-common/dist/utils/dnd/DnDManager","../../lib/@waca/baglass/js/baglass/services/ServiceRegistry","../../canvas/CanvasFactory","./DashboardStringService","../../features/FeatureLoader","./InlineFeatures","./DeprecatedInlineFeatures","../../features/dashboard/contentFactory/api/impl/ContentFactory","../../features/dashboard/contentProvider/api/impl/BaseContentProvider","../../features/dashboard/contentProvider/api/impl/DashboardContentProvider","../../features/dashboard/contentProvider/api/impl/PageContentProvider","../../features/dashboard/transaction/api/impl/Transaction","../../lib/@waca/core-client/js/core-client/utils/PerfUtils"],(function(e,t,r,n,i,o,a,s,l,d,c,u,h,p,g){var f={profiles:["core"]};return function(){function m(e){_classCallCheck(this,m),this.glassContext=e.glassContext,this.bootStrapFeatures=e.bootStrapFeatures,this._settings=this.bootStrapFeatures.DashboardSettings.getAPI(),this.eventRouter=e.eventRouter,this.logger=e.logger,this.dashboardAPI=e.dashboardAPI,this.inlineFeatures=e.inlineFeatures||s,this.internalDashboardAPI=e.internalDashboardAPI}return m.prototype._createCanvas=function(e,t,r,n){return new i({dashboardAPI:e,extensions:n,glassContext:this.glassContext,eventRouter:this.eventRouter,logger:this.logger,widgetRegistry:r,featureLoader:this.featureLoader,boardModel:t,settings:this._settings}).createCanvas()},m.prototype._registerCanvasFeature=function(e){this.featureLoader.registerFeature("Canvas",e.canvasImpl,f,!0),this.featureLoader.registerFeature("Canvas.internal",{getAPI:function(){return e.internalCanvas}},f,!0)},m.prototype.preDashboardInitialize=function(){return this.featureLoader.getFeature("LifeCycle").invokeHandlers("pre:dashboard.initialize")},m.prototype.createServices=function(){var e=this,i={};i.lifeCycleManager=new t,i.dnDManager=this._isBrowserMode()?new r:null,i.stringService=new o;var s={registerHandler:i.lifeCycleManager.registerLifeCycleHandler.bind(i.lifeCycleManager),invokeHandlers:i.lifeCycleManager.invokeLifeCycleHandlers.bind(i.lifeCycleManager)},l=this.internalDashboardAPI&&this.internalDashboardAPI.getCurrentProfile(),g=void 0!==l;this.featureLoader=new a({lifeCycleManager:s,featureNamePrefix:"Dashboard",profileList:l,enableProfileFeatureLoading:g}),this.featureLoader.registerFeature("Transaction",new p,f);var m=new d;if(this.featureLoader.registerFeature("ContentFactory",m,f),this.featureLoader.registerFeature("BaseContentProvider",new c({features:{API:this.dashboardAPI,ContentFactory:m}}),f),this.featureLoader.registerFeature("PageContentProvider",new h({features:{API:this.dashboardAPI,ContentFactory:m}}),f),this.featureLoader.registerFeature("DashboardContentProvider",new u({features:{ContentFactory:m}}),f),this.featureLoader.registerFeature("DashboardFeatureLoader.internal",{getAPI:function(){return e.featureLoader}},f,!0),this.bootStrapFeatures)for(var b in this.bootStrapFeatures)this.featureLoader.registerFeature(b,{getAPI:this.bootStrapFeatures[b].getAPI.bind(this.bootStrapFeatures[b])},f,!0);return this.featureLoader.registerFeature("API",{getAPI:function(){return e.dashboardAPI}},f,!0),this.featureLoader.registerFeature("internal",{getAPI:function(){return e.internalDashboardAPI}},f,!0),this.featureLoader.registerFeature("FeatureRegistry.internal",{getAPI:function(){return e.featureLoader.getAPI()}},f,!0),this.featureLoader.registerFeature("LifeCycle",{getAPI:function(){return s}},f,!0),this.services=new n({services:{Notification:{showError:function(){}},Logger:this.logger,".LifeCycleManager":i.lifeCycleManager,".DndManager":i.dnDManager,".StringResources":i.stringService}}),this.services.biGlass={glassContext:this.glassContext},i.serviceRegistry=this.services,i.featureLoader=this.featureLoader,i},m.prototype._isBrowserMode=function(){return void 0!==window},m.prototype._registerServiceCollection=function(t,r,n){var i=[];return r&&r.forEach(function(r){r.name&&r.class&&i.push(e.loadModule(r.class).then(function(e){var i=this,o=r.options||{};o.services=this.services,o.eventRouter=this.eventRouter,o.glassContext=this.glassContext,o.dashboardApi=t;var a=new e(o);return(n&&a.initialize&&"function"==typeof a.initialize?a.initialize():Promise.resolve()).then((function(){var e=null;n&&a.getAPI&&"function"==typeof a.getAPI&&(e=a.getAPI()),i.services.register(r.name,e||a),i._registerServiceHooks(a)}))}.bind(this)).catch(function(e){this.logger.error(e)}.bind(this)))}.bind(this)),Promise.all(i)},m.prototype.createRuntimeServices=function(e){var t=this;g.createPerformanceMark({component:"dashboard",name:"createRuntimeServices",state:"start"});var r=e.dashboardApi,n=[{name:"ContentTypeRegistry",class:"dashboard-core/js/features/dashboard/contentTypeRegistry/api/impl/ContentTypeRegistry",options:e.collections?e.collections.contentTypes:[],dependencies:[],profiles:["core"]}];return this.featureLoader.loadFeaturesFromArray(n,r.getFeature("internal").getBoardModel().getContentModel().features).then((function(){var n=t._createCanvas(r,e.boardModel,e.widgetRegistry,e.extensions);return t._registerCanvasFeature(n),t.preDashboardInitialize().then((function(){var n=t._settings.get("com.ibm.bi.dashboard.features")||[],i=r.getGlassCoreSvc(".FeatureChecker").checkValue("dashboard","PropertiesV2","enabled");i&&(n=n.filter((function(e){return"com.ibm.bi.dashboard.features.properties"!==e.id}))).push({containerId:"com.ibm.bi.dashboard.features",name:"Properties",id:"com.ibm.bi.dashboard.features.properties",class:"dashboard-core/js/features/common/properties/api/impl/PropertiesV2",dependencies:["API"],profiles:["core"]});var o="dashboard-core/js/features/dashboard/";return(n=n.concat(t.inlineFeatures)).push({name:"InternalPropertiesProvider",class:o+"dashboardProperties/DashboardInternalPropertiesProvider",options:{templateCollection:e.collections?e.collections.templates:[]},dependencies:["Properties","API"],profiles:["core"]}),i&&n.push({name:"InternalProperties",class:o+"dashboardPropertiesV2/DashboardInternalPropertiesV2",dependencies:["Properties","API","Canvas","Transaction"],profiles:["authoring"]}),t.featureLoader.loadFeaturesFromArray(n,r.getFeature("internal").getBoardModel().getContentModel().features).then((function(){return t.featureLoader.getFeature("Canvas.internal").initializeContentFeatures()}))})).then((function(){return t._getServiceExtensions().then((function(e){return t._getFeatureExtensions().then((function(n){var i=[];return i.push(t._registerServiceCollection(r,e,!1)),i.push(t._registerServiceCollection(r,n,!0)),g.createPerformanceMark({component:"dashboard",name:"createRuntimeServices",state:"end"}),Promise.all(i)}))}))}))}))},m.prototype._getServiceExtensions=function(){return Promise.resolve(this._settings.get("com.ibm.bi.dashboard.serviceExtension"))},m.prototype._getFeatureExtensions=function(){return Promise.resolve(l.concat(this._settings.get("com.ibm.bi.dashboard.core-features")||[]))},m.prototype._registerServiceHooks=function(e){if("function"==typeof e.getLifeCycleHandlers){var t=this.services.getSvcSync(".LifeCycleManager"),r=e.getLifeCycleHandlers();if(!Array.isArray(r))throw new Error("serviceExtension getLifeCycleHandlers method is expected to return an array");r.forEach((function(e){if(!e.name||!e.action)throw new Error("serviceExtension handlers are expected to have a name and action property");t.registerLifeCycleHandler(e.name,e.action,e.priority,e.triggerIfEventAlreadySent)}))}},m}()})),define("dashboard-core/js/app/EventRouter",["../lib/@waca/core-client/js/core-client/ui/core/Events"],(function(e){return e.extend({})})),define("dashboard-core/js/dashboard/widgets/PropertiesUtil",["jquery","underscore"],(function(e,t){var r=null,n=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance};return n.prototype._getPropertiesOverride=function(e,t){var r={},n=this._findCallbackFunction(e,"preRenderCallback",t);return n&&(r=n(e,t.visModel||t.model)),r},n.prototype._findCallbackFunction=function(e,t,r){if(e&&e[t]){if("function"==typeof e[t])return e[t].bind(e);var n=e[t],i=r.getCurrentVis?r.getCurrentVis():null;if("function"==typeof r[n])return r[n].bind(r);if(i&&"function"==typeof i[n])return i[n].bind(i);throw new Error("preRenderCallback defined but function isn't available to call.",e)}return null},n.prototype._callPropertyOnChangeCallback=function(e,t,r,n){e.onChangeCallback&&e.onChangeCallback(r,n,t.visModel||t.model)},n.prototype._handleUISlider=function(e,t){var r=this._getPropertyValue(t,e.name);(r||0===r&&"percentage"===e.sliderType)&&(r=parseInt(100*r,10)),e.start=r||0===r?[r]:[e.defaultValue],e.startLabels=[e.description||e.label],e.onChange=function(r){var n=r[0];e.format&&e.format.postfix&&(n=n.substring(0,n.indexOf(e.format.postfix))),"percentage"===e.sliderType&&(n*=.01),this._callPropertyOnChangeCallback(e,t,e.name,n),t.onPropertyChange(e.name,n)}.bind(this)},n.prototype._handleToggledComboProperty=function(e,t){var r=this._getPropertyValue(t,e.name);e.inputOptions||(e.inputOptions={}),e.checkBoxOptions||(e.checkBoxOptions={}),e.dropDownOptions||(e.dropDownOptions={}),e.useToggleButton=!0,r?(e.dropDownOptions.defaultValue=r.unit,e.inputOptions.value=r.value,e.checkBoxOptions.checked=r.autoRefresh):(e.inputOptions.value=e.inputOptions.defaultValue||"",e.checkBoxOptions.checked=!1),e.validateInput=this._validateToggleComboProperty.bind(this),e.onChange=function(r,n){this._callPropertyOnChangeCallback(e,t,r,n),t.onPropertyChange(r,n)}.bind(this)},n.prototype._handleIconPickerProperty=function(e,t){var r=this._getPropertyValue(t,e.name),n=r&&r.value?r.value:r;null!=n?e.values=n:void 0!==e.defaultValue&&(e.values=e.defaultValue),e.onChange=function(r,n){var i=n;n.length&&1===n.length?i=n[0].name:n.length&&(i=[],n.forEach((function(e){i.push(e.name)}))),this._callPropertyOnChangeCallback(e,t,r,i),t.onPropertyChange(r,i)}.bind(this)},n.prototype._getMaxMinRefreshValuesForUnits=function(e){var t,r=(Math.pow(2,31)-1)/1e3,n={};switch(e){case"minutes":n.min=1,t=r/60,n.max=Math.ceil(t-1);break;case"hours":n.min=1,t=r/3600,n.max=Math.ceil(t-1);break;default:n.min=5,n.max=Math.ceil(r-1)}return n},n.prototype._validateToggleComboProperty=function(t,r){if(!t||!r)return!1;var n=e.isNumeric(t);if(n){var i=this._getMaxMinRefreshValuesForUnits(r);n=t>=i.min&&t<=i.max}return n},n.prototype.handleNewPaletteProperty=function(e,t,r,n){var i=this;if(!e.paletteType)throw new Error('Palette property needs a "paletteType"',e);var o=r.getFeature("Colors"),a=function(){var r=i._getPropertyValue(t,e.name);return r=r||e.defaultValue||o.getDefaultPaletteName(e.paletteType)},s=a(),l="HeatPalette"===e.paletteType,d=l?"continuous":"standard",c=function(){return"DarkerForLowerValue"===i._getPropertyValue(t,e.reversePalettePropName)&&l};return e.menuItems=[],l&&e.menuItems.push("reverse"),e.reverse=c(),e.createPaletteType=d,o.getPalette({paletteId:s,type:e.paletteType,defaultPaletteId:e.defaultValue,addMissingBaseColors:e.addMissingBaseColors,defaultIfNotFound:!0,forProperties:!0}).then((function(r){e.palette=r,e.hasSection=!0,e.readOnly=!0,r.my&&!r.public&&e.menuItems.push("edit"),e.onChangePalette=n||function(r,n){i._callPropertyOnChangeCallback(e,t,r,n.id),t.onColorPaletteChanged(i.buildPropChangePayload(r,n.id)).then((function(){t.refreshPropertiesPane()}))};var l=function(t){var r="__CM__"+t;return e.onChangePalette(e.name,{id:r}),r};return e.onCreatePalette=l,e.onChange=function(r,n){var o=!0===n.reverse?"DarkerForLowerValue":"DarkerForHigherValue";i._callPropertyOnChangeCallback(e,t,e.reversePalettePropName,o),t.onHeatScalePaletteChanged(i.buildPropChangePayload(e.reversePalettePropName,o))},e.changePaletteCb=function(){t.dashboardApi.getDashboardSvc("propertiesManager").then((function(r){var n={label:e.linkLabel,overlay:!0,width:"320px",content:{module:"authoring-common/changePaletteView",selectedId:s,onCreatePalette:l,createPaletteType:d,name:e.name,getPalettes:function(){return o.getPalettes({type:e.paletteType,includeUserColorPalette:e.includeUserColorPalette,forProperties:!0})},getPaletteId:a.bind(t),reverse:c(),onChange:e.onChangePalette,component:"dashboard"}};t.dashboardApi.prepareGlassOptions(n),r.addChild(n)}))},e}))},n.prototype.buildPropChangePayload=function(e,r){return{category:e,item:r,transactionId:t.uniqueId("prop_change")}},n.prototype.addCustomColorCapability=function(e,t){if(e.createCustomColor=function(e){var r=t.addCustomColor(e),n=t.createColorDefinition(r,e,e);return n.type="ColorCode",n.hidden=!0,n},t.isCustomColor(e.selectedName)&&e.items){var r=t.getHexColorFromClassName(e.selectedName),n=t.createColorDefinition(e.selectedName,r,r);n.hidden=!0,e.items.push(n)}return e},n.prototype._getColorPalettePropertyValue=function(e,t,r,n){return this._getPropertyValue(e,r)||t.getDefaultPaletteName(n)},n.prototype._getPropertyValue=function(e,t){return e.model&&void 0!==e.model[t]?e.model[t]:e.visModel&&null!==e.visModel.getPropertyValue(t)?e.visModel.getPropertyValue(t):e.visAPI&&null!==e.visAPI.getPropertyValue(t)?e.visAPI.getPropertyValue(t):"undefined"!==e[t]&&"function"!=typeof e[t]?e[t]:null},n.prototype.handleColorPickerProperty=function(e,r,n){var i=this;if(!e.paletteType)throw new Error('Color picker property needs a "paletteType"',e);var o=n.getFeature("Colors");e.onChange=function(t,n){this._callPropertyOnChangeCallback(e,r,e.propertyName,n.name),r.onPropertyChange(t,n.name)}.bind(this);var a=this._getPropertyValue(r,e.name);return e.selectedName=!a&&0!==a&&e.defaultValue?e.defaultValue:a,this._getColorPickerColors(e,r,n).then((function(r){if(e.palettePropertyName?(e.items=[],r.forEach((function(t,r){e.items.push({id:r,name:r,value:t.hexValue,type:"ColorCode",label:t.label})}))):e.items=r,e.addButton&&(e=i.addCustomColorCapability(e,o)),e.selectedName>r.length)e.selectedName=0;else if(e.selectedName||0===e.selectedName||void 0===e.defaultColorIndex){if(e.missingIsLast&&e.selectedName){t.find(e.items,(function(t){return t.name===e.selectedName}))||(e.selectedName=e.items[e.items.length-1].name)}}else e.selectedName=e.defaultColorIndex;return e}))},n.prototype._getColorPickerColors=function(e,t,r){var n=r.getFeature("Colors");if("DashboardColorSet"===e.paletteType)return Promise.resolve(n.getDashboardColorSet().slice(0));var i=e.palettePropertyName?this._getColorPalettePropertyValue(t,n,e.palettePropertyName,e.paletteType):n.getColorSetId();return n.getPaletteColors({paletteId:i,type:e.paletteType,addMissingBaseColors:e.addMissingBaseColors}).then((function(e){return e.slice(0)}))},n.prototype.propertyUIControlToPublicAPI=function(e,t,r){var n=this,i=[],o=function(e,t){if("authoring"!==r.getMode())return r.getGlassCoreSvc(".Logger").error("Trying to set a property without being in authoring mode."),!1;if(e.customValidatorCallback){var n=e.customValidatorCallback(t);if(n&&!1===n.isValid)return r.getGlassCoreSvc(".Logger").error(n.message),!1}if(e.onChange){if(e.module&&e.module.indexOf("UiSlider")>=0)e.onChange([t]);else if("ColorPicker"===e.type){var i=t&&t.startsWith("#")?r.getFeature("Colors").addCustomColor(t):t;e.onChange(e.name,{name:i})}else"NewPalette"===e.type?e.onChangePalette(e.name,{id:t}):e.onChange(e.name,t);return!0}},a=function(e,t){var r=n._getPropertyValue(t,e.name);return r||(void 0!==e.defaultValue?e.defaultValue:null)};return e.forEach((function(e){if("Banner"===e.type||!1===e.public||!e.onChange)return null;var r={name:e.name,getValue:a.bind(n,e,t),setValue:o.bind(n,e)};i.push(r)})),i},function(){return r||(r=new n),r}()})),define("text!dashboard-core/js/dashboard/widgets/error/InlineMessage.html",[],(function(){return'<div class="errorContainer error">\n\t<div class="dashboardMessageContainer error" id="{{=it.id}}">\n\t\t<div class="errorIcon">\n\t\t\t<svg>\n\t\t\t\t<use xlink:href="#{{!it.errorIcon.id}}"/>\n\t\t\t</svg>\n\t\t</div>\n\t\t<div>\n\t\t\t{{!it.msg}}\n\t\t</div>\n\t</div>\n</div>\n'})),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"));else if("function"==typeof define&&define.amd)define("js/gemini/lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/icons-js/error--filled_24",["@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"],t);else{var r=t("object"==typeof exports?require("@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"):e["@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"]);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,(function(e){return webpackJsonPBaGraphics([751],{"6873601dfe1d9459c1a9":function(t,r){t.exports=e},"8da09f6f694f6e49e853":function(e,t,r){"use strict";var n=r("9689a9c94ae38b47fa2c"),i=r.n(n),o=r("9ce58a7deea14f49ef01"),a=r.n(o),s=new i.a({id:"error--filled_24_v7",use:"error--filled_24_v7-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="error--filled_24_v7"><path d="M12,1C5.9,1,1,5.9,1,12s4.9,11,11,11s11-4.9,11-11S18.1,1,12,1z M16.3,17.5L6.5,7.7l1.2-1.2l9.8,9.8L16.3,17.5z" /></symbol>'});a.a.add(s),t.a=s},"9585c422192455fe4bd0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("6873601dfe1d9459c1a9"),i=(r.n(n),r("8da09f6f694f6e49e853"));t.default=i.a}},["9585c422192455fe4bd0"])})),define("dashboard-core/js/dashboard/widgets/error/ErrorView",["../../../lib/@waca/core-client/js/core-client/ui/core/Class","../../../app/nls/StringResources","jquery","doT","text!./InlineMessage.html","@ba/ba-graphics/dist/icons-js/error--filled_24"],(function(e,t,r,n,i,o){var a=e.extend({init:function(){a.inherited("init",this,arguments),this.msgTempl=n.template(i||"")},renderContainer:function(e){var t=this.makeNlsMessage(e.msg);return r(this.msgTempl({id:e.id,msg:t,errorIcon:o.default}))},makeNlsMessage:function(e){return e.params?t.get(e.str,e.params):t.get(e.str)}});return a})),define("dashboard-core/js/app/EventChannelRouter",["underscore","./EventRouter"],(function(e,t){var r=t.extend({globalEventRouter:null,eventNames:null,channelId:null,_alias:null,init:function(e){r.inherited("init",this,arguments),this.globalEventRouter=e.globalEventRouter,this.channelId=e.channelId,this.eventNames=e.eventNames,this._alias=e.alias},_isPrivateEvent:function(t){return e.find(this.eventNames,(function(e){return e===t}))},_getChanneledEventName:function(e){return this.channelId+"_"+e},on:function(e,t,n){this._isPrivateEvent(e)?r.inherited("on",this,[this._getChanneledEventName(e),t,n]):this.globalEventRouter.on(e,t,n)},off:function(e,t,n){this._isPrivateEvent(e)?r.inherited("off",this,[this._getChanneledEventName(e),t,n]):this.globalEventRouter.off(e,t,n)},trigger:function(e,t){this._isPrivateEvent(e)?r.inherited("trigger",this,[this._getChanneledEventName(e),t]):this.globalEventRouter.trigger(e,t)}});return r})),define("dashboard-core/js/dashboard/EventChannelRouterHelper",["underscore","../lib/@waca/core-client/js/core-client/ui/core/Class","../app/EventChannelRouter"],(function(e,t,r){var n={SAME_PAGE:["dw:filters"],Page2Page:[],Widget2Widget:[]},i=null;return i=t.extend({TYPE:{SAME_PAGE:1,Page2Page:2,Widget2Widget:3},widgetAndPageMap:null,pageAndChannelRouterMap:null,eventRouter:null,init:function(e){i.inherited("init",this,arguments),this.eventRouter=e.eventRouter,this.pageAndChannelRouterMap={}},destroy:function(){for(var e in this.pageAndChannelRouterMap)this.pageAndChannelRouterMap.hasOwnProperty(e)&&delete this.pageAndChannelRouterMap[e];delete this.topLayoutModel,delete this.pageAndChannelRouterMap,delete this.eventRouter},createSamePageEventChannelRouter:function(t){var i={channelId:t,eventNames:n.SAME_PAGE,globalEventRouter:this.eventRouter,alias:e.unique("tabPageECR_")},o=new r(i);return this.pageAndChannelRouterMap[t]=o,o},getChannelRouter:function(e){return this.pageAndChannelRouterMap[e]?this.pageAndChannelRouterMap[e]:this.createSamePageEventChannelRouter(e)}})})),define("dashboard-core/js/dashboard/loader/WidgetLoader",["../../lib/@waca/core-client/js/core-client/utils/PerfUtils","../../lib/@waca/core-client/js/core-client/utils/Deferred","underscore","jquery","../widgets/PropertiesUtil","../widgets/error/ErrorView","../EventChannelRouterHelper","../layout/LayoutHelper"],(function(e,t,r,n,i,o,a,s){var l={LOAD:20,UNLOAD:21,WIDGET_ALREADY_LOADED:22,RENDER:23,UNLOADING_A_LOADING_WIDGET:24},d=0;return function(){function c(e){_classCallCheck(this,c),this.ERROR=l,this.loadingWidgets={},this.failedWidgets={},this.eventGroups=null,this.boardModel=null,this._initializeParams(e),this.registerEvents()}return c.prototype._initializeParams=function(e){this.widgetReadyPromises={},this.pendingWidgetResolveRequests={},this.services=e.services,this.appSettings=e.appSettings,this.contentFeatureLoader=e.contentFeatureLoader,this.dashboardApi=e.dashboardApi,this.canvas=e.canvas,this.eventRouter=e.eventRouter,this.logger=this.dashboardApi.getFeature("Logger"),this.widgetRegistry=e.widgetRegistry,this.loadedWidgets=e.loadedWidgets,e.boardModel&&(this.eventGroups=e.boardModel.eventGroups,this.boardModel=e.boardModel,this.topLayoutModel=e.boardModel.layout),this.channelRouterHelper=new a({eventRouter:this.eventRouter})},c.prototype.registerEvents=function(){this.eventGroups.on("change:id",this.onEventGroupIdChange,this),this.eventGroups.on("change:widgetIds",this.onWidgetIdsChange,this),this.boardModel&&this.boardModel.on("change:eventGroups",this.onEventGroupsChange,this)},c.prototype.onEventGroupIdChange=function(e){var t={sender:e.sender,payloadData:e.data},n=this.channelRouterHelper.getChannelRouter(e.model.id);r.each(e.model.widgetIds,function(e){this.loadedWidgets[e]&&this.loadedWidgets[e].setEventRouter(n,t)}.bind(this))},c.prototype.onWidgetIdsChange=function(e){var t,n,i={sender:e.sender,payloadData:e.data};e.prevValue.length>e.value.length?(t=r.difference(e.prevValue,e.value),n=null):(t=r.difference(e.value,e.prevValue),n=this.channelRouterHelper.getChannelRouter(e.model.id)),r.each(t,function(e){this.loadedWidgets[e]&&this.loadedWidgets[e].setEventRouter(n,i)}.bind(this));var o=this.dashboardApi.getFeature("EventGroups").getContentIdList(e.model.id),a=this.channelRouterHelper.getChannelRouter(e.model.id);r.each(o,function(e){this.loadedWidgets[e]&&this.canvas.getContent(e)&&this.loadedWidgets[e].setEventRouter(a,i)}.bind(this))},c.prototype.onEventGroupsChange=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("add"===t.name){var r=t.value||{};if(Array.isArray(r.widgetIds)){var n=this.channelRouterHelper.getChannelRouter(t.value.id);r.widgetIds.forEach((function(t){e.loadedWidgets[t]&&e.loadedWidgets[t].setEventRouter(n,{silent:!0})}))}}},c.prototype.registerWidgetToEventGroup=function(e,t){var r=this.getWidget(e);if(r){var n=t&&t.undoRedoTransactionId;r.registerEventGroup(n,{transactionInfo:t})}},c.prototype.unregisterWidgetFromEventGroup=function(e,t,r){this.eventGroups.removeWidgetsFromGroup([e],{payloadData:{undoRedoTransactionId:t,skipUndoRedo:r.data&&r.data.skipUndoRedo},sender:r.sender})},c.prototype.loadWidget=function(e,t,r,n,i,o,a){var s=d;d++;var c={};return c.undoRedoTransactionId=o,c.skipUndoRedo=!!a&&!0===a.skipUndoRedo,this.logger.debug("Widget load start ("+s+")",e,t,r),this._invokeLifeCycleHandlers("pre:widget.load",{modelId:e,widgetSpec:t}).then(function(){var o;if(!this.loadedWidgets[e]&&this.loadingWidgets[e])this.loadingWidgets[e].cbOnLoad.push(n),this.loadingWidgets[e].cbOnError.push(i);else if(e&&t){if(this.loadedWidgets[e]||this.loadingWidgets[e])this._onError(i,l.WIDGET_ALREADY_LOADED,e,null,s),o=Promise.reject(new Error("Widget already loaded"));else try{o=this._loadWidget(e,t,r,n,i,s,c)}catch(t){this._onError(i,l.LOAD,e,t,s),o=Promise.reject(t)}}return o}.bind(this)).catch(this.logger.error.bind(this.logger))},c.prototype.unLoadWidget=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var n=r.data?r.data.undoRedoTransactionId:void 0;if(this.logger.debug("Unloading widget",e),this.loadingWidgets[e])return void this._onError(t,l.UNLOADING_A_LOADING_WIDGET,e);var i=this.loadedWidgets[e];if(this.unregisterWidgetFromEventGroup(e,n,r),i&&i.destroy)try{i.destroy(n)}catch(r){this._onError(t,l.UNLOAD,e,r)}finally{this.loadedWidgets[e]=null,this.widgetReadyPromises[e]=null}var o=document.getElementById(e);o&&o.getElementsByClassName("widgetContentWrapper").length&&(o.getElementsByClassName("widgetContentWrapper")[0].innerHTML="")}},c.prototype._setLoading=function(e){this.loadingWidgets[e]={cbOnLoad:[],cbOnError:[]}},c.prototype._loadWidget=function(e,n,i,o,a,s,d){o=o||function(){},this.loadingWidgets[e]||this._setLoading(e);var c=this.widgetRegistry[n.type]&&this.widgetRegistry[n.type].widget;if(c){var u=new t,h=r.partial(this._onLoadWidget.bind(this),e,n,c,i,o,a,s,d);return require([c],(function(e){return h(e).then(u.resolve.bind(u),u.reject.bind(u))}),function(t){u.reject(t),delete this.loadingWidgets[e],this._onError(a,l.LOAD,e,t,s)}.bind(this)),u.promise}try{o({id:e,widget:null})}catch(e){a(e)}},c.prototype._onLoadWidget=function(t,r,a,s,d,c,u,h,p){var g=this,f=void 0,m=void 0,b=void 0,y=void 0;try{if(!this.loadingWidgets[t])return Promise.reject(new Error("Widget '"+t+"' is not in a loading state. Unable to load."));e.createPerformanceMark({component:"dashboard",name:"loadWidget",state:"start"}),this.logger.debug("Widget load finish ("+u+")"),y=this._invokeLifeCycleHandlers("post:widget.load",{modelId:t,widgetSpec:r}).then((function(){return g.contentFeatureLoader.whenContentReady(t)})).then(function(){var a=this;if(b=f=document.getElementById(t)||s,f&&f.getElementsByClassName("widgetContentWrapper").length&&(f=f.getElementsByClassName("widgetContentWrapper")[0]),f){var l=!0,g=this.widgetRegistry[r.type];g&&(l=this.widgetRegistry[r.type].createContentNode),l?((m=document.createElement("div")).className=r.type+"WidgetContent widgetContent",m.id=t+"_",n(f).append(m)):m=f;var y={services:this.services,appSettings:this.appSettings,dashboardApi:this.dashboardApi,id:t,canvas:this.canvas,content:this.canvas&&this.canvas.getContent(t),initialConfigJSON:r,el:m,widgetContainer:b,registry:g,eventRouter:this.eventRouter,errorView:new o,propertiesUtil:i,contentFeatureLoader:this.contentFeatureLoader};y=this._addScopedEventInfo(y,r,h),y=this._addConfigInfo(y);var v=this.boardModel&&this.boardModel.widgetInstances&&this.boardModel.widgetInstances[t];return v?y.widgetModel=v:y.widgetSpec=r,this._createWidget(y,d,c,p,u,h).then((function(){e.createPerformanceMark({component:"dashboard",name:"loadWidget",state:"end"})}),(function(e){throw a.failedWidgets[t].setEventRouter(null),e}))}this.logger.error('Could not find layout node for widget with id: "'+t+'"')}.bind(this)).catch(this.logger.error.bind(this.logger))}catch(e){delete this.loadingWidgets[t],f&&f.removeChild(m),this._onError(c,l.LOAD,t,e,u),y=Promise.reject(e)}return y},c.prototype._createWidget=function(e,t,r,n,i,o){var a=this;this.logger.debug("Widget create start ("+i+")");var s=e.id,l=new n(e),d=function(){return a.loadedWidgets[s]=l,a._renderWidget(l,s,t,r,i,o)};return l.initialize?l.initialize().then((function(){return d()}),(function(e){throw a.failedWidgets[s]=l,e&&e.uiErrorMessage&&l.showError&&l.showError(e.uiErrorMessage),e})):d()},c.prototype._renderWidget=function(t,n,i,o,a,s){var d=this;this.logger.debug("Widget render start ("+a+")");var c="widget "+n+" render";e.createPerformanceMark({component:"dashboard",name:c,state:"start"});var u=void 0;this.pendingWidgetResolveRequests[n]&&(this.pendingWidgetResolveRequests[n](t),delete this.pendingWidgetResolveRequests[n]);var h=this.loadingWidgets[n].cbOnLoad,p=this.loadingWidgets[n].cbOnError;delete this.loadingWidgets[n];try{t.content&&"widget.filter"===t.content.getType()||this.registerWidgetToEventGroup(n,s),u=t.render?t.createVisualizationCompleteDeferred?t.createVisualizationCompleteDeferred.then((function(){return Promise.resolve().then(t.render.bind(t)).then((function(){e.createPerformanceMark({component:"dashboard",name:c,state:"end"})})).catch((function(e){d.logger.error("[WidgetLoader] widget render error",e)}))})):Promise.resolve(t.render()).then((function(){e.createPerformanceMark({component:"dashboard",name:c,state:"end"})})).catch((function(e){throw d.logger.error("[WidgetLoader] widget render error",e),r.each(p,(function(t){d._onError(t,l.RENDER,n,e,a)})),d._onError(o,l.RENDER,n,e,a),e})):Promise.resolve(),r.each(h,(function(e){e({id:n,widget:t})})),i({id:n,widget:t}),this.logger.debug("Widget render finish ("+a+")")}catch(e){r.each(p,(function(t){d._onError(t,l.RENDER,n,e,a)})),this._onError(o,l.RENDER,n,e,a),u=Promise.reject(new Error(""))}return u},c.prototype._getChannelId=function(e,t,r){var n;return this.eventGroups&&((n=this.eventGroups.findGroup(t))||(n=this.eventGroups.getDefaultGroup(e,{payloadData:r}))),n?n.id:e},c.prototype._addScopedEventInfo=function(e,t,r){if(this.channelRouterHelper){var n=this.widgetRegistry[t.type].filter;e.containerPageId=s.getContainerPageId(this.topLayoutModel,t.id);if(-1!==["data","live"].indexOf(t.type)||n){var i=this._getChannelId(e.containerPageId,t.id,r);e.eventRouter=this.channelRouterHelper.getChannelRouter(i)}}return e},c.prototype._addConfigInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.focusModeDisabled=!!this.dashboardApi.getConfiguration("focusModeDisabled"),e.interactivitySettings=this.dashboardApi.getConfiguration("interactions"),e},c.prototype.cleanup=function(){var e=this.loadedWidgets;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r&&r.destroy&&(r.destroy(),this.loadedWidgets[t]=null,this.widgetReadyPromises[t]=null)}this.loadingWidgets={},this.eventGroups&&(this.eventGroups.off("change:id",this.onEventGroupIdChange,this),this.eventGroups.off("change:widgetIds",this.onWidgetIdsChange,this)),this.boardModel&&this.boardModel.off("change:eventGroups",this.onEventGroupsChange,this),this.channelRouterHelper&&(this.channelRouterHelper.destroy(),delete this.topLayoutModel)},c.prototype.isLoaded=function(e){return!!e&&(null!==this.loadedWidgets[e]&&void 0!==this.loadedWidgets[e])},c.prototype.isLoading=function(e){return this.loadingWidgets[e]},c.prototype.getWidget=function(e){return e?this.loadedWidgets[e]:void 0},c.prototype.getWidgetAsync=function(e){var t=this;return this.widgetReadyPromises[e]||(this.widgetReadyPromises[e]=new Promise((function(r){var n=void 0;t.isLoaded(e)&&(n=t.getWidget(e)),n?r(n):t.pendingWidgetResolveRequests[e]=r}))),this.widgetReadyPromises[e]},c.prototype.runAPIOnAllWidgets=function(e,t){var n=[];return r.each(r.keys(this.loadedWidgets),function(r){var i=this.loadedWidgets[r];if(i&&i[e]&&(!t||i.getContainerPageId()===t)){var o=i[e]();o&&n.push(o)}}.bind(this)),n},c.prototype._onError=function(e,t,r,n,i){var o={errorCode:t,widget:r,exception:n};e&&setTimeout((function(){e(o)}),1),this.logger.error("Error loading widget",i,o)},c.prototype._invokeLifeCycleHandlers=function(e,t){return this.dashboardApi.getFeature(".LifeCycleManager").invokeLifeCycleHandlers(e,t)},c}()})),define("dashboard-core/js/app/services/SmartNamingSvc",["../../lib/@waca/core-client/js/core-client/ui/core/Class","underscore","../nls/StringResources","../../lib/@waca/dashboard-common/dist/core/MultilingualAttribute"],(function(e,t,r,n){var i={pacubeviewer:{requiredMappings:["none"]},crosstab:{requiredMappings:["values","row_level1"],optionalMapping:"column_level1"},JQGrid:{requiredMappings:["grid_cols"]},hierarchy:{requiredMappings:["level1"]},map:{requiredMappings:["categories"]},infographicSummary:{requiredMappings:["actual"]},summary:{requiredMappings:["actual"]},kpi:{requiredMappings:["actual"],optionalMapping:"sparkline.time"},LIVE_bubble_chart:{requiredMappings:["x","y","size"]},LIVE_line_column:{requiredMappings:["columnValue","lineValue"],optionalMapping:"categories"},LIVE_decision_tree:{requiredMappings:["values"]},LIVE_heatmap:{requiredMappings:["color"]},LIVE_pie:{requiredMappings:["categories","values"]},LIVE_pie_as_donut:{requiredMappings:["categories","values"]},LIVE_point:{requiredMappings:["categories","values"]},LIVE_line:{requiredMappings:["categories","values"]},LIVE_map:{requiredMappings:["locations"]},LIVE_network:{requiredMappings:["categories","series"],optionalMapping:"values"},LIVE_bar:{requiredMappings:["values"],optionalMapping:"categories"},LIVE_bullet:{requiredMappings:["actual"]},LIVE_stacked_bar:{requiredMappings:["values"],optionalMapping:"categories"},LIVE_column:{requiredMappings:["values"],optionalMapping:"categories"},LIVE_stacked_column:{requiredMappings:["values"],optionalMapping:"categories"},LIVE_packed_bubble:{requiredMappings:["categories"]},LIVE_hierarchy_packed_bubble:{requiredMappings:["categories"]},LIVE_marimekko:{requiredMappings:["categories","values"]},LIVE_sunburst:{requiredMappings:["values"]},LIVE_decision_analysis:{requiredMappings:["values"]},LIVE_data_player:{requiredMappings:["category"]},LIVE_radial_bar:{requiredMappings:["values"],optionalMapping:"categories"},LIVE_spiral:{requiredMappings:["values"]},LIVE_treemap:{requiredMappings:["categories","size"]},LIVE_wordcloud:{requiredMappings:["categories"]},LIVE_area:{requiredMappings:["categories","values"]},LIVE_area_as_stacked_percent:{requiredMappings:["categories","values"]},LIVE_scatter:{requiredMappings:["x","y"],optionalMapping:"categories"},LIVE_waterfall:{requiredMappings:["values"]}},o={grid:"JQGrid",player:"dataPlayer",summaryChart:"summary"},a={list:"hierarchy",hierarchy2:"hierarchy",hierarchy3:"hierarchy",map1measure:"map",map2measure:"map",map3measure:"map","com.ibm.vis.rave2polygonmap":"map","com.ibm.vis.rave2bundlearea":"LIVE_area","com.ibm.vis.rave2bundlebar":"LIVE_bar","com.ibm.vis.rave2bundlebullet":"LIVE_bullet","com.ibm.vis.rave2bundlecomposite":"LIVE_line_column","com.ibm.vis.rave2bundlepackedbubble":"LIVE_packed_bubble","com.ibm.vis.rave2bundlehierarchicalpackedbubble":"LIVE_hierarchy_packed_bubble","com.ibm.vis.rave2marimekko":"LIVE_marimekko","com.ibm.vis.sunburst":"LIVE_sunburst","com.ibm.vis.rave2comet":"LIVE_decision_analysis","com.ibm.vis.rave2bundlepie":"LIVE_pie","com.ibm.vis.rave2bundleradialbar":"LIVE_radial_bar","com.ibm.vis.rave2bundletreemap":"LIVE_treemap","com.ibm.vis.rave2bundlewordcloud":"LIVE_wordcloud","com.ibm.vis.ravebubble":"LIVE_bubble_chart","com.ibm.vis.decisiontree":"LIVE_decision_tree","com.ibm.vis.rave2heat":"LIVE_heatmap","com.ibm.vis.rave2line":"LIVE_line","com.ibm.vis.rave2network":"LIVE_network","com.ibm.vis.spiral":"LIVE_spiral","com.ibm.vis.rave2bundletiledmap":"LIVE_map","com.ibm.vis.rave2bundlecolumn":"LIVE_column","com.ibm.vis.rave2bundlestackedbar":"LIVE_stacked_bar","com.ibm.vis.rave2bundlestackedcolumn":"LIVE_stacked_column","com.ibm.vis.rave2point":"LIVE_point","com.ibm.vis.ravescatter":"LIVE_scatter","com.ibm.vis.rave2bundlewaterfall":"LIVE_waterfall",dataPlayer:"LIVE_data_player",pieExpressedAsDonut:"LIVE_pie_as_donut",areaExpressedAsStackedPercent:"LIVE_area_as_stacked_percent"};return e.extend({init:function(e,t,r){this._dashboardAPI=e,this._widgetRegistry=t,this._boardModel=r},getPinName:function(e){var t,r=1,n=e&&e.content&&e.content.widgets?e.content.widgets:[],i=1;try{0===(n=this._getPinnedWidgetsFromLayout(e.content)).length&&(n=e.content.widgets)}catch(t){this._dashboardAPI.getFeature("Logger").error("Failed to retrieve the pinned widgets from the pin spec",e,t)}if(n.length>=1){i=n.length;var o=n.reduce(function(e,t){var r=this._getWidgetType(t);return r in e?e[r]++:e[r]=1,e}.bind(this),{});t=Object.keys(o).reverse((function(e,t){return o[e]>o[t]}))[0],r=Object.keys(o).length}return this._getName(i,r,t,n)},getWidgetName:function(e,t){var r=this._getWidgetType(e),n=[e];return this._getName(1,1,r,n,t)},getLocalizedWidgetType:function(e){var t=this._getWidgetType(e);return r.get(t+"_label")},_getPinnedWidgetsFromLayout:function(e){for(var t=this._getPinnedWidgetIdsFromLayout(e.layout),r=[],n=0;n<e.widgets.length;n++){var i=e.widgets[n];void 0!==t[i.id]&&r.push(i)}return r},_getPinnedWidgetIdsFromLayout:function(e){var t={};switch(e.type){case"group":for(var r=0;r<e.items.length;r++){var n=e.items[r];t=_extends({},t,this._getPinnedWidgetIdsFromLayout(n))}break;case"widget":t[e.id]=e.id}return t},_getWidgetType:function(e){var t=e.type;return"media"===t&&e.mediaType?t=e.mediaType:e.placeholder&&!this._getTextContent(e).length&&(t="text"===e.type||e.placeholder.text?"placeholder_text":"placeholder_vis"),t},_getCountKey:function(e,t){return 1===e?t?"one_unknown":"one":e>1&&e<5?t?"few_unknown":"few":t?"many_unknown":"many"},_getLabelsFromMappings:function(e,t){return e[t.slotId]=t.label,e},_isInfographics:function(e){return e&&e.hasGraphic},getWidgetVisId:function(e){var t=e.visId;return!t&&e.archetype&&(t=o[e.archetype]||e.archetype),"summary"===t&&this._isInfographics(e)&&(t="infographicSummary"),-1!==["com.ibm.vis.rave2bundlepie","com.ibm.vis.rave2bundlearea"].indexOf(t)&&e.properties&&(t=this._getExpressedVisId(t,e.properties)),a[t]&&(t=a[t]),t},_getExpressedVisId:function(e,r){switch(e){case"com.ibm.vis.rave2bundlepie":t.each(r,function(t){"pie.has.hole"===t.id&&!0===t.value&&(e="pieExpressedAsDonut")}.bind(this));break;case"com.ibm.vis.rave2bundlearea":t.each(r,function(t){"stacked.percent"===t.id&&!0===t.value&&(e="areaExpressedAsStackedPercent")}.bind(this))}return e},_getKeyFromDataLabels:function(e,r){if(!i[e])return"one_unknown_live";var n=t.every(i[e].requiredMappings,(function(e){return r[e]}));return i[e].optionalMapping&&r[i[e].optionalMapping]&&n?e+"_opt_mapping":n?e+"_has_mapping":e+"_no_mapping"},_getName:function(e,t,n,i,o){var a=this._getCountKey(e,!1),s={count:e,resource_key:a+"_"+n},l=i[0];if(1===e&&l)switch(n){case"text":this._getTextName(s,l);break;case"live":this._getLiveName(s,l);break;case"filter":this._getFilterName(s,l);break;case"shape":this._getShapeName(s,l);break;case"image":case"webpage":case"youtube":case"embedMedia":case"media":case"multipurpose":this._getStaticName(s,l,n);break;case"placeholder_text":case"placeholder_vis":this._getPlaceholderName(s,n);break;default:this._getRegistryName(s,l,n,a)}else t>1&&(s.resource_key=e<5?"few_unknown":"many_unknown");var d=r.get(s.resource_key,s);if(d===s.resource_key&&(s.resource_key=this._getCountKey(e,!0),d=r.get(s.resource_key,s)),o&&o[d]){s.resource_key=s.resource_key+"_numbered";for(var c=1;c<501&&o[d];c++)s.number=c,d=r.get(s.resource_key,s)}return d},_getTextContent:function(e){return new n(e.name,this._boardModel.getLanguageModelOptions()).getValue()},_getTextName:function(e,t){var r=this._getTextContent(t);r?(e.name=r,e.resource_key="one_name"):t.placeholder?e.resource_key="one_placeholder_text":e.resource_key="noExtraText_text"},_getLiveName:function(e,i){var o=this.getWidgetVisId(i),a=null;i.name&&(a=new n(i.name,this._boardModel.getLanguageModelOptions()).getValue().trim());if(a&&a.length>0){e.name=a,e.resource_key=o+"_named",r.get(e.resource_key,e)===e.resource_key&&(e.resource_key="one_named_live")}else{var s=[],l=i.slotmapping&&i.slotmapping.slots,d=this._getAllDataItemsFromData(i.data);t.each(d,function(e){var r={label:e.itemLabel};t.each(l,function(t){t.dataItems.indexOf(e.id)>=0&&(r.slotId=t.name)}.bind(this)),s.push(r)}.bind(this)),t.extend(e,s.reduce(this._getLabelsFromMappings,{})),e.resource_key=this._getKeyFromDataLabels(o,e)}},_getAllDataItemsFromData:function(e){var t=[];return e&&e.dataViews&&e.dataViews.forEach((function(e){t.push.apply(t,e.dataItems)})),t},_getFilterName:function(e,t){t.properties.itemName?(e.name=t.properties.itemName.trim(),r.get(e.resource_key,e)===e.resource_key&&(e.resource_key="one_named_filter")):e.resource_key="one_unknown_filter"},_getShapeName:function(e,t){t.name?(e.name=t.name.trim(),e.resource_key="one_name"):e.resource_key="noExtraText_shape"},_getStaticName:function(e,t,r){var i,o=null;(i="image"===r?t.altText:t.title)&&(o=new n(i,this._boardModel.getLanguageModelOptions()).getValue());o?(e.text=o.trim(),e.resource_key="one_"+r):e.resource_key="noExtraText_"+r},_getRegistryName:function(e,t,r,i){if(this._widgetRegistry&&this._widgetRegistry[r]&&!this._widgetRegistry[r].builtin)if(t.name){var o=new n(t.name,this._boardModel.getLanguageModelOptions());e.name=o.getValue().trim(),e.resource_key="one_custom_named"}else e.resource_key="one_custom";else e.resource_key=i+"_"+r},_getPlaceholderName:function(e,t){e.resource_key="one_"+t}})})),define("dashboard-core/js/common/templates/HtmlTemplates",["../../lib/@waca/core-client/js/core-client/ui/core/Class","../../lib/@waca/dashboard-common/dist/utils/HtmlXSSUtils","underscore"],(function(e,t,r){var n='<div id="{{id}}" tabindex="-1" class="page page{{type}} gridCapable{{extraCSS}}"{{style}}>{{items}}</div>',i='<div id="{{id}}" class="page page{{type}}{{extraCSS}}"{{style}}><div class="tabCntr"></div><div class="tabPageHolder">{{items}}</div></div>',o='<div id="{{item.id}}_tab" class="pageTabContent">{{item}}</div>',a=0;return e.extend({init:function(e){if(e=e||{},this._defaultHtml=['<div id="{{id}}" tabindex="-1" class="page page{{type}}{{extraCSS}}"{{style}}>{{items}}</div>',"{{item}}"],this._htmlTemplates={absolute:[n,"{{item}}"],scalingAbsolute:[n,"{{item}}"],genericPage:[n,"{{item}}"],widget:['<div id="{{id}}" role="application" aria-label="{{title}}" class="widget {{widgetType}}Widget{{extraCSS}} {{subType}}"{{style}} tabIndex="0"><div class="widgetContentWrapper" style="height:100%;width:100%"></div></div>',""],column:['<table id="{{id}}" class="page page{{type}}{{extraCSS}}"{{style}}><tbody><tr>{{items}}</tr></tbody></table>',"<td>{{item}}</td>"],flow:['<div id="{{id}}" class="page page{{type}}{{extraCSS}}"{{style}}><div class="pageflowcolumn">{{items}}</div></div>',"{{item}}"],tab:[i,o],cardtab:[i,o],hub:['<div id="{{id}}" class="page page{{type}}{{extraCSS}}"{{style}}><div class="tabLabelCntr">{{labels}}</div><div class="tabCntr">{{items}}</div></div>','<div id="{{id}}_{{counter}}" class="pageTabContent" style="display:none">{{item}}</div>','<div id="{{id}}_{{counter}}_label" class="tabLabel" tabIndex="0" role="tab">{{label}}</div>'],longscroll:['<div id="{{id}}" class="page page{{type}}{{extraCSS}}"{{style}}><div class="tabLabelCntr">{{labels}}</div><div class="tabCntr">{{items}}</div></div>','<div id="{{id}}_{{counter}}" class="pageTabContent" style="display:none">{{item}}</div>','<div id="{{id}}_{{counter}}_label" class="tabLabel" tabIndex="0" role="tab">{{label}}</div>']},e.layoutExtensionsTemplates){var t=/<!--[\s\S]*?-->/m;Object.keys(e.layoutExtensionsTemplates).forEach(function(r){var n=e.layoutExtensionsTemplates[r]();this._htmlTemplates[r]=n.map((function(e){return(e||"").replace(t,"")}))}.bind(this))}},reset:function(){a=0},getStyleValue:function(e){var t=[];if(e)if("string"==typeof e)t.push(e);else{var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(n+":"+e[n]);t.push(r.join(";"))}return t.join("")},getStyle:function(e){var t=this.getStyleValue(e),n=[];return t&&(n.push(' style="'),n.push(r.escape(t)),n.push('"')),n.join("")},getHtml:function(e,t){var r=this;if(!e.id){var n="page"+a++;e.setId?e.setId(n):e.id=n}var i=e.type,o=this.getTemplate(i)[0],s=[],l=[];if("tab"===e.type){var d=e.items[0];this._loadLabelHtml(l,i,t,d,0),this._loadItemHtml(s,i,t,d)}else e.items&&e.items.forEach((function(e,n){r._loadLabelHtml(l,i,t,e,n),r._loadItemHtml(s,i,t,e)}));var c=o.replace(/\{\{items\}\}/g,s.join("")).replace(/\{\{labels\}\}/g,l.join(""));return c=this.replaceWidgetValues(c,t?t[e.id]:null),c=this.replaceLayoutValues(c,e)},_loadLabelHtml:function(e,t,r,n,i){var o=this.getLabel(n,r)||"Tab "+(i+1),a=this.getLabelTemplate(t,o,n);a&&e.push(a)},_loadItemHtml:function(e,t,r,n){var i=this.getLabel(n,r)||"",o=this.getItemTemplate(t,this.getHtml(n,r),n,i);o&&e.push(o)},getTemplate:function(e){return this._htmlTemplates[e]||this._defaultHtml},getLabelTemplate:function(e,t,n){var i=null,o=this.getTemplate(e)[2];return o&&(n.id=n.id||"page"+a++,i=o.replace(/\{\{item.id\}\}/g,r.escape(n.id)).replace(/\{\{label\}\}/g,r.escape(t))),i},getItemTemplate:function(e,t,n,i){var o=n.data||{},a=n.style||{},s=i||"",l=null,d=this.getTemplate(e)[1];return d&&(l=d.replace(/\{\{item.id\}\}/g,r.escape(n.id)).replace(/\{\{item\}\}/g,t).replace(/\{\{label\}\}/g,r.escape(s)).replace(/\{\{dx\}\}/g,r.escape(""+(o.x||0))).replace(/\{\{dy\}\}/g,r.escape(""+(o.y||0))).replace(/\{\{dscale\}\}/g,r.escape(""+(o.scale||1))).replace(/\{\{style\}\}/g,this.getStyle(a))),l},replaceLayoutValues:function(e,t){var n=t.data||{};return this._setCssFillColor(t),e.replace(/\{\{id\}\}/g,r.escape(t.id)).replace(/\{\{type\}\}/g,r.escape(t.type)).replace(/\{\{style\}\}/g,this.getStyle(t.style)).replace(/\{\{extraCSS\}\}/g,t.css?" "+r.escape(t.css):"").replace(/\{\{extraCSSTabLabels\}\}/g,t.cssTabLabels?" "+r.escape(t.cssTabLabels):"").replace(/\{\{dx\}\}/g,r.escape(""+(n.x||0))).replace(/\{\{dy\}\}/g,r.escape(""+(n.y||0))).replace(/\{\{dscale\}\}/g,r.escape(""+(n.scale||1)))},_setCssFillColor:function(e){var t=void 0;if(e.content&&e.content.properties&&e.content.properties.backgroundColor?t=e.content.properties.backgroundColor:e.fillColor&&(t=e.fillColor),t){var r="fill-"+t;e.css?(-1!==e.css.indexOf("fill-")&&(e.css=e.css.replace(/fill-[a-zA-Z0-9]*/,"").trim()),e.css+=" "+r):e.css=r}},replaceWidgetValues:function(e,n){var i=n&&n.get("type")||"",o=n&&n.get("subType")||"",a=null;return n&&(a=n.get("name")||n.get("title")||n.get("altText")),a=t.sanitizeHtml(a),e.replace(/\{\{widgetType\}\}/g,r.escape(i)).replace(/\{\{subType\}\}/g,r.escape(o)).replace(/\{\{title\}\}/g,r.escape(a))},getLabel:function(e,t){var r,n="";return e&&e.title&&(r=e.get?e.get("title"):e.title),"string"==typeof r?n=r:r&&(n=this.getHtml(r,t)),n}})})),define("dashboard-core/js/dashboard/loader/BoardLoaderHelper",["../../app/services/SmartNamingSvc","../../lib/@waca/core-client/js/core-client/utils/ClassFactory","../../common/templates/HtmlTemplates"],(function(e,t,r){return function(){function n(e){_classCallCheck(this,n),this.dashboardApi=e}return n.prototype.createBoardServices=function(t){var r={};return t.widgetRegistry&&(r.smartNamingSvc=new e(this.dashboardApi,t.widgetRegistry,t.boardModel),this.dashboardApi.registerDashboardSvc(".SmartNamingSvc",r.smartNamingSvc)),r},n.prototype.loadLayoutExtensions=function(e){var r=Object.keys(e.consumeViews||{}).map((function(r){var n=e.consumeViews[r];return t.loadModule(n).then((function(e){return{key:r,template:e.getTemplate}}))}));return Promise.all(r)},n.prototype.registerLayoutExtensions=function(e){var t={};e.forEach((function(e){e.template&&(t[e.key]=e.template)}));var n=new r({layoutExtensionsTemplates:t});this.dashboardApi.registerDashboardSvc("htmlTemplates",n)},n}()})),define("dashboard-core/js/dashboard/loader/BoardLoader",["../../lib/@waca/core-client/js/core-client/ui/core/Class","./WidgetLoader","../../lib/@waca/core-client/js/core-client/utils/ClassFactory","underscore","./BoardLoaderHelper","../../lib/@waca/core-client/js/core-client/utils/Deferred"],(function(e,t,r,n,i,o){var a=e.extend({init:function(e){a.inherited("init",this,arguments),e=e||{},this.glassContext=e.glassContext,this.appSettings=e.appSettings||{},this.services=e.services,this.ajaxSvc=e.ajaxSvc,this.dashboardApi=e.dashboardApi,this.internalCanvas=this.dashboardApi.getFeature("Canvas.internal"),this.eventRouter=e.eventRouter,this.boardSpec=e.boardSpec,this.addOnSpec=e.addOnSpec,this.specUrl=e.specUrl,this.boardModel=e.boardModel,this.setDirty=this.boardModel.isUpgraded||!1,this.pageViewContentNode=e.el,this.contentNode=null,this.$viewEl=e.$viewEl,this.isLayoutRendered=e.isLayoutRendered,this._registry=e.widgetRegistry,this.gatewayUrl=e.gatewayUrl||"",this.cdnUrl=e.cdnUrl||"",this.currentVersion=e.currentVersion,this.logger=this.dashboardApi.getGlassCoreSvc(".Logger"),this.stringResources=this.dashboardApi.getDashboardCoreSvc(".StringResources"),this.extensions=e.extensions,this.boardLoaderHelper=new i(this.dashboardApi),this._canvasControllerDfd=new o,this.featureLoader=e.featureLoader,this._dashboardController=e.dashboardController,this._colorsService=this.dashboardApi.getFeature("Colors")},getCanvasController:function(){return this._canvasControllerDfd.promise},loadBoard:function(){return this._registerServices(),this._initializeTranslationService().then(this._renderLayoutHtml.bind(this)).then(this._initBoardController.bind(this)).then(this._postDashboardInitialize.bind(this))},_initializeTranslationService:function(){return this.dashboardApi.getDashboardSvc("TranslationService").then(function(e){return e.initialize({boardModel:this.boardModel,view:this.$viewEl})}.bind(this))},_createDashboardContainerNodes:function(){var e=document.createElement("div");e.classList.add("dashboardFrame");var t=document.createElement("div");t.classList.add("dashboardFrameCentre");var r=document.createElement("div");return r.classList.add("dashboardFrameRight"),e.appendChild(t),e.appendChild(r),{dashboardFrame:e,dashboardFrameCentre:t,dashboardFrameRight:r}},_getDashboardContentNode:function(){var e=this.pageViewContentNode.querySelector(".dashboardFrame > .dashboardFrameCentre");if(e)return e;var t=this._createDashboardContainerNodes(),r=t.dashboardFrame,n=t.dashboardFrameCentre;return this.pageViewContentNode.appendChild(r),n},_setContentNode:function(){this.contentNode=this._getDashboardContentNode()},_renderLayoutHtml:function(){var e=this;return this._setContentNode(),this.boardLoaderHelper.loadLayoutExtensions(this.extensions.getLayoutViewExtensions()).then((function(t){e.boardLoaderHelper.registerLayoutExtensions(t);var r=e.dashboardApi.getFeature("htmlTemplates").getHtml(e.boardModel.layout,e.boardModel.widgetInstances);e.isLayoutRendered||(e.contentNode.innerHTML=r)}))},_initBoardController:function(){var e=this;return r.loadModule("dashboard-core/js/dashboard/CanvasController").then((function(r){return e.widgetLoader=new t({glassContext:e.glassContext,services:e.services,appSettings:e.appSettings,dashboardApi:e.dashboardApi,eventRouter:e.eventRouter,widgetRegistry:e._registry,loadedWidgets:{},boardModel:e.boardModel,contentFeatureLoader:e.internalCanvas,canvas:e.dashboardApi.getFeature("Canvas")}),e.canvasController=new r({glassContext:e.glassContext,services:e.services,appSettings:e.appSettings,dashboardApi:e.dashboardApi,eventRouter:e.eventRouter,$el:e.$viewEl,boardModel:e.boardModel,widgetLoader:e.widgetLoader,layoutExtensions:e.extensions.getLayoutViewExtensions(),boardLoader:e,gatewayUrl:e.gatewayUrl,cdnUrl:e.cdnUrl,contentFeatureLoader:e.internalCanvas}),e.dashboardApi.registerDashboardSvc("widgetLoader",{loadedWidgets:e.widgetLoader.loadedWidgets,loadingWidgets:e.widgetLoader.loadingWidgets,load:e.widgetLoader.loadWidget.bind(e.widgetLoader),unload:e.widgetLoader.unLoadWidget.bind(e.widgetLoader),isLoaded:e.widgetLoader.isLoaded.bind(e.widgetLoader),isLoading:e.widgetLoader.isLoading.bind(e.widgetLoader),getWidget:e.widgetLoader.getWidget.bind(e.widgetLoader)}),e.canvasController.initialize().then((function(){e._canvasControllerDfd.resolve(e.canvasController)}))})).catch((function(t){e.logger.error(t)}))},_postDashboardInitialize:function(){return this.dashboardApi.getFeature(".LifeCycleManager").invokeLifeCycleHandlers("post:dashboard.initialize")},_registerServices:function(){var e=this.boardLoaderHelper.createBoardServices({boardModel:this.boardModel,widgetRegistry:this._registry});this.smartNamingSvc=e.smartNamingSvc},activate:function(){this._colorsService&&this._colorsService.enableTheme()},deactivate:function(){this._colorsService&&this._colorsService.disableTheme()},destroyViews:function(){this.deactivate(),this.widgetLoader&&(this.widgetLoader.cleanup(),this.widgetLoader=null),this.canvasController&&(this.canvasController.destroy(),this.canvasController=null)}});return a})),define("dashboard-core/js/dashboard/util/EventConstants",[],(function(){return{changeModeAction:"ChangeMode"}})),define("dashboard-core/js/dashboard/layout/authoring/interaction/ChangeModeAction",["../../../../lib/@waca/core-client/js/core-client/ui/core/Events","../../../util/EventConstants"],(function(e,t){var r=null;return r=e.extend({init:function(e,n){r.inherited("init",this,arguments),this.name=t.changeModeAction,this.sender=n&&n.sender,this.value=e.isAuthoringMode,this.prevValue=!e.isAuthoringMode,this.senderContext={applyFn:function(t,r){e.isAuthoringMode!==t&&e.toggleMode({sender:r})}.bind(this)}}})})),define("dashboard-core/js/app/util/ErrorUtils",["underscore"],(function(e){return{_getResponse:function(e){var t=e.responseJSON;return t||e.responseText&&e.responseText.length>0&&(t=JSON.parse(e.responseText)),t||{}},_getCAFCode:function(e){var t,r=e.messages&&e.messages[0];return r&&-1!==r.indexOf("CM-REQ-4032")&&(t="cmEmptySelection"),t},showError:function(t,r,n){var i=this._getResponse(r),o=void 0,a=i.errorCode,s=t.appController.currentAppView.currentContentView.services.getSvcSync(".StringResources");return a&&("caf"===a&&(a=this._getCAFCode(i)||a),o=s.get(a,e.extend({_:"NOT_FOUND"},n))),o&&"NOT_FOUND"!==o||(o=i.messages&&i.messages[0]),o&&0!==o.length||(o=s.get("saveFailed")),setTimeout((function(){t.appController.showToast(o,{type:"error",preventDuplicates:!0})}),10),a},getErrorCode:function(e){var t=e.responseJSON;return t||(t=JSON.parse(e.responseText)),t.errorCode},hasCapability:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"canUseInteractiveDashboard";return e.getFeature?e.getFeature("UserProfile").hasCapability(t):e.hasCapability(t)},checkAuthoringCapability:function(e,t,r){var n=e.getFeature("Capabilities");return n?n.checkAuthoringCapability({spec:t}).then((function(t){return t||e.showToast(r,{type:"error",preventDuplicates:!0}),t})):Promise.resolve(!0)}}})),define("dashboard-core/js/dashboard/util/ButtonHideHelper",["../../lib/@waca/core-client/js/core-client/ui/core/Class","underscore","../../app/util/ErrorUtils"],(function(e,t,r){var n={buttons:{"com.ibm.bi.dashboard.pin":!1,"com.ibm.bi.dashboard.customWidget":!1,"com.ibm.bi.dashboard.saveMenu":!1}},i=[{id:"navbar"},{id:"appbar"}];return new(e.extend({changeMode:function(e,t,r){this._buttonCollection?this._changeMode(e,t):e.appController.findCollection(this._getButtonsCollection(e)).then(function(n){this._buttonCollection=n,this._applyContainerAppButtonConfig(r&&r.containerAppOptions),this._applyContainerUIPartConfig(r&&r.containerAppOptions),this._changeMode(e,t)}.bind(this))},_applyContainerAppButtonConfig:function(e){var r=((e||{}).configuration||{}).ui||null;if(r){["com.ibm.bi.dashboard.saveMenu"].forEach(function(e){this._buttonCollection.push({id:e})}.bind(this)),t.each(this._buttonCollection,function(e){t.extend(e,{modes:{authoring:{visible:this._getButtonVisibility(r,e,"authoring",!0)},consume:{visible:this._getButtonVisibility(r,e,"consume",!0)},eventGroups:{visible:this._getButtonVisibility(r,e,"eventGroups",!0)},widgetMaximized:{visible:this._getButtonVisibility(r,e,"widgetMaximized",!1)},translation:{visible:this._getButtonVisibility(r,e,"translation",!0)}}})}.bind(this))}},_applyContainerUIPartConfig:function(e){var r=((e||{}).configuration||{}).ui||null;r&&i.forEach(function(e){t.extend(e,{modes:{authoring:{visible:this._getUISectionVisibility(r,e.id,"authoring",!0)},consume:{visible:this._getUISectionVisibility(r,e.id,"consume","navbar"!==e.id)},eventGroups:{visible:this._getUISectionVisibility(r,e.id,"eventGroups",!0)},translation:{visible:this._getUISectionVisibility(r,e.id,"translation",!0)}}})}.bind(this))},_getUISectionVisibility:function(e,t,r,n){if(!e)return{};var i=((e.modes||{})[r]||{})[t];return void 0!==i?i:void 0!==e[t]?e[t]:n},_getButtonVisibility:function(e,t,r,i){var o=this._getButtonVisibilityFromOptions(e,t.id,r);if(null!==o)return o;if(null!==(o=this._getButtonVisibilityFromOptions(n,t.id,r)))return o;var a=!0!==i&&void 0;return((t.modes||{})[r]||{}).visible||a},_getButtonVisibilityFromOptions:function(e,t,r){if(!e)return{};var n=(((e.modes||{})[r]||{}).buttons||{})[t];if(void 0!==n)return n;var i=(e.buttons||{})[t];return void 0!==i?i:null},_handleUIPartModeChange:function(e,t){i.forEach((function(r){r.modes&&r.modes[t]&&e.appController.currentAppView.$("."+r.id).css("display",r.modes[t].visible?"":"none")}))},_changeMode:function(e,t){this._buttonCollection?(e.appController.currentAppView.$(".navbar").hasClass("narrow")||e.appController.currentAppView.$(".navbar").addClass("narrow"),this._handleUIPartModeChange(e,t),this._buttonCollection.forEach(function(r){var n=e.appController.findPlugin(r.id);if(n)if(this._isDevMode(e)||!0!==r.development)if(this._isHideForConsumerMode(e,r.id))this._hidePlugin(n);else if(this._isDisabledForConsumerMode(e,r.id))this._disablePlugin(n);else{var i=r.modes?r.modes[t]:null;if(i){var o=!0!==n.hideForever&&i.visible;this._handleVisibleProperty(o,n),this._handleDisabledProperty(i.disabled,n),this._handlePressedProperty(i.pressed,n)}}else this._hidePlugin(n)}.bind(this))):console.log("Could not fix the contributed button collection.")},_isHideForConsumerMode:function(e,t){var n=e.appController.getCurrentContentView().getDashboardApi().getType().toUpperCase(),i=["com.ibm.bi.dashboard.saveMenu","com.ibm.bi.dashboard.editToggleButton"],o=[].concat(i,["com.ibm.bi.assistant.conversation","com.ibm.ca.collaboration.share"]);return e.isEmbedded()&&"EXPLORE"!==n?-1!=o.indexOf(t):-1!==i.indexOf(t)&&"EXPLORE"!==n&&!r.hasCapability(e,"canAuthorDashboard")},_isDisabledForConsumerMode:function(e,t){return-1!==["com.ibm.bi.dashboard.editToggleButton"].indexOf(t)&&(r.hasCapability(e,"canAuthorDashboard")&&!e.appController.getCurrentContentView().canAuthor()&&!e.appController.getCurrentContentView().isNew())},_isDevMode:function(e){return!!e.isDevInstall&&e.isDevInstall()},_handleVisibleProperty:function(e,t){!0===e?this._showPlugin(t):!1===e&&this._hidePlugin(t)},_handleDisabledProperty:function(e,t){!0===e?this._disablePlugin(t):!1===e&&t.enable()},_handlePressedProperty:function(e,t){!0===e?t.setPressed():!1===e&&t.setUnpressed()},_disablePlugin:function(e){e&&(this._actionControllerOnHide(e),e.disable())},_hidePlugin:function(e){e&&(this._actionControllerOnHide(e),e.hide())},_showPlugin:function(e){e&&(e.enable(),e.show())},_actionControllerOnHide:function(e){e&&e.actionController&&e.actionController.onHide&&e.actionController.onHide()},_getButtonsCollection:function(e){return e.appController.currentAppView.getContent().options.collections.buttons.id}}))})),define("dashboard-core/js/app/util/CapabilityUtils",[],(function(){return{checkAuthoringCapability:function(e,t,r){var n=e.getFeature("Capabilities");return n?n.checkAuthoringCapability({spec:t}).then((function(t){return t||e.showToast(r,{type:"error",preventDuplicates:!0}),t})):Promise.resolve(!0)},hasCapabilityToSaveDashboard:function(e){var t=e.glassContext.appController.currentAppView.currentContentView;if(t.isAuthoringMode)return Promise.resolve(!0);var r=t.services.getSvcSync(".StringResources");return this.checkAuthoringCapability(t.getDashboardApi(),t.boardSpec,r.get("noCapabilityForSave")).catch((function(t){return e.glassContext.getCoreSvc(".Logger").error("Fail to check source capability in Save",t),!1}))},hasGlobalAuthoringCapability:function(e){var t=e.dashboardApi,r=t.getFeature("Capabilities"),n=t.getFeature("UserProfile");return!r||n.hasCapability(r.getCurrentAuthoringCapability())},extractSourcesFromSpec:function(e){var t=e.data&&e.data.dataViews;if(!t||!t.length)throw new Error("Invalid live widget spec");var r=[];return t.forEach((function(e){e.model&&r.push({assetId:e.model.assetId,type:e.model.type})})),r}}})),define("dashboard-core/js/app/ui/dialogs/internal/EditableComponent",["../../../nls/StringResources","react-dom","react","@ba/ba-ui-carbon-toolkit","prop-types"],(function(e,t,r,n,i){"use strict";var o=n.Dialog,a=function(t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,t.call(this,e));return r.dialogProps={clickaway:!1,size:"large",className:"dashboardEditableDialog",startingFocusIndex:0},r}return _inherits(n,t),n.prototype.render=function(){return r.createElement(o,_extends({},this.dialogProps,{onClose:this._onClose.bind(this)}),r.createElement(o.Header,{title:this.props.title},this.props.title),r.createElement(o.Body,null,r.createElement("textarea",null,this.props.textContent)),r.createElement(o.Footer,null,r.createElement(o.Button,{primary:!this.props.onUpdate,id:"copy",label:e.get("copyButton"),title:e.get("copyButton"),onClick:this._onCopy.bind(this)}),this.props.onUpdate&&r.createElement(o.Button,{primary:!0,id:"update",label:e.get("dlg_update"),title:e.get("dlg_update"),onClick:this._onUpdate.bind(this)}),r.createElement(o.Button,{label:e.get("close"),title:e.get("close"),id:"close",onClick:this._onClose.bind(this)})))},n.prototype._onCopy=function(e){e&&e.stopPropagation(),document.execCommand("copy")},n.prototype._onUpdate=function(e){e&&e.stopPropagation(),this.props.onUpdate&&this.props.onUpdate()},n.prototype._onClose=function(e){e&&e.stopPropagation(),this.props.onClose&&this.props.onClose()},n}(r.Component);return a.propTypes={title:i.string,textContent:i.string,onUpdate:i.func,onClose:i.func},a})),define("dashboard-core/js/app/ui/dialogs/EditableDialog",["jquery","../../../lib/@waca/core-client/js/core-client/ui/core/View","./internal/EditableComponent","react-dom","react"],(function(e,t,r,n,i){"use strict";return function(t){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(o,t),o.prototype.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.prototype.init.call(this,e),this.title=e.title,this.textContent=e.textContent,this.updateCallback=e.updateCallback},o.prototype.render=function(){this.editableComponent=n.render(i.createElement(r,{title:this.title,textContent:this.textContent,onClose:this.close.bind(this),onUpdate:this.updateCallback&&this._onUpdate.bind(this)}),this.el),this.textarea=e(".dashboardEditableDialog").find("textarea")[0],this.textarea.select()},o.prototype._onUpdate=function(){this.updateCallback&&this.updateCallback(this.textarea.value),this.close()},o.prototype.close=function(){this.el&&n.unmountComponentAtNode(this.el),this.$el&&this.$el.remove(),this.$el=null},o}(t)})),define("text!dashboard-core/js/app/ui/templates/Splitter.html",[],(function(){return'<div class="splitterBar">\n\t<div class="handleWrapper">\n\t\t{{~ it.handles :value:index}}\n\t\t<div class="handle {{! value.handleClass}}" data-icon="{{! value.handleIcon}}" tabindex="{{=value.defaultTabIndex}}" ></div>\n\t\t{{~}}\n\t</div>\n\t<div class="splitterSizeHandle" tabindex="0">\n\t\t<svg class="svgIcon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-handle"></use></svg>\n\t</div>\n</div>\n'})),define("dashboard-core/js/app/ui/Splitter",["../../lib/@waca/core-client/js/core-client/ui/core/View","../../lib/@waca/core-client/js/core-client/utils/Utils","../../lib/@waca/core-client/js/core-client/utils/BrowserUtils","underscore","jquery","hammerjs","text!./templates/Splitter.html"],(function(e,t,r,n,i,o,a){var s=function(e){function s(){_classCallCheck(this,s);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return _possibleConstructorReturn(this,e.call.apply(e,[this].concat(r)))}return _inherits(s,e),s.prototype.init=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.templateString=a,s.$el&&s.$el.length>0&&(this.el=s.$el[0]),e.prototype.init.call(this,s),this.content=s.content,this.handlers=s.handlers||{getParentSize:function(){return{height:1/0,width:1/0}}},this.items=(s.items||[]).map((function(e){return void 0===e.defaultTabIndex&&(e.defaultTabIndex=e.hidden?"-1":"0"),e})),this.panel=s.panel,this.currentIndex=-1,this.isDragStartCalled=!1,r.isIPad()&&document.addEventListener("touchmove",this.preventPageScrollDrag.bind(this),{passive:!1}),this.overrideGlobalMaxSize=this.getOverrideGlobalMaxSize(this.items),this._setupEvent(),this.$el.children().addClass("splitterPane");var l=this.dotTemplate({handles:this.items});this.$el.children(this.panel).before(l),this.$el.find(".handle").each((function(){var e=this.dataset.icon||"";t.setIcon(i(this),e)})),this.$splitterBar=this.$el.find(".splitterBar");var d=n.filter(this.items,(function(e){return!e.hidden}));0===d.length&&this.$splitterBar.find(".splitterSizeHandle").hide(),this._shouldHideHandle()&&this.$splitterBar.addClass("showSplitterSizeHandle"),n.each(this.items,(function(e){(e.hidden||this._shouldHideHandle())&&this.$splitterBar.find("."+e.handleClass).hide()}),this),this.$handles=this.$splitterBar.find(".handle"),this.$handles.each(function(e,t){i(t).attr("title",this.items[e].handleOpenTitle),i(t).attr("aria-label",this.items[e].handleOpenTitle)}.bind(this)),this.renderedMap={},i(window).off("resize.splitterResize"+this.viewId).on("resize.splitterResize"+this.viewId,this.onResize.bind(this)),i.each(this.$splitterBar.find(".handle, .splitterSizeHandle"),function(e,t){o(t).on("dragstart",this.onHandleDragStart.bind(this)).on("dragup dragdown",this.onHandleDragDownUp.bind(this)).on("dragend",this.onHandleDragEnd.bind(this)).on("tap",this.onHandleClick.bind(this)),i(t).on("keydown",this.onHandleKeyDown.bind(this))}.bind(this))},s.prototype.preventPageScrollDrag=function(e){this.isDragStartCalled&&e.preventDefault()},s.prototype._setupEvent=function(){(this.items||[]).forEach((function(e,t){var r=this,n=this.toggleItem.bind(this,t,!0);e.view.on("openPane",(function(){n()})),e.view.on("closePane",(function(){})),e.view.on("hidePane",(function(){})),e.view.on("showPane",(function(){})),e.view.on("disableHandle",(function(){r._toggleItemHandle(t,!0)})),e.view.on("enableHandle",(function(){r._toggleItemHandle(t,!1)})),e.view.on("disableAndSwitchHandle",(function(){r._preservedIndex=null,e.view.trigger("disableHandle");var n=r.$handles.eq(t);if(n.hasClass("selected")){n.removeClass("selected");var i=r._getNextAvailableHandle(t);r.toggleItem(i,!0),r._preservedIndex=t}})),e.view.on("restoreHandle",(function(){e.view.trigger("enableHandle"),r._preservedIndex===t&&(r.toggleItem(r._preservedIndex,!0),r._preservedIndex=null)}))}),this)},s.prototype._shouldHideHandle=function(){return this.items&&1===this.items.length},s.prototype._toggleItemHandle=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$handles.eq(e).toggleClass("disabled blockOnExpandView",t)},s.prototype._getNextAvailableHandle=function(e){return e<0?e=0:e>=this.items.length&&(e=this.items.length-1),e<this.items.length-1?e+1:e-1},s.prototype.getOverrideGlobalMaxSize=function(e){var t=1/0;return(e||[]).forEach((function(e){e.overrideGlobalMaxSize&&(t!==1/0&&console.warn("Multiple modules are trying to override the global max splitter size."),t=e.overrideGlobalMaxSize)}),this),t},s.prototype.remove=function(){i(window).off("resize.splitterResize"+this.viewId),r.isIPad()&&document.removeEventListener("touchmove",this.preventPageScrollDrag.bind(this),{passive:!1});var e=this.$splitterBar.find(".handle, .splitterSizeHandle");if(e instanceof i&&e.length>0)for(var t=0;t<e.length;t++){i(e[t]).off("dragstart dragup dragdown dragend tap keydown")}this.$el.children().removeClass("splitterPane"),i(".splitterBar",this.$el).remove(),this.content=null,this.handlers=null,this.items=null,this.panel=null,this.$splitterBar=null,this.$el=null,this.off&&this.off()},s.prototype.toggleItemWithIndexAndBroadcast=function(e,t,r){var n=this;return this.toggleItem(e,t,r).then((function(){null!=n.currentIndex&&n.items[n.currentIndex].view.trigger("splitterPanel:visibleChange",{isExpanded:n._isSplitterAtItsMaximumHeight()})}))},s.prototype.onHandleClick=function(e){var t=void 0;if(!this._isAnimating){var r=0;this._shouldHideHandle()||(r=this.getHandleIndexFromNode(i(e.currentTarget))),t=this.toggleItemWithIndexAndBroadcast(r)}return t||Promise.resolve()},s.prototype.onHandleKeyDown=function(e){var t,r={13:this.onHandleClick.bind(this,e),40:this._handleUpDownKey.bind(this,e,1),38:this._handleUpDownKey.bind(this,e,-1)};return e.keyCode in r&&(t=r[e.keyCode].call(this)),t||Promise.resolve()},s.prototype._handleUpDownKey=function(e,t){e.stopPropagation();var r=this._getSizePropName();this.prevSize=this.$splitterBar.prev()[r](),this.nextSize=this.panel[r](),this._adjustSize(t,10,this.currentIndex)},s.prototype.isOpen=function(){return!(!this.$splitterBar||!this.$splitterBar.hasClass)&&this.$splitterBar.hasClass("open")},s.prototype.toggleItem=function(e,t,r){var n=this;if(e<0||e>=this.items.length)return Promise.resolve(!1);var o=this.isOpen();void 0===t&&(t=e!==this.currentIndex||!o);var a=this._getHeight(e,t,o,r);if(a<=0&&this.items[e]&&this.items[e].view.trigger("splitterPanel:hide",r),this.$handles.each(function(e,t){i(t).attr("title",this.items[e]&&this.items[e].handleOpenTitle),i(t).attr("aria-label",this.items[e]&&this.items[e].handleOpenTitle)}.bind(this)),"100%"===a||a>0){var s=this.$handles.eq(e);s.attr("title",this.items[e].handleCloseTitle),s.attr("aria-label",this.items[e].handleCloseTitle)}else this.$handles.eq(e).removeClass("selected"),this.currentIndex=null,this._preservedIndex=null;return this._isAnimating=!0,this.$splitterBar.addClass("animating"),this.setPaneSize(a).finally((function(){return n.$splitterBar.removeClass("animating"),n._isAnimating=!1,a}))},s.prototype._getHeight=function(e,t,r,n){var i;return t&&null!==e?((i=r&&this.items[this.currentIndex]?Math.max(this.items[this.currentIndex].size,this.items[e].view.minimumSize||-8):this.items[e].size||this.items[e].initialSize)||(i="100%"),i=n&&n.requestedHeight||i,this.overrideGlobalMaxSize===1/0||this.items[e].size||(i=this.overrideGlobalMaxSize),this.selectHandle(e,n)):i=0,i},s.prototype.setPaneSize=function(e){var t=this,r=this._getSizePropName();if("100%"!==e&&this.isRestrictToParentSize){var n=this.handlers.getParentSize();e=Math.round(Math.min(e,n[r]))}e="100%"===e?this._calculateSizeLimit():e;var o=parseInt(e,10)>0,a={};return a[r]=e,new Promise((function(r,n){try{t.panel.animate(a,300,(function(){try{o?(t.$splitterBar.toggleClass("open",!0),t.items[t.currentIndex]&&(t.items[t.currentIndex].size=e)):t.$splitterBar.toggleClass("open",!1),i(window).resize()}catch(e){console.error(e)}r(e)}))}catch(e){n(e)}}))},s.prototype.selectHandle=function(e,t){if(this.currentIndex!==e){this.loadPanel(e);var r=this.$splitterBar.find(".handle"),n=r.eq(e);n.hasClass("selected")||(r.removeClass("selected"),n.addClass("selected"),this._preservedIndex=null,this.items[e]&&this.items[e].view&&this.items[e].view.trigger("splitterPanel:show",t))}},s.prototype.loadPanel=function(e){this.currentIndex=e;var t=this.items[e].view;this.renderedMap[e]?(t.$el.css("visibility","visible"),t.$el.css("z-index","1"),this.$splitterBar.hasClass("open")?(t.$el.css("opacity",0),t.$el.animate({opacity:1},300)):(this.panel.children().not(t.$el).css("visibility","hidden"),t.$el.css("opacity",1))):(t.render(),t.$el.appendTo(this.panel),this.renderedMap[e]=!0);var r=this.panel.children().not(t.$el);r.animate({opacity:0},300,(function(){r.css("visibility","hidden"),r.css("z-index","-1")}))},s.prototype.getHandleIndexFromNode=function(e){return this.$splitterBar.find(".handle").index(e)},s.prototype.onHandleDragStart=function(e){this.isDragStartCalled=!0,this.$el.addClass("resizing");var t=this._getSizePropName();this.prevSize=this.$splitterBar.prev()[t](),this.nextSize=this.panel[t](),e.gesture&&e.gesture.preventDefault();var r=this.getHandleIndexFromNode(i(e.currentTarget));this._shouldHideHandle()&&(r=0),(r<0||r>=this.items.length)&&(r=this.currentIndex),this.selectHandle(r),this.$splitterBar.hasClass("open")||this.$splitterBar.toggleClass("open",!0)},s.prototype.onHandleDragDownUp=function(e){var t="up"===e.gesture.direction||"left"===e.gesture.direction?-1:1,r=this.getHandleIndexFromNode(i(e.currentTarget));this._shouldHideHandle()&&(r=0),r<0||r>=this.items.length?this._adjustSize(t,e.gesture.distance,this.currentIndex):this._adjustSize(t,e.gesture.distance,r),this.lastDragEvent=e},s.prototype._resizeWindow=function(){i(window).resize()},s.prototype._adjustSize=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.isOpen()||1!==e&&-1!==e){var n=this._getSizePropName(),i=this.nextSize-e*t;i<=this._calculateSizeLimit()&&i>0?(this.selectHandle(r),this.panel.css(n,Math.round(i))):i<=0&&!this._isAnimating&&this.close(),this.panel.css(n),this._resizeWindow()}},s.prototype._calculateSizeLimit=function(){return this.handlers.getParentSize().height},s.prototype.onResize=function(){if(this.isOpen()){var e=this._getSizePropName(),t=this._calculateSizeLimit();this.panel[e]()>t&&this.panel.css(e,Math.round(t))}},s.prototype._isSplitterAtItsMaximumHeight=function(){return this._calculateSizeLimit()===this.items[this.currentIndex].size},s.prototype.onHandleDragEnd=function(){this.$el.removeClass("resizing");var e=this._getSizePropName();if(this.lastDragEvent&&!this._isAnimating){var t=this.lastDragEvent.gesture,r="down"===t.direction||"right"===t.direction,n=t.velocityY;this.enableSwipe&&n>1.5?this._handleSwipe(r):(this._handleMinSize(e,r),null!==this.currentIndex&&(this.items[this.currentIndex].size=this.panel.height(),this.items[this.currentIndex].size>0&&this.items[this.currentIndex].view.trigger("splitterPanel:visibleChange",{isExpanded:this._isSplitterAtItsMaximumHeight()})))}this.isDragStartCalled=!1},s.prototype.expandCollapse=function(){return this.isOpen()&&this._isSplitterAtItsMaximumHeight()?this.open(this.items[this.currentIndex].initialSize).then((function(){return!1})):this.open("100%").then((function(){return!0}))},s.prototype._handleSwipe=function(e){this.setPaneSize(e?0:"100%")},s.prototype._handleMinSize=function(e,t){var r="function"==typeof this.minSize?this.minSize():this.minSize;if(this.$splitterBar.prev()[e]()<r){var n=this.handlers.getParentSize();this.setPaneSize(t?Math.round(n[e]-r):"100%")}else if(this.panel[e]()<r)this.setPaneSize(t?0:r);else{var i=this.panel.css(e);this.$splitterBar.toggleClass("open",parseInt(i,10)>1)}},s.prototype._getSizePropName=function(){return"height"},s.prototype.open=function(e){return this.toggleItem(this.currentIndex,!0,{requestedHeight:e})},s.prototype.close=function(){var e=this.items[this.currentIndex];return e&&(e.size=0),this.toggleItem(this.currentIndex,!1)},s.prototype.hideHandle=function(e){var t=this.$splitterBar.find("."+e),r=this.$splitterBar.find(".splitterSizeHandle");this._shouldHideHandle()?r.attr("tabindex","-1"):(t.hide(),t.attr("tabindex","-1")),(n.findWhere(this.items,{handleClass:e})||{}).hidden=!0,0===n.filter(this.items,(function(e){return!e.hidden})).length&&r.hide()},s.prototype.hide=function(){var e=this;return new Promise((function(t,r){try{e.$splitterBar.fadeOut(250,(function(){t()}))}catch(e){r(e)}}))},s.prototype.showHandle=function(e){var t=this.$splitterBar.find(".splitterSizeHandle");t.show();var r=this.$splitterBar.find("."+e);this._shouldHideHandle()?t.attr("tabindex","0"):(r.show(),r.attr("tabindex","0")),(n.findWhere(this.items,{handleClass:e})||{}).hidden=!1},s.prototype.show=function(){var e=this;return new Promise((function(t,r){try{e.$splitterBar.fadeIn(250,(function(){t()}))}catch(e){r(e)}}))},s}(e);return i.fn.splitter=function(e){return this.destroySplitter(),this.data("splitter",new s(n.extend({$el:this},e))),this},i.fn.destroySplitter=function(){var e=this.data("splitter");return e&&(e.remove(),this.data("splitter",null)),this},s})),define("dashboard-core/js/dashboard/glass/SplitPaneView",["../../lib/@waca/core-client/js/core-client/ui/core/View","jquery","../../app/ui/Splitter"],(function(e,t){return function(e){function r(){_classCallCheck(this,r);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _possibleConstructorReturn(this,e.call.apply(e,[this].concat(n)))}return _inherits(r,e),r.prototype.init=function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=e.prototype.init).call.apply(t,[this].concat(n)),this.$bottom=null,this.$top=null,this.$content=null,this.splitter=null;var o=n[0];this._splitterItems=o.splitterItems||[],this.handlers=o.handlers,this.services=o.services,this.dashboard=o.dashboardApi,this.glassContext=o.services.biGlass.glassContext},r.prototype.render=function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=e.prototype.render).call.apply(t,[this].concat(n));var o={};return this.glassContext.appController.currentAppView.content&&(o=this.glassContext.appController.currentAppView.content),this.splitter=this.$el.splitter({items:this._splitterItems,panel:this.getBottomBarNode(),content:o,handlers:{getParentSize:this.handlers.getParentSize}}).data("splitter"),Promise.resolve()},r.prototype.getBottomBarNode=function(){if(null===this.$bottom){var e=t(".bottomPane",this.el);0===e.length&&(e=t('<div class="bottomPane"></div>').appendTo(this.el)),this.$bottom=e}return this.$bottom},r.prototype.getContentNode=function(){if(null===this.$content){var e=this.$(".pageViewContent",this.el);0===e.length&&(e=t('<div class="pageViewContent"></div>').prependTo(this.el)),this.$content=e}return this.$content},r.prototype.close=function(){this.splitter.close()},r.prototype.open=function(){this.splitter.open()},r.prototype.getSplitter=function(){return this.splitter},r.prototype.showHandle=function(e){this.splitter.showHandle(e)},r.prototype.hideHandle=function(e){this.splitter.hideHandle(e)},r.prototype.onContainerReady=function(){var e=[];return this._splitterItems.forEach((function(t){t.view.onContainerReady&&"function"==typeof t.view.onContainerReady&&e.push(t.view.onContainerReady())}),this),Promise.all(e)},r.prototype.slideSplitterToMinSize=function(){this.splitter.isOpen()&&(this._splitterWasOpen=!0,this.splitter.setPaneSize(120))},r.prototype.remove=function(){var t;this.$el.destroySplitter(),this.splitter=null,this.$bottom=null,this.$top=null,this.$content=null,this._splitterItems=null,this.handlers=null,this.services=null,this.glassContext=null;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=e.prototype.remove).call.apply(t,[this].concat(n))},r}(e)})),define("dashboard-core/js/dashboard/services/CanvasExtensions",["../../lib/@waca/core-client/js/core-client/utils/ClassFactory","../glass/SplitPaneView"],(function(e,t){var r={_ClassFactory:e,_SplitPaneView:t,init:function(e){this.dashboardApi=e.dashboardApi,this.topNode=e.topNode,this.bottomNode=e.bottomNode,this.canvasExtensions=e.canvasExtensions||[],this.services=e.services,this.eventRouter=e.eventRouter,this.appSettings=e.appSettings,this.handlers=e.handlers,this.consumeHideHandles={},this.views=new Map([])},destroy:function(){this.views.forEach((function(e){"function"==typeof e.remove?e.remove():console.warn("view.remove should be implemented")})),this.views=new Map([]),this.splitPaneView&&this.splitPaneView.remove()},render:function(){var e=Promise.resolve();if(this.canvasExtensions.length>0){this.canvasExtensions.sort((function(e,t){return e.order-t.order}));var t=[];this.canvasExtensions.forEach(function(r){e=e.then(this._ClassFactory.loadModule.bind(this._ClassFactory,r.class)).then(function(e){var n=this,i={appSettings:this.appSettings,services:this.services,eventRouter:this.eventRouter,dashboardApi:this.dashboardApi};r.extraOptions&&(i.extraOptions=r.extraOptions);var o=new e(i);return("function"==typeof o.initialize?o.initialize():Promise.resolve()).then((function(){if(!!o.getApi)return n.dashboardApi.getCanvas().registerFeature(r.name,o.getApi())})).then((function(){var e;return"top"===r.position?n.topNode.append(o.$el):"bottom"===r.position?n.bottomNode.append(o.$el):"splitter"===r.position&&(e=o.getSplitterOpts().then(function(e){return this.consumeHideHandles[e.handleClass]=o,e.hidden=!this.handlers.isAuthorMode()&&e.hideInConsume,t.push(e),e}.bind(n))),n.views.set(r.name,o),e||Promise.resolve()})).then((function(){var e;return"splitter"!==r.position&&(e=o.render()),e||Promise.resolve()}))}.bind(this))}.bind(this)),e=e.then(function(){if(t.length>0)return this._createSplitPaneView(t)}.bind(this))}return e},_createSplitPaneView:function(e){return this.splitPaneView?Promise.resolve():(this.splitPaneView=new this._SplitPaneView({splitterItems:e,handlers:{getParentSize:this.handlers.getParentSize},dashboardApi:this.dashboardApi,services:this.services}),this._setupHideHandles(),this.splitPaneView.render().then(function(){return this.bottomNode.prepend(this.splitPaneView.$el.children()),this.splitPaneView.onContainerReady()}.bind(this)))},_setupHideHandles:function(){this.eventRouter.on("mode:change",(function(e){switch(this.handlers.getSplitterState()){case"close":this.splitPaneView.close();break;case"open":this.splitPaneView.open()}Object.keys(this.consumeHideHandles).forEach(function(t){var r=this.consumeHideHandles[t];e.authoring||r.shouldShowHandle&&r.shouldShowHandle()?this.splitPaneView.showHandle(t):this.splitPaneView.hideHandle(t)}.bind(this))}),this)},setState:function(e){e.bottomNode.isOpen?this.splitPaneView.open():this.splitPaneView.close()},getState:function(){return{bottomNode:{isOpen:this.bottomNode[0].clientHeight>0}}},getExtension:function(e){return this.views.get(e)}};function n(e){this.init(e)}return Object.keys(r).forEach((function(e){n.prototype[e]=r[e]})),n})),define("dashboard-core/js/features/ProfileFeatureTracker",["../lib/@waca/core-client/js/core-client/utils/PerfUtils"],(function(e){"use strict";return function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this._enable=!1,this._profile=["core"],e&&-1!==e.indexOf("authoring")&&-1===e.indexOf("consume")&&this._profile.push("consume");for(var r=0;r<e.length;r++){var n=e[r];"core"!==n&&this._profile.push(n)}this._onProfileChangeCb=null}return t.prototype.getAPI=function(){return{getCurrentProfileList:this.getCurrentProfile.bind(this),getLoadedFeatures:this._getLoadedFeatures.bind(this),onProfileChange:this._onProfileChange.bind(this)}},t.prototype._onProfileChange=function(e){this._onProfileChangeCb=e},t.prototype.setDashboardFeatureLoader=function(e){this.dashboardFeatureLoader=e},t.prototype.setRootContent=function(e){this.rootContent=e},t.prototype.enable=function(e){this._enable=e},t.prototype.isEnabled=function(){return this._enable},t.prototype.getCurrentProfile=function(){if(this._enable)return this._profile},t.prototype.updateCurrentProfile=function(t){var r=this;if(!this.isEnabled())return Promise.resolve(!0);e.createPerformanceMark({component:"dashboard",name:"feature profile update",state:"start"});return(this.dashboardFeatureLoader?this.dashboardFeatureLoader.updateCurrentProfile(t):Promise.resolve(!0)).then((function(){return r.rootContent?r.rootContent.updateCurrentProfile(t).then((function(t){return r.dashboardFeatureLoader&&(r._profile=r.dashboardFeatureLoader.getCurrentProfile()),r._onProfileChangeCb&&r._onProfileChangeCb(),r._onProfileChangeCb=null,e.createPerformanceMark({component:"dashboard",name:"feature profile update",state:"end"}),t})):(r._onProfileChangeCb&&r._onProfileChangeCb(),r._onProfileChangeCb=null,Promise.resolve(!0))}))},t.prototype._getLoadedFeatures=function(){return{dashboardFeatures:this.dashboardFeatureLoader&&this.dashboardFeatureLoader.getLoadedFeatureProfileInfo()||[],contentFeatures:this.rootContent&&this.rootContent.getLoadedFeatureProfileInfo()||[]}},t}()})),define("dashboard-core/js/dashboard/api/controllers/DashboardController",["../../../features/ProfileFeatureTracker","../../../lib/@waca/core-client/js/core-client/ui/core/Class","../../../lib/@waca/dashboard-common/dist/utils/ObjectHelper"],(function(e,t,r){var n=t.extend({init:function(e){n.inherited("init",this,arguments),this.view=e.view,this.glass=e.glass,this._settings=e.settings,this.eventRouter=e.eventRouter,this.services=e.services,this.widgetRegistry=e.widgetRegistry,this.FrozenWidgetRegistry=null;var t=this._settings.get("applicationSettings").options;this.collectionsConfig=t&&t.collections||{},this.config=t&&t.config||{},this._createProfileFeatureTracker(e.profiles)},_createProfileFeatureTracker:function(t){this.profileFeatureTracker=new e(t),this.profileFeatureTracker.enable(this._isProfileFeatureLoadingEnabled())},_isProfileFeatureLoadingEnabled:function(){var e=!1,t=this.glass.getCoreService(".FeatureChecker");return t&&t.checkValue&&(e=!t.checkValue("dashboard","profilefeatureloading","disabled")),e},updateCurrentProfile:function(e){return this.profileFeatureTracker.updateCurrentProfile(e)},getCurrentProfile:function(){return this.profileFeatureTracker.getCurrentProfile()},onPageReady:function(e){var t=this.featureLoader.getFeature("Canvas.internal"),r=t&&t.getContentInstance();if(r){this.profileFeatureTracker.setRootContent(r);var n=["consume"];return e&&n.push("authoring"),this.profileFeatureTracker.updateCurrentProfile({add:n})}return Promise.resolve(!0)},_changeProfile:function(e){return"authoring"===e?this.profileFeatureTracker.updateCurrentProfile({add:["authoring"]}):"consumption"===e?this.profileFeatureTracker.updateCurrentProfile({remove:["authoring"],add:["consume"]}):Promise.reject("unknown mode "+e)},getFeature:function(e){var t=void 0;if(this.featureLoader&&(t=this.featureLoader.getFeature(e)),!t)try{t=this.getDashboardCoreSvc(e)}catch(e){}return t},setDirty:function(e){this.view.boardController&&this.view.boardController.undoRedoController&&this.view.boardController.undoRedoController.setDirty(e),this.view.trigger("change:dirty",{value:e}),this.view.eventRouter.trigger("change:dirty",{value:e})},setServices:function(e){this.services=e},setFeatureLoader:function(e){this.featureLoader=e,this.profileFeatureTracker.setDashboardFeatureLoader(this.featureLoader),e.registerFeature("ProfileFeatureTracker",this.profileFeatureTracker,{profiles:["core"]})},getCurrentContentView:function(){return this.view},getCanvas:function(){return this.view.getDeprecatedCanvas()},getCanvasWhenReady:function(){return this.view.getDeprecatedCanvasWhenReady()},isDevInstall:function(){return this.glass.isDevInstall()},addContentToCanvas:function(e){this.view.boardController.addDataItemsOrAddWidget(e)},getApplicationName:function(){var e=this._settings.get("applicationName");return e&&e.toLowerCase?e.toLowerCase():e},getApplicationLabel:function(){return this.view.getApplicationLabel()},reloadFromJSONSpec:function(e,t){return this.view.reloadFromJSONSpec(e,t)},getCDNUrl:function(){return this.view.getCDNUrl()},getLayout:function(e){return this.view.boardController.layoutController.getView(e)},prepareGlassOptions:function(e){this.glass.prepareGlassOptions(e)},openGlassApplication:function(e,t){return this.glass.openApplication(e,t)},closeGlassApplication:function(e,t,r){return this.glass.closeApplication(e,t,r)},getCollectionConfig:function(e){return this.collectionsConfig[e]},getAppConfig:function(e){return this.config[e]},getDashboardSvc:function(e){return this.services.getSvc(e)},registerDashboardSvc:function(e,t){return this.services.register(e,t)},getDashboardCoreSvc:function(e){return this.services.getSvcSync(e)},getGlassSvc:function(e){return this.glass.getService(e)},getGlassCoreSvc:function(e){return this.glass.getCoreService(e)},showErrorMessage:function(e,t){return this.glass.showErrorMessage(e,t)},showMessage:function(e,t,r,n,i,o,a,s){return this.glass.showMessage(e,t,r,n,i,o,a,s)},showToast:function(e,t){return this.glass.showToast(e,t)},showSlideOut:function(e){return this.glass.showSlideOut(e)},showContextMenu:function(e){return this.glass.showContextMenu(e)},findGlassPlugin:function(e){return this.glass.getPlugin(e)},findGlassCollection:function(e){return Promise.resolve(this._settings.get(e))},openAppView:function(e,t){return this.glass.openApplication(e,t)},getSelectedWidgets:function(){return this.view.getSelectedWidgets()},setPermissions:function(e){this.view.setPermissions(e)},canAuthor:function(){return this.view.canAuthor()},destroy:function(){this.services&&this.services.destroy(),this.featureLoader&&this.featureLoader.destroy(),this.view=null,this.eventRouter=null,this.services=null,this.collectionsConfig=null,this.config=null,this.widgetRegistry=null,this.services=null,this.featureLoader=null},eventMap:{dirty:"change:dirty"},on:function(e,t,r){if(e){var n=this.eventMap[e]||e;return this.eventRouter.on(n,t,r)}},off:function(e,t,r){if(e){var n=this.eventMap[e]||e;this.eventRouter.off(n,t,r)}},triggerDashboardEvent:function(e,t){if(e){var r=this.eventMap[e]||e;this.eventRouter.trigger(r,t)}},relink:function(){},_modeIsDisAllowedInMobile:function(e){var t=this.getFeature("Renderer.internal");return t&&t.isMobile()&&"consumption"!==e},_togglePropertiesIfNeeded:function(e){!e.isEventGroupViewMode&&e.isAuthoringMode||this.toggleProperties()},_shouldToggleEventGroupMode:function(e,t){return"eventGroups"===e&&!t.isEventGroupViewMode||"eventGroups"!==e&&t.isEventGroupViewMode},_shouldToggleMode:function(e,t){return"authoring"===e&&!t.isAuthoringMode||"consumption"===e&&t.isAuthoringMode},setMode:function(e){var t=this,r=void 0,n=this.view;if(n){if(this._modeIsDisAllowedInMobile(e))return Promise.reject(new Error(e+" mode is not allowed in a mobile layout."));this._shouldToggleEventGroupMode(e,n)?r=n.toggleEventGroupMode(e):this._shouldToggleMode(e,n)&&(r=this._changeProfile(e).then((function(){return n.toggleMode()}))),(r=r||Promise.resolve(!0)).then((function(e){return t._togglePropertiesIfNeeded(n),e}))}return r||Promise.reject(new Error("Cannot set mode without a content view"))},getMode:function(){var e=this.view;if(e)return e.isEventGroupViewMode?"eventGroups":e.isAuthoringMode?"authoring":"consumption"},getSpec:function(){var e=this.view;if(e&&e.getContent)return e.getContent().boardSpec},undo:function(){var e=this.view;e&&e.doUndo()},redo:function(){var e=this.view;e&&e.doRedo()},toggleProperties:function(){var e=this.view;if(e){var t=this.getFeature("InAppSlideoutState");if(!t)return;if(e.isEventGroupViewMode||!e.isAuthoringMode)return void t.close();var r=this.getFeature("DashboardState");t.isOpen()?"PropertiesPane"===r.getUiState().sidePanel.current?t.close():r.setSidePanelCurrentView("PropertiesPane"):(r.setSidePanelCurrentView("PropertiesPane"),t.open())}},getDashboardInfo:function(){return this.view.getBoardInfo()},deselectAllWidgets:function(){var e=this.view.boardController,t=(e=void 0===e?{}:e).layoutController;return t?t.getInteractionController().then((function(e){e.selectionHandler.deselectAll()})):Promise.resolve()},getToolbarActions:function(){return this.view.boardController&&this.view.boardController.layoutController&&this.view.boardController.layoutController.interactionController&&this.view.boardController.layoutController.interactionController.toolbarItems},getWidgetRegistry:function(){return this.FrozenWidgetRegistry||(this.FrozenWidgetRegistry=r.deepFreezeObject(JSON.parse(JSON.stringify(this.widgetRegistry)))),this.FrozenWidgetRegistry},copy:function(){var e=this.view;e&&e.doCopy()},paste:function(){var e=this.view;return e?e.doPaste():Promise.reject()}});return n})),define("dashboard-core/js/features/dashboard/internalAPI/api/InternalAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.reloadFromJSONSpec=function(){},e.prototype.getWidgetRegistry=function(){},e.prototype.getDashboardInfo=function(){},e.prototype.prepareGlassOptions=function(){},e.prototype.getCDNUrl=function(){},e.prototype.isDevInstall=function(){},e.prototype.registerDashboardSvc=function(){},e.prototype.setPermissions=function(){},e.prototype.updateCurrentProfile=function(){},e.prototype.getCurrentProfile=function(){},e.prototype.onPageReady=function(){},e.prototype.destroy=function(){},e}()})),define("dashboard-core/js/features/dashboard/internalAPI/api/impl/Internal",[],(function(){return function(){function e(t){_classCallCheck(this,e),this.view=t.view}return e.prototype.destroy=function(){this.view=null},e.prototype.getBoardModel=function(){return this.view.boardModel},e}()})),define("dashboard-core/js/features/dashboard/internalAPI/api/deprecated/InternalAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getBoardModel=function(){},e}()})),define("dashboard-core/js/api/impl/Dashboard",["../../lib/@waca/dashboard-common/dist/core/APIFactory","../../dashboard/api/controllers/DashboardController","../DashboardAPI","../../features/dashboard/internalAPI/api/InternalAPI","../../features/dashboard/internalAPI/api/impl/Internal","../../features/dashboard/internalAPI/api/deprecated/InternalAPI"],(function(e,t,r,n,i,o){var a=function(t){function a(e){_classCallCheck(this,a);var r=_possibleConstructorReturn(this,t.call(this,e));return r.getName=r.getApplicationLabel.bind(r),r.getService=r.getGlassCoreSvc.bind(r),r.getServiceWhenReady=r.getGlassSvc.bind(r),r.getPluginExtension=r.findGlassPlugin.bind(r),r.getCollectionExtension=r.findGlassCollection.bind(r),r.getConfiguration=r.getAppConfig.bind(r),r.openApplication=r.openGlassApplication.bind(r),r.closeApplication=r.closeGlassApplication.bind(r),r.internalImpl=new i(e),r}return _inherits(a,t),a.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalImpl.destroy()},a.prototype.getAPI=function(){return e.createAPI(this,[r,n])},a.prototype.getInternalAPI=function(){return e.createAPIFromSpec([{implementation:this,interface:n},{implementation:this.internalImpl,interface:o}])},a.prototype.getType=function(){return this.getApplicationName()},a.prototype.getCanvas=function(){var e=void 0;return this.view&&(e=this.view.getDeprecatedCanvas()),e||(e=this.featureLoader.getFeature("Canvas")),e},a.prototype.getCanvasWhenReady=function(){return this.view.getDeprecatedCanvasWhenReady()},a.prototype.getDataSourceList=function(){return Promise.resolve(this.getFeature("DataSources").getDataSourceList())},a.prototype.getSources=function(){return this.getFeature("DataSources").getSourcesInfo()},a.prototype.addSources=function(e,t){return this.getFeature("DataSources").addDataSources(e,t)},a.prototype.getActiveDataSourceId=function(){return this.getFeature("DataSources").getActiveDataSourceId()},a.prototype.setActiveDataSourceId=function(e){this.getFeature("DataSources").setActiveDataSourceId(e)},a}(t);return a.create=function(e){return new a(e)},a})),define("dashboard-core/js/extension/Extensions",["../lib/@waca/core-client/js/core-client/utils/ClassFactory","underscore"],(function(e,t){return function(){function r(e){_classCallCheck(this,r),this.dashboardApi=e,this.logger=this.dashboardApi.getGlassCoreSvc(".Logger"),this.consumeViews={absolute:"dashboard-core/js/dashboard/layout/views/LayoutBaseView",genericPage:"dashboard-core/js/dashboard/layout/views/GenericPage",tab:"dashboard-core/js/dashboard/layout/views/Tab",hub:"dashboard-core/js/dashboard/layout/views/Tab",longscroll:"dashboard-core/js/dashboard/layout/views/Tab",group:"dashboard-core/js/dashboard/layout/views/LayoutBaseView",singlePage:"dashboard-core/js/dashboard/layout/views/SinglePage"},this.authoringViews={absolute:"dashboard-core/js/dashboard/layout/authoring/views/Absolute",tab:"dashboard-core/js/dashboard/layout/authoring/views/Tab",hub:"dashboard-core/js/dashboard/layout/authoring/views/Tab",longscroll:"dashboard-core/js/dashboard/layout/authoring/views/Tab",group:"dashboard-core/js/dashboard/layout/authoring/views/Group",templateDropZone:"dashboard-core/js/dashboard/layout/authoring/views/TemplateDropZone",templateIndicator:"dashboard-core/js/dashboard/layout/authoring/views/TemplateIndicator",scalingAbsolute:"dashboard-core/js/dashboard/layout/authoring/views/ScalingAbsolute",genericPage:"dashboard-core/js/dashboard/layout/authoring/views/GenericPage",container:"dashboard-core/js/dashboard/layout/authoring/views/TemplateContainer",singlePage:"dashboard-core/js/dashboard/layout/authoring/views/SinglePage"}}return r.prototype.getBoardModelExtensions=function(){return this.boardModelExtensions},r.prototype.getLayoutModelExtensions=function(){return this.layoutExtensions&&this.layoutExtensions.modelExtensions},r.prototype.getLayoutViewExtensions=function(){if(!this.layoutViewExtensions){var e=this.layoutExtensions&&this.layoutExtensions.consumeViews;e&&Object.keys(e).forEach(function(t){this.consumeViews[t]=e[t]}.bind(this));var t=this.layoutExtensions&&this.layoutExtensions.authoringViews;t&&Object.keys(t).forEach(function(e){this.authoringViews[e]=t[e]}.bind(this)),this.layoutViewExtensions={authoringViews:this.authoringViews,consumeViews:this.consumeViews,modelExtensions:this.layoutExtensions&&this.layoutExtensions.modelExtensions}}return this.layoutViewExtensions},r.prototype.getCanvasExtensions=function(){return this.canvasExtensions},r.prototype.load=function(){var e=this;return this.loadLayoutAndCanvasExtensions().then((function(t){return e.layoutExtensions=t[0],e.canvasExtensions=t[1],e.loadBoardModelExtensions().then((function(t){e.boardModelExtensions=t}))}))},r.prototype.loadLayoutAndCanvasExtensions=function(){return Promise.all([this._getLayoutExtensions(),this._getCanvasExtensions()]).then(function(e){return e}.bind(this))},r.prototype._getLayoutExtensions=function(){var e=this,t=Promise.resolve(),r=this.dashboardApi.getCollectionConfig("layoutExtension");if(r){var n=r.id;t=Promise.all([this.dashboardApi.findGlassCollection(n)]).then((function(t){var r=t[0]||[];return e.loadLayoutModelExtensions(r)}))}return t},r.prototype.loadLayoutModelExtensions=function(e){var t=this._combineLayoutModelExtensions(e);return this._loadModelExtensions(t)},r.prototype._combineLayoutModelExtensions=function(e){var t={};return e.forEach((function(e){var r=e.extensions;Object.keys(r).forEach((function(e){var n=r[e];t[e]||(t[e]={}),Object.keys(n).forEach((function(r){t[e][r]=n[r]}))}))})),t},r.prototype._loadModelExtensions=function(r){var n=this,i=r.modelExtensions;return i?Promise.all(Object.keys(i).map((function(t){return e.loadModule(i[t]).then((function(e){var r;return(r={})[t]=e,r})).catch((function(e){return n.logger.error(e),{}}))}))).then((function(e){return r.modelExtensions=t.extend.apply(t,e),r})):Promise.resolve(r)},r.prototype._getCanvasExtensions=function(){var e,t=this.dashboardApi.getCollectionConfig("canvasExtension");if(t){var r=t.id;e=Promise.all([this.dashboardApi.findGlassCollection(r)]).then(function(e){var t=[];return e.length>0&&e[0]&&e[0].forEach(function(e){!1!==e.active&&t.push(e)}.bind(this)),t}.bind(this))}return e||Promise.resolve()},r.prototype.loadBoardModelExtensions=function(){var e=this.dashboardApi.getCollectionConfig("boardModel").id;return this.dashboardApi.findGlassCollection(e).then(function(e){return this._loadBoardModelExtensions(e)}.bind(this))},r.prototype._loadBoardModelExtensions=function(t){if(t){var r=[];return t.forEach((function(t){t.name&&t.class&&r.push(e.loadModule(t.class).then(function(e){return{name:t.name,type:t.type||"model",class:e,triggers:t.triggers||[],autoCreate:!1!==t.autoCreate}}.bind(this)).catch(function(e){this.logger.error(e)}.bind(this)))}),this),Promise.all(r).then((function(e){return e.filter((function(e){return null!=e}))}))}},r}()})),define("dashboard-core/js/dashboard/widgets/WidgetRegistry",["../../app/nls/StringResources","../../lib/@waca/core-client/js/core-client/ui/core/Class","../../lib/@waca/dashboard-common/dist/utils/CommonUtil"],(function(e,t,r){var n=[{deprecatedValue:"Text properties",newValue:"Text"},{deprecatedValue:"Shape properties",newValue:"Shape"},{deprecatedValue:"Image properties",newValue:"Image"},{deprecatedValue:"Web page properties",newValue:"Web page"},{deprecatedValue:"Media properties",newValue:"Media"}];return t.extend({initialize:function(t){var r=t.getCollectionConfig("widget").id,n=t&&t.getGlassCoreSvc(".FeatureChecker"),i=n&&n.checkValue("dashboard","PropertiesV2","enabled");return t.findGlassCollection(r).then(function(e){return this._fnInitializeRegistryItems(e,i).then(function(){return this}.bind(this))}.bind(this)).fail(function(){throw e.get("errorLoadingWidgetList")}.bind(this))},_fnInitializeRegistryItems:function(e,t,r){var n=this;if(!e||!e.length)return Promise.resolve(e);t&&this._updatePropertyLayouts(e);var i=[];return e.forEach((function(e){i.push(n._fnInitializeRegistryItem(e,t,r))})),Promise.all(i)},_updatePropertyLayouts:function(t){t.forEach((function(t){var r=!1;if(t.propertyList&&t.propertyList.forEach((function(e){e.editor&&("general.appearance"===e.editor.sectionId&&(e.editor.sectionId="positionAndStyle"),"visualization.chart"===e.editor.sectionId&&(e.editor.sectionId="chart"),"visualization.color"===e.editor.sectionId&&(e.editor.sectionId="color"),e.editor.uiControl&&"Input"===e.editor.uiControl.type&&(e.editor.uiControl.type="InputLabel",e.editor.uiControl.inputType="text",e.editor.uiControl.label=e.editor.uiControl.placeHolderText)),"fillColor"===e.id&&(e.editor.position=5),"borderColor"===e.id&&(e.editor.position=6),"showBorderInPreview"===e.id&&(e.editor.position=7),"borderRadius"===e.id&&(e.editor.position=8),"backgroundOpacity"===e.id&&(e.editor.position=10),"titleMode"===e.id&&(e.editor.sectionId="title",r=!0),"responsiveTitle"===e.id&&(e.editor.sectionId="title")})),t.propertyLayoutList){var i=[];t.propertyLayoutList.forEach((function(t){if("Group"===t.type&&("general"!==t.id&&"visualization"!==t.id||i.push(t.id),["webPage","media","image","text"].indexOf(t.id)>-1&&(t.type="Section",t.position=1,t.label=e.get("sectionName_details"))),"appearance"===t.id&&(t.id="positionAndStyle",t.label=e.get("sectionName_positionAndStyle"),t.position=200),"Banner"===t.type){var r=n.find((function(e){return e.deprecatedValue===t.value}));r?t.value=r.newValue:i.push(t.id)}})),i.length&&(t.propertyLayoutList=t.propertyLayoutList.filter((function(e){return i.indexOf(e.id)<0}))),r&&t.propertyLayoutList.push({type:"Section",id:"title",label:e.get("titleTextLabel"),position:190})}}))},_fnInitializeRegistryItem:function(e,t){var n=void 0;return e.builtin&&e.id.indexOf(".")>=0?n=e.id.replace(/(\w+\.)/g,""):(n=e.id,this._fnInitCustomWidget(e,t)),r.defaults(e,{layoutAuthoringView:"dashboard-core/js/dashboard/layout/authoring/views/Widget",disableTitle:!1,ownTitle:!0,createContentNode:!0}),this[n]=e,!e.modelClassPath||e.ModelClass?Promise.resolve(e):this._fnLoadWidgetModelClass(e.modelClassPath).then((function(t){return e.ModelClass=t,e}))},_fnLoadWidgetModelClass:function(e){return new Promise((function(t,r){try{require([e],t,r)}catch(e){r(e)}}))},_fnInitCustomWidget:function(t,n){var i=void 0,o=void 0,a=void 0;n?(i="positionAndStyle",o=5,a=6):i="general.appearance",(t=r.defaults(t,{ownTitle:!1,title:e.get("customWidget"),layoutConsumeView:"dashboard-core/js/dashboard/layout/views/Widget",svgIcon:"dashboard-default-custom-widget",scroll:"scroll",propertyLayoutList:[{id:"banner",value:t.title,name:"banner",type:"Banner"}],propertyList:[this._generateColorPickerSpec({isPropertiesV2Enabled:n},"fillColor",i,"propFillColor",o),this._generateColorPickerSpec({isPropertiesV2Enabled:n},"borderColor",i,"propBorderColor",a),{id:"showBorderInPreview",defaultValue:!0,editor:{sectionId:i,position:n?a+1:a,uiControl:{type:"ToggleButton",label:e.get("propShowBorderInPreview"),ariaLabel:e.get("propShowBorderInPreview")}}},{id:"borderRadius",defaultValue:0,editor:{sectionId:i,uiControl:{type:"InputLabel",inputType:"number",label:e.get("propBorderRadius"),ariaLabel:e.get("propBorderRadius"),handleReturnKey:!0,showInlineError:!0,value:0,customValidatorCallback:{feature:"Dashboard.PropertyCallbacks",callbackFunction:"validateBorderRadius",callbackParams:[]}}}}]})).defaultSpec=r.defaults(t.defaultSpec||{},{model:{type:t.id,name:t.ownTitle?null:t.title},layoutProperties:{style:{display:"flex",border:"1px solid transparent","border-radius":"5px","flex-direction":"column",width:"250px",height:"250px"}}})},_generateColorPickerSpec:function(t,r,n,i,o){return t.isPropertiesV2Enabled?{id:r,supportsUndoRedo:!0,defaultValue:"transparent",editor:{sectionId:n,position:o,uiControl:{type:"ColorPicker",label:e.get(i),addButton:!0,paletteTitle:e.get("themeLabel"),showHexValue:!0,paletteType:"DashboardColorSet"}}}:{id:r,defaultValue:"transparent",editor:{sectionId:n,uiControl:{type:"ColorPicker",label:e.get(i),ariaLabel:e.get(i),paletteType:"DashboardColorSet",open:!1,addButton:!0,showHexValue:!0}}}}})})),define("dashboard-core/js/dashboard/model/WidgetModel",["../../lib/@waca/dashboard-common/dist/core/Model"],(function(e){var t=null;return t=e.extend({runtimeAttrs:["filters"],validLocalizedProps:["content","title","altText","name"],validWidgetTypesForLocalizationProps:["text","image","media","webpage"],init:function(e){if(this._addLocalizedProps(e),t.inherited("init",this,arguments),e)for(var r in this.whitelistAttrs=["id"],e)e.hasOwnProperty(r)&&this.whitelistAttrs.push(r)},_addLocalizedProps:function(e){var t=[];if(e&&-1!==this.validWidgetTypesForLocalizationProps.indexOf(e.type))for(var r in e)e.hasOwnProperty(r)&&-1!==this.validLocalizedProps.indexOf(r)&&t.push(r);this.localizedProps=t},cloneWidget:function(e){var r=new t(this.toJSON());return r.replaceIds(e),r}})})),define("dashboard-core/js/dashboard/model/LayoutModel",["../../lib/@waca/dashboard-common/dist/core/Model","./content/ContentModel","./ModelUtils","underscore","jquery"],(function(e,t,r,n,i){var o=e.extend({localizedProps:["title"],init:function(e,t,r){if(o.inherited("init",this,arguments),this.boardModel=t,this.whitelistAttrs=["id","from","css","items","style","type","title","templateName","relatedLayouts","clones","fillColor","borderColor","disableScrollDrop","showGrid","snapGrid","snapObjects","tabTextColor","tabSelectedLineColor","tabBackgroundColor","pageSize","hideTab","showDropDown","tabPosition","tabIconPosition","tabIcon","tabIconColor","layoutPositioning","fitPage","content","tabFontFamily","tabFontFamilySubClass"],this.colorProperties=["fillColor","borderColor","tabTextColor","tabSelectedLineColor","tabBackgroundColor","tabIconColor"],this.selected=new Set,this.boardModel.layoutExtensions){var n=this.boardModel.layoutExtensions;Object.keys(n||{}).forEach((function(i){this.whitelistAttrs.push(i),n[i]&&"function"==typeof n[i].init&&n[i].init(this,e,t,r)}),this)}this.on("op",this.boardModel.onLayoutChange,this.boardModel),this.on("change:title",this.boardModel.onLayoutChange,this.boardModel),this.on("change:css",this.boardModel.onLayoutChange,this.boardModel),this.on("change:fillColor",this.boardModel.onLayoutChange,this.boardModel),this.on("change:borderColor",this.boardModel.onLayoutChange,this.boardModel),this.on("change:type",this.boardModel.onLayoutChange,this.boardModel),this.on("change:showGrid",this.boardModel.onLayoutChange,this.boardModel),this.on("change:snapGrid",this.boardModel.onLayoutChange,this.boardModel),this.on("change:snapObjects",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabTextColor",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabSelectedLineColor",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabBackgroundColor",this.boardModel.onLayoutChange,this.boardModel),this.on("change:pageSize",this.boardModel.onLayoutChange,this.boardModel),this.on("change:hideTab",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabPosition",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabIconPosition",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabIcon",this.boardModel.onLayoutChange,this.boardModel),this.on("change:tabIconColor",this.boardModel.onLayoutChange,this.boardModel),this.on("change:layoutPositioning",this.boardModel.onLayoutChange,this.boardModel),this.on("change:fitPage",this.boardModel.onLayoutChange,this.boardModel),this._initializeContentModel(),this.logger=r;var i={};if(e.items){this.items=[];for(var a=0,s=e.items.length;a<s;a++){var l=new o(e.items[a],this.boardModel,r);i[l.id]?this.logger.error('Found duplicate layout id "'+l.id+'" on initialization of layout "'+this.id+'".'):(this.items.push(l),i[l.id]=!0)}}return this},getValueFromSelfOrParent:function(e){var t=this.get(e);if(void 0===t){var r=this.getParent();r&&(t=r.getValueFromSelfOrParent(e))}return t},cloneLayout:function(e){var t=new o(this.toJSON(),this.boardModel);return this.clones||(this.clones=0),this.clones++,t.clones=0,t.replaceIds(e),t.replaceRelatedLayouts(e),t.incrementTitleCount(this.clones),t},findModel:function(e){var t=null;if(this.id===e&&(t=this),!t&&this.items)for(var r=0;!t&&r<this.items.length;r++)t=this.items[r].findModel(e);return t},listWidgets:function(e){for(var t,r=[],n=0;n<e.length;n++){t=e[n];var i=this.findModel(t);if(i&&("widget"===i.type&&r.push(i.id),i.items))for(var o=0;o<i.items.length;o++)r.push.apply(r,i.items[o].listWidgets([i.items[o].id]))}return r},add:function(e,t,r){r=this.checkPayloadData(r);var n=e.parentId?e.parentId:this.id,i=this.findModel(n),o=i&&"widget"===i.type,a=e.model;if(!a)return null;var s=this._insertItem({model:a,insertBeforeId:e.insertBefore},t,r).value.parameter.model;return o?this._createPayload("add:item",{op:"add",parameter:{model:s,insertBefore:e.insertBefore}},{op:"remove",parameter:s.id},t,r):this._triggerEvent("add:item",{op:"add",parameter:{model:s,insertBefore:e.insertBefore}},{op:"remove",parameter:s.id},t,r)},addArray:function(e,t,r){r=this.checkPayloadData(r);for(var i,o,a,s=[],l=[],d=0;d<e.length;d++)a=(o=e[d]).parentId?o.parentId:this.id,(i=this.findModel(a).add(e[d],t,r))&&i.value&&i.prevValue&&(l.push(n.extend({parentId:a},i.value.parameter)),s.unshift(i.prevValue.parameter));var c=null;return s.length>0&&(c=this._triggerEvent("add:items",{op:"addArray",parameter:l},{op:"removeArray",parameter:s},t,r)),c},remove:function(e,t,r){r=this.checkPayloadData(r),this._triggerEvent("pre:remove:item",{parameter:e},null,t,r);var n=null,i=this.findModel(e).getNextSiblingId(),o=this._removeItem(e);return o&&(n=this._triggerEvent("remove:item",{op:"remove",parameter:e},{op:"add",parameter:{model:o.toJSON(),insertBefore:i}},t,r),o.off()),n},removeArray:function(e,t,r){r=this.checkPayloadData(r);for(var i,o,a,s=[],l=0;l<e.length;l++)o=e[l],(a=this.findParentModel(o))&&(i=a.remove(e[l],t,r))&&s.unshift(n.extend({parentId:a.id},i.prevValue.parameter));var d=null;return s.length>0&&(d=this._triggerEvent("remove:items",{op:"removeArray",parameter:e},{op:"addArray",parameter:s},t,r)),d},updateStyle:function(e,t,r){r=this.checkPayloadData(r);var i=null;if(e){this.style||(this.style={});var a=this._getStyles(e);this._triggerEvent("prechange:style",{style:e},null,t,r),n.extend(this.style,e),i=this._triggerEvent(o.CHANGE_STYLE_EVENT_NAME,{op:"updateStyle",parameter:e},{op:"updateStyle",parameter:a},t,r)}return i},updateFilters:function(e,t){var r={prevValue:{},value:{}},n=this.boardModel.getWidgetModel(e);if(n&&n.filters){var i=n.filters;n.filters=t,r.prevValue.filters=i,r.value.filters=t}return r},updateParent:function(e,t,r){r=this.checkPayloadData(r);var n=null,i=this.boardModel.layout.findModel(e.parentId);if(i){var o=this.getParent(),a=null;o&&(a=this.getNextSiblingId(),o._removeItem(this.id)),i._insertItem({model:this,insertBeforeId:e.insertBefore},t,r),n=this._triggerEvent("change:parent",{op:"updateParent",parameter:e},{op:"updateParent",parameter:{parentId:o?o.id:null,insertBefore:a}},t,r)}return n},updateModel:function(e,t,r){var i;r=this.checkPayloadData(r);var o=null,a={},s={};if(e.addArray&&(o=this.addArray(e.addArray,t,r))&&(a.addArray=o.value.parameter,s.removeArray=o.prevValue.parameter),e.updateArray){var l=o?o.value.parameter:null,d=this._updateModelsProperties(e.updateArray,t,l,r);d&&JSON.stringify(d.value)!==JSON.stringify(d.prevValue)&&(a.updateArray=d.value,s.updateArray=d.prevValue)}if(e.removeArray){var c=this.removeArray(e.removeArray,t,r);c&&(a.removeArray=c.value.parameter,s.addArray=c.prevValue.parameter)}return e.payloadData&&(a.info=e.payloadData,s.info=e.payloadData),n.isEmpty(a)||(i=this._triggerEvent("op:updateModel",{op:"updateModel",parameter:a},{op:"updateModel",parameter:s},t,r)),i},moveModel:function(e,t,r){r=this.checkPayloadData(r);var n={},i={};if(e.removeArray){var o=this.removeArray(e.removeArray,t,r);o&&(n.removeArray=o.value.parameter,i.addArray=o.prevValue.parameter)}if(e.addArray){var a=this.addArray(e.addArray,t,r);a&&(n.addArray=a.value.parameter,i.removeArray=a.prevValue.parameter)}if(e.updateArray){var s=this._updateModelsProperties(e.updateArray,t,r);s&&(n.updateArray=s.value,i.updateArray=s.prevValue)}return e.payloadData&&(n.info=e.payloadData,i.info=e.payloadData),this._triggerEvent("op:moveModel",{op:"moveModel",parameter:n},{op:"moveModel",parameter:i},t,r)},checkPayloadData:function(e){var t=e;t||(t={undoRedoTransactionId:n.uniqueId("layoutModelTransaction")});return t},_updateModelProperties:function(e,t,r,i,o){var a={prevValue:{id:e.id},value:{id:e.id}};if(t.parentId){var s=t.parentId;"$addArray[0]"===s&&i&&i.length>0&&(s=i[0].model.id);var l=e.updateParent({parentId:s,insertBefore:t.insertBefore},r,o);null!==l&&(a.prevValue=n.extend(a.prevValue,l.prevValue.parameter),a.value=n.extend(a.value,l.value.parameter))}var d=e.updateStyle(t.style,r,o);if(d&&(a.prevValue.style=d.prevValue.parameter,a.value.style=d.value.parameter),t.filters){var c=e.updateFilters(t.id,t.filters);c&&(a.prevValue.filters=c.prevValue.filters,a.value.filters=c.value.filters)}if(this.boardModel.layoutExtensions){var u=this.boardModel.layoutExtensions;Object.keys(u||{}).forEach((function(n){var i=e._callExtensionMethod({property:n,value:t[n]},r,o);i&&(a.prevValue[n]=i.prevValue.parameter.value,a.value[n]=i.value.parameter.value)}),this)}return a},_callExtensionMethod:function(e,t,r){var n=this.boardModel.layoutExtensions[e.property];if(n&&"function"==typeof n.update){var i=n.update(this,e.value);if(i)return this._triggerEvent(i.event,{op:"_callExtensionMethod",parameter:{property:e.property,value:i.value}},{op:"_callExtensionMethod",parameter:{property:e.property,value:i.previousValue}},t,r)}return null},_updateModelsProperties:function(e,t,r,n){for(var i,o={value:[],prevValue:[]},a=0;a<e.length;a++){i=e[a];var s=this.findModel(i.id);if(s){var l=this._updateModelProperties(s,i,t,r,n);o.value.push(l.value),o.prevValue.unshift(l.prevValue)}}return o},isSelected:function(e){return this.selected.has(e)},select:function(e){this.findModel(e)&&this.selected.add(e)},deselect:function(e){this.selected.delete(e);var t=this.getParent();t&&t.deselect(e)},getSelectedChildLayouts:function(){var e=this,t=[],r=function(r){var n=e.findModel(r);return n&&t.push(n),n};if(this.selected.forEach(r),"group"===this.type){var n=this.getParent();if(n&&n.isSelected(this.id)){return this.items.forEach((function(e){return function e(t){r(t.id),t.item&&t.items.forEach((function(t){return e(t)}))}(e)})),t}}return this.items&&this.items.forEach((function(e){var r=e.getSelectedChildLayouts();r&&(t=t.concat(r))})),t},getSelectedWidgets:function(){return this.getSelectedChildLayouts().filter((function(e){return"widget"===e.type}))},getWidgetByIndex:function(e){if(!(e<0))return function e(t,r,n){if("widget"===t.type&&r===n.index++)return t;var i=t.items;if(i)for(var o=i.length,a=0;a<o;a++){var s=e(i[a],r,n);if(s)return s}}(this,e,{index:0})},getNextSiblingId:function(){return this._getSiblingId(1)},getPreviousSiblingId:function(){return this._getSiblingId(-1)},_getSiblingId:function(e){var t=this.getParent(),r=null;if(t){var n=t.items.indexOf(this)+e;n>=0&&n<t.items.length&&(r=t.items[n].id)}return r},getParent:function(){return this.boardModel.layout.findParentModel(this.id)},getTopLayoutModel:function(){return this.boardModel.layout},_getStyles:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=this.style&&this.style[r]?this.style[r]:"");return t},incrementStyleValue:function(e){return e?"%"===e[e.length-1]?parseFloat(e)+5+"%":"x"===e[e.length-1]?parseFloat(e)+25+"px":e:e},decrementStyleValue:function(e){return e?"%"===e[e.length-1]?parseFloat(e)-5+"%":"x"===e[e.length-1]?parseFloat(e)-25+"px":e:e},findParentModel:function(e){if(-1!==this._getItemIndex(e))return this;var t=null;if(this.items)for(var r=0;!t&&r<this.items.length;r++)t=this.items[r].findParentModel(e);return t},_isContainerType:function(){return!!n.contains(["container"],this.type)},findDropZones:function(){if(this._isContainerType()){for(var e=this.findDescendantsWithType(["templateDropZone","templateIndicator"]),t=this.findParentModel(e[0].id).id,r=[],n=0;n<e.length;n++)r.push(e[n].id);return{ids:r,parentId:t}}},findDescendantsWithType:function(e){var t=Array.isArray(e)?e:[e],r=[];if(this.items){var n=this.items,i=Array.isArray(n),o=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}var s=a;-1!==t.indexOf(s.type)?r.push(s):r.push.apply(r,s.findDescendantsWithType(e))}}return r},getLinkedLayoutTree:function(e,t){return this._getLinkedLayoutTreeWorker(e,t,[])},_getLinkedLayoutTreeWorker:function(e,t,r){r.push([e,t]);var n=function(e){return"group"===e.type},i=e.getParent(),o=t.getParent();return n(i)||n(o)?n(i)&&n(o)?this._getLinkedLayoutTreeWorker(i,o,r):null:r},findTopLevelParentItem:function(e){var t=null;return n.each(this.items,function(r){r.id===e?t=this:null!==this.findChildItem(r.items,e)&&(t=r)}.bind(this)),t},findChildItem:function(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.id===t)return n;if(n.items&&(n=this.findChildItem(n.items,t)))return n}return null},_insertItem:function(e,t,r){var n=e.model,a=e.insertBeforeId;n instanceof o||(n=new o(i.extend(!0,{},n),this.boardModel)),this.items||(this.items=[]);var s=this._getItemIndex(n.id);-1!==s&&(this.logger.error('Found duplicate layout id "'+n.id+'" at index "'+s+'" in layout "'+this.id+'".'),this.items.splice(s,1));var l=this._getItemIndex(a);return-1!==l?this.items.splice(l,0,n):this.items.push(n),this._triggerEvent("insert:item",{op:"_insertItem",parameter:{model:n.toJSON(),insertBeforeId:a}},{op:"_removeItem",parameter:n.id},t,r)},_getItemIndex:function(e){var t=-1;if(this.items)for(var r=0;r<this.items.length;r++)if(this.items[r].id===e){t=r;break}return t},_removeItem:function(e){var t=null,r=this._getItemIndex(e);return r>=0&&(t=this.items[r],this.items.splice(r,1)),t},replaceRelatedLayouts:function(e){if(this.relatedLayouts&&this.relatedLayouts.length>0){var t="";if("|"===this.relatedLayouts[0]){var r=this.relatedLayouts.split("|");t+="|",n.each(r,(function(r){r.length>0&&(t+=(e[r]?e[r]:r)+"|")}))}else t=e[this.relatedLayouts]?e[this.relatedLayouts]:this.relatedLayouts;this.relatedLayouts=t}n.each(this.items,(function(t){t.replaceRelatedLayouts(e)}))},incrementTitleCount:function(e){this.title&&this.title.length>0&&(this.title=this.title+" ("+e+")"),this.title&&this.title.translationTable&&(this.title.translationTable=n.extend({},this.title.translationTable),Object.keys(this.title.translationTable).forEach(function(t){this.title.translationTable[t]=this.title.translationTable[t]+"-"+e}.bind(this)))},_createPayload:function(e,t,r,n,i){var o={modelId:this.id,value:t,sender:n||this};if(i&&(o.data=i),r){o.prevValue=r;var a=0===e.indexOf("change:")?this:this.boardModel.layout,s=a.applyFn.bind(a);o.senderContext={applyFn:function(e,t){s(e,t,i)}.bind(this)}}return o},_triggerEvent:function(e,t,r,n,i){var o=this._createPayload(e,t,r,n,i);return this.trigger(e,o),o},applyFn:function(e,t,r){var n=this;if(e&&e.op&&"function"==typeof this[e.op]){var i=[e.parameter];i.push(t),i.push(r),this[e.op].apply(this,i)}else{var a=this.boardModel&&this.boardModel.layout&&this.boardModel.layout.items||[],s=a.find((function(e){return e.id===n.id}));o.inherited("applyFn",s||this,arguments)}},getLayoutPositioning:function(e){if("genericPage"===this.type){if(this._hasInnerTabParent())return;return this.layoutPositioning||"relative"}if(e){var t=this.getParent();return t?t.getLayoutPositioning():void 0}},_hasInnerTabParent:function(){for(var e=this.getParent&&this.getParent();e&&"tab"!==e.type;)e=e.getParent&&e.getParent();return!!(e&&e.getParent&&e.getParent())},_initializeContentModel:function(){if(this.features){var e=void 0;this.features["Models.internal"]?e="Models.internal":this.features.Models_internal&&(e="Models_internal"),e&&(this.features[e].id=this.id,this.boardModel.createLegacyWidgetModel(this.features[e]))}this.content=r.initializeContentModel(this)},getContentModel:function(){return this.content},getUsedCustomColors:function(e){var t=o.inherited("getUsedCustomColors",this,arguments);return this.items&&this.items.length&&this.items.forEach((function(r){t=t.concat(r.getUsedCustomColors(e))})),n.uniq(t,!1)}});return o.CHANGE_STYLE_EVENT_NAME="change:style",o})),define("dashboard-core/js/dashboard/model/EventGroupEntry",["../../lib/@waca/dashboard-common/dist/core/Model"],(function(e){var t=null;return t=e.extend({whitelistAttrs:["id","widgetIds"],init:function(){t.inherited("init",this,arguments),this.widgetIds||(this.widgetIds=[])},addWidget:function(e,t){if(this.widgetIds.indexOf(e)<0){var r=this.widgetIds.slice();r.push(e),this.set({widgetIds:r},t)}},removeWidget:function(e,t){if(this.widgetIds.indexOf(e)>-1){var r=this.widgetIds.filter((function(t){return e!==t}));this.set({widgetIds:r},t)}},getGroupIndex:function(){var e=this.id.split(":");return 2===e.length?parseInt(e[1],10):0},setGroupIndex:function(e,t){this.set({id:this.getPageId()+":"+e},t)},getPageId:function(){return this.id.split(":")[0]}})})),define("dashboard-core/js/dashboard/model/EventGroups",["../../lib/@waca/dashboard-common/dist/core/Collection","./EventGroupEntry","underscore"],(function(e,t,r){var n=null;return n=e.extend({modelClass:t,defaultGroupIndex:1,maxGroupsPerPage:5,init:function(){n.inherited("init",this,arguments)},findGroup:function(e){return r.find(this.getModels(),(function(t){return t.widgetIds.indexOf(e)>-1}))},_createGroupId:function(e,t){return e+":"+t},_nextGroupIndex:function(e){return r.filter(this.models,(function(t){return 0===t.id.indexOf(e+":")})).length+1},getNumberOfGroups:function(e){return r.filter(this.models,(function(t){return 0===t.id.indexOf(e+":")})).length},getDefaultGroup:function(e,t){var r=this.createDefaultGroupId(e);return this.get(r)||this.add([{id:r,widgetIds:[]}],this._createTransactionOptions(t)),this.get(r)},getGroupsOnPage:function(e){return r.filter(this.models,(function(t){return 0===t.id.indexOf(e+":")}))},_createGroup:function(e,t){var r=this._createGroupId(e,this._nextGroupIndex(e));return this.add([{id:r,widgetIds:[]}],this._createTransactionOptions(t)),this.get(r)},removeWidgetsFromGroup:function(e,t){var r;e.forEach(function(e){(r=this.findGroup(e))&&(1===r.widgetIds.length?this._destroyGroupAndRelabel(r,this._createTransactionOptions(t)):r.removeWidget(e,this._createTransactionOptions(t)))}.bind(this))},_addWidgetsToGroup:function(e,t,r){e.forEach(function(e){t.addWidget(e,this._createTransactionOptions(r))}.bind(this))},_destroyGroupAndRelabel:function(e,t){this.remove(e,this._createTransactionOptions(t));var r={},n=[];this.getModels().forEach(function(e){var i=e.getPageId();r[i]?r[i]++:r[i]=1,e.setGroupIndex(r[i],this._createTransactionOptions(t)),n.push(e)}.bind(this)),this.reset(n,this._createTransactionOptions(t))},canCreateGroup:function(e){return!this.get(e+":"+this.maxGroupsPerPage)},createGroup:function(e,t){var r=(t=t||{}).targetPageId||this.findGroup(e[0]).getPageId();this.removeWidgetsFromGroup(e,t);var n=this._createGroup(r,t);return this._addWidgetsToGroup(e,n,t),n},addToGroup:function(e,t,r){var n=this.get(e);t=t.filter((function(e){return-1===n.widgetIds.indexOf(e)})),this.removeWidgetsFromGroup(t,r),this._addWidgetsToGroup(t,n,r)},disconnectFromGroup:function(e,t){var r=this,n=this.findGroup(e[0]).getPageId();return this.removeWidgetsFromGroup(e,t),e.map((function(e){var i=r._createGroup(n,t);return r._addWidgetsToGroup([e],i,t),i}))},_createTransactionOptions:function(e){return e?e.payloadData?{payloadData:e.payloadData,sender:e.sender?e.sender:this}:{sender:this}:null},createDefaultGroupId:function(e){return this._createGroupId(e,this.defaultGroupIndex)}})})),define("dashboard-core/js/dashboard/model/properties/customColors/CustomColorsModel",["../../../../lib/@waca/dashboard-common/dist/core/Model","underscore"],(function(e,t){var r=e.extend({whitelistAttrs:["colors"],init:function(e){e&&t.defaults(e,{colors:[]}),r.inherited("init",this,arguments)},addCustomColor:function(e){var t=this,r=Array.isArray(e)?e:[e],n=!1;r.forEach((function(e){var r=t.colors.indexOf(e.toLowerCase()),i=t.colors.indexOf(e.toUpperCase());-1===r&&-1===i&&(t.colors.push(e),n=!0)})),n&&this.trigger("changed:colors",{payloadData:{skipUndoRedo:!0},data:{runtimeOnly:!0}})},getHexColorFromClassName:function(e){return"#"+e.split("customColor")[1]},customColorExists:function(e){return this.colors.indexOf(e)},isCustomColor:function(e){return!!e&&-1!==e.indexOf("customColor")},getColorClassName:function(e){return e?"customColor"+(0===e.indexOf("#")?e.substring(1):e):""},getCustomPaletteDefinition:function(){var e=this,t=[];return this.colors.forEach((function(r){t.push(e.getColorClassName(r))})),{id:"customColorPalette",ids:t,fillType:"simple",fills:this.colors}}});return r})),define("dashboard-core/js/dashboard/model/properties/PropertiesModel",["../../../lib/@waca/dashboard-common/dist/core/Model","./customColors/CustomColorsModel","underscore"],(function(e,t,r){var n=e.extend({nestedModels:{customColors:t},whitelistAttrs:["dashboardColorSet","customColors","localCache","defaultLocale","fredIsRed"],init:function(e,t){var i=this;r.extend(this,t),e&&r.defaults(e,{customColors:{},defaultLocale:"Default",fredIsRed:!0}),n.inherited("init",this,arguments),this.contentReferences&&this.contentReferences.push({type:"palette",get:function(){var e=i.get("dashboardColorSet");return e&&0===e.indexOf("__CM__")?e.split("__CM__")[1]:null}})}});return n})),define("dashboard-core/js/dashboard/model/BoardModel",["jquery","../../lib/@waca/dashboard-common/dist/core/Model","./WidgetModel","./LayoutModel","./ModelUtils","./EventGroups","./properties/PropertiesModel","../../lib/@waca/core-client/js/core-client/utils/UniqueId","../../lib/@waca/dashboard-common/dist/utils/CommonUtil"],(function(e,t,r,n,i,o,a,s,l){function d(e,t){return new n(e,t.boardModel,t.logger)}var c=t.extend({nestedCollections:{eventGroups:o},nestedModels:{properties:a},init:function(e,t){var r=this;this._initBoardSpec=e,t=t||{},this.logger=t.logger,this.dashboardApi=t.dashboardApi,this.createLayoutModel=t.createLayoutModel||d,t.whitelistAttrs?this.whitelistAttrs=t.whitelistAttrs:this.whitelistAttrs=["name","layout","theme","version","eventGroups","datasetShaping","properties","content"];var n=["dashboardColorSet","customColors","localCache","defaultLocale","fredIsRed"];if(this.content=i.initializeContentModel(e,n),t.boardModel=this,e.properties||(e.properties={}),this.defaultLocale=e.properties.defaultLocale,this.dashboardApi){var a=this.dashboardApi.getGlassCoreSvc(".UserProfile");a&&(this.contentLocale=a.preferences.contentLocale)}if(Object.assign(t,this.getLanguageModelOptions()),this._updateNestedInfoWithExtensions(t.boardModelExtensions),c.inherited("init",this,arguments),this.eventRouter=t.eventRouter,this._autoCreateExtensionModelsAndCollections(t.boardModelExtensions,e),this.id=t.id,this.name=t.name||this.name,this.widgetRegistry=t.widgetRegistry,this.layoutExtensions=t.layoutExtensions,this.widgetInstances={},Object.keys(e.widgets||{}).forEach((function(t){r.createLegacyWidgetModel(e.widgets[t])})),this.createLayoutModel!==d&&this._instantiateWidgetModels(e.layout.items),this.layout=this.createLayoutModel(e.layout,{boardModel:this,logger:this.logger,dashboardApi:this.dashboardApi}),this.eventGroups||this.set({eventGroups:new o},{silent:!0}),this.boardModelExtensions=t.boardModelExtensions,this.layout.items&&this.layout.items.length>0){var s=this.layout.items[0];this.setSelectedLayout(s.id)}this.eventRouter&&this.eventRouter.on("tab:tabChanged",this.onTabChanged,this),this.isUpgraded=t.isUpgraded,this.type="dashboard"},_instantiateWidgetModels:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++){var r=e[t];r.items&&r.items.length?this._instantiateWidgetModels(r.items):"widget"===r.type&&r.features&&r.features.Models_internal&&this.createLegacyWidgetModel(r.features.Models_internal)}},getContentModel:function(){return this.content},createLegacyWidgetModel:function(e){this.getWidgetModel(e.id)||this._addWidgetModel(e,{addDashboardTranslatedLocales:!1})},_updateNestedInfoWithExtensions:function(e){var t=this;e&&e.forEach((function(e){var r=e.name;t.whitelistAttrs.push(r),"collection"===e.type?t.nestedCollections[r]=e.class:t.nestedModels[r]=e.class}))},_autoCreateExtensionModelsAndCollections:function(e,t){var r=this;e&&(e.forEach((function(e){var n=e.name;!t[n]&&e.autoCreate&&("collection"===e.type?r._setCollection(n,t[n]||null,{silent:!0,logger:r.logger,boardModel:r,dashboardApi:r.dashboardApi}):r._setNestedModel(n,t[n]||{},{silent:!0,logger:r.logger,boardModel:r}))})),this._registerBoardModelExtensionTriggers(e))},setDefaultLocale:function(e){this.defaultLocale=e},setTranslationLocale:function(e){this.properties.set({translationModeLocale:e}),this.translationLocale=e},_registerBoardModelExtensionTriggers:function(e){e&&e.forEach((function(e){e.triggers&&e.triggers.length>0&&e.triggers.forEach((function(t){this[e.name].on(t.eventName,this.trigger.bind(this,t.event))}),this)}),this)},onTabChanged:function(e){this.setSelectedLayout(e.modelId)},getWidgetModel:function(e){return this.widgetInstances?this.widgetInstances[e]:null},getTimeLineEpisode:function(e){return this.timeline?this.timeline.episodes.get(e):null},setSelectedLayout:function(e){this.selectedLayout=e},getSelectedLayout:function(){return this.selectedLayout},addContent:function(e,t,r){if(!e.parentId)throw new Error("Invalid argument options.parentId provided");if(!e.model)throw new Error("Invalid argument options.model provided");r=this.checkPayloadData(r);var n=Object.assign({},e.model);return n.id&&e.modelIdsValid||(n.id=s.get("content")),e.layoutProperties&&e.layoutProperties.style&&(n.style=Object.assign({},n.style||{},e.layoutProperties.style)),this.layout.addArray([{parentId:e.parentId,insertBefore:e.insertBefore,model:n}],t,r),n.id},removeContent:function(e,t,r){r=this.checkPayloadData(r),this.layout.removeArray([e],t,r)},addWidget:function(t,r,n){var i=this;if(t.parentId){n=this.checkPayloadData(n);var o=this._addWidgetModel(t.model,{id:t.id});t.id&&(o.id=t.id);var a=o.id,s=Object.assign({},t.layoutProperties,{type:"widget",id:a});this.layout.addArray([{parentId:t.parentId,insertBefore:t.insertBefore,model:s}],r,n);var l=function(){return i._triggerAddRemove("addWidget",{op:"addWidget",parameter:Object.assign({},t,{model:o.toJSON(),layoutProperties:e.extend(!0,{},s)})},{op:"removeWidget",parameter:a},r,n)},d=this.dashboardApi.getCanvas().getContent(a).getFeature("state");return d.getStatus()!==d.STATUS.CREATED?Promise.resolve(l()):d.whenStatusChanges(d.STATUS.INITIALIZED).then((function(){return l()}))}},addFragment:function(e,t,r){var n=this;r=this.checkPayloadData(r);var i=Object.assign({},e.model),o=this.dashboardApi.getFeature("dataSources.deprecated"),a=o?o.getSourcesCollection():void 0,s=a?a.addSourcesForPin(i,{payloadData:r}):{},d={};i.widgets&&i.widgets.forEach((function(t){var r=t.id;e.modelIdsValid||(t.id=void 0);var i=t.data?t.data.dataViews:null;i&&i.forEach((function(e){s[e.modelRef]&&(e.modelRef=s[e.modelRef])}));var o=n._addWidgetModel(t);d[r]=o.id,t.id=o.id})),e.layoutProperties&&!Array.isArray(i.layout)&&(i.layout.style=i.layout.style||{},i.layout.style=Object.assign(i.layout.style,e.layoutProperties.style)),e.modelIdsValid||(i.layout=this._updateFragmentSpecLayout(i.layout,d,e));var c=void 0;try{c=this.dashboardApi.getDashboardCoreSvc("DrillThroughService")}catch(e){this.logger.info(e)}c&&c.addDrillThroughOnAddFragment(e.model,s,d,this.selectedLayout,i),i.properties&&i.properties.customColors&&i.properties.customColors.colors&&this.properties.customColors.addCustomColor(i.properties.customColors.colors),i.fredIsRed&&l.isEmpty(this.fredIsRed.colorMap)&&(this.fredIsRed.colorMap=i.fredIsRed.colorMap);var u=this.layout.addArray(this._getAddArrayPayload(i,e),t,r).prevValue.parameter;return i.pageContext&&i.pageContext.forEach((function(e){if("filter"===e.origin){var t=void 0;e.tupleSet?t={values:l.values(JSON.parse(e.tupleSet))}:e.conditions?t={condition:{attributeUniqueNames:e.conditions[0].attributeUniqueNames,from:e.conditions[0].from[0],to:e.conditions[0].to[0]}}:n.logger.error("Error: AddFragment() - Only able to handle pageContext tupleSet and conditions, can not handle "+JSON.stringify(e)),t=Object.assign(t,{scope:e.scope,openViewOnLoad:!1,exclude:e.exclude,payloadData:r}),n.dashboardApi.getCanvasWhenReady().then((function(r){r.filterApi.addFilter({sourceId:e.sourceId,itemId:e.hierarchyUniqueNames[0]},t)})).catch((function(e){n.logger.error(e)}))}else n.logger.error("Error: AddFragment() - Only able to handle pagecontext.origin=filter, not "+e.origin)})),this._triggerAddRemove("addFragment",{op:"addFragment",parameter:Object.assign({},e,{model:i,modelIdsValid:!0,widgetIdMap:d})},{op:"removeFragment",parameter:u},t,r)},_getAddArrayPayload:function(e,t){var r=[];return Array.isArray(e.layout)?(e.layout.forEach((function(e){r.push({parentId:t.parentId,insertBefore:t.insertBefore,model:e})})),r):[{parentId:t.parentId,insertBefore:t.insertBefore,model:e.layout}]},_updateFragmentSpecLayout:function(e,t){var r=this;if(e)return function e(t,n){if(Array.isArray(t))t.forEach((function(t){e(t,n)}));else{if("widget"!==t.type){var i=r.createLayoutModel({items:[]},{boardModel:r,logger:r.logger});i.off(),n[t.id]=i.id,t.id=i.id}else t.id=n[t.id];t.items&&t.items.forEach((function(t){e(t,n)}))}return t}(e,t);return{type:"group",items:l.values(t).map((function(e){return{id:e,type:"widget"}}))}},removeFragment:function(e,t,r){return this.removeLayouts(e,t,r)},removeWidget:function(e,t,r){r=this.checkPayloadData(r),this.trigger("pre:removeWidget",{id:e,sender:t,data:Object.assign({runtimeOnly:!0},r)});var n=this.layout.removeArray([e],t,r);if(n){var i=this.widgetInstances[e],o=this._triggerAddRemove("removeWidget",{op:"removeWidget",parameter:e},{op:"addWidget",parameter:{parentId:n.prevValue.parameter[0].parentId,model:i.toJSON(),layoutProperties:Object.assign({},n.prevValue.parameter[0].model)}},t,r);return this.widgetInstances[e].off("change",this.onWidgetModelChange,this),delete this.widgetInstances[e],o}},getUsedCustomColors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=c.inherited("getUsedCustomColors",this,arguments);if(this.widgetInstances)for(var n in this.widgetInstances)r=r.concat(this.widgetInstances[n].getUsedCustomColors(e,t));return this.layout&&(r=r.concat(this.layout.getUsedCustomColors(e))),l.uniq(r)},removeLayouts:function(e,t,r){r=this.checkPayloadData(r);var n=Array.isArray(e)?e:[e];this.trigger("pre:removeLayouts",{idArray:n,sender:t,data:Object.assign({runtimeOnly:!0},r)});var i=this.layout.listWidgets(n),o=this.layout.removeArray(n,t,r);if(o){for(var a,s={},l=0;l<i.length;l++){a=i[l];var d=this.widgetInstances[a];d&&(s[a]=d.toJSON(),d.off(),delete this.widgetInstances[a])}return this._triggerAddRemove("removeLayouts",{op:"removeLayouts",parameter:n,removedWidgets:s},{op:"addLayouts",parameter:{widgetSpecMap:s,addLayoutArray:o.prevValue.parameter}},t,r)}},addLayouts:function(e,t,r){if(r=this.checkPayloadData(r),e.widgetSpecMap)for(var n in e.widgetSpecMap)e.widgetSpecMap.hasOwnProperty(n)&&this._addWidgetModel(e.widgetSpecMap[n],{id:n});var i=e.parentId?this.layout.findModel(e.parentId):this.layout;i||(i=this.layout);var o=i.addArray(e.addLayoutArray,t,r);return this._triggerAddRemove("addLayouts",{op:"addLayouts",parameter:Object.assign({},e,{widgetSpecMap:e.widgetSpecMap,addLayoutArray:o.value.parameter})},{op:"removeLayouts",parameter:o.prevValue.parameter},t,r)},_isTypeRegistered:function(e){return this.dashboardApi.getFeature("ContentTypeRegistry").isTypeRegistered(e)},duplicateLayout:function(e,t,r){var n=this;r=this.checkPayloadData(r);var i=this.layout.findModel(e),o={};return function(){if(i){if(n._isTypeRegistered(i.type)){var a=i.getParent().id,s=n.dashboardApi.getFeature("Canvas").getContent(e);return n.dashboardApi.getFeature("Canvas").addContent({containerId:a,spec:s.getFeature("Serializer").toJSON(),copyPaste:!0}).then((function(t){var r=t.getId();return o[e]=r,r}))}var l=n._cloneWidgets(i,o),d=n._cloneLayout(i,o,r),c={parentId:i.getParent().id,widgetSpecMap:l,addLayoutArray:[{model:d.toJSON(),insertBefore:"widget"===i.type?null:i.getNextSiblingId()}]};return n.addLayouts(c,t,r),Promise.resolve(d.id)}return Promise.resolve()}().then((function(i){return n.trigger("duplicateLayout",{layoutId:e,cloneId:i,idMap:o,sender:t,data:r}),i}))},duplicateSelection:function(e,t,r){var n=this,i=[],o=this.checkPayloadData(r);if(o.limitToBounds=[],e.modelIds)return e.modelIds.forEach((function(r){e.outBoundIds&&e.outBoundIds.filter((function(e){return e.id===r})).length>0&&o.limitToBounds.push(e.outBoundIds.filter((function(e){return e.id===r}))),i.push(n.duplicateLayout(r,t,o))})),i},updateLayoutType:function(e,t,r){r=this.checkPayloadData(r);var n=e.id?this.layout.findModel(e.id):this.layout;n&&e.type&&n.set({type:e.type},{sender:t,payloadData:r})},updateLayoutDropZones:function(e,t,r){var n;e.id&&(n=this.layout.findModel(e.id)),n||(n=this.layout);var i=n.findDropZones();if(!i)return r;r=this.removeLayouts(i.ids,t,r);for(var o=n.listWidgets([n.id])[0],a=[],s=0;s<e.model.items[0].items.length;s++)a.push({parentId:i.parentId,model:e.model.items[0].items[s],insertBefore:o});return r=this.addLayouts({parentId:i.parentId,addLayoutArray:a},r.sender,r.data)},_cloneWidgets:function(e,t){var r={};return e.listWidgets([e.id]).forEach(function(e){var n=this.widgetInstances[e].cloneWidget(t);r[n.id]=n.toJSON()}.bind(this)),r},_cloneLayout:function(e,t,r){var n=e.cloneLayout(t);return("widget"===n.type||"group"===n.type)&&n.style&&r.limitToBounds&&r.limitToBounds.length<=0?(n.style.top=n.incrementStyleValue(n.style.top),n.style.left=n.incrementStyleValue(n.style.left)):r.limitToBounds&&r.limitToBounds.length>0&&r.limitToBounds[0].forEach((function(e){e.bottom&&(n.style.top=n.incrementStyleValue(n.style.top)),e.right&&(n.style.left=n.incrementStyleValue(n.style.left)),e.right||e.bottom||(parseFloat(n.decrementStyleValue(n.style.top))>0&&(n.style.top=n.decrementStyleValue(n.style.top)),parseFloat(n.decrementStyleValue(n.style.left))>0&&(n.style.left=n.decrementStyleValue(n.style.left)))})),n},getLanguageModelOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={defaultLocale:this.defaultLocale,contentLocale:this.contentLocale,translationLocale:this.translationLocale};if(e){var r=this.dashboardApi.getDashboardCoreSvc("TranslationService");t.availableDashboardLocales=r.getSelectedLanguages()}return t},_addWidgetModel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name||(e.name="");var n=r;e&&this.widgetRegistry&&this.widgetRegistry[e.type]&&this.widgetRegistry[e.type].ModelClass&&(n=this.widgetRegistry[e.type].ModelClass);var i=t.id,o=t.addDashboardTranslatedLocales,a=void 0===o||o,s=this.getLanguageModelOptions(a),l=new n(e,s);return l.on("change",this.onWidgetModelChange,this),this.widgetInstances[i||l.id]=l,l},onLayoutChange:function(e,t){this.trigger("change:layout",e,t)},_triggerAddRemove:function(e,t,r,n,i){var o={value:t,prevValue:r,sender:n,senderContext:{applyFn:this.applyFn.bind(this)},data:i};return this.trigger(e,o),o},applyFn:function(e,t,r,n){if(e.op&&"function"==typeof this[e.op]){var i=[e.parameter];i.push(t),i.push(n),this[e.op].apply(this,i)}else c.inherited("applyFn",this,arguments)},onWidgetModelChange:function(e){var t=e.senderContext||{},r=l.isObject(e.sender)?e.sender.id:e.sender;e&&e.senderContext&&this.widgetInstances[r]&&(e.senderContext.applyFn=function(){var e=this.widgetInstances[r];e&&e.applyFn.apply(e,arguments)}.bind(this)),this.trigger("widget:change",Object.assign({modelId:e.model?e.model.id:r,senderContext:t},e))},toJSON:function(){var e=c.inherited("toJSON",this,[null,["layout"]]),t=this.dashboardApi.getFeature("Canvas").findContent({type:this.layout.type})[0];return e.layout=t.getFeature("Serializer").toJSON(),e},checkPayloadData:function(e){return e||{undoRedoTransactionId:s.get("boardModelTransaction")}},findWidgetById:function(e){return this.widgetInstances?this.widgetInstances[e]:null},findWidgetByIds:function(e){var t;return e.some(function(e){var r=!1,n=this.findWidgetById(e);return n&&(t=n,r=!0),r}.bind(this)),t},findWidgetByCriteriaFn:function(e){var t;for(var r in this.widgetInstances)if(this.widgetInstances.hasOwnProperty(r)){var n=this.widgetInstances[r];if(e(n)){t=n;break}}return t},filterWidgetsByCriteriaFn:function(e){var t=[];for(var r in this.widgetInstances)if(this.widgetInstances.hasOwnProperty(r)){var n=this.widgetInstances[r];e(n)&&t.push(n)}return t},getContentReferences:function(){var e=c.inherited("getContentReferences",this,arguments);if(this.widgetInstances)for(var t in this.widgetInstances)e=e.concat(this.widgetInstances[t].getContentReferences());return this.layout&&(e=e.concat(this.layout.getContentReferences())),l.uniqBy(e,"value")},getInitialSpec:function(){return this._initBoardSpec},deleteInitialSpec:function(){delete this._initBoardSpec}});return c})),define("dashboard-core/js/dashboard/model/BoardModelFactory",["underscore","./BoardModel"],(function(e,t){var r=function(){function e(t){_classCallCheck(this,e),this.productVersion=t.productVersion,this.glassFeature=t.glassFeature,this.dashboardAPI=t.dashboardAPI,this.boardId=t.boardId,this.prefetchBoardPromise=t.prefetchBoardPromise,this.boardSpec=t.boardSpec,this.widgetRegistry=t.widgetRegistry,this.extensions=t.extensions,this.stringResources=t.stringResources,this.eventRouter=t.eventRouter,this.logger=t.logger,this.createLayoutModel=t.createLayoutModel,this.glass=this.dashboardAPI.getFeature("Glass")}return e.prototype.createBoardModel=function(){var e=this;return this._getBoardSpec(this.boardId).then((function(t){return e._upgradeSpec(t)})).then((function(t){return e._onLoadSpec&&e.dashboardAPI.getCurrentContentView().setSavedInstance(e._onLoadSpec),t})).then(this._createBoardModel.bind(this))},e.prototype._createBoardModel=function(e){var r=e.spec&&e.spec._meta,n=r&&r.bundleID||this.boardId,i=r&&r.name;return{boardModel:new t(e.spec,{id:n,name:i,eventRouter:this.eventRouter,widgetRegistry:this.widgetRegistry,boardModelExtensions:this.extensions.getBoardModelExtensions(),layoutExtensions:this.extensions.getLayoutModelExtensions(),dashboardApi:this.dashboardAPI,logger:this.logger,createLayoutModel:this.createLayoutModel,isUpgraded:e.upgraded}),boardSpec:e.spec,boardId:this.boardId}},e.prototype._getBoardSpec=function(e){var t=this;if(!this.boardId){var r=this.dashboardAPI.findGlassPlugin("com.ibm.bi.glass.common.operations");r&&r.disable()}return this.boardSpec?Promise.resolve(this.boardSpec):this.glass.getService(".DashboardContent").then((function(r){return t.prefetchBoardPromise?r.handlePrefetchedDashboard(t.prefetchBoardPromise).catch((function(n){return t.logger.error(n),r.getDashboard(e)})):r.getDashboard(e)})).then((function(e){return t._resolveBoardSpec(e)}))},e.prototype._resolveBoardSpec=function(e){var t=e.boardId,r=e.name,n=e.searchPath,i=e.permissions,o=e.boardSpec;return o._meta={bundleID:t},this.dashboardAPI.setPermissions(i),o.name=r,o.searchPath=n,this.boardSpec=o,this._onLoadSpec=JSON.stringify(o),this.boardId=t,o},e.prototype._upgradeSpec=function(e){var t=this;return this.glass.getService(".UpgradeService").then((function(r){e.version=e.version||r.getLatestDashboardSpecVersion();var n=!1;if(e.__SERVER_UPGRADED__&&(n=!0,delete e.__SERVER_UPGRADED__),r.needsUpgrade(e,null))return t._doUpgrade(e,r).then((function(e){return{spec:e,upgraded:!0}}));if(n){var i=t.stringResources.get("upgradingDashboard",{name:e.name,version:t.productVersion}),o=t.glassFeature.showProgressToast(i,{noCancelBtn:!0,noHideBtn:!0}),a=t.dashboardAPI.canAuthor()?t.stringResources.get("toastUpgradeDone"):t.stringResources.get("upgradeComplete");o.setComplete(100,{isComplete:!0,completeMsg:a,duration:10})}return{spec:e,upgraded:n}})).catch((function(e){if(e.obj)return{spec:e.obj,upgraded:!0};throw e}))},e.prototype._doUpgrade=function(e,t){var r=null,n=this.dashboardAPI.canAuthor()?this.stringResources.get("toastUpgradeDone"):this.stringResources.get("upgradeComplete"),i=this.stringResources.get("upgradingDashboard",{name:e.name,version:this.productVersion});return r=this.glassFeature.showProgressToast(i,{noCancelBtn:!0,noHideBtn:!0}),e=this._restoreWidgetModelsForUpgrade(e,t.getLatestDashboardSpecVersion()),t.upgrade(e,null,{ajaxSvc:this.dashboardAPI.getFeature("Ajax"),dashboardApi:this.dashboardAPI,services:this.services,logger:this.logger,hasWrite:this.dashboardAPI.canAuthor(),progress:function(e){r.setComplete(e.completed/e.total*100,{isComplete:e.done,completeMsg:e.done?n:null,duration:e.done?10:100})},noToast:!0,originalSpecVersion:e.version}).catch((function(e){throw r.showButton("hide"),r.fail(),e}))},e.prototype._findWidgetInLayouts=function(e,t){if(e&&"widget"===e.type&&e.features&&e.features.Models_internal&&t.push(e),e&&e.items&&e.items.length>0)for(var r=0;r<e.items.length;r++){var n=e.items[r];this._findWidgetInLayouts(n,t)}},e.prototype._restoreWidgetModelsForUpgrade=function(e,t){var r=[];if(e.version<t&&e.layout){this._findWidgetInLayouts(e.layout,r);for(var n=0;n<r.length;n++){var i=r[n],o=i.features.Models_internal;e.widgets||(e.widgets={}),e.widgets[i.id]=o,delete i.features.Models_internal}}return e},e}();return r.create=function(e){return new r(e)},r})),define("dashboard-core/js/features/dashboard/dashboardPreferences/DashboardPreferencesAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getPreference=function(){},e.prototype.setPreference=function(){},e.prototype.savePreferences=function(){},e}()})),define("dashboard-core/js/api/core/default/DashboardPreferences",["../../../features/dashboard/dashboardPreferences/DashboardPreferencesAPI"],(function(e){var t=function(e){function t(){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this));return r.preferences=[],r}return _inherits(t,e),t.prototype.getPreference=function(e){return this.preferences[e]},t.prototype.getAPI=function(){return this},t.prototype.setPreference=function(e,t){this.preferences[e]=t},t.prototype.savePreferences=function(){throw new Error("need to be implemented.")},t}(e);return t.create=function(){return new t},t})),define("dashboard-core/js/features/dashboard/dashboardSettings/DashboardSettingsAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.get=function(){},e}()})),define("dashboard-core/js/api/core/default/DashboardSettingsUtils",[],(function(){"use strict";return function(){function e(){_classCallCheck(this,e)}return e.sortFeaturesByProfiles=function(t){t.sort(e._featureProfileComparator)},e._featureProfileComparator=function(e,t){var r=function(e){return e&&e.length?e.indexOf("core")>=0?1:e.indexOf("consume")>=0?2:e.indexOf("authoring")>=0?3:0:0};return r(e.profiles)-r(t.profiles)},e}()})),define("dashboard-core/js/api/core/default/DashboardSettings",["../../../features/dashboard/dashboardSettings/DashboardSettingsAPI","./DashboardSettingsUtils"],(function(e,t){var r=function(e){function r(t){var n=t.globalConfig,i=t.applicationConfig,o=t.collectionsOverride,a=t.defaultImpl,s=t.apiConsumerConfig;_classCallCheck(this,r);var l=_possibleConstructorReturn(this,e.call(this));return l._init({globalConfig:n,applicationConfig:i,collectionsOverride:o,defaultImpl:a,apiConsumerConfig:s}),l}return _inherits(r,e),r.prototype._init=function(e){var t=e.globalConfig,r=e.applicationConfig,n=e.collectionsOverride,i=e.defaultImpl,o=e.apiConsumerConfig;this._settings={},this._defaultImpl=i,this._setConfigSettings(t),this._setGlassApplicationSettings(r),this._setCollectionsSettings(r,n),o&&this._setConfigSettings(o)},r.prototype._setConfigSettings=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)this._settings[t[r]]=e[t[r]]},r.prototype._setGlassApplicationSettings=function(e){this._settings.applicationName=e.label,this._settings.applicationSettings=e.content,this._settings.applicationCssStyles=e.cssStyles},r.prototype._setCollectionsSettings=function(e,t){var r=this;e.collectionContainers.forEach((function(e){r._settings[e.id]=e.items||[],t&&t[e.id]&&(r._settings[e.id]=r._settings[e.id].filter((function(r){var n=!1;t[e.id].excludes&&(n=-1!==t[e.id].excludes.indexOf(r.name));var i=!n;return t[e.id].items&&(i=i&&!t[e.id].items.find((function(e){return r.name===e.name}))),i})),t[e.id].items&&t[e.id].items.forEach((function(t){t.class&&r._settings[e.id].push(t)}))),r._processingContainer(e)}))},r.prototype._processingContainer=function(e){"com.ibm.bi.dashboard.features"!==e.id&&"com.ibm.bi.dashboard.content-features"!==e.id||t.sortFeaturesByProfiles(e.items)},r.prototype.get=function(e){var t=this._defaultImpl&&this._defaultImpl.get(e);return void 0===t&&(t=this._settings[e]),t},r.prototype.destroy=function(){delete this._defaultImpl,this._settings={}},r}(e);return r.create=function(e){var t=e.globalConfig,n=e.applicationConfig,i=e.collectionsOverride,o=e.defaultImpl,a=e.apiConsumerConfig;return new r({globalConfig:t,applicationConfig:n,collectionsOverride:i,defaultImpl:o,apiConsumerConfig:a})},r})),define("dashboard-core/js/api/DashboardCoreAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getFeature=function(){},e.prototype.destroy=function(){},e}()})),define("dashboard-core/js/api/impl/DashboardCore",["../../lib/@waca/dashboard-common/dist/core/APIFactory","../DashboardCoreAPI"],(function(e,t){return function(){function r(n){var i=n.dashboardAPI,o=n.internalDashboardAPI;_classCallCheck(this,r),this._dashboardAPI=i,this._internalDashboardAPI=o,this._api=e.createAPI(this,[t])}return r.prototype.getAPI=function(){return this._api},r.prototype.getFeature=function(e){return this._dashboardAPI.getFeature(e)},r.prototype.destroy=function(){var e=this.getFeature("LegacyViewControllers");e&&e.destroy(),this._internalDashboardAPI.destroy()},r}()})),define("dashboard-core/js/api/deprecated/CanvasAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getLayout=function(){},e.prototype.removeWidget=function(){},e.prototype.getWidgetWhenReady=function(){},e.prototype.getWidgetsWhenRendered=function(){},e.prototype.selectWidget=function(){},e.prototype.selectWidgets=function(){},e.prototype.getSelectedWidgets=function(){},e.prototype.deselectAllWidgets=function(){},e.prototype.getWidget=function(){},e.prototype.getWidgets=function(){},e.prototype.hasMaximizedWidget=function(){},e.prototype.getFeature=function(){},e.prototype.registerFeature=function(){},e.prototype.addFragment=function(){},e.prototype.getFilters=function(){},e}()})),define("dashboard-core/js/dashboard/util/ContentActionUtil",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.getNodes=function(e,t){var r=[];return t.forEach((function(t){var n=e.layoutController.getLayoutView(t);n&&n.domNode&&r.push(n.domNode)})),r},e.getContentActionList=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=e.getCanvas(),i=t.getContentActionList(r);return r.some((function(e){var t=n.getLayout(e),r=t&&t.getEditingActionList(),o=r&&r.length;return o&&i.push.apply(i,r),o})),i},e}()})),define("dashboard-core/js/dashboard/layout/authoring/EventHelper",["jquery","hammerjs","jquery.hammer","../../../lib/@waca/core-client/js/core-client/utils/EventHelper"],(function(e,t){var r="ontouchstart"in window,n={};for(var i in t.gestures)t.gestures.hasOwnProperty(i)&&(n[t.gestures[i].name]=1);return{currentHandlerCount:0,on:function(e,t,n){if(!r&&this.isTouch(t))return{off:function(){}};var i=function(e){return n(this.fixEvent(e))}.bind(this);return this._addListener(e,t,i),{off:function(){this._removeListener(e,t,i)}.bind(this)}},fixEvent:function(e){var t=e,r=function(e){return e.targetTouches?e.targetTouches:e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches:e.gesture?e.gesture.touches:null}(e);t.isTouch=null!==r;var n=r&&r.length?r[0]:null;return n&&void 0!==n.clientX&&(t.clientX=n.clientX,t.clientY=n.clientY,t.pageX=n.pageX,t.pageY=n.pageY),t},_addListener:function(t,r,n){n&&(this.currentHandlerCount++,e(t).on(r,n))},_removeListener:function(t,r,n){n&&(this.currentHandlerCount--,e(t).off(r,n))},isTouch:function(e){return e.match(/touch/)||n[e]},setInlineEdit:function(t,r,n){var i=e(t);return i.inlineEditor(r,n),{off:function(){i.inlineEditor("remove")},blur:function(){i.inlineEditor("blur")},isEditing:function(){return i.inlineEditor("isEditing")}}}}})),define("dashboard-core/js/app/util/EventChainLocal",["../../lib/@waca/core-client/js/core-client/ui/core/Class"],(function(e){return e.extend({init:function(e){this.event=e},_getSourceEvent:function(){return this.event.gesture?this.event.gesture.srcEvent:this.event.originalEvent?this.event.originalEvent:this.event},_getPropertyMap:function(){var e=this._getSourceEvent();return e._eventChainLocalMap||(e._eventChainLocalMap={}),e._eventChainLocalMap},setProperty:function(e,t){this._getPropertyMap()[e]=t},getProperty:function(e){return this._getPropertyMap()[e]}})})),define("dashboard-core/js/dashboard/layout/authoring/interaction/Selection",["../../../../lib/@waca/core-client/js/core-client/ui/core/Events","../../../../lib/@waca/core-client/js/core-client/ui/KeyCodes","jquery","../../../layout/authoring/EventHelper","../../../../app/util/EventChainLocal","../../../../lib/@waca/core-client/js/core-client/utils/Utils","../../../../lib/@waca/core-client/js/core-client/utils/BrowserUtils","underscore","../../../../lib/@waca/dashboard-common/dist/utils/EventChainLocal"],(function(e,t,r,n,i,o,a,s,l){var d=e.extend({_utils:o,init:function(e){d.inherited("init",this,arguments),this.selectedNodes=[],this.orderedActionsBySelector=[],this.actionsBySelector={},this.selectionHandlers=null,this.deselectHandlers=[],this.saveMouseEvent=null,this.selector="",this.deselectionSelector=e.deselectionSelector||function(){return".page"},this.canvas=e.canvas,this.transaction=e.transaction,this.controller=e.controller,e.utils&&(this._utils=e.utils),this.delegate=e.delegate,this.canvas.on("change:selections:select",this.onSelection.bind(this)),this.canvas.on("change:selections:deselect",this.onDeselection.bind(this))},startTransaction:function(){return this.transaction.startTransaction()},endTransaction:function(e){this.transaction.endTransaction(e)},initialize:function(){},deselectAll:function(e,t,n){if(!(e&&"mousedown"===e.type&&1!==(e.buttons||e.which)||this._isDraggingAction())&&this.selectedNodes.length){var i=void 0;if(e&&(i=r(this._getTargetNode(e))),!i||!i.closest(".widget").length&&!i.closest(".pagegroup").length||t){var o=this.controller.dashboardApi.getFeature("LassoSelect");if(!o||!o.isAggregatedSelectInProgress())return this._deselectDomEvent=e,this._isSelectionInProgress=!0===t,this.canvas.deselectContent(this.selectedNodes.map((function(e){return e.getAttribute("id")})),n),!1}}},onDeselection:function(e){var t=this,n=!1;e.info.value.forEach((function(e){var i=t.canvas.getContent(e);if(i&&t._isSelectionSupported(i)){n=!0;var o=i.getFeature("ContentViewDOM").getNode();t._removeNodeFromSelection(o)&&(r(o).removeClass("showBorder"),r(o).removeClass("nodeSelected").blur(),t.trigger("selection:nodeDeselected",{node:o}))}else t.selectedNodes=t.selectedNodes.filter((function(t){return t.getAttribute("id")!==e}))})),(n||this._deselectDomEvent)&&(this.updateDeSelection(this._deselectDomEvent),this._isSelectionInProgress||this._triggerSelectionReadyEvent(this._deselectDomEvent),delete this._deselectDomEvent,delete this._isSelectionInProgress)},deselectNode:function(e,t,r,n){this._deselectDomEvent=t,this._isSelectionInProgress=r,this.canvas.deselectContent([e.getAttribute("id")],n)},updateDeSelection:function(e){0===this.selectedNodes.length&&(this.deselectHandlers.forEach((function(e){return e.off()})),this.deselectHandlers=[]),this._notifyActionHandlers(e)},addActionForSelector:function(e,t,r){var n=this.actionsBySelector[t];n||(n=[],this.actionsBySelector[t]=n,r||this.enableSelectionFor(t)),-1===n.indexOf(e)&&(n.push(e),this.orderedActionsBySelector.push({selector:t,action:e}))},disableInteraction:function(){this.deselectAll(),this.selector="",this._detachHandlers(this.selectionHandlers),this.selectionHandlers=null,this.actionsBySelector={},this.orderedActionsBySelector=[]},disableActionsForSelector:function(e){this._removeSelector(e),""===this.selector&&(this._detachHandlers(this.selectionHandlers),this.selectionHandlers=null)},enableSelectionFor:function(e){this.selectionHandlers?this.selector+=","+e:(this.selectionHandlers=[],this._attachStartSelectionHandlers(this.controller.$el,this.selectionHandlers),this.selector=e)},isEnabled:function(){return!this.delegate||this.delegate.isEnabled()},_cleanRemovedSelectedNodes:function(){var e=this;this.selectedNodes=this.selectedNodes.filter((function(t){return e.canvas.getContent(t.getAttribute("id"))}))},_isSelectionSupported:function(e){var t=e.getType();if(-1!==t.indexOf("widget")||"group"===t||"tab"===t&&e.getContainer())return!0;var r=e.getFeature("ContentRegistry.internal."+t+"Capabilities"),n=!1;if(r){var i=r.getCapabilities();n=i.selection?i.selection:n}return n},onSelection:function(e){var t=this,n=!1;e.info.value.forEach((function(e){var i=t.canvas.getContent(e);if(i&&t._isSelectionSupported(i)){n=!0;var o=i.getFeature("ContentViewDOM").getNode();t._attachDeselectHandlers(),t._addSelectedNode(o),t._emitSelectionAfterEvent(),r(o).addClass("nodeSelected").focus(),t._cleanRemovedSelectedNodes(),t.trigger("selection:nodeSelected",{node:o,selectedNodes:t.selectedNodes})}})),e.tracking.action.params&&e.tracking.action.params.forEach((function(e){e&&e.hideContextBar&&(t._selectDomEvent=_extends({},t._selectDomEvent,{hideContextBar:e.hideContextBar}),new l(t._selectDomEvent).setProperty("preventDefaultContextBar",!0))})),(n||this._selectDomEvent)&&(this._notifyActionHandlers(this._selectDomEvent),this._isSelectionInProgress||this._triggerSelectionReadyEvent(this._selectDomEvent),delete this._selectDomEvent,delete this._isSelectionInProgress)},selectNode:function(e,t,r,n){if(!this._isDraggingAction()){var i=this.canvas.getContent(e.getAttribute("id"));if(this._selectDomEvent=t,this._isSelectionInProgress=r,!1!==i.getPropertyValue("selectable"))this.canvas.selectContent([e.getAttribute("id")],n);else{var o=i.getContainer();if(!1!==o.getPropertyValue("selectable")){var a=o.getFeature("ContentViewDOM").getNode();this.canvas.selectContent([a.getAttribute("id")],n)}}}},onTap:function(e){if("mousedown"!==e.type||1===(e.buttons||e.which)&&!this._suppressSyntheticMouseEvent){this._suppressSyntheticMouseEvent="tap"===e.type;var t=this._emitSelectionBeforeEvent(this._getTargetNode(e),e.type),r=this.canvas.getContent(t.getAttribute("id")),n=!1!==r.getPropertyValue("selectable");if(1===this.selectedNodes.length&&this._getIndexFromSelection(t)>-1||!n&&this.selectedNodes.length>0&&this._isInSelection(r.getContainer().getId()))this._triggerReselectEvent(e,t);else{var i=this.startTransaction();this.selectedNodes.length>0&&this.deselectAll(e,!0,i),this.selectNode(t,e,!1,i),this.endTransaction(i)}}else this._suppressSyntheticMouseEvent=!1},onHold:function(e){var t=this.startTransaction(),r=this._emitSelectionBeforeEvent(this._getTargetNode(e),e.type);if(this._getIndexFromSelection(r)>-1)return this.deselectNode(r,e,!1,t),e.gesture&&e.gesture.preventDefault(),!1;this.selectNode(r,e,!1,t),this.endTransaction(t)},onTouchStart:function(){this.selectionHandlers[2].off(),this.selectionHandlers[3].off()},onTouchEnd:function(e){var t=this,r=this._getTargetNode(e);setTimeout((function(){n.on(r,"mousedown",t.saveMouseEvent),n.on(r,"click",t.saveMouseEvent)}),600)},onKeyDownSelectEvent:function(e){if(this._shouldSelect(e)){var t=this.startTransaction(),r=this._emitSelectionBeforeEvent(this._getTargetNode(e),e.type);this._shouldDeselect(r,e)?this.deselectNode(r,e,!1,t):(this._shouldDeselectAll(e)&&this.deselectAll(e,!0,t),this.selectNode(r,e,!1,t)),this.endTransaction(t)}},onMouseSelectEvent:function(e){var t=!0;if(1===(e.buttons||e.which)){var n=this._getTargetNode(e),i=r(n),o=this._isParentMoving(i),a=this._isParentSelectedAndNotTarget(i),s=this._isDraggingAction();"click"!==e.type&&"contextmenu"!==e.type||!(this._ignoreMouseUpSelect||o||a||s)?t=this._handleMouseSelection(e,n):(!this._ignoreMouseUpSelect||o||a||this._deselectPrevented||this._triggerSelectionReadyEvent(e),this._ignoreMouseUpSelect=!1,this._deselectPrevented=!1)}return t},_removeNodeFromSelection:function(e){var t=this._getIndexFromSelection(e);return t>-1&&(this.selectedNodes.splice(t,1),!0)},_getIndexFromSelection:function(e){return s.map(this.selectedNodes,(function(e){return e.id})).indexOf(e&&e.id)},_createDelegatedEventHandler:function(e){var t=this;return function(n){if(t.isEnabled()){var i=n.target;if(i&&r(i).is(t.selector))return e(n);if(i){var o=r(i).parents(t.selector);if(o.length>0)return n._delegateTarget=o[0],e(n)}}}},_detachHandlers:function(e){e&&e.forEach((function(e){return e.off()}))},_removeSelector:function(e){for(var t=this.selector.split(","),r=0;r<t.length;r++)if(t[r]===e)return t.splice(r,1),void(this.selector=t.join(","))},_attachStartSelectionHandlers:function(e,t){var r=this._createDelegatedEventHandler(this.onTap.bind(this)),i=this._createDelegatedEventHandler(this.onHold.bind(this)),o=this._createDelegatedEventHandler(this.onMouseSelectEvent.bind(this)),s=this._createDelegatedEventHandler(this.onKeyDownSelectEvent.bind(this)),l=this._createDelegatedEventHandler(this.onTouchStart.bind(this)),d=this._createDelegatedEventHandler(this.onTouchEnd.bind(this));this.saveMouseEvent=o,this._utils.isIpad()||a.isMobile()?t.push(n.on(e,"tap",r),n.on(e,"hold",i),n.on(e,"keydown",s),n.on(e,"mousedown",r)):t.push(n.on(e,"tap",r),n.on(e,"hold",i),n.on(e,"mousedown",o),n.on(e,"click",o),n.on(e,"contextmenu",o),n.on(e,"keydown",s),n.on(e,"touchstart",l),n.on(e,"touchend",d))},_getTargetNode:function(e){return e._delegateTarget?e._delegateTarget:e.target},_shouldSelect:function(e){var r=new l(e);return(e.keyCode===t.ENTER||e.keyCode===t.SPACE)&&e.target&&"inlineText"!==e.target.className&&!r.getProperty("preventWidgetSelection")},_shouldDeselect:function(e,t){return this._getIndexFromSelection(e)>-1&&o.isControlKey(t)},_shouldDeselectAll:function(e){return this.selectedNodes.length>0&&!o.isControlKey(e)},_isParentMoving:function(e){return e.parents(".nodeDragging, .nodeResizing").length>0},_isParentSelectedAndNotTarget:function(e){return!e.is(".nodeSelected")&&0===e.parents(".nodeSelected").length},_isDraggingAction:function(){return r("body").hasClass("dragging")},_isInSelection:function(e){for(var t=!1,r=0;r<this.selectedNodes.length&&!(t=this.selectedNodes[r].getAttribute("id")===e);r++);return t},_handleMouseSelection:function(e,t){var n=this.canvas.getContent(t.getAttribute("id")),i=!1!==n.getPropertyValue("selectable"),a=!0;return t=this._emitSelectionBeforeEvent(t,e.type),this.selectedNodes.indexOf(t)>-1||!i&&this.selectedNodes.length>0&&this._isInSelection(n.getContainer().getId())?o.isControlKey(e)?(this._handleCtrlKeyClick(e,t),a=!1):"click"!==e.type||r(e.target).hasClass("resizePoint")||this._triggerReselectEvent(e,t):a=this._mouseEventSelectNode(e,t),a},_handleCtrlKeyClick:function(e,t){new i(e).getProperty("preventWidgetDeselect")?(this._ignoreMouseUpSelect=!0,this._deselectPrevented=!0):this.deselectNode(t,e)},_mouseEventSelectNode:function(e,t){var r=this.startTransaction();return this.selectedNodes.length>0&&!o.isControlKey(e)&&this.deselectAll(e,!0,r),e&&"mousedown"===e.type&&(this._ignoreMouseUpSelect=!0),this.selectNode(t,e,this._ignoreMouseUpSelect,r),this.endTransaction(r),!0},finishMoveSelection:function(e){this._ignoreMouseUpSelect&&this._triggerSelectionReadyEvent(e),this._ignoreMouseUpSelect=!1},_triggerReselectEvent:function(e,t){r(t).is(".nodeDragging, .nodeResizing")||this.emit("selection:reselect",{node:t,event:e})},_triggerSelectionReadyEvent:function(e){this.emit("selection:ready",{selectedNodes:this.selectedNodes,event:e})},_emitSelectionBeforeEvent:function(e,t){var r={newSelection:e,currentSelection:this.selectedNodes.concat(),eventType:t};return this.emit("selection:before",r),r.newSelection},_emitSelectionAfterEvent:function(){this.emit("selection:after",{currentSelection:this.selectedNodes.concat()})},_addSelectedNode:function(e){if(-1===this._getIndexFromSelection(e)){for(var t=e,r=-1;t&&-1===r;)t=t.nextSibling,r=this._getIndexFromSelection(t);-1!==r?this.selectedNodes.splice(r,0,e):this.selectedNodes.push(e)}},_deselectHandler:function(e){if(!e.keyCode||e.keyCode===t.ENTER||e.keyCode===t.SPACE){var n=r(e.target),i=this.deselectionSelector(),o=!1,a=!1;if(this.selectedNodes.length>=1){var s=this.selectedNodes[0],l=r(s).parents(".pagecontainer")[0];if(l){var d=!1,c=!1;if((l.scrollHeight>l.clientHeight||"scroll"===l.style.overflowY)&&(c=!0),(l.scrollWidth>l.clientWidth||"scroll"===l.style.overflowX)&&(d=!0),(c||d)&&!this.scrollbarWidth){var u=document.createElement("div");u.style.overflow="scroll",u.style.width="50px",u.style.width="50px",document.body.appendChild(u),this.scrollbarWidth=u.offsetWidth-u.clientWidth,document.body.removeChild(u)}if(c){var h=l.getBoundingClientRect(),p=h.left+l.clientLeft+l.clientWidth,g=p+this.scrollbarWidth,f=h.top+l.clientTop,m=f+l.clientHeight;e.clientX>=p&&e.clientX<=g&&e.clientY>=f&&e.clientY<=m&&(o=!0)}if(d){var b=l.getBoundingClientRect(),y=b.left+l.clientLeft,v=y+l.clientWidth,_=b.top+l.clientTop+l.clientHeight,C=_+this.scrollbarWidth;e.clientX>=y&&e.clientX<=v&&e.clientY>=_&&e.clientY<=C&&(a=!0)}}}!(n.is(i)||n.parents(i).length>0)||a||o||0!==n.closest(".dashboardAuthoringToolsPane").length||this.deselectAll(e)}},_attachDeselectHandlers:function(){if(0===this.deselectHandlers.length){var e=this._deselectHandler.bind(this);this.deselectHandlers.push(n.on(this.controller.$el,"tap",e)),this.deselectHandlers.push(n.on(this.controller.$el,"mousedown",e)),this.deselectHandlers.push(n.on(this.controller.$el,"keydown",e))}},_notifyActionHandlers:function(e){var t=this,r=this.controller.dashboardApi.getFeature("DashboardState").getUiState().authoring;this.selectedNodes.forEach((function(e){var n=t.canvas.getContent(e.id);(r&&!e.classList.contains("shapesLine")||!r&&n.getPropertyValue("showBorderInPreview"))&&e.classList.add("showBorder")}));var n=this.getActionsForSelection();n.forEach((function(r){if(r.newSelection&&r.newSelection(t.selectedNodes.concat(),e),t.previousActions){var n=t.previousActions.indexOf(r);n>-1&&t.previousActions.splice(n,1)}})),this.previousActions&&this.previousActions.forEach((function(t){return t.newSelection([],e)})),this.previousActions=n},getInteractionProperties:function(){var e=this.getActionsForSelection(),t=[];return e.forEach((function(e){var r=e.getProperties();t=t.concat(r)})),t=s.sortBy(t,"order")},getActionsForSelection:function(){var e=this,t=this.selectedNodes.map((function(t){return e.getNodeActionBySelector(t)}));return s.intersection.apply(s,t)},getNodeActionBySelector:function(e){var t=[];return this.orderedActionsBySelector.forEach((function(n){r(e).is(n.selector)&&(t=t.concat(n.action))})),t}});return d})),define("dashboard-core/js/dashboard/layout/authoring/interaction/Controller",["../../../../lib/@waca/core-client/js/core-client/ui/core/Class","underscore","../../../../lib/@waca/dashboard-common/dist/ui/AuthoringToolbar","../../../../lib/@waca/dashboard-common/dist/utils/ActionTypes","../../../util/ContentActionUtil","./Selection","../../../../app/util/EventChainLocal","jquery"],(function(e,t,r,n,i,o,a,s){return e.extend({init:function(e){this.$el=e.$el,this.dashboardApi=e.dashboardAPI,this.transaction=e.transaction,this.toolbarConfig=e.toolbarConfig,this.canvas=e.canvas,this.layoutController=e.layoutController,this.eventRouter=e.eventRouter,this.boardModel=e.boardModel,this.layout=this.boardModel&&this.boardModel.layout,this._glass=e.glass?e.glass:window.glass,this.services=e.services,this.config=e.config||{},this.gatewayUrl=e.gatewayUrl,this.toolbarItems=[],this.dynamicToolbarItems=[],this._toolbarDock=this.dashboardApi.getFeature("ToolbarDock"),this.toolbar=new r({calculateBoundingRect:!0,container:s("body"),reactToolbar:!0}),this.defaultToolbarOptions={textOnly:!1,iconOnly:!1},this.toolbarMidShow=!1,this.selectedNodes=null,this.eventRouter&&(this.eventRouter.on("widget:availableActions",this.onUpdateAvailableActions,this),this.eventRouter.on("widget:maximize",this._hideToolbar,this),this.eventRouter.on("widget:hideToolbar",this._hideToolbar,this),this.eventRouter.on("widget:deleteItem",this._deleteItem,this),this.toolbar.on("toolbar:show:before",this._toolbarShowBefore,this),this.toolbar.on("toolbar:show",this._toolbarShowAfter,this),this.toolbar.on("toolbar:hide",this._toolbarHideAfter,this));var t=(e.selectionOptions||{}).deselectionSelector;this.selectionHandler=new o({controller:this,canvas:this.canvas,transaction:this.transaction,deselectionSelector:t?t.bind(null,this.layoutController):null}),this.selectionHandler.on("selection:nodeSelected",this.onNodeSelected,this),this.selectionHandler.on("selection:nodeDeselected",this.onNodeDeselected,this),this.selectionHandler.on("selection:ready",this.onSelectionDone,this),this.selectionHandler.on("selection:reselect",this.onWidgetReselect,this),this.$el.on("keydown.InteractionController",this.onKeydown.bind(this))},isToolbarEnabled:function(){var e=this.toolbarConfig;return void 0===e||!0===e||"true"===e},applyInteractions:function(e){return this.destroyInteractions(),this.toolbarItems=[],this.dynamicToolbarItems=[],this.interactions=e,this._attachInteractions()},finishMoveSelection:function(e){this.selectionHandler.finishMoveSelection(e)},onKeydown:function(e){if(121===e.keyCode&&this.toolbar.focus())return e.stopPropagation(),!1},onPageScroll:function(e){e.target.className.indexOf("page")>-1&&(e.target.className.indexOf("pageabsolute")>-1||e.target.className.indexOf("pagecontainer")>-1)&&!this.toolbarMidShow&&this._hideToolbar()},getInteraction:function(e){var t=null;return this.interactions.find((function(r){return t=r.getInteraction(e)})),t},_attachInteractions:function(){var e=this,t=Promise.resolve();return this.interactions&&this.interactions.forEach((function(r){t=t.then((function(){return r.attachInteractions(e)}))})),t},addActionForSelector:function(e,t,r){this.selectionHandler.addActionForSelector(e,t,r)},onSelectionDone:function(e){this.selectedNodes=e.selectedNodes,this.removeDynamicToolbarAndRestoreWidgetToolbar(e),this.eventRouter&&this.eventRouter.trigger("selection:ready",e)},getSelectedNodes:function(){return this.selectedNodes?this.selectedNodes:[]},getInteractionProperties:function(){return this.selectionHandler.getInteractionProperties()},onNodeSelected:function(e){e&&e.node&&e.node._layout&&e.node._layout.onSelect()},onNodeDeselected:function(e){e&&e.node&&e.node._layout&&e.node._layout.onDeselect()},addContextualToolbar:function(e){this.addContextualToolbarToArray(e,this.toolbarItems)},addContextualToolbarToArray:function(e,r){t.find(r,(function(t){return t.name===e.name}))||r.push(e)},removeContextualToolbar:function(e){e&&(this.toolbarItems=this._removeToolbarItem(e,this.toolbarItems))},_removeToolbarItem:function(e,r){return t.reject(r,(function(t){return t.name===e.name}))},removeDynamicToolbarItems:function(){t.each(this.dynamicToolbarItems,function(e){this.removeContextualToolbar(e)}.bind(this))},removeWidgetContextToolbarItems:function(){if(this.widgetContextItems){this.widgetContextItems.onBlur&&this.widgetContextItems.onBlur();for(var e=this.widgetContextItems.items,t=0;t<e.length;t++)this.removeContextualToolbar(e[t]);this.widgetContextItems=null}},onSelectionMoveOrResize:function(){this.toolbar.hide(),this.eventRouter.trigger("widget:hideToolbar")},onSelectionDelete:function(){return this._hideToolbar()},removeDynamicToolbarAndRestoreWidgetToolbar:function(e){e.event&&new a(e.event).getProperty("preventDefaultContextBar")||(this._removeDynamicToolbarAndRestoreWidgetToolbar(e.event),this.eventRouter.trigger("widget:toolbarItems:changed"))},_updateToolbarDock:function(e){var t=e.map((function(e){return e.id}));this.toolbar.setSelectionContext(e);var r=this.dashboardApi.getFeature("ContentActions"),n=i.getContentActionList(this.dashboardApi,r,t);this._toolbarDock.updateODTState(n,t)},_removeDynamicToolbarAndRestoreWidgetToolbar:function(e){var t=e&&e.options||{flyout:!0},r=this.isToolbarEnabled()&&!!t.flyout;this.removeDynamicToolbarItems(),r&&(this._updateWidgetEditMode(this.selectedNodes,e),this._updateToolbar({nodes:this.selectedNodes,options:{isWidgetOdt:!0,addClass:["odtWidget"]}},this.toolbarItems,!0,e))},_updateWidgetEditMode:function(e,t){e&&e.length&&t&&t.target&&this.eventRouter.trigger("widget:onExitEditMode",t.target)},onUpdateAvailableActions:function(e){this.dynamicToolbarItems=[],e.toolbarOptions?t.extend(this.toolbar.options,this.defaultToolbarOptions,e.toolbarOptions):t.extend(this.toolbar.options,this.defaultToolbarOptions),t.each(e.actions,function(e){this.addContextualToolbarToArray(e,this.dynamicToolbarItems)}.bind(this));var r={nodes:e.targetNode?[e.targetNode]:this.selectedNodes};return this._updateToolbar(t.extend(r,e),this.dynamicToolbarItems,!0)},_updateToolbar:function(e,r,n,i){var o=e.nodes,a=t.map(o,(function(e){return e.id})),s=e&&e.options&&e.options.isWidgetOdt&&this._getContentActionList(a),l=s?r.concat(s):r,d=e.labels,c=o&&o.length>0||e.targetBounds,u=l.length>0||d&&d.length>0||e.title&&e.title.length>0;return c&&u?this._createToolbarShowTimer(e,l,n,i):this._hideToolbar()},_createToolbarShowTimer:function(e,t,r,n){var i=this,o=void 0;return!n||!n.target||this._shouldUpdateToolbar(n)?(r&&this._clearToolbarUpdateTimer(),this.toolbarUpdateTimer||(this.shownToolbarItems=t,o=new Promise((function(r,n){try{var o=e&&e.options&&e.options.isWidgetOdt;i._toolbarDock&&t.length&&o?i.toolbarUpdateTimer=setTimeout(function(){try{this._updateToolbarDock(e.nodes),r()}catch(e){n(e)}}.bind(i),100):i.toolbarUpdateTimer=setTimeout(function(){this._showContextualToolbar(e,t).then(r,n)}.bind(i),100)}catch(e){n(e)}})))):o=Promise.resolve(),o},_shouldUpdateToolbar:function(e){return!!this.isToolbarEnabled()&&(!e.target.isContentEditable&&!s(e.target).data("isContentEditable")&&!e.target.tagName.toLowerCase().match(/input|textarea|select/gim))},_clearToolbarUpdateTimer:function(){this.toolbarUpdateTimer&&(clearTimeout(this.toolbarUpdateTimer),this.toolbarUpdateTimer=null)},_hideToolbar:function(e){var t=this;this.shownToolbarItems=null,this._clearToolbarUpdateTimer(),e&&e.node&&e.eventName&&e.func?e.node.off(e.eventName,e.func):this.$el.find(".page.pageabsolute, .page.pagecontainer").off("scroll.BaseController");var r=this.toolbar.hide();return r.then((function(){t.eventRouter.trigger("widget:hideToolbar:done")})),r},_deleteItem:function(e){this.boardModel.removeLayouts([e.widgetId])},_toolbarShowBefore:function(e){this.toolbarMidShow=!0,this.eventRouter.trigger("widget:toolbar:show:before",e)},_toolbarShowAfter:function(e){this.toolbarMidShow=!1,this.eventRouter.trigger("widget:toolbar:show:after",e)},_toolbarHideAfter:function(e){this.toolbarMidShow=!1,this.eventRouter.trigger("widget:toolbar:hide:after",e)},handleScrollForGridWidgets:function(e){var t=this;if(e&&e.targetNode&&e.targetNode.classList&&e.targetNode.classList.contains&&e.targetNode.classList.contains("grid-view")){var r=this._findScrollableArea(e.targetNode);if(!r)return;var n=s(r),i={node:n,eventName:"scroll.virtualScroll",func:this._hideToolbarForGridWidgets};n.on("scroll.virtualScroll",(function(){t._hideToolbarForGridWidgets(i)}))}},_findScrollableArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.id&&e.id.match&&e.id.match("scrollableArea")?e:!(!e.children||!e.children.length)&&this._findScrollableArea(e.children[0])},_hideToolbarForGridWidgets:function(e){this._hideToolbar(e)},_showContextualToolbar:function(e,t){this.toolbarUpdateTimer=null;var r=e.nodes,i=e.labels;this.eventRouter.trigger("textToolbar:hide");var o=function(){return delete this.toolbar.options.placement,e.placement&&(this.toolbar.options.placement=e.placement),this.toolbar.setName(e.toolbarName),this.toolbar.setLabels({title:e.title,labels:i,tooltipContext:e.tooltipContext,tooltipRenderer:this.dashboardApi.getFeature("TooltipRenderer.react")}),this.$el.find(".page.pageabsolute, .page.pagecontainer").on("scroll.BaseController",this.onPageScroll.bind(this)),!e.title&&!i||e.options.isWidgetOdt||this.handleScrollForGridWidgets(e),this.toolbar.show()}.bind(this);if(this.toolbar.clearHistory(),this.toolbar.clearItems(),t.forEach((function(e){void 0===e.order&&(e.order=n[e.name])})),this.toolbar.addItems(t.sort((function(e,t){return e.order&&t.order||!e.order&&!t.order?e.order-t.order:e.order&&!t.order?-1:!e.order&&t.order?1:void 0}))),this.toolbar.setOptions(e.options),e.targetBounds)return void 0===this.toolbar.options.preferredVertical&&(this.toolbar.options.preferredVertical=!1),this.toolbar.setSelectionBounds(e.targetBounds),o();var a=s(r).is(".widget, .pagegroup");return this.toolbar.options.iconOnly=a,this.toolbar.options.preferredVertical=a,this.toolbar.setSelectionContext(r),o()},onWidgetReselect:function(e){if(this.toolbar.isOpened){if(0===this.toolbar._viewStack.length)return this.toolbar.hide()}else this.removeDynamicToolbarAndRestoreWidgetToolbar(e)},destroyInteractions:function(){this.selectionHandler&&this.selectionHandler.disableInteraction(),this.interactions&&(this.interactions.forEach((function(e){e.destroy&&e.destroy()})),this.interactions=null)},destroy:function(){this.selectionHandler&&(this.selectionHandler.off(),this.destroyInteractions(),this.selectionHandler=null),this.eventRouter&&(this.eventRouter.off("widget:availableActions",this.onUpdateAvailableActions,this),this.eventRouter.off("widget:maximize",this._hideToolbar,this),this.eventRouter.off("widget:hideToolbar",this._hideToolbar,this),this.toolbar.off("toolbar:show:before",this._toolbarShowBefore,this),this.toolbar.off("toolbar:show",this._toolbarShowAfter,this),this.toolbar.off("toolbar:hide",this._toolbarHideAfter,this)),this.$el.off("keydown.InteractionController"),this.toolbar.remove()},_getContentActionList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.dashboardApi.getFeature("ContentActions"),r=i.getContentActionList(this.dashboardApi,t,e);return r.length?r:this.canvas.getContentActionList(e)}})})),define("dashboard-core/js/api/core/RuntimeEnvironment",["../../lib/@waca/core-client/js/core-client/utils/ClassFactory","../../lib/@waca/core-client/js/core-client/ui/core/Events","../impl/Dashboard","../deprecated/CanvasAPI","../../dashboard/layout/authoring/interaction/Controller","../../dashboard/model/BoardModelFactory","../../dashboard/widgets/WidgetRegistry","jquery","underscore"],(function(e,t,r,n,i,o,a,s,l){return function(){function d(e){_classCallCheck(this,d),this.bootStrapFeatures=e,this.logger=this.bootStrapFeatures.Logger.getAPI(),this.productVersion=this.bootStrapFeatures.DashboardSettings.getAPI().get("productVersion")}return d.prototype._getCSSLinks=function(e){var t=document.getElementsByTagName("link"),r={};Array.from(t).forEach((function(e){r[e.getAttribute("href")]=!0,r[e.getAttribute("href").split("?")[0]]=!0}));var n=[];return e.get("applicationCssStyles").forEach((function(e){r[e]||n.push(e)})),n},d.prototype.getRuntimeEnvironment=function(d,c){var u=this;return Promise.all(["dashboard-core/js/dashboard/services/ServicesHelper","dashboard-core/js/extension/Extensions","dashboard-core/js/dashboard/loader/BoardLoaderHelper"].map((function(t){return e.loadModule(t)}))).then((function(e){var h=e[0],p=e[1],g=e[2],f=new t,m=u._serviceHelperClass||h,b=u._extensionsHelperClass||p,y=u._boardModelHelperClass||g,v=null,_=void 0,C={getDeprecatedCanvasWhenReady:function(){return v.then((function(){return _}))},getDeprecatedCanvas:function(){return _},canAuthor:function(){return!1},getBoardInfo:function(){return{type:"exploration"}},getContent:function(){return{}},setPermissions:function(){},setSavedInstance:function(){}},w=new a,P=r.create({glass:u.bootStrapFeatures.Glass.getAPI(),settings:u.bootStrapFeatures.DashboardSettings.getAPI(),view:C,eventRouter:f,widgetRegistry:w,profiles:d&&d.profiles}),S=P.getInternalAPI(),I=P.getAPI(),L=new m({bootStrapFeatures:u.bootStrapFeatures,logger:u.logger,dashboardAPI:I,internalDashboardAPI:S}),A=L.createServices();P.setServices(A.serviceRegistry),P.setFeatureLoader(A.featureLoader);var M=void 0,x=void 0;if(d&&(d.spec||d.assetId))M=d.spec,x=d.assetId;else{if("function"!=typeof c)throw new Error("A board spec is required.");M=c()}var E=new b(I),T=void 0,D={internalDashboardAPI:S,dashboardApi:I,services:A,serviceRegistry:A.serviceRegistry,eventRouter:f,cssStyles:u._getCSSLinks(u.bootStrapFeatures.DashboardSettings.getAPI()),widgetRegistry:w,dashboardFeatureLoader:A.featureLoader};return v=w.initialize(I).then((function(){T=o.create({dashboardAPI:I,glassFeature:I.getFeature("Glass"),productVersion:u.productVersion,boardSpec:M,extensions:E,stringResources:I.getDashboardCoreSvc(".StringResources"),eventRouter:f,logger:u.logger,boardId:x,widgetRegistry:w})})).then(E.load.bind(E)).then((function(){D.boardModelExtensions=E.getBoardModelExtensions(),D.layoutExtensions=E.getLayoutViewExtensions()||{},D.canvasExtensions=E.getCanvasExtensions()||[]})).then((function(){return T.createBoardModel()})).then((function(e){D.boardModel=e.boardModel,C.boardModel=D.boardModel})).then((function(){return L.createRuntimeServices({boardModel:D.boardModel,widgetRegistry:w,extensions:E,dashboardApi:I})})).then((function(){return _=l.extend(new n,A.featureLoader.getFeature("Canvas")),D.canvas=_,D.internalCanvas=A.featureLoader.getFeature("Canvas.internal"),u.interactionController=new i({dashboardAPI:D.dashboardApi,toolbarConfig:D.dashboardApi.getAppConfig("toolbar"),transaction:D.dashboardApi.getFeature("Transaction"),canvas:_,services:D.serviceRegistry,glassContext:D.glassContext,boardModel:D.boardModel,layoutController:null,eventRouter:D.eventRouter,$el:s("body"),appSettings:{}}),new y(D.dashboardApi).createBoardServices({boardModel:D.boardModel}),D}))}))},d}()})),define("dashboard-core/js/api/deprecated/LegacyViewControllersAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getLayoutController=function(){},e.prototype.getWidgetLoader=function(){},e.prototype.destroy=function(){},e}()})),define("dashboard-core/js/view/features/content/contentViewDom/api/ContentViewDomAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.cloneNode=function(){},e.prototype.getNode=function(){},e.prototype.getBoundingClientRect=function(){},e}()})),define("dashboard-core/js/view/features/content/contentViewDom/api/impl/ContentViewDomImpl",["../ContentViewDomAPI","../../../../../../lib/@waca/dashboard-common/dist/core/APIFactory"],(function(e,t){return function(){function r(e){_classCallCheck(this,r),this.domNode=e}return r.prototype.getAPI=function(){return this._api||(this._api=t.createAPI(this,[e])),this._api},r.prototype.cloneNode=function(){return this.domNode.cloneNode()},r.prototype.getNode=function(){return this.domNode},r.prototype.getBoundingClientRect=function(){var e=this.domNode.getBoundingClientRect();return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,height:e.height,width:e.width}},r}()})),define("dashboard-core/js/dashboard/api/FilterAPI",["../../lib/@waca/core-client/js/core-client/ui/core/Class","underscore"],(function(e,t){var r=["id","sourceId","dataType","usage","origin","scope","hierarchyUniqueNames","tupleSet","exclude"];return function(){function e(t,r){_classCallCheck(this,e),this.controller=t,this.dashboardAPI=r}return _createClass(e,null,[{key:"API_METHODS",get:function(){return["addFilter","editFilter","removeFilter","removeFilters","clearFilters"]}}]),e.prototype.addFilter=function(e,t){return this._updateFilter("update",e,t)},e.prototype.editFilter=function(e,t){return this._updateFilter("replace",e,t)},e.prototype.removeFilter=function(e,t){var r=this._getPageContextApi(),n=this._getPageContextSelector(e,t),i=r.getPageContextItem(n);if(i){var o=this._getDeleteItemSpec(i,t),a=this._getFilterSpec("delete",t);return r.updateFilterContext(o,a,t)}return!1},e.prototype.removeFilters=function(e,t){return this._getPageContextApi().deletePageContextItems(e,t)},e.prototype.clearFilters=function(e,t){return this._getPageContextApi().clearPageContextItemValues(e,t)},e.prototype._updateFilter=function(e,n,i){var o=this;return this._getFilterMetadataColumn(n.sourceId,n.itemId).then((function(n){var a=o._getFilterItemSpec(n,i),s=o._getFilterSpec(e,i),l=o._getPageContextApi().updateFilterContext(a,s,i);return t.pick(l,r)}))},e.prototype._getPageContextApi=function(){return this.dashboardAPI.getFeature("PageContextService").getPageContext()},e.prototype._getSources=function(){var e=this.dashboardAPI.getFeature("dataSources.deprecated").getSourcesCollection();return Promise.resolve(e?e.getSources():[])},e.prototype._getSourceById=function(e){return this._getSources().then((function(r){return t.find(r,(function(t){return t.getId()===e}))}))},e.prototype._getFilterMetadataColumn=function(e,t){return this._getSourceById(e).then((function(e){return e.getModule().then((function(e){return e.getMetadataColumn(t)}))}))},e.prototype._getPageContextSelector=function(e,t){return{itemId:e.itemId,scope:t&&t.scope||"global"}},e.prototype._getFilterItemSpec=function(e,t){return{sourceId:e.getSourceId(),itemId:e.getId(),itemName:e.getLabel(),dataType:e.getDataType(),usage:e.getType(),isHierarchy:e.isHierarchy(),isNamedSet:e.isNamedSet(),scope:t&&t.scope||"global",openViewOnLoad:t&&t.openViewOnLoad||!1}},e.prototype._getDeleteItemSpec=function(e,t){return{item:e,scope:t&&t.scope||"global",origin:"filter"}},e.prototype._getFilterSpec=function(e,r){var n={command:e||"update",exclude:!(!r||!r.exclude)};return r&&r.values?n=t.extend(n,{values:r.values}):r&&r.condition&&(n=t.extend(n,{condition:r.condition})),n},e}()})),define("dashboard-core/js/canvas/DeprecatedCanvas",["../lib/@waca/dashboard-common/dist/core/APIFactory","../api/deprecated/CanvasAPI","../lib/@waca/core-client/js/core-client/utils/Deferred","../dashboard/api/FilterAPI","underscore"],(function(e,t,r,n,i){return function(){function o(e,t,r,i,a){_classCallCheck(this,o),this.widgetLoader=a,this.boardModel=t,this.canvasController=r,this.layoutController=i,this.dashboardAPI=e,this.controller=this.canvasController,this.filterApi=new n(this.canvasController,this.dashboardAPI)}return o.prototype.getAPI=function(){return this.api||(this.api=e.createAPI(this,[t],{deprecatedPropList:["controller"]})),this.api},o.prototype.getWidgetsWhenRendered=function(){return this.dashboardAPI.waitTillWidgetsRendered.apply(this.dashboardAPI,arguments)},o.prototype.deselectAllWidgets=function(){return this.dashboardAPI.deselectAllWidgets.apply(this.dashboardAPI,arguments)},o.prototype.destroy=function(){this.widgetLoader=null,this.boardModel=null,this.canvasController=null,this.layoutController=null,this.dashboardAPI=null,this.controller=null,this.filterApi=null},o.prototype.getFilters=function(){return this.filterApi},o.prototype.getSelectedWidgets=function(){var e=this,t=this.layoutController.getSelectedWidgets(),r=[];return t.forEach((function(t){var n=e.getWidget(t.id);n&&r.push(n)})),r},o.prototype.getWidgetWhenReady=function(e){return this.widgetLoader?this.widgetLoader.getWidgetAsync(e).then((function(e){if(e)return e.getAPI()})):Promise.reject(new Error("No longer alive!"))},o.prototype.getWidget=function(e){if(this.widgetLoader){var t=this.widgetLoader.getWidget(e);if(t)return t.getAPI()}},o.prototype.getWidgets=function(){var e=void 0,t=[],r=void 0;for(e in this.boardModel.widgetInstances)(r=this.getWidget(e))&&t.push(r);return t},o.prototype.addFragment=function(e,t,r){void 0===r&&(r=null),this.layoutController.setPreferredAddOptions(e);var n=this.boardModel.addFragment(e,t||"api",r),i=n&&n.value&&n.value.parameter;return i&&i.model&&i.model.layout&&i.model.layout.id},o.prototype.hasMaximizedWidget=function(){return this.canvasController.layoutController.hasMaximizedWidget()},o.prototype.removeWidget=function(e,t){this.boardModel.removeWidget(e,t||"api")},o.prototype.selectWidget=function(e,t){var n=new r;return this.layoutController.whenWidgetRenderComplete(e).done(function(e){var r=this.layoutController.interactionController.selectionHandler;t&&!t.multiSelect&&r.deselectAll(),r.selectNode(e.domNode,t),n.resolve()}.bind(this)),n.promise},o.prototype.selectWidgets=function(e,t){t=t||{},t=i.extend(t,{multiSelect:!0});var r=[];for(var n in e)r.push(this.selectWidget(e[n],t));return Promise.all(r)},o.prototype.getLayout=function(e){var t=this.canvasController.layoutController.getView(e);if(t&&t.view)return t.view.getAPI()},o.prototype.getFeature=function(e){return this.canvasController.getFeature(e)},o.prototype.registerFeature=function(e,t){return this.canvasController.registerFeature(e,t)},o}()})),define("dashboard-core/js/dashboard/layout/authoring/interaction/InteractionFactory",["../../../../lib/@waca/core-client/js/core-client/ui/core/Class"],(function(e){var t=e.extend({init:function(e,r){t.inherited("init",this,arguments),this.controller=e,this.logger=r},getInteraction:function(e){var t=this._getContext();return this._getDelegate(e,t)},getInteractions:function(e){return this._buildInteractions(e)},_getContext:function(){return this.controller.layoutController},_getConfigValue:function(e){var t=this.controller.config.interactions;if(t)return t[e]},_buildInteractions:function(e){var t=this,r=this._getContext(),n={},i=Promise.resolve(),o=function(o){e.hasOwnProperty(o)&&(i=i.then((function(){return t._getDelegate(o,r)})).then((function(r){if(r){var i=new(0,e[o])(t.controller);n[o]=new WrappedInteraction(i,r)}return r})))};for(var a in e)o(a);return i.then((function(){return n}))},_getDelegate:function(e,t){var r=this,n=this._getConfigValue(e);return void 0===n||"true"===n||!0===n?Promise.resolve(new DefaultDelegate):"false"===n||!1===n?Promise.resolve():new Promise((function(e,r){require([n],(function(r){e(new r(t))}),(function(e){r(e)}))})).catch((function(e){return r.logger.warn(e),new DefaultDelegate}))}});return t}));var WrappedInteraction=function(){function e(t,r){_classCallCheck(this,e),this.wrapped=t,this.delegate=r}return e.prototype.newSelection=function(){this.delegate.isEnabled()&&this.wrapped&&this.wrapped.newSelection.apply(this.wrapped,arguments)},e.prototype.getProperties=function(){return this.delegate.isEnabled()&&this.wrapped&&this.wrapped.getProperties?this.wrapped.getProperties.apply(this.wrapped,arguments):[]},e}(),DefaultDelegate=function(){function e(){_classCallCheck(this,e)}return e.prototype.isEnabled=function(){return!0},e}();define("text!dashboard-core/js/dashboard/layout/authoring/interaction/SelectionEdges.html",[],(function(){return'<div class="resizeEdge resizeEdgeBorder borderTop"></div>\n<div class="resizeEdge resizeEdgeBorder borderRight"></div>\n<div class="resizeEdge resizeEdgeBorder borderBottom"></div>\n<div class="resizeEdge resizeEdgeBorder borderLeft"></div>\n'})),define("dashboard-core/js/dashboard/layout/authoring/interaction/SelectionAction",["../../../../lib/@waca/core-client/js/core-client/ui/core/Class","jquery","text!./SelectionEdges.html"],(function(e,t,r){return e.extend({newSelection:function(e){this.selectedNodes&&this._removeBorders(this.selectedNodes),this.selectedNodes=e,this._addBorders(e)},_removeBorders:function(e){t(e).removeClass("resize").children(".resizeEdge").remove()},_addBorders:function(e){t(e).filter(".showBorder").append(r)}})})),define("text!dashboard-core/js/dashboard/layout/authoring/interaction/ExpandEdges.html",[],(function(){return'<div edge="tr" class="resizeEdge topRight">\n\t<div class="resizePoint expandHandle">\n\t\t<div class="svgContainer">\n\t\t\t<div class="expand">\n\t\t\t\t<svg class="svgIcon" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false">\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#{{!it.expandIcon}}"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'})),define("dashboard-core/js/dashboard/layout/authoring/interaction/ExpandAction",["../../../../lib/@waca/core-client/js/core-client/ui/core/Class","jquery","doT","text!./ExpandEdges.html","../../../../app/nls/StringResources"],(function(e,t,r,n,i){return e.extend({init:function(e){this.controller=e},newSelection:function(e){var o=this.controller.dashboardApi.getFeature("Icons").getIcon("maximize"),a=r.template(n)({expandIcon:o.id});t(e).filter(".maximizable.showBorder").append(a).find(".expandHandle").attr("title",i.get("expandHandle")).on("primaryaction",this.onExpand.bind(this))},onExpand:function(e){var r=t(e.target).closest(".maximizable");if(r.length){var n=r[0];n._layout&&n._layout.onMaximize()}}})})),define("dashboard-core/js/dashboard/layout/authoring/interaction/strategy/Common",["../../../../../lib/@waca/core-client/js/core-client/ui/core/Class","./../InteractionFactory","./../SelectionAction","./../ExpandAction"],(function(e,t,r,n){var i=e.extend({init:function(e,t){i.inherited("init",this,arguments),this.logger=e,this._dashboardApi=t},destroy:function(){if(this._interactions){for(var e in this._interactions)if(this._interactions.hasOwnProperty(e)){var t=this._interactions[e].wrapped;t&&t.destroy&&t.destroy()}this._interactions=null}},getInteraction:function(e){var t=this._interactions[e];return t&&t.wrapped},attachInteractions:function(e){var t=this;return this._getInteractions(e).then((function(r){t._interactions=r,t._attachInteractions(e,r)}))},_attachInteractions:function(e,t){var r=t.selection,n=t.expand;(r&&(e.addActionForSelector(r,".page .widget"),e.addActionForSelector(r,".page .pagegroup")),n)&&(!(e.config&&!0===e.config.focusModeDisabled)&&e.addActionForSelector(n,".page .widget.liveWidget:not(.eventGroupMode *)"))},_getInteractions:function(e){var i={selection:r,expand:n};return new t(e).getInteractions(i)}});return i})),define("dashboard-core/js/dashboard/layout/LayoutController",["../../lib/@waca/core-client/js/core-client/ui/core/Class","../../view/features/content/contentViewDom/api/impl/ContentViewDomImpl","underscore","jquery","../../app/util/EventChainLocal","./LayoutHelper","../../lib/@waca/dashboard-common/dist/core/APIFactory","../../api/deprecated/CanvasAPI","../../canvas/DeprecatedCanvas","./authoring/interaction/Controller","./authoring/interaction/strategy/Common","../../lib/@waca/core-client/js/core-client/utils/Deferred","../../lib/@waca/core-client/js/core-client/utils/ClassFactory"],(function(e,t,r,n,i,o,a,s,l,d,c,u,h){var p=null;return p=e.extend([],{init:function(e){p.inherited("init",this,arguments),this.dashboardApi=e.dashboardApi,this._settings=this.dashboardApi.getFeature("DashboardSettings");var t=this._settings.get("applicationSettings").options;this.config=t&&t.config||{},this.contentFeatureLoader=e.contentFeatureLoader,this.services=e.services,this.dashboardApi=e.dashboardApi,this.canvas=e.canvas,this.transaction=this.dashboardApi.getFeature("Transaction"),this.contentTypeRegistry=this.dashboardApi.getFeature("ContentTypeRegistry"),this.isAuthoring="authoring"===this.dashboardApi.getMode(),this.id=r.uniqueId("layoutController"),this.$el=e.$el,this.viewsMap={},this.boardModel=e.boardModel,this.interactionControllerDfd=new u,this.widgetLoader=e.widgetLoader,this.canvasController=e.canvasController,this.logger=this.dashboardApi.getFeature("Logger"),this.glass=this.dashboardApi.getFeature("Glass"),this.colorsService=this.dashboardApi.getFeature("Colors"),this.colorsService&&(this.colorsService.on("theme:changed",this.onThemeChange,this),this.colorsService.on("colorSet:changed",this.onColorSetChanged,this)),this.topLayoutModel=this.boardModel.layout,this.topLayoutModel.on("change:layoutPositioning",this._onLayoutPositioning,this),this._setupViewModules(e.layoutExtensions||{}),this.canvasNotifier=e.canvasNotifier,this.interactionController=null,this.eventRouter=e.eventRouter,this.eventRouter&&(this.eventRouter.on("canvas:selectWidget",this.selectWidget,this),this.eventRouter.on("canvas:deselectWidget",this.deselectWidget,this),this.eventRouter.on("scene:select",this.deselectAllWidgets,this),this.eventRouter.on("scene:next",this.deselectAllWidgets,this),this.eventRouter.on("scene:previous",this.deselectAllWidgets,this)),this.gatewayUrl=e.gatewayUrl,this.cdnUrl=e.cdnUrl,this._init(),this.deprecatedCanvas=new l(this.dashboardApi,this.boardModel,this.canvasController,this,this.widgetLoader)},initialize:function(){return this.pageReady},getDeprecatedCanvas:function(){return this.mergedCanvasAPI||(this.mergedCanvasAPI=r.extend(this.deprecatedCanvas.getAPI(),this.canvas)),this.mergedCanvasAPI},_setupViewModules:function(e){this.consumeViews=e.consumeViews||{},this.authoringViews=e.authoringViews||{}},getCurrentSubViewId:function(){return this.getView(this.topLayoutModel.id).view.getSelectedSubViewId()},getCurrentSubViewTitle:function(){return this.getView(this.topLayoutModel.id).view.getSelectedSubViewTitle()},_animationHelper:function(e,t,r,n){return new Promise((function(i){var o=function t(){e.style.transition="none",e.removeEventListener("transitionend",t),i()};e.addEventListener("transitionend",o),e.style.transition=t+" "+n+"ms",e.style[t]=r,Promise.delay(n+100).then(o)}))},_init:function(){this._interactionControllerCreationPromise=this._createInteractionController().then(function(){var e=this._getTopViewElement()[0];e&&n(e).toggleClass("authoringMode",this.isAuthoring)}.bind(this)),n(window).on("resize.layoutController"+this.id,this.onResize.bind(this)),this.fnOnContextMenu=this.onContextMenu.bind(this),window.oncontextmenu=this.fnOnContextMenu},createLayoutModules:function(){var e=this;this.pageReady=Promise.all([this._interactionControllerCreationPromise,this.createLayoutModule(this.topLayoutModel.id).then((function(e){if(e)return e.renderContent()}))]),this.onPageRenderComplete=this.whenPageRenderComplete(),this.onPageRenderComplete.then((function(){var t=e.getTopLayoutView();t&&t.$el.attr("data-render","renderComplete")}))},_getInteractionControllerInteractionModules:function(){var e=void 0;return e=this.isAuthoring&&!this.isEventGroupMode?["dashboard-core/js/dashboard/layout/authoring/interaction/strategy/Authoring"]:[],Promise.all(e.map((function(e){return h.loadModule(e)})))},_shouldEnableInteractions:function(){return!1!==this.dashboardApi.getAppConfig("enableInteractions")},_createInteractionController:function(){var e=this;return!this._shouldEnableInteractions()||this.interactionController?Promise.resolve():this._loadInteractionControllerConfig().then((function(t){var r=new d({services:e.services,config:e.config,dashboardAPI:e.dashboardApi,toolbarConfig:e.dashboardApi.getAppConfig("toolbar"),transaction:e.transaction,canvas:e.canvas,boardModel:e.boardModel,layoutController:e,eventRouter:e.eventRouter,$el:e.$el,gatewayUrl:e.gatewayUrl,cdnUrl:e.cdnUrl,selectionOptions:t});return e.dashboardApi.getFeature("internal").registerDashboardSvc("InteractionController.internal",r),e.defaultInteractions=[new c(e.logger,e.dashboardApi)],e._setInteractionController(r),e._updateInteractionControllerInteractions()}))},_setInteractionController:function(e){this.interactionController=e,this.interactionControllerDfd.resolve(e)},getInteractionController:function(){return this.interactionControllerDfd.promise},_loadInteractionControllerConfig:function(){var e=(this.dashboardApi.getAppConfig("selection")||{}).deselectionSelector;return e?new Promise((function(t,r){require([e],t,r)})).then((function(e){return{deselectionSelector:e}})):Promise.resolve()},_updateInteractionControllerInteractions:function(){var e=this;return this.interactionController?this._getInteractionControllerInteractionModules().then((function(t){var r=t.map((function(t){return new t(e.logger)})),n=e.defaultInteractions.concat(r);return e.interactionController.applyInteractions(n).then((function(){e.dashboardApi.getFeature(".LifeCycleManager").invokeLifeCycleHandlers("dashboard.layout.interactions.ready")}))})):Promise.resolve()},changeToConsumeMode:function(){var e=this;return this.isAuthoring=!1,this.isEventGroupMode=!1,this._updateInteractionControllerInteractions().then((function(){e.removeAuthorModeFromLayout(e.topLayoutModel.id),e._getTopViewElement().removeClass("authoringMode").removeClass("eventGroupMode")}))},removeAuthorModeFromLayout:function(e){var t=this.topLayoutModel.findModel(e),r=n("#"+t.id,this.$el)[0];if(r&&r._layout&&r._layout.authorHelper&&(r._layout.authorHelper.destroy(),r._layout.authorHelper=void 0,r._layout.authorViewManager&&(r._layout.authorViewManager.destroy(),r._layout.authorViewManager=void 0)),t.items)for(var i=0,o=t.items.length;i<o;i++)this.removeAuthorModeFromLayout(t.items[i].id)},changeToAuthorMode:function(e){var t=this;return this.isAuthoring=!0,this.isEventGroupMode=!1,this.canvasNotifier=e.canvasNotifier,this.addAuthorModetoLayout(this.topLayoutModel.id,null).then((function(){return t._getTopViewElement().addClass("authoringMode").removeClass("eventGroupMode"),t._updateInteractionControllerInteractions()}))},changeToEventGroupMode:function(){var e=this;return this.isAuthoring=!0,this.isEventGroupMode=!0,this._updateInteractionControllerInteractions().then((function(){e.removeAuthorModeFromLayout(e.topLayoutModel.id),e._getTopViewElement().removeClass("authoringMode").addClass("eventGroupMode")}))},_getTopViewElement:function(){return this.$el.find("#"+this.topLayoutModel.id)},addAuthorModetoLayout:function(e,t){var r=this,i=this.topLayoutModel.findModel(e),o=n("#"+this.modelIdToNodeId(e),this.$el)[0],a=o&&o._layout;if(!a&&!this._hasConsumeLayout(i))return this.createLayoutModule(e,t).then((function(e){return e.renderContent()}));if(!a||a.authorHelper)return Promise.resolve();var s={services:this.services,config:this.config,logger:this.logger,glass:this.glass,settings:this._settings,canvas:this.canvas,dashboardApi:this.dashboardApi,model:i,parentLayout:t,layoutController:this,canvasNotifier:this.canvasNotifier,consumeView:a,widgetChromeEventRouter:a.widgetChromeEventRouter,eventRouter:this.eventRouter},l=this._getLayoutModule(i,s);return h.loadModule(l.sAuthorHelper).then((function(e){new e(s),a.renderContent();var t=i.items;if(t&&!a.preventAuthoringForChildren){for(var n=[],o=0,l=t.length;o<l;o++)n.push(r.addAuthorModetoLayout(t[o].id,a));return Promise.all(n)}}))},getView:function(e){return this.viewsMap[e]},markViewAsReady:function(e){this.viewsMap[e.id]&&this.viewsMap[e.id].viewReadyDeferred.resolve(e)},createLayoutModule:function(e,t,r){if(this.viewsMap[e]&&this.viewsMap[e].view){var i=this.viewsMap[e].viewReady;return t&&i.then(function(){var r=this.modelIdToNodeId(e);this.viewsMap[e].view.parentLayout=t,n(t.domNode).find("#"+r).replaceWith(this.viewsMap[e].view.domNode)}.bind(this)),i}var o=new u,a=this.topLayoutModel.findModel(e),s={services:this.services,config:this.config,canvas:this.canvas,logger:this.logger,glass:this.glass,settings:this._settings,content:this.canvas.getContent(e),dashboardApi:this.dashboardApi,eventRouter:this.eventRouter,model:a,layoutController:this,canvasNotifier:this.canvasNotifier,parentLayout:t,additionalWidgetData:r,contentFeatureLoader:this.contentFeatureLoader},l=this._getLayoutModule(a,s),d=l.sPageLayout,c=l.sAuthorHelper;this.viewsMap[e]={viewReadyDeferred:o,viewReady:o.promise};var p=void 0;if(d){var g=["dashboard-core/js/app/EventRouter"];c&&g.push(c),p=Promise.all([h.loadModule(d),Promise.all(g.map((function(e){return h.loadModule(e)})))]).then(function(t){var r=s.model.getParent();r&&(s.parentLayout=this.getLayoutView(r.id));var n=t[0],i=t[1][0],o=t[1][1];("widget"===a.type||this.contentTypeRegistry.isTypeRegistered(a.type))&&(s.widgetChromeEventRouter=new i);var l=new n(s);return o&&(s.consumeView=l,new o(s)),this.viewsMap[e].view=l,l.setLoading(!0),l}.bind(this))}else p=Promise.resolve();return p},removeView:function(e){this.viewsMap&&delete this.viewsMap[e.model.id]},_hasConsumeLayout:function(e){var t=null;if("widget"===e.type||"appwidget"===e.type){var r=this.boardModel.getWidgetModel(e.id),n=r&&r.type;t=this.widgetLoader.widgetRegistry[n]&&this.widgetLoader.widgetRegistry[n].layoutConsumeView}else t=!0;return!!t},_getLayoutModule:function(e,t){var r=void 0,n=null;return"widget"===e.type||"appwidget"===e.type?n=this._getWidgetLayoutModule(e,t):((r=this.consumeViews[e.type])||(r="dashboard-core/js/dashboard/layout/views/LayoutBaseView"),n={sPageLayout:r,sAuthorHelper:this.isAuthoring?this.authoringViews[e.type]||"dashboard-core/js/dashboard/layout/authoring/views/LayoutBaseView":void 0}),n},_getWidgetLayoutModule:function(e,t){var r=this.boardModel.getWidgetModel(e.id);t.widgetModel=r;var n=r&&r.type;t.widgetRegistry=this.widgetLoader.widgetRegistry[n];var i=t.widgetRegistry&&t.widgetRegistry.layoutConsumeView,o=null;return this.isAuthoring&&(i||(i="dashboard-core/js/dashboard/layout/views/Widget"),t.widgetRegistry&&(o=t.widgetRegistry.layoutAuthoringView)),{sPageLayout:i,sAuthorHelper:o}},onThemeChange:function(e){e.value!==e.prevValue&&this.onResize({reRender:!0}),this.eventRouter.trigger("properties:refreshPane",{focusSelector:".dropDowntheme"})},_onLayoutPositioning:function(e){if("UndoRedoController"===e.sender)this.eventRouter.trigger("properties:refreshPane");else{var t=this.topLayoutModel.findDescendantsWithType("genericPage"),r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if((n=t.next()).done)break;i=n.value}i.set({layoutPositioning:e.value},{payloadData:e.data,sender:this.id})}}},onColorSetChanged:function(){this.colorsService.makeSureColorIsValidInModel({model:this.topLayoutModel,propertyName:"css",offset:2,valuePrefix:"fill-"}),this.colorsService.makeSureColorIsValidInModel({model:this.topLayoutModel,propertyName:"fillColor",offset:2}),this.colorsService.makeSureColorIsValidInModel({model:this.topLayoutModel,propertyName:"tabTextColor",offset:1}),this.colorsService.makeSureColorIsValidInModel({model:this.topLayoutModel,propertyName:"tabSelectedLineColor",offset:1}),this.colorsService.makeSureColorIsValidInModel({model:this.topLayoutModel,propertyName:"tabBackgroundColor",offset:1})},onResize:function(e){if(this.$el.is(":visible")){var t=this.getTopLayoutView();t&&t.onResize&&t.onResize(e)}},getTopLayoutView:function(){return this.getLayoutView(this.topLayoutModel.id)},getTopLayoutViewWhenReady:function(){return this.getLayoutViewWhenReady(this.topLayoutModel.id)},getSelectedNodes:function(){return this.interactionController.getSelectedNodes()},getSelectedWidgets:function(){var e=this.boardModel.getSelectedLayout(),t=this.topLayoutModel.findModel(e);return t?t.getSelectedWidgets():[]},getLayoutContentContainer:function(){return o.getLayoutContentContainer(this.topLayoutModel.id,null,this.dashboardApi)},getLayoutContentContainerForDropTarget:function(e){return o.getLayoutContentContainerForDropTarget(e,this.topLayoutModel,this.dashboardApi)},getLastVisiblePage:function(){return o.getLastVisiblePage(this.topLayoutModel.id,null,this.dashboardApi)},setPreferredAddOptions:function(e){return o.setPreferredAddOptions(e,this.topLayoutModel,this.dashboardApi)},setPreferredLocation:function(e){return o.setPreferredLocation(e)},destroy:function(e){for(var t in this.fnOnContextMenu&&window.oncontextmenu===this.fnOnContextMenu&&(this.fnOnContextMenu=null,window.oncontextmenu=null),n(window).off("resize.layoutController"+this.id),this.colorsService&&this.colorsService.off("theme:changed",this.onThemeChange,this),this.topLayoutModel&&(this.topLayoutModel.off("change:layoutPositioning",this._onLayoutPositioning,this),this.destroyLayoutView(this.topLayoutModel.id,e)),this.interactionController&&this.interactionController.destroy(),this.deprecatedCanvas&&this.deprecatedCanvas.destroy(),this)Object.prototype.hasOwnProperty.call(this,t)&&delete this[t];this._isDestroyed=!0},destroyLayoutView:function(e,t){var r=this.viewsMap[e];r&&r.view&&r.view.destroy(t)},modelIdToNodeId:function(e){return o.modelIdToNodeId(e)},nodeIdToModelId:function(e){return o.nodeIdToModelId(e)},layoutReady:function(e){if(this._isDestroyed)return Promise.reject("Layout Controller destroyed");var t=e;r.isArray(t)||(t=[e]);var n=r.pick.apply(r,[this.viewsMap].concat(t));return Promise.all(r.pluck(n,"viewReady")).then((function(){return r.isArray(e)?r.pluck(n,"view"):n[e]&&n[e].view}))},selectLayouts:function(e,t){var n=[],i=this.interactionController.selectionHandler;return r.each(e,function(e){var r=this.whenWidgetRenderComplete(e).then((function(e){i.selectNode(e.domNode,t)}));n.push(r)}.bind(this)),Promise.all(n)},widgetReady:function(e){return this.layoutReady(e).then(function(t){return this.viewsMap[e]&&this.viewsMap[e].view&&this.viewsMap[e].view.widgetReady?this.viewsMap[e].view.widgetReady().then((function(){return t})):t}.bind(this))},whenWidgetRenderComplete:function(e){return this.layoutReady(e).then(function(t){return this.viewsMap[e]&&this.viewsMap[e].view&&this.viewsMap[e].view.whenRenderComplete?this.viewsMap[e].view.whenRenderComplete().then((function(){return t})):t}.bind(this))},whenPageRenderComplete:function(e){return this.layoutReady(this.topLayoutModel.id).then(function(){var t=(e||this.topLayoutModel).findDescendantsWithType("widget"),n=[];return r.each(t,(function(e){n.push(this.whenWidgetRenderComplete(e.id))}),this),Promise.all(n)}.bind(this))},selectWidget:function(e){var t=e.modelId,r=e.multiselect,n=e.showContextBar;return this.widgetReady(t).then(function(t){r||this.deselectAllWidgets();var o=this.interactionController.selectionHandler,a=new i(e);n||a.setProperty("preventDefaultContextBar",!0),o&&o.selectNode(t.domNode,e)}.bind(this))},deselectAllWidgets:function(){this.interactionController&&this.interactionController.selectionHandler.deselectAll()},deselectWidget:function(e){var t=e.modelId,r=this.viewsMap[t]&&this.viewsMap[t].view,n=this.interactionController.selectionHandler;return n?r&&r.domNode?Promise.resolve(n.deselectNode(r.domNode)):this.widgetReady(t).then(function(e){n.deselectNode(e.domNode)}.bind(this)):Promise.resolve()},moveLayout:function(e){var t=this,r=this.transaction.startTransaction();e.forEach((function(e){t.canvas.moveContent(e.parentId,[e.id],r)})),this.transaction.endTransaction(r)},getLayoutViewWhenReady:function(e){var t=this,r=this.viewsMap[e];if(!r){var n=this.topLayoutModel.findModel(e);if(n){var i=n.getParent();if(i){var o=this.viewsMap[i.id];if(o&&o.view&&o.view.renderChild)return o.view.renderChild(e,!0).then((function(){return(r=t.viewsMap[e])?r.viewReady:Promise.resolve(null)}))}}return Promise.resolve(null)}return r.viewReady},getLayoutView:function(e){var t=this.viewsMap[e];return t&&t.view},onContextMenu:function(e){var t=e.target.nodeName,r=n(e.target);return!("INPUT"!==t&&"TEXTAREA"!==t&&"true"!==r.attr("contenteditable")&&!r.closest('[contenteditable="true"]').length)},getInteractionProperties:function(){return this.interactionController.getInteractionProperties()},hasMaximizedWidget:function(){for(var e=Object.keys(this.viewsMap),t=0;t<e.length;t++){var r=this.getLayoutView(e[t]);if(r&&r.widgetAPI&&r.widgetAPI.isWidgetMaximized&&r.widgetAPI.isWidgetMaximized())return!0}return!1},getLayoutWidgetModel:function(e,t){var r=this.widgetLoader.getWidget(e);return r&&r.getWidgetModelForPinning&&!t?r.getWidgetModelForPinning():this.boardModel.getWidgetModel(e)}})})),define("dashboard-core/js/api/impl/LegacyViewControllers",["jquery","../../lib/@waca/dashboard-common/dist/core/APIFactory","../deprecated/LegacyViewControllersAPI","../../dashboard/layout/LayoutController","../../dashboard/loader/WidgetLoader"],(function(e,t,r,n,i){return function(){function o(e){var t=e.environment,r=e.layoutController;_classCallCheck(this,o),this._widgetLoader=r&&r.widgetLoader||this._createWidgetLoader(t),this._layoutController=r||this._createLayoutController(t)}return o.prototype.getAPI=function(){return this._api||(this._api=t.createAPI(this,[r])),this._api},o.prototype.getLayoutController=function(){return this._layoutController},o.prototype.getWidgetLoader=function(){return this._widgetLoader},o.prototype._createWidgetLoader=function(e){return new i({glassContext:e.glassContext,services:e.serviceRegistry,appSettings:{},dashboardApi:e.dashboardApi,eventRouter:e.eventRouter,widgetRegistry:e.widgetRegistry,loadedWidgets:{},boardModel:e.boardModel,contentFeatureLoader:e.internalCanvas,canvas:e.canvas})},o.prototype._createLayoutController=function(t){return new n({glassContext:t.glassContext,services:t.serviceRegistry,appSettings:{},contentFeatureLoader:t.internalCanvas,dashboardApi:t.dashboardApi,eventRouter:t.eventRouter,$el:e("body"),boardModel:t.boardModel,widgetLoader:this._widgetLoader,layoutExtensions:t.layoutExtensions,gatewayUrl:"v1",cdnUrl:"",canvas:t.canvas})},o.prototype.destroy=function(){this.getWidgetLoader().cleanup(),this.getLayoutController().destroy()},o}()})),define("dashboard-core/js/api/impl/DashboardFactory",["./DashboardCore","../core/RuntimeEnvironment","../../dashboard/loader/BoardLoaderHelper","./LegacyViewControllers"],(function(e,t,r,n){return function(){function i(){_classCallCheck(this,i),this._bootstrapFeatures={},this._featureDefinitions={dashboard:[],content:[]}}return i.prototype.init=function(e){var t=e.bootstrapFeatures,r=e.dashboardFeatures,n=e.contentFeatures;return void 0===t.Logger?this._bootstrapFeatures.Logger=console:this._bootstrapFeatures.Logger=t.Logger,this._featureDefinitions.dashboard=r||[],this._featureDefinitions.content=n||[],Promise.resolve()},i.prototype.initializeRuntime=function(){var e=this;return this.runtimeEnv?Promise.resolve(this.runtimeEnv):this.getBootstrapFeatures().then((function(r){return e.runtimeEnv=new t(r),e.runtimeEnv}))},i.prototype.getBootstrapFeatures=function(){throw new Error("This method should be overriden by the child class")},i.prototype.getBootstrapFeature=function(e){return this._bootstrapFeatures[e]},i.prototype.getDashboardFeatures=function(){return this._featureDefinitions.dashboard},i.prototype.getContentFeatures=function(){return this._featureDefinitions.content},i.prototype.create=function(t){var i=this,o=void 0,a=void 0;return this.initializeRuntime().then((function(e){var r={featuresOverride:i._featuresOverride,assetId:t.assetId,spec:t.spec,profiles:t.profiles};return r.assetId||r.spec||(r.spec=e.getDefaultSpec()),e.getRuntimeEnvironment(r)})).then((function(e){return(a=new r((o=e).dashboardApi)).loadLayoutExtensions(o.layoutExtensions)})).then((function(t){a.registerLayoutExtensions(t);var r=new n({environment:o});return o.dashboardApi.getFeature("FeatureRegistry.internal").registerFeature("LegacyViewControllers",r,{profiles:["core"]}),new e({dashboardAPI:o.dashboardApi,internalDashboardAPI:o.internalDashboardAPI}).getAPI()}))},i}()})),define("dashboard-core/js/api/core/glass/Ajax",[],(function(){return function(){function e(t){_classCallCheck(this,e),this.glassContext=t}return e.prototype.getAPI=function(){return this.glassContext.getCoreSvc(".Ajax")},e}()})),define("dashboard-core/js/api/core/glass/Glass",["dashboard-core/js/lib/@waca/core-client/js/core-client/ui/ProgressToast"],(function(e){return function(){function t(e){_classCallCheck(this,t),this.glassFeature={},this._glassContext=e,this._glassFeature=null}return t.prototype.getAPI=function(t){var r=this;return"internal"===t?{getGlassContext:function(){return r._glassContext}}:(this._glassFeature||(this._glassFeature={showErrorMessage:function(e,t){return r._glassContext.appController.showErrorMessage(e,t)},showMessage:function(e,t,n,i,o,a,s,l){return r._glassContext.appController.showMessage(e,t,n,i,o,a,s,l)},showToast:function(e,t){return r._glassContext.appController.showToast(e,t)},showProgressToast:function(t,r){var n=new e(r);return n.show(t),{fail:function(e){n.fail(e)},indefinite:function(e){n.indefinite(e)},hideButton:function(e){n.hideButton(e)},showButton:function(e){n.showButton(e)},setComplete:function(e,t){return n.setComplete(e,t)},onCancel:function(e){n.onCancel(e)},onHide:function(e){n.onHide(e)},remove:function(e){return n.remove(e)}}},showSlideOut:function(e){return r._glassContext.appController.showSlideOut(e)},showContextMenu:function(e){return r._glassContext.appController.showContextMenu(e)},isDevInstall:function(){return r._glassContext.isDevInstall()},openApplication:function(e,t){return r._glassContext.appController.openAppView(e,t)},closeApplication:function(e,t,n){return r._glassContext.appController.closeAppView(e,t,n)},getService:function(e){return r._glassContext.getSvc(e)},getCoreService:function(e){return r._glassContext.getCoreSvc(e)},getPlugin:function(e){return r._glassContext.appController.findPlugin(e)},prepareGlassOptions:function(e){e.glassContext=r._glassContext}}),this._glassFeature)},t}()})),define("dashboard-core/js/api/core/glass/Logger",[],(function(){return function(){function e(t){_classCallCheck(this,e),this.glassContext=t}return e.prototype.getAPI=function(){return this.glassContext.getCoreSvc(".Logger")},e}()})),define("dashboard-core/js/api/core/glass/GlassDashboardBuilder",["underscore","../default/DashboardPreferences","../default/DashboardSettings","../../impl/DashboardFactory","./Ajax","./Glass","./Logger"],(function(e,t,r,n,i,o,a){var s=function(e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,e.call(this));return r._glassContext=t.glassContext||window.__glassAppController.glassContext,r._perspectiveModel=t.perspectiveModel,r._featuresOverride=t.featuresOverride,r._bootstrapFeaturesOverride=t.featuresOverride&&t.featuresOverride.bootstrap,r._apiConsumerConfig=t.apiConsumerConfig,r}return _inherits(n,e),n.prototype._getBootstrapFeatureAPI=function(e,t){return function(r){var n=e.getAPI?e.getAPI(r):e;return Object.assign(n,t)}},n.prototype._getGlassConfig=function(e){return Promise.all([e.getProductVersion(),e.getConfigValue("ClientValidDomainList")]).then((function(t){return{productVersion:t[0],ClientValidDomainList:t[1],instrumentationMapping:e.getConfigValueSync("instrumentationMapping")}}))},n.prototype._initializeCapabilitiesFeature=function(e,t){return e.services&&e.services[".CapabilitiesService"]?t.getService(".CapabilitiesService"):Promise.resolve(null)},n.prototype._initializeCustomizabledBootstrapFeatures=function(e,t){var r=["dashboardPreferences","palette","dashboardTheme","dashboardSettings","userProfile"],n={},i=[];return[".DashboardPreferences",".Palette",".DashboardTheme",".DashboardSettings",".DashboardUserProfileService"].forEach((function(r){e.services&&e.services[r]?i.push(t.getService(r)):i.push(null)})),Promise.all(i).then((function(e){return r.forEach((function(t,r){n[t]=e[r]})),n}))},n.prototype.getBootstrapFeatures=function(){var e=this,n=this._bootstrapFeaturesOverride||{},s=new o(this._glassContext),l={Glass:{getAPI:this._getBootstrapFeatureAPI(s,n.Glass)},Logger:{getAPI:this._getBootstrapFeatureAPI(new a(this._glassContext),n.Logger)},Ajax:{getAPI:this._getBootstrapFeatureAPI(new i(this._glassContext),n.Ajax)}},d=s.getAPI();return Promise.all([this._initializeCapabilitiesFeature(this._perspectiveModel,d),this._initializeCustomizabledBootstrapFeatures(this._perspectiveModel,d),this._getGlassConfig(d.getCoreService(".Config"))]).then((function(i){var o=i[0],a=i[1],s=i[2],d=a.dashboardPreferences||t.create();return l.DashboardPreferences={getAPI:e._getBootstrapFeatureAPI(d,n.DashboardPreferences)},l.DashboardTheme={getAPI:e._getBootstrapFeatureAPI(a.dashboardTheme,n.DashboardTheme)},l.UserProfile={getAPI:e._getBootstrapFeatureAPI(a.userProfile,n.UserProfile)},l.Palette={getAPI:e._getBootstrapFeatureAPI(a.palette,n.Palette)},l.DashboardSettings={getAPI:e._getBootstrapFeatureAPI(r.create({globalConfig:s,applicationConfig:e._perspectiveModel,defaultImpl:a.dashboardSettings,collectionsOverride:e._featuresOverride,apiConsumerConfig:e._apiConsumerConfig}),n.DashboardSettings)},o&&(l.Capabilities={getAPI:e._getBootstrapFeatureAPI(o,n.CapabilitiesService)}),l}))},n}(n);return s.create=function(e){return new s(e)},s})),define("dashboard-core/js/dashboard/glass/BaseBoardView",["./BaseView","jquery","underscore","../services/ServicesHelper","../../app/EventRouter","../loader/BoardLoader","../layout/authoring/interaction/ChangeModeAction","../util/ButtonHideHelper","../../app/util/ErrorUtils","../../app/util/CapabilityUtils","../../app/ui/dialogs/EditableDialog","../../lib/@waca/core-client/js/core-client/utils/PerfUtils","../../lib/@waca/core-client/js/core-client/ui/KeyCodes","../services/CanvasExtensions","../../api/impl/Dashboard","../../lib/@waca/dashboard-common/dist/core/APIFactory","../../lib/@waca/dashboard-common/dist/utils/EventChainLocal","../../app/nls/StringResources","../../lib/@waca/dashboard-common/dist/utils/DialogBlocker","../../extension/Extensions","../widgets/WidgetRegistry","../../dashboard/model/BoardModelFactory","../../lib/@waca/dashboard-common/dist/utils/MemUtil","../../api/core/glass/GlassDashboardBuilder"],(function(e,t,r,n,i,o,a,s,l,d,c,u,h,p,g,f,m,b,y,v,_,C,w,P){void 0===window.__getDashboardAPI&&(window.__getDashboardAPI=function(){return window.__glassAppController.Glass.getCurrentContentView().getDashboardApi()});var S=e.extend({buttonIds:{UNDO:"com.ibm.bi.dashboard.undo",REDO:"com.ibm.bi.dashboard.redo"},init:function(e,t,n){S.inherited("init",this,arguments),this.dashboardApi=null,this._resolveOptions(e),r.extend(this,e),this.options=e||{},this.firstRender=!0,this._perspectiveModel=n},initialize:function(e){var t=this;return this.initPromise||(this.dashboardBuilder=P.create({glassContext:this.glassContext,perspectiveModel:this._perspectiveModel,options:e,apiConsumerConfig:{contentFeatureDelayLoadTabs:!!this.contentFeatureDelayLoadTabs}}),this.initPromise=this.dashboardBuilder.getBootstrapFeatures().then((function(r){var n="true"===String(e._isDirty).toLowerCase();t.options.isDirtyOption=n,t._pressed={},t._boardLoaderClass=e.boardLoaderClass||o,t.eventRouter=new i,t._buttonHideHelper=e._buttonHideHelper||s,t._splitterItems=[],t._modifiedDataset=[],t.upgradesCollectionPath="dashboard/upgrades",t.logger=r.Logger.getAPI(),t.$content=null,t.widgetRegistry=e.widgetRegistry||new _,t._createController(e,r),t._prepareForRendering(e,r)}))),this.initPromise},_prepareForRendering:function(e,t){this._createServices(t),e.containerAppOptions&&r.extend(this.options.options.config,e.containerAppOptions.configuration),e.preprocessKeyDown&&(this.preprocessKeyDown=e.preprocessKeyDown),this.specHelper=null,this.extensions=e.extensions||new v(this.dashboardApi),this.boardModelFactory=e.boardModelFactory},_createController:function(e,t){var r=e.boardId?["core"]:["core","consume","authoring"],n=e.overrideDashboardController?e.overrideDashboardController:g;this.dashboardController=e.dashboardController||new n({glass:t.Glass.getAPI(),settings:t.DashboardSettings.getAPI(),view:this,services:this.services,featureLoader:this.featureLoader,profiles:r,eventRouter:this.eventRouter,appSettings:this.getContent({dirty:this.options.isDirtyOption}),widgetRegistry:this.widgetRegistry}),this.dashboardApi?(this.dashboardApi=f.refreshAPI(this.dashboardApi,[this.dashboardController]),this.internalDashboardApi=f.refreshAPI(this.internalDashboardApi,[this.dashboardController,this.dashboardController.internalImpl])):(this.dashboardApi=this.dashboardController.getAPI(),this.internalDashboardApi=this.dashboardController.getInternalAPI())},getApplicationLabel:function(){return b.get("dashboard")},getContentNode:function(){if(null===this.$content){var e=this.$(".pageViewContent",this.el);0===e.length&&(e=t('<div class="pageViewContent"></div>').prependTo(this.el)),this.$content=e}return this.$content},setSavedInstance:function(e){this.savedInstance=e},getSavedInstance:function(){return this.savedInstance},addReloadableObject:function(e,t){this.reloadables||(this.reloadables={}),t.reload&&"function"==typeof t.reload&&(this.reloadables[e]=t)},removeReloadableObject:function(e){this.reloadables&&delete this.reloadables[e]},_registerDatasetExecution:function(){var e=this;return this.glassContext.appController.findCollection("com.ibm.bi.dashboard.services").then((function(t){for(var r=t||[],n=!1,i=0;i<r.length&&!1===n;)n="com.ibm.bi.dashboard.services.datasetExecutionService"===r[i].id,i++;if(n)return e.glassContext.getSvc(".DatasetExecutionService").then((function(t){e.datasetRefreshEventHandler=t.on("loadComplete",e._onDatasetRefresh.bind(e))}))}))},_resolveOptions:function(e){e.boardId=e.boardId||e.objRef,e.isAuthoringMode=this.hasAuthoringCapability()&&"true"===String(e.isAuthoringMode).toLowerCase()||"edit"===e.action},isDirty:function(){var e=this.dashboardApi?this.dashboardApi.getFeature("DashboardState"):null;return e?e.getUiState().dirty:this.options.isDirtyOption},setPermissions:function(e){this.permissions=e},isNew:function(){return!this.getBoardId()},canAuthor:function(){return-1!==r.indexOf(this.permissions,"write")},getBoardId:function(){return this.boardModel&&this.boardModel.id},getBoardInfo:function(){return{isDirty:this.isDirty(),boardId:this.getBoardId(),searchPath:this.boardModel.searchPath,type:"exploration"}},getType:function(){return"exploration"},getLoadedWidget:function(e){var t=this.boardLoader,r=(t=void 0===t?{}:t).widgetLoader;if(r){var n=r.getWidget(e);if(n)return n.getAPI()}},getContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.pick(this.options,"id","objRef","options","subView","filters");t.isAuthoringMode=this.isAuthoringMode,this.options.boardId&&(t.boardId=this.options.boardId),t.objRef&&(t.id=t.objRef),this.id=t.id,this.boardModel&&this.boardModel.id&&(t.boardId=this.boardModel.id,t.id=this.boardModel.id,t.objRef=this.boardModel.id,this.id=this.boardModel.id);var n=e&&e.mode===this.glassContext.bookmarkMode;return n||(t.boardSpec=this.options.boardSpec,this._isDashboardFeatureLoaded("DashboardState")?t._isDirty=this.dashboardApi.getFeature("DashboardState").getUiState().dirty:t._isDirty=e.dirty,this._isDashboardFeatureLoaded("Serializer")&&(t.boardSpec=this.dashboardApi.getFeature("Serializer").toJSON())),t},_isDashboardFeatureLoaded:function(e){return!!this.dashboardApi&&!!this.dashboardApi.getFeature(e)},preprocessKeyDown:function(e){return e},isPressed:function(e){var t=this,n=r.filter(r.keys(this._pressed),(function(e){return t._pressed[e]&&-1==[h.LEFT_WINDOW_KEY,h.CTRL,h.CAPSLOCK,h.F11].indexOf(parseInt(e))})),i=e.length?r.map(e,(function(e){return String(e)})):[String(e)];return r.isEqual(n,i)},isTextSelected:function(){return""!==window.getSelection().toString()},getECLProp:function(e,t){return new m(e).getProperty(t)},hasAuthoringCapability:function(){return!0},_processKeyDown:function(e){var r=this;if(!((e=this.preprocessKeyDown(e)).target.tagName&&e.target.tagName.match(/input|textarea|select/gim)||t(e.target).closest("[contentEditable=true]").length>0)){e.keyCode==h.CAPSLOCK&&this._pressed[h.CAPSLOCK]?delete this._pressed[h.CAPSLOCK]:this._pressed[e.keyCode]=!0;var n=function(t){return!(!r.isPressed(t)||r.getECLProp(e,"doNotHandle"))&&(e.preventDefault(),!0)};!e.ctrlKey&&!e.metaKey||y.isShowingDialogBlocker()||(n(h.V)?this.isAuthorMode()&&this.doPaste():n(h.S)?this.hasAuthoringCapability()&&this.doSave():n(h.Y)||n([h.SHIFT,h.Z])?this.doRedo():n(h.Z)?this.doUndo():n([h.Q,h.FORWARDSLASH])?this.hasAuthoringCapability()&&this._openBoardSpecificationDialog():n([h.Q,h.L])?window.gLogRaveTestSpec=!0!==window.gLogRaveTestSpec:!this.isTextSelected()&&n(h.C)?this.hasAuthoringCapability()&&this.doCopy():n([h.Q,h.COMMA])&&(window.dashboardErrorDetailsEnabled=!0,this.eventRouter.trigger("widget:onDetailErrors"))),e.metaKey&&e.keyCode!==h.Q&&e.keyCode!==h.SHIFT&&delete this._pressed[e.keyCode]}},_openBoardSpecificationDialog:function(){new c({title:"Board Specification",textContent:JSON.stringify(this.dashboardApi.getFeature("Serializer").toJSON(),null,4),updateCallback:this._updateBoardModelFromDialog.bind(this)}).render()},_updateBoardModelFromDialog:function(e){var t=this;try{var r=JSON.parse(e);return d.checkAuthoringCapability(this.dashboardApi,r,b.get("noCapabilityForEdit")).then((function(e){if(e)return t.reloadFromJSONSpec(r)})).catch((function(e){return t.logger.debug("Fail to check capability in updating board model",e,t),!1}))}catch(e){return this.logger.debug("Invalid JSON provided",e,this),this.glassContext.appController.showToast(this.stringService.get("invalidJSONResponse"),{type:"error",preventDuplicates:!0}),!1}},doCopy:function(){return this.boardController.copyPasteController.doCopy()},doPaste:function(){return this.boardController.copyPasteController.doPaste()},_processKeyUp:function(){this._pressed={}},doSave:function(){var e=this.glassContext.appController.findPlugin("com.ibm.bi.dashboard.saveMenu");e&&e.getButtonElement().trigger("click")},doUndo:function(){var e=t(".popover");e.length>0&&e.popover("hide"),this.boardController.undoRedoController.undo()},doRedo:function(){var e=t(".popover");e.length>0&&e.popover("hide"),this.boardController.undoRedoController.redo()},_onWidgetMaximize:function(){this._buttonHideHelper.changeMode(this.glassContext,"widgetMaximized")},_onWidgetRestore:function(){this._buttonHideHelper.changeMode(this.glassContext,this.dashboardController.getMode())},toggleEventGroupMode:function(e){return this.isEventGroupViewMode?"eventGroups"!==e?this.turnOffEventGroupView(e):Promise.resolve():(this._buttonHideHelper.changeMode(this.glassContext,e),this.turnOnEventGroupView())},toggleMode:function(e){var t=this,r=this.dashboardApi.getFeature("dataSources.deprecated");return r&&r.clearShapingCache(),(this.isAuthoringMode?this.turnOffEditMode():this.turnOnEditMode()).then((function(){t._finishModeChange(e)}))},_addChangeModeActionToUndoRedoStack:function(e){e&&"UndoRedoController"===e.sender||this.boardController.undoRedoController.addToUndoRedoStack(new a(this,{glassContext:this.glassContext}))},_triggerWindowResize:function(){try{t(window).resize()}catch(e){console.error(e)}},_finishModeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.eventRouter.trigger("mode:change",{authoring:this.isAuthoringMode,isStoryMode:this.options.isStoryMode}),!1!==e.addToUndoRedoStack&&this._addChangeModeActionToUndoRedoStack(e),this._triggerWindowResize()},isAuthorMode:function(){return!!this.isAuthoringMode},turnOnEditMode:function(){var e=this;return this.isAuthoringMode=!0,this.lifeCycleManager.invokeLifeCycleHandlers("pre:mode.edit").then(this.boardController.changeToAuthorMode.bind(this.boardController)).then((function(){if(e.isEventGroupViewMode)return e.turnOnEventGroupView().then(e.applyModeToGlassPlugins.bind(e));e.applyModeToGlassPlugins()})).then(this.lifeCycleManager.invokeLifeCycleHandlers.bind(this.lifeCycleManager,"post:mode.edit"))},turnOffEditMode:function(){return this.isAuthoringMode=!1,this.lifeCycleManager.invokeLifeCycleHandlers("pre:mode.consume").then(this.boardController.changeToConsumeMode.bind(this.boardController)).then(this.applyModeToGlassPlugins.bind(this)).then(this.lifeCycleManager.invokeLifeCycleHandlers.bind(this.lifeCycleManager,"post:mode.consume"))},turnOnEventGroupView:function(){var e=this;return this.isEventGroupViewMode=!0,this.isAuthoringMode=!0,this.boardController.undoRedoController.setMode("eventGroups"),this.boardController.changeToEventGroupMode().then((function(){e.applyModeToGlassPlugins()}))},turnOffEventGroupView:function(e){var t=this;this.isEventGroupViewMode=!1,this.boardController.undoRedoController.setMode(null);var r="consumption"===e;return(r?this.turnOffEditMode():this.turnOnEditMode()).then((function(){return t._finishModeChange({addToUndoRedoStack:r})}))},applyModeToGlassPlugins:function(){this.isAuthoringMode?this.isEventGroupViewMode?this._buttonHideHelper.changeMode(this.glassContext,"eventGroups",this.options):this._buttonHideHelper.changeMode(this.glassContext,"authoring",this.options):this._buttonHideHelper.changeMode(this.glassContext,"consume",this.options)},_createServices:function(e){this.servicesHelper=new n({glassContext:this.glassContext,bootStrapFeatures:e,eventRouter:this.eventRouter,appSettings:this.getContent(),logger:this.logger,dashboardAPI:this.dashboardApi,internalDashboardAPI:this.internalDashboardApi});var t=this.servicesHelper.createServices();this.stringService=t.stringService,this.lifeCycleManager=t.lifeCycleManager,this.dnDManager=t.dnDManager,this.services=t.serviceRegistry,this.featureLoader=t.featureLoader,this.dashboardController.setServices(this.services),this.dashboardController.setFeatureLoader(this.featureLoader)},getDeprecatedCanvas:function(){return this.boardController||(this.boardController=this.boardLoader&&this.boardLoader.canvasController),this.boardController?this.boardController.getDeprecatedCanvas():null},getDeprecatedCanvasWhenReady:function(){var e=this;return this._boardRendered?this._boardRendered.then((function(){return e.boardController.getDeprecatedCanvas()})):Promise.reject(new Error("Unable to getCanvas . Board is not rendered yet."))},hasCapability:function(){return l.hasCapability(this.glassContext)},canAddWidget:function(e){var t=e.spec;if(!this.isAuthoringMode)return Promise.resolve(!1);var r=this.dashboardApi.getFeature("Capabilities");if(!r)return Promise.resolve(!0);if(!d.hasGlobalAuthoringCapability({dashboardApi:this.dashboardApi}))return Promise.resolve(!1);var n=d.extractSourcesFromSpec(t);return n.length?r.hasCapability(n):Promise.resolve(!0)},_checkCapabilityOfSources:function(e){var t=this;return this.isAuthoringMode?d.checkAuthoringCapability(this.dashboardApi,e,b.get("noCapabilityForEdit")).then((function(e){e||(t.isAuthoringMode=!1)})):Promise.resolve()},pullPreloadedBoardPromise:function(){},_renderImpl:function(e,t){var r=this,n=!1,i=this.initialize(this.options).then((function(){if(r.$el.addClass("boardPageView"),r.getContentNode(),!r.hasCapability())return(t||Promise.reject)({code:"noCapability",message:r.stringService.get("noDashboardCapability")});r.setupKeyboardHandlers(),r.ajaxSvc=r.glassContext.getCoreSvc(".Ajax");var o=r.isAuthoringMode;return r.eventRouter.on("widget:maximize",r._onWidgetMaximize,r),r.eventRouter.on("widget:restore",r._onWidgetRestore,r),u.createPerformanceMark({component:"dashboard",name:"LoadBoard",state:"start"}),r.boardModelFactory=r.boardModelFactory||new C({dashboardAPI:r.dashboardApi,glassFeature:r.dashboardApi.getFeature("Glass"),productVersion:r.dashboardApi.getFeature("DashboardSettings").get("productVersion"),boardId:r.boardId,prefetchBoardPromise:r.pullPreloadedBoardPromise(r.boardId),boardSpec:r.boardSpec,widgetRegistry:r.widgetRegistry,extensions:r.extensions,stringResources:r.dashboardApi.getDashboardCoreSvc(".StringResources"),eventRouter:r.eventRouter,logger:r.logger,createLayoutModel:r.createLayoutModel}),r._boardRendered=r.extensions.load().then(r.widgetRegistry.initialize.bind(r.widgetRegistry,r.dashboardApi)).then((function(){return u.createPerformanceMark({component:"dashboard",name:"BoardModelFactory.createBoardModel",state:"start"}),r.boardModelFactory.createBoardModel()})).then((function(e){u.createPerformanceMark({component:"dashboard",name:"BoardModelFactory.createBoardModel",state:"end"}),r.boardModel=e.boardModel,r.boardSpec=e.boardSpec,r.boardId=e.boardId})).then((function(){return r._checkCapabilityOfSources(r.boardSpec)})).then(r.glassContext.appController.findCollection.bind(r.glassContext.appController,"com.ibm.bi.dashboard.templates")).then((function(e){return r.glassContext.appController.findCollection("com.ibm.bi.dashboard.contentTypes").then((function(t){return u.createPerformanceMark({component:"dashboard",name:"coreFeatures",state:"start"}),r.servicesHelper.createRuntimeServices({dashboardApi:r.getDashboardApi(),boardModel:r.boardModel,widgetRegistry:r.widgetRegistry,extensions:r.extensions,collections:{templates:e,contentTypes:t}})}))})).then(r._registerDatasetExecution.bind(r)).then((function(){return u.createPerformanceMark({component:"dashboard",name:"coreFeatures",state:"end"}),e&&(n=!0,e({whenFullyLoaded:function(){return i}})),r.boardLoader=new r._boardLoaderClass({glassContext:r.glassContext,isAuthoringMode:o,services:r.services,ajaxSvc:r.ajaxSvc,appSettings:r.getContent(),dashboardApi:r.getDashboardApi(),eventRouter:r.eventRouter,setDirty:r.boardModel.isUpgraded,boardSpec:r.boardSpec,boardModel:r.boardModel,el:r.getContentNode()[0],$viewEl:r.$el,widgetRegistry:r.widgetRegistry,gatewayUrl:"v1",cdnUrl:r.getCDNUrl(),featureLoader:r.featureLoader,extensions:r.extensions,dashboardController:r.dashboardController}),r.boardLoader.loadBoard()})).then((function(){return r.boardLoader.getCanvasController().then((function(e){r.boardController=e}))})).then((function(){(r.canUndo=!1,r.canRedo=!1,r.applyModeToGlassPlugins(),r._registerUndoRedoListener(r.buttonIds.UNDO),r._registerUndoRedoListener(r.buttonIds.REDO),r.boardModel.on("change:name",r._onNameChange,r),r.boardModel.on("all",r._onAllModelEvents,r),r.dashboardApi.getCanvas().on("all",r._manageDirtyFlagForCanvasEvents.bind(r)),r.boardController.onPageRenderComplete().then((function(){u.createPerformanceMark({component:"dashboard",name:"LoadBoard",state:"end"})})),r.containerAppOptions&&r.containerAppOptions.callbacks&&r.containerAppOptions.callbacks.resolve(r.getDashboardApi()),r.canvasExtensions=new p({topNode:r.getCanvasExtensionsTopNode(),bottomNode:r.getCanvasExtensionsBottomNode(),splitterItems:r._splitterItems,canvasExtensions:r.extensions.getCanvasExtensions()||[],dashboardApi:r.getDashboardApi(),services:r.services,eventRouter:r.eventRouter,appSettings:r.getContent(),handlers:{getParentSize:function(){return{height:r.$el.height(),width:r.$el.width()}},isAuthorMode:r.isAuthorMode.bind(r),getSplitterState:r.getSplitterState.bind(r)}}),r.services.register(".CanvasExtensions",r.canvasExtensions),r.services.register(".CopyPasteController",r.boardController.copyPasteController),r.firstRender)&&(r.dashboardApi.getFeature("DashboardState").setDirty(r.options.isDirtyOption),r.firstRender=!1);!r.getBoardId()||r.boardLoader.setDirty?(r.dashboardApi.getFeature("DashboardState").setDirty(!0),r.getBoardId()||(r.title=r.stringService.get("defaultName")),r.boardLoader.setDirty=!1):r.title=r.getTitle();return r.dashboardApi.getFeature("DashboardState").setActive(!0),r.logger.debug("Authored View created",r.options,r),r.onCanvasReady(),r.boardController.onPageReady().then((function(){return u.createPerformanceMark({component:"dashboard",name:"additionalServices",state:"start"}),r.dashboardController.onPageReady(r.isAuthoringMode)})).then((function(){if(u.createPerformanceMark({component:"dashboard",name:"additionalServices",state:"end"}),r.sources){var e=r.dashboardApi.getFeature("DataSources");r.sources.forEach((function(t){return e.addDataSource(t,!1,{silent:!0,payloadData:{skipUndoRedo:!0}})})),r.options.sources=r.sources=null}var t=r.dashboardApi.getFeature("Print"),n=r.dashboardApi.getFeature("DashboardPrint");t.registerContent("tab",n),t.registerContent("page",n)})).then((function(){return r.canvasExtensions.render()})).then((function(){}))})),r._boardRendered})).catch((function(e){throw r.logger&&(r.logger.log("An error occured while rendering the baseBoardView"),r.logger.error(e)),!n&&t&&t(e),e}));return i},render:function(){var e=this;return S.inherited("render",this,arguments),this.isEarlyRenderEnabled&&!this.isAuthoringMode?new Promise((function(t,r){e._renderImpl(t,r)})):this._renderImpl()},getSplitterState:function(){},_onNameChange:function(e){this.trigger("change:title",e),this.title=e.value},_onAllModelEvents:function(e){var t=e&&("undo"===e.stack||"redo"===e.stack),r=e&&e.data&&e.data.runtimeOnly,n=!this.isAuthoringMode&&e&&e.eventName&&"change:eventGroups"===e.eventName,i=e&&e.data&&e.data.skipUndoRedo,o=this.dashboardApi.getFeature("DashboardState");if(!r&&!n){var a=o.getUiState().dirty;if(t||a||i){if(t){var s=this.boardController.undoRedoController.isDirty();a&&!s?o.setDirty(!1):!a&&s&&o.setDirty(!0)}}else o.setDirty(!0)}},_manageDirtyFlagForCanvasEvents:function(e){e.info&&e.info.supportsUndoRedo&&e.context&&!0!==e.context.undoRedo&&(this.isDirty()||this.dashboardApi.getFeature("DashboardState").setDirty(!0))},getCanvasExtensionsTopNode:function(){if(!this.$top){var e=this.getContentNode(),r=t(".canvasExtensionTop",e);0===r.length&&(r=t('<div class="canvasExtensionTop"></div>'),e.prepend(r)),this.$top=r}return this.$top},getCanvasExtensionsBottomNode:function(){if(!this.$bottom){var e=t(".canvasExtensionBottom",this.el);0===e.length&&(e=t('<div class="canvasExtensionBottom"></div>'),this.$el.append(e)),this.$bottom=e}return this.$bottom},getDashboardApi:function(){return this.dashboardApi},onCanvasReady:function(){},_registerUndoRedoListener:function(e){var t=this.glassContext.appController.findPlugin(e);t&&this.boardController.undoRedoController.addListener(e,t)},remove:function(){this.teardownKeyboardHandlers(),this.eventRouter.off("widget:maximize",this._onWidgetMaximize,this),this.eventRouter.off("widget:restore",this._onWidgetRestore,this);try{this.boardLoader&&this.boardLoader.destroyViews()}catch(e){this.logger&&this.logger.error(e)}this.datasetRefreshEventHandler&&this.datasetRefreshEventHandler.remove(),this.boardLoader=null,this.dashboardController.destroy(),this.boardModel&&this.boardModel.off(),w.destroy(this),S.inherited("remove",this,arguments)},getTitle:function(){return this.boardModel&&this.boardModel.get("name")||""},getIconColor:function(){return"purple"},setTitle:function(e){this.title=e,this.trigger("change:title",{value:e})},openDatasetpane:function(){var e=this.glassContext.appController.findPlugin("com.ibm.bi.dashboard.dataSources.sourcesBtn");e&&!e.isPressed()&&e.$el.trigger("click",{expandFirstEntry:!0})},setupKeyboardHandlers:function(){this._keyDownBind||(this._keyDownBind=this._processKeyDown.bind(this),this._keyUpBind=this._processKeyUp.bind(this),this._windowBlur=this._processKeyUp.bind(this),t(document).on("keydown",this._keyDownBind),t(document).on("keyup",this._keyUpBind),t(window).on("blur",this._windowBlur))},teardownKeyboardHandlers:function(){t(document).off("keydown",this._keyDownBind),t(document).off("keyup",this._keyUpBind),t(window).off("blur",this._windowBlur),this._keyDownBind=null,this._keyUpBind=null,this._windowBlur=null},_onDatasetRefresh:function(e){this._modifiedDataset.push(e.id)},deactivate:function(){var e=this.dashboardApi.getFeature("DashboardState");return e&&e.setActive(!1),this.boardLoader&&this.boardLoader.deactivate(),this.teardownKeyboardHandlers(),this.canvasExtensions&&(this.canvasExtensionState=this.canvasExtensions.getState()),this.dashboardApi.triggerDashboardEvent("dashboard:deactivate"),S.inherited("deactivate",this,arguments)},activate:function(e){var t=this;if(this.dashboardApi.getFeature("DashboardState").setActive(!0),!this.boardLoader)return this.setupKeyboardHandlers(),S.inherited("activate",this,[e]);var r=function(){var e=t.boardLoader.activate();return e&&e.then||(e=Promise.resolve()),e.then((function(){return t.dashboardApi.triggerDashboardEvent("dashboard:show"),t.setupKeyboardHandlers()}))};return S.inherited("activate",this,[e]).then((function(){var e=void 0;return e=t._modifiedDataset.length>0?t._refreshDataSource().then((function(){t._modifiedDataset=[]})):Promise.resolve(),t.canvasExtensions.setState(t.canvasExtensionState),e})).then(r).catch(r)},_refreshDataSource:function(){var e=this,t=this.dashboardApi.getFeature("dataSources.deprecated").getSourcesCollection().getSources(),n=[];return r.each(t,(function(t){e._modifiedDataset.indexOf(t.getAssetId())>=0&&n.push(t.reloadMetadata())})),Promise.all(n)},_removeForReload:function(){this.teardownKeyboardHandlers(),this.boardLoader.destroyViews(),this.boardLoader=null,this.initPromise=null,this.boardModelFactory=null,this.datasetRefreshEventHandler&&this.datasetRefreshEventHandler.remove(),this.services&&this.services.destroy(),this.featureLoader&&this.featureLoader.destroy(),this.dashboardApi.destroy(),this.dashboardApi=null,this.boardModel=null,this.$el.empty(),this.$bottom=null,this.$top=null},reloadFromJSONSpec:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.isAuthoringMode,i=r.clearDirtyFlag,o=void 0!==i&&i,a=this.dashboardApi.getFeature("Renderer.internal");return a&&a.isMobile()&&n?(this.logger.warn("Authoring mode is not allowed in a mobile layout."),this.dashboardApi):(this.dashboardController.toggleProperties(!1),this._removeForReload(),this.boardSpec=e,this.isAuthoringMode=this.hasAuthoringCapability()&&(void 0!==n?n:this.isAuthoringMode),r.boardId&&(this.boardId=r.boardId),this.render().then((function(){t.reloadables&&Object.values(t.reloadables).filter((function(e){return"function"==typeof e.reload})).forEach((function(e){return e.reload()})),t.setFocus();var e=t.dashboardApi.getFeature("DashboardState");return o&&!t.boardLoader.setDirty?e.setDirty(!1):e.setDirty(!0),t.dashboardApi})))},setFocus:function(){var e=this;S.inherited("setFocus",this,arguments),this.lifeCycleManager.invokeLifeCycleHandlers("pre:dashboard.focus").then(this.boardLoader.getCanvasController.bind(this.boardLoader)).then((function(e){return e.layoutController.getTopLayoutViewWhenReady()})).then((function(t){return t&&t.onShow(),e.lifeCycleManager.invokeLifeCycleHandlers("post:dashboard.focus")})).catch((function(t){e.logger.error("Failed to setFocus",t,e)}))}});return S})),define("dashboard-core/js/features/dashboard/preFetch/PreFetchAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.get=function(){},e.prototype.clear=function(){},e}()})),define("dashboard-core/js/features/dashboard/preFetch/PreFetch",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./PreFetchAPI","../../../lib/@waca/core-client/js/core-client/utils/PerfUtils"],(function(e,t,r){var n=function(){function n(){_classCallCheck(this,n),this.api=e.createAPI(this,[t])}return n.get=function(e){return window.__prefetch__&&window.__prefetch__[e]},n.clear=function(e){window.__prefetch__&&window.__prefetch__[e]&&delete window.__prefetch__[e]},n.prototype.getAPI=function(){return this.api},n.prototype.get=function(e){return n.get(e)},n.prototype.clear=function(e){return n.clear(e)},n.addEntry=function(e){return n.entries.push(e)},n.load=function(e,t){e&&e.content&&e.content.options&&e.content.options.config&&"CA"===e.content.options.config.product&&(r.createPerformanceMark({component:"dashboard",name:"WarmUp.warm",state:"start"}),((e.collectionContainers.find((function(e){return"com.ibm.bi.dashboard.preFetch"===e.id}))||{}).items||[]).forEach((function(e){return n.addEntry(e)})),t.then((function(e){var t=e.getCoreSvc(".Ajax"),r=[];return window.__prefetch__={},n.entries.forEach((function(e){var i=e.requestParams?n._quickPick(e,e.requestParams):e;window.__prefetch__[e.url]=t.ajax(i),e.responseField&&(window.__prefetch__[e.url]=window.__prefetch__[e.url].then((function(t){return t[e.responseField]}))),r.push(window.__prefetch__[e.url])})),Promise.all(r)})).finally((function(){r.createPerformanceMark({component:"dashboard",name:"WarmUp.warm",state:"end"})})))},n._quickPick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=_extends({},e);return Object.keys(r).forEach((function(e){return-1===t.indexOf(e)?delete r[e]:null})),r},n}();return n.entries=[],n})),define("dashboard-core/js/app/util/MobileUtil",["../../lib/@waca/core-client/js/core-client/utils/BrowserUtils"],(function(e){return function(){function t(){_classCallCheck(this,t)}return t._isMobileScreenSize=function(){return this.getMediaQueryResults().matches},t.getMediaQueryResults=function(){return window.matchMedia("only screen and (max-width: 521px), only screen and (max-height: 521px)")},t.areMobileConditionsMet=function(){return e.isMobile()&&this._isMobileScreenSize()},t}()})),define("dashboard-core/js/dashboard/glass/dashboard/DashboardView",["../BaseBoardView","../../../app/util/ErrorUtils","../../../features/dashboard/preFetch/PreFetch","../../../app/util/MobileUtil"],(function(e,t,r,n){"use strict";var i=e.extend({init:function(){i.inherited("init",this,arguments),this.isEarlyRenderEnabled=!0,this.contentFeatureDelayLoadTabs=!0},getIcon:function(){return"common-dashboard_24"},getIconTooltip:function(){return this.stringService.get("dashboard")},hasAuthoringCapability:function(){return t.hasCapability(this.glassContext,"canAuthorDashboard")},shouldShowCloseConfirmationDialog:function(){return this.isDirty()&&this.hasAuthoringCapability()},getSplitterState:function(){return this.isAuthorMode()?"nochange":"close"},pullPreloadedBoardPromise:function(e){var t="v1/dashboard/specs/"+e,n=r.get(t);return r.clear(t),n},_resolveOptions:function(e){i.inherited("_resolveOptions",this,arguments),e.isAuthoringMode=e.isAuthoringMode&&!n.areMobileConditionsMet()}});return i.warmup=function(e,t){var n=i._getBoardId(),o=Promise.resolve();return n&&(o=i._getPreFetchEntry(n).then((function(e){r.addEntry(e)}))),o.then((function(){r.load(e,t)}))},i._getPreFetchEntry=function(e){var t={url:"v1/dashboard/specs/"+e,type:"GET",contentType:"application/json",requestParams:["url","type","contentType"]};return window.__glassAppController?window.__glassAppController.glassContext.getCoreSvc(".Config").getConfigValue("LibertyModeOnly").then((function(r){return"true"===r?{url:"v1/objects/"+e,dataType:"json",data:{fields:["defaultName","specification","searchPath","deploymentReferences.ancestors","deploymentReferences.defaultName","deploymentReferences.id","deploymentReferences.type","deploymentReferences.searchPath","ancestors","type","permissions","disabled","hidden","owner","base","defaultScreenTip","iconURI","tags"].join(",")},MRUInfo:{},requestParams:["url","dataType","data","MRUInfo"],responseField:["data"]}:t})):Promise.resolve(t)},i._getBoardId=function(){var e=window.location.search,t=new RegExp("[\\?&]id=([^&#]*)").exec(e);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},i})),define("dashboard-core/js/dashboard/nls/DashboardTemplateResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("dashboard-core/js/dashboard/nls/root/DashboardTemplateResources",{dashboard_save_success:"Your dashboard template has been saved."}),define("dashboard-core/js/dashboard/nls/DashboardTemplateStringResources",["i18n!./DashboardTemplateResources","polyglot"],(function(e,t){var r=new t({phrases:e,allowMissing:!0}),n=function(){};return n.prototype.get=function(e,t){return r.t(e,t)},new n})),define("dashboard-core/js/dashboard/glass/dashboard/DashboardTemplateView",["./DashboardView","../../nls/DashboardTemplateStringResources"],(function(e,t){return function(r){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,r.apply(this,arguments))}return _inherits(n,r),n.prototype.init=function(){e.inherited("init",this,arguments),this.isAuthoringMode=!0},n.prototype.initialize=function(){var r=this;return e.inherited("initialize",this,arguments).then((function(){r.stringService.register(t,1)}))},n.prototype.getIcon=function(){var e=this.dashboardApi.getFeature("Icons");if(e)return e.getIcon("dashboard-templates").id},n.prototype.getIconTooltip=function(){return this.stringService.get("dashboardTemplate")},n.prototype.getCanvasExtensionsBottomNode=function(){var e=r.prototype.getCanvasExtensionsBottomNode.call(this);return e.hide(),e},n}(e)})),define("dashboard-core/js/dashboard/glass/util/SaveActionUtil",["underscore"],(function(e){return function(){function t(){_classCallCheck(this,t)}return t.saveAs=function(e){var r=e.ajaxService,n=e.name,i=e.dashboard,o=e.overwrite,a=e.url,s=i.getFeature("internal").getBoardModel(),l=i.getFeature("Serializer").toJSON();t.cleanUnusedCustomColors(i,l,s),n&&(l.name=n);var d=t.getCMSpec(l,s,!0);return a+=o?"?updateAction=replace&ignoreInvalidObjectReference=true":"?ignoreInvalidObjectReference=true",new Promise((function(e,t){r.post(a,{contentType:"application/json",processData:!1,dataType:"text",data:JSON.stringify(d)}).done((function(t,r,i){var o=i.getResponseHeader("location"),a=o.substring(o.lastIndexOf("/")+1);s.set({id:a,name:n},{silent:!0}),e({status:"success",name:n,saveRequest:i,assetId:a,url:o,savedSpec:d.specification})})).fail((function(e,r){t({status:"fail",saveRequest:r,cmSpec:d})}))}))},t.getCMSpec=function(e,r,n){var i=r.getContentReferences().map((function(e){return e.value})),o={defaultName:e.name,type:t.getAssetType(r.dashboardApi),specification:JSON.stringify(e),deploymentReferences:t._getAllDeploymentReferences(r.dashboardApi,n),references:i},a=t._getAssetTags(r.dashboardApi);return a&&(o.tags=a),"page_asset"!==o.type&&"card_group"!==o.type||(delete o.specification,o.content=e),o},t.getAssetType=function(e){return e.getConfiguration("assetType")||"exploration"},t._getAllDeploymentReferences=function(e,t){var r=e.getFeature("ContentStoreReferences"),n=r?r.getContentStoreReferences():[];return[].concat(e.getFeature("dataSources.deprecated").getDeploymentReferences(t),e.getFeature("DrillThroughService").getDeploymentReferences(),n)},t._getAssetTags=function(e){return e.getConfiguration("assetTags")},t.cleanUnusedCustomColors=function(t,r,n){var i=t.getFeature("CustomColor"),o=n.properties.customColors.getCustomPaletteDefinition();if(o&&o.ids.length){var a,s=n.getUsedCustomColors(o,["fillColor","borderColor"]);(a=s).push.apply(a,i.getUsedCustomColors()),s=e.uniq(s),r&&r.properties&&r.properties.customColors&&(r.properties.customColors.colors=s)}},t}()})),define("dashboard-core/js/dashboard/loader/DeploymentReferencesUtil",["underscore"],(function(e){var t={updateIds:function(e,r,n){e&&r&&0!==r.length&&(t.updateWidgetIds(e,r),t.updateDatasetShaping(e,r),t.updateDataSources(e,r,n),t.updateDrillThrough(e,r))},updateWidgetIds:function(r,n){r&&r.widgets&&e.keys(r.widgets).forEach((function(e){var i=r.widgets[e];if(i.dataSet){var o=t.findReference(i.dataSet.id,n);if(o){i.dataSet.id=o.id,i.dataSet.type=o.type,i.dataSet.name=o.defaultName,i.dataSet.exists=!0;var a=o.ancestors;a&&a.length>0&&(i.dataSet.ancestors=o.ancestors,i.dataSet.parentFolderURL=a[a.length-1]._meta.links.self.url)}}}))},updateDatasetShaping:function(e,r){e&&e.datasetShaping&&e.datasetShaping.forEach((function(e){var n=t.findReference(e.id,r);n&&(e.id=n.id)}))},updateDataSources:function(e,r,n){e&&e.dataSources&&e.dataSources.sources&&e.dataSources.sources.forEach((function(e){var i=t.findReference(e.assetId,r);i&&(e.assetId=i.id),(i=t.findReference(e.assetId,r,!0))&&(e.searchPath=i.searchPath),e.shaping&&t.updateShaping(e.shaping,r,n)}))},updateShaping:function(e,r,n){if(e){if(e.moserJSON){var i=t.findReference(e.moserJSON.useSpec[0].storeID,r);i&&(e.moserJSON.useSpec[0].storeID=i.id)}if(e.embeddedModuleId){var o=t.findReference(e.embeddedModuleId,r,!0);o?n&&n.length&&o.searchPath&&0!==o.searchPath.indexOf(n)?this.resetEmbeddedModule(e):e.embeddedModuleId!==o.id&&(e.embeddedModuleId=o.id):this.resetEmbeddedModule(e)}}},resetEmbeddedModule:function(e){delete e.embeddedModuleId,delete e.embeddedModuleName,e.embeddedModuleUpToDate=!1},updateDrillThrough:function(e,r){e&&e.drillThrough&&e.drillThrough.length&&e.drillThrough.forEach((function(e){var n=t.findReference(e.assetId,r);n&&(e.assetId=n.id)}))},findReference:function(t,r,n){if(!r)return null;for(var i=0;i<r.length;i++){var o=r[i],a=o.name&&e.keys(o.name)[0]||"en-us";if(o.objects&&o.objects.length>0&&o.name[a]===t)return n||o.objects[0].id!==t?o.objects[0]:null}return null}};return t})),define("dashboard-core/js/ca/services/DashboardContentService",["../../dashboard/glass/util/SaveActionUtil","../../app/util/GlassUtil","../../app/nls/StringResources","../../dashboard/loader/DeploymentReferencesUtil"],(function(e,t,r,n){return function(){function i(){_classCallCheck(this,i)}return i.prototype.initialize=function(e){return this._glassContext=e,Promise.resolve()},i.prototype.getAncestors=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.url;return r||n?this._getContentService().then((function(e){var t=n||e.getBaseObjectsURL()+"/"+r;return e.get(t,{data:{fields:"ancestors"}})})).then((function(e){return Promise.resolve(e&&e.data[0].ancestors||null)})).catch((function(t){return e._logError("Error retrieving ancestors:",t),null})):Promise.resolve(null)},i.prototype.getDashboard=function(e){var t=this;return this._glassContext.getCoreSvc(".Config").getConfigValue("LibertyModeOnly").then((function(r){if("true"===r){var n="v1/objects/"+e,i={dataType:"json",data:{fields:["defaultName","specification","searchPath","deploymentReferences.ancestors","deploymentReferences.defaultName","deploymentReferences.id","deploymentReferences.type","deploymentReferences.searchPath"].join(",")},MRUInfo:{}};return t._getBoardSpecFromContentSvc(n,i).then((function(e){return t._handleBoardSpecResponse(e)}))}return t._getBoardSpecFromDashboardServer(e).then((function(e){return t._handleBoardSpecResponse(e)}))}))},i.prototype._getBoardSpecFromContentSvc=function(e,t){var n=this;return new Promise((function(i,o){n._getContentService().then((function(n){n.get(e,t).done(i).fail((function(e,t,n){o({status:t.status,code:n,message:r.get("noDashboardFound")})}))}))}))},i.prototype._getBoardSpecFromDashboardServer=function(e){var t=this;return new Promise((function(n,i){t._glassContext.getCoreSvc(".Ajax").ajax({url:"v1/dashboard/specs/"+e,type:"GET",contentType:"application/json"}).done(n).fail((function(e){i({status:e.jqXHR.status,code:e.textStatus,message:r.get("noDashboardFound")})}))}))},i.prototype.handlePrefetchedDashboard=function(e){var t=this;return e.then((function(e){return t._handleBoardSpecResponse(e)}))},i.prototype.onSaveAsSuccess=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.url;return t||r?this._getContentService().then((function(e){var n=r||e.getBaseObjectsURL()+"/"+t;return e.get(n,{dataType:"json",data:{fields:"defaultName,specification"},MRUInfo:{}})})).then((function(e){var t=e&&e.data&&e.data.length>0?e.data[0]:{};return Promise.resolve({permissions:t.permissions,id:t.id})})):Promise.resolve(null)},i.prototype.saveDashboard=function(t,r){var n=this,i=t.getFeature("Serializer").toJSON(),o=t.getFeature("internal").getBoardModel();e.cleanUnusedCustomColors(t,i,o);var a=this._getCMSpec(i,t);return new Promise((function(e,t){n._getContentService().then((function(n){return n.put("v1/objects/"+r+"?ignoreInvalidObjectReference=true",{contentType:"application/json",processData:!1,dataType:"application/json",data:JSON.stringify(a),MRUInfo:{}}).fail((function(e,r){t(r)})).then((function(){e({savedSpec:a.specification,status:"success"})}))}))}))},i.prototype.saveAsDashboard=function(r,n,i,o){var a=t.getAjaxService(this._glassContext),s=this._glassContext.appController.findPlugin("com.ibm.bi.glass.common.operations");return s&&!s.isEnabled&&s.enable(),e.saveAs({ajaxService:a,name:n,url:i,dashboard:r,overwrite:o})},i.prototype.saveThumbnail=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.thumbnailDataUri,n=t.id,i=r&&r.split(",");if(i&&2==i.length){if(n)return this._getContentService().then((function(t){return e._getAjaxService().post(t.getBaseObjectsURL()+"/"+n+"/items?updateAction=update",{contentType:"application/json",processData:!1,dataType:"text",data:JSON.stringify({defaultName:"thumbnail",type:"graphic",dataType:"image/png",data:i[1]})})}));this._logError("Dashboard id is undefined when generating thumbnail.")}else this._logError("Invalid thumbnail returned from Thumbnail service.")},i.prototype._handleBoardSpecResponse=function(e){if(0===e.data.length)return Promise.reject({code:"notFound",message:r.get("noDashboardFound")});var t=e.data[0].permissions;if(!this._hasPermission(t))return Promise.reject({code:"noPermission",message:r.get("noDashboardPermission")});var i=e.data[0],o=i.specification||"{}",a=JSON.parse(o);return a._meta={bundleID:i.id},n.updateIds(a,i.deploymentReferences,i.searchPath),a.features=a.features||{},a.features.ContentStoreReferences=i.deploymentReferences,Promise.resolve({boardSpec:a,boardId:i.id,permissions:i.permissions,searchPath:i.searchPath,name:i.defaultName})},i.prototype._hasPermission=function(e){return!(!Array.isArray(e)||!e.length)&&["read","execute"].every((function(t){return-1!==e.indexOf(t)}))},i.prototype._getCMSpec=function(t,r){var n=r.getFeature("internal").getBoardModel();return e.getCMSpec(t,n,!1)},i.prototype._logError=function(e){this._glassContext.getCoreSvc(".Logger").error(e)},i.prototype._getContentService=function(){return this._glassContext.getSvc(".Content")},i.prototype._getAjaxService=function(){return this._glassContext.services.ajax},i.prototype._getDashboardApi=function(){return this._getCurrentView().getDashboardApi()},i.prototype._getCurrentView=function(){return this._glassContext.appController.currentAppView.currentContentView},i}()})),define("dashboard-core/js/ca/services/DashboardSettingsService",["../../features/dashboard/dashboardSettings/DashboardSettingsAPI"],(function(e){return function(e){function t(){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this));return r._performanceEnabled=!1,r}return _inherits(t,e),t.prototype._initializePerformance=function(e){var t=this,r=e.getCoreSvc(".Config");return Promise.all(["DISP.zipi.IPAEnabled","zipi.IPAEnabled"].map((function(e){return r.getConfigValue(e)}))).then((function(e){return-1!==e.indexOf("true")})).then((function(e){t._performanceEnabled=e}))},t.prototype.initialize=function(e){return this._glassContext=e,this._initializePerformance(e)},t.prototype.getAPI=function(){return this},t.prototype.get=function(e){var t=void 0;return"toolbarContainer"===e||"odtToolbarContainer"===e?t=this._getODTToolbarContainer():"panelToolbarContainer"===e?t=this._getPanelToolbarContainer():"performanceEnabled"===e&&(t=this._performanceEnabled),t},t.prototype._getODTToolbarContainer=function(){return this._glassContext.findElement("com\\.ibm\\.bi\\.dashboard\\.toolbars\\.toolbarContainer")},t.prototype._getPanelToolbarContainer=function(){return this._glassContext.findElement("com\\.ibm\\.bi\\.dashboard\\.toolbars\\.toolbarPanelContainer")},t}(e)})),define("dashboard-core/js/lib/@waca/upgrades/deps/amd/AMD",["bluebird","require"],(function(e,t){return{require:null,loadModules:function(r){var n=[],i=[];return r.forEach((function(){var t={},r=new e((function(e,r){t.resolve=e,t.reject=r}));i.push(t),n.push(r)})),(t=this.require||t)(r,(function(){for(var e=0;e<arguments.length;e++)i[e].resolve(arguments[e])}),(function(e){i[0].reject(e)})),e.all(n)}}})),define("dashboard-core/js/lib/@waca/upgrades/lib/MigrationFactory",["../deps/amd/AMD","bluebird"],(function(e,t){var r=function(t){this._AMD=null,this._migrations=null,this._cache=null,t=t||{},this._cache=t.cache||{},this._migrations=t.migrations||{},this._AMD=t.AMD||e};return r.prototype.make=function(e){return e?this.isInCache(e)?t.resolve(this.getFromCache(e)):this._fetchMigration(e).then(function(t){return this.storeInCache(e,t),t}.bind(this)):t.reject(new Error("Invalid argument provided: version"))},r.prototype.isInCache=function(e){if(!e)throw new Error("Invalid argument provided: version");return void 0!==this._cache[e]},r.prototype.getFromCache=function(e){if(!e)throw new Error("Invalid argument provided: version");return this._cache[e]},r.prototype.storeInCache=function(e,t){if(!e)throw new Error("Invalid argument provided: version");if(!t)throw new Error("Invalid argument provided: migration");this._cache[e]=t},r.prototype.getCachedVersions=function(){return Object.keys(this._cache)},r.prototype.isCacheEmpty=function(){return 0===this.getCachedVersions().length},r.prototype.getMigrationPath=function(e){if(!e)throw new Error("Invalid argument provided: version");var t=this._migrations[e];if(!t)throw new Error("No migration present for the provided version: "+e);return t},r.prototype._fetchMigration=function(e){var t=this.getMigrationPath(e);return this._AMD.loadModules([t]).then((function(e){return e[0]}))},r.prototype.register=function(e,t){if(!e)throw new Error("Invalid argument provided: version");if(!t)throw new Error("Invalid argument provided: migration");this._migrations[e]=t},r.prototype.unregister=function(e){if(!e)throw new Error("Invalid argument provided: version");delete this._migrations[e]},r.prototype.getAllVersions=function(){return Object.keys(this._migrations).map((function(e){return parseInt(e,10)}))},r.prototype.getMigration=function(e){if(!e)throw new Error("Invalid argument provided: version");return this._migrations[e]},r.prototype.getVersion=function(e,t){if(!e)throw new Error("Invalid argument: version");t=t||0;var r=this.getAllVersions(),n=r.indexOf(e)+t;return r[n]},r})),define("dashboard-core/js/lib/@waca/upgrades/lib/UpgradeRunner",["./MigrationFactory","underscore"],(function(e,t){"use strict";var r=function(t){t=t||{},this.factory=t.factory||new e({migrations:t.migrations,AMD:t.AMD}),this._logger=t.logger};return r.prototype.needsUpgrade=function(e,t){if(!e.version)throw new Error("Object must be versioned");var r=parseInt(e.version,10);return this._getMigrationsToPerform(r,t).versions.length>0},r.prototype.upgrade=function(e,t,r){if(!e.version)throw new Error("Object must be versioned");var n,i=parseInt(e.version,10),o=this._getMigrationsToPerform(i,t);if(0===o.versions.length)n=Promise.resolve({obj:e,upgradePerformed:!1});else{var a=JSON.parse(JSON.stringify(e));n=this._migrate(a,o,r).then((function(e){return Promise.resolve({obj:e,upgradePerformed:!0})}))}return n},r.prototype._migrate=function(e,r,n){var i=Promise.resolve(e),o=0,a=r.versions.length,s=n&&t.isFunction(n.progress)?n.progress:function(){};return r.versions.forEach((function(t){i=i.then((function(e){return Promise.resolve(e)})).then(this._performMigration.bind(this,t,r.direction,n)).then(function(e){switch(r.direction){case"up":e.version=this.factory.getVersion(t,0);break;case"down":e.version=this.factory.getVersion(t,-1)}return e}.bind(this)).then((function(e){o++;try{s({completed:o,total:a,done:o===a})}catch(e){console.error(e)}return e})).catch(function(t){return this._logger.error("Upgrade error!",t),t.obj=e,Promise.reject(t)}.bind(this))}),this),i},r.prototype._performMigration=function(e,t,r,n){return this.factory.make(e).then((function(e){r&&(e.data=r);var i=e[t].call(e,n);return i?i.then((function(e){return e||(e=n),e})):n}))},r.prototype._getMigrationsToPerform=function(e,r){var n;r="number"==typeof(n=r)&&isFinite(n)&&Math.floor(n)===n?r:1/0;var i=t.filter(this.factory.getAllVersions(),(function(t){return t>e&&t<=r})),o=t.filter(this.factory.getAllVersions(),(function(t){return t<=e&&t>r}));return t.sortBy(i),t.sortBy(o),o.reverse(),i.length>0?{direction:"up",versions:i}:{direction:"down",versions:o}},r})),define("dashboard-core/js/dashboard/services/UpgradeService",["../../lib/@waca/upgrades/lib/UpgradeRunner","../../lib/@waca/core-client/js/core-client/utils/ClassFactory","../../app/nls/StringResources"],(function(e,t,r){return function(){function n(){_classCallCheck(this,n),this._latestDashboardSpecVersion=0}return n.prototype.getLatestDashboardSpecVersion=function(){return parseInt(this._latestDashboardSpecVersion)},n.prototype.initialize=function(r){var n=this;return this._logger=r.getCoreSvc(".Logger"),r.getCoreSvc(".Perspective").getModel("dashboard").then((function(r){var i=r.content.options.config.upgrades;return i?t.loadModule(i).then((function(t){var r=Object.keys(t);n._isValidUpgrade(r)&&(n._latestDashboardSpecVersion=r[r.length-1],n.upgradeRunner=new e({migrations:t,logger:n._logger}))})).catch((function(e){n._logger.error(e)})):Promise.resolve()}))},n.prototype._isValidUpgrade=function(e){if(!e.length)return!1;var t=e[e.length-1];return!(!t||isNaN(t))&&Number.isInteger(Number(t))},n.prototype.needsUpgrade=function(e,t){return!!this.upgradeRunner&&this.upgradeRunner.needsUpgrade(e,t)},n.prototype.upgrade=function(e,t,n){return this.upgradeRunner?this.upgradeRunner.upgrade(e,t,n).then((function(t){return t?(t.upgradePerformed&&n.hasWrite&&t.obj.queriedForUpgrade&&(delete t.obj.queriedForUpgrade,n.noToast||n.dashboardApi.showToast(r.get("toastUpgradeDone"),{type:"info"})),t.obj):e})):t&&e.version!==t?Promise.reject(new Error("The requested spec upgrade version is not available")):Promise.resolve(e)},n.prototype.destroy=function(){this.upgradeRunner=null},n}()})),define("dashboard-core/js/lib/@waca/dashboard-version-upgrades/CaUpgradeMap",["require","exports","module"],(function(e,t,r){const n=new Map([[2e3,"2000/MoveWidgetsToModel"],[2001,"2001/ContrastLabelUpgrade"],[2002,"2002/AddEventGroupIdToDrillthroughDefinitions"],[2003,"2003/VIDARelativePaddingPropUpgrade"],[2004,"2004/MoveOriginalCustomGroupItemId"],[2005,"2005/VIDADefaultNullValuesUpgrade"],[2006,"2006/AddShowFooterToProperties"],[2101,"2101/VCFChangeLocationUpgrade"],[2102,"2102/ResponsiveTitleUpgrade"],[2103,"2103/VIDAPieRendererUpgrade"],[2104,"2104/ResponsiveWithRepeaterUpgrade"],[2150,"2150/AutoGroupUpgrade"],[2160,"2160/ShapeWidgetUpgrade"],[2161,"2161/GroupedPropertyLocationUpgrade"],[2162,"2162/AutoGroupColumnIdUpgrade"],[2300,"2300/TreemapProperties"],[2301,"2301/ValuesAsRowsProperties"],[2302,"2302/DropdownListExtension"],[2303,"2303/BarBundleUpgrade"],[2304,"2304/LineAreaBundleUpgrade"],[2400,"2400/TextFontStyleUpgrade"],[2401,"2401/BubbleCompositeUpgrade"],[2402,"2402/TiledmapStylesUpgrade"],[3e3,"3000/EdgeCacheUpgrade"]]);r.exports={MIN_VERSION:2e3,UPGRADES:n}})),define("dashboard-core/js/dashboard/upgrades",["dashboard-core/js/lib/@waca/dashboard-version-upgrades/CaUpgradeMap"],(function(e){var t=e.UPGRADES,r={6:"dashboard/loader/upgrader/6",7:"dashboard/loader/upgrader/7",8:"dashboard/loader/upgrader/8",9:"dashboard/loader/upgrader/9",1e3:"dashboard/loader/upgrader/wa_infographic",1002:"dashboard/loader/upgrader/ca_updateSheet1InUploadedFile",1003:"dashboard/loader/upgrader/waca_removeWidgetContentBoardSpec",1004:"dashboard/loader/upgrader/waca",1005:"dashboard/loader/upgrader/waca_shaping",1006:"dashboard/loader/upgrader/VIDA_breakingchanges",1007:"dashboard/loader/upgrader/multiLayersSupport",1008:"dashboard/loader/upgrader/R9toR10",1009:"dashboard/loader/upgrader/dateTimeLocalFilter",1010:"dashboard/loader/upgrader/HeliosToEndorUpgrade",1011:"dashboard/loader/upgrader/LayoutPageSizeUpgrade",1012:"dashboard/loader/upgrader/LayoutPositioningUpgrade",1013:"dashboard/loader/upgrader/VIDAPropUpgrade",1014:"dashboard/loader/upgrader/DataItemIdUpgrade",1015:"dashboard/loader/upgrader/DataItemUpgrade",1016:"dashboard/loader/upgrader/CompositeChartUpgrade",1017:"dashboard/loader/upgrader/FredIsRedUpgrade",1018:"dashboard/loader/upgrader/DataItemAggregationTypeUpgrade",1019:"dashboard/loader/upgrader/VIDA_ClippingUpgrade",1020:"dashboard/loader/upgrader/VIDA_OptimizeSizeUpgrade",1021:"dashboard/loader/upgrader/VIDA_LabelsColorPropUpgrade",1022:"dashboard/loader/upgrader/TextWidgetResponsiveUpgradeHelper",1023:"dashboard/loader/upgrader/LayoutTemplateIndicatorUpgrade",1024:"dashboard/loader/upgrader/RecommendedDriversUpgrade",1025:"dashboard/loader/upgrader/DataItemAggregationTypeUpgradeForScatterAndBubble",1026:"dashboard/loader/upgrader/TextWidgetParagraphUpgrade",1027:"dashboard/loader/upgrader/RankSlotUpgrade",1300:"dashboard/loader/upgrader/VIDAPaddingPropUpgrade",1301:"dashboard/loader/upgrader/DuplicateLayoutCssPropUpgrade",1400:"dashboard/loader/upgrader/VIDALegendFontSizeMappingUpgrade",1401:"dashboard/loader/upgrader/SummaryKPIUpgrade",1402:"dashboard/loader/upgrader/WidgetTitleAriaLabelUpgrade",1403:"dashboard/loader/upgrader/MissingOriginalCustomGroupItemId",1404:"dashboard/loader/upgrader/DrillthroughDefinitionScopeUpgrade",1600:"dashboard/loader/upgrader/TabIconUpgrade",1601:"dashboard/loader/upgrader/CssAndFillColorConflictUpgrade",1800:"dashboard/loader/upgrader/NewGenSpec",1801:"dashboard/loader/upgrader/ColBarZeroOriginValueUpgrade",1802:"dashboard/loader/upgrader/DatasetScopeMultiMeasure",1803:"dashboard/loader/upgrader/CompositeChartV2Upgrade",1804:"dashboard/loader/upgrader/CarbonPlexUpgrade",1805:"dashboard/loader/upgrader/KPI_VCF_Upgrade",1806:"dashboard/loader/upgrader/AggregateTypeVisibleUpgrade",1807:"dashboard/loader/upgrader/CrosstabTable_VCF_Upgrade",1808:"dashboard/loader/upgrader/FredIsRedColorMapUpgrade"};return t.forEach((function(e,t){r[t]="dashboard-core/js/lib/@waca/dashboard-version-upgrades/upgrades/"+e})),r})),define("dashboard-core/js/ca/services/CapabilitiesService",[],(function(){var e={dashboard:"canAuthorDashboard",explore:"canUseExploration",story:"canAuthorDashboard"},t={canAuthorDashboard:0,canUseExploration:1},r=410,n=404,i="Missing assetId in the argument sources at element: ",o="Application name is not supported by the capabilities service: ",a="Capability name is not currently supported by the capabilities service: ",s="Not able to get capability for asset id: ";return function(){function l(e){_classCallCheck(this,l),this._maxCacheEntries=e&&e.maxCacheEntries||100}return l.prototype.initialize=function(e){return this._glassContext=e,this._ajaxService=e.getCoreSvc(".Ajax"),this._capabilitiesCache={},this._assetIds=[],Promise.resolve()},l.prototype.destroy=function(){this._capabilitiesCache={},this._assetIds=[],this._glassContext=null,this._ajaxService=null},l.prototype._addCapabilityValues=function(e,t){if(this._assetIds.length===this._maxCacheEntries){var r=this._assetIds.shift();delete this._capabilitiesCache[r]}this._capabilitiesCache[e]=t,this._assetIds.push(e)},l.prototype.checkAuthoringCapability=function(e){var t=e.spec,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return Promise.resolve(!0);try{var n=this._getSourceInfosFromSpec(t);return this.hasCapability(n,r)}catch(e){return Promise.reject(e)}},l.prototype.getCurrentAuthoringCapability=function(){var t=this._getApplicationName(),r=t&&e[t.toLowerCase()];return r||this._glassContext.getCoreSvc(".Logger").warn(o+t),r},l.prototype._getApplicationName=function(){var e=this._glassContext.appController.getCurrentContentView().getDashboardApi();return e&&e.getFeature("DashboardSettings").get("applicationName")},l.prototype._getSourceInfosFromSpec=function(e){for(var t=[],r=e.dataSources&&e.dataSources.sources||[],n=0;n<r.length;n++){var i=r[n];t.push({assetId:i.assetId,type:i.type})}return t},l.prototype.hasCapability=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!e.length)return Promise.resolve(!0);try{if(!t&&!(t=this.getCurrentAuthoringCapability())){var r=this._getApplicationName();throw new Error(o+r)}for(var n=this._getCapabilityIndex(t),a=[],s=!0,l=0;l<e.length;l++){var d=e[l].assetId;if(!d)throw new Error(i+l);var c=this._getCapabilityFromCache(d);if(c){if(!c[n]){s=!1;break}}else a.push(d)}return s?a.length?this._fetchCapabilitiesFromCM(a,n):Promise.resolve(!0):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},l.prototype._getCapabilityIndex=function(e){var r=t[e];if(void 0===r)throw new Error(a+e);return r},l.prototype._getCapabilityFromCache=function(e){return this._capabilitiesCache[e]},l.prototype._fetchCapabilitiesFromCM=function(e,t){var r=this,n=[];e.forEach((function(t){if(!t)throw new Error(i+e.toString());n.push(r._getCapabilitiesPromise(t))}));var o=[];return Promise.all(n).then((function(n){for(var i=!0,a=0;a<n.length;a++){var l=n[a].data.data;if(l&&l.length)r._getCapabilityValuesFromCMResult(l[0],e[a])[t]||(i=!1);else o.push(e[a])}return o.length&&r._glassContext.getCoreSvc(".Logger").warn(s+o.toString()),Promise.resolve(i)}))},l.prototype._getCapabilityValuesFromCMResult=function(e,t){var r=e.effectiveUserCapabilities,n=[];return n.push(!(-1===r.indexOf("canAuthorDashboard"))),n.push(!(-1===r.indexOf("canUseExploration"))),this._addCapabilityValues(t,n),n},l.prototype._getCapabilitiesPromise=function(e){return this._ajaxService.ajax({url:"v1/objects/"+e+"?fields=effectiveUserCapabilities",type:"GET",headers:{Accept:"application/json"}}).catch((function(e){if(e.code===r||e.code===n)return{data:{data:[]}};throw e}))},l}()})),define("dashboard-core/js/features/dashboard/toolbarDock/ToolbarDockComponent",["react","react-dom","@ba/ba-ui-carbon-toolkit","prop-types"],(function(e,t,r,n){var i=r.Container,o=r.Separator,a=function(t){function r(e){return _classCallCheck(this,r),_possibleConstructorReturn(this,t.call(this,e))}return _inherits(r,t),r.prototype._generateSeparator=function(){return e.createElement(o,{className:"toolbarDockSeparator",orientation:"vertical",style:{margin:"0"}})},r.prototype._generateDocks=function(){var t=this;if(this.props.toolbarDockDOM.getProviders()){var r=Object.values(this.props.toolbarDockDOM.getProviders());return r.sort((function(e,t){return e.getIndex()-t.getIndex()})),r.map((function(n,i){return i+1===r.length?n.getReactElement():e.createElement(e.Fragment,null,n.getReactElement(),t._generateSeparator())}))}},r.prototype.render=function(){return e.createElement(i,{className:r.ROOT},this._generateDocks())},r}(e.Component);return a.ROOT="toolbarDockContainer",a.propTypes={toolbarDockDOM:n.shape({getProviders:n.func})},a})),define("dashboard-core/js/features/dashboard/toolbarDock/toolbarSections/ToolbarSectionComponent",["react","react-dom","@ba/ba-ui-carbon-toolkit","prop-types","../../../../lib/@waca/dashboard-common/dist/ui/Toolbar","../../../../lib/@waca/core-client/js/core-client/ui/KeyCodes"],(function(e,t,r,n,i,o){var a=r.Container,s=function(r){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,r.call(this,e));return t._setRef=t._setRef.bind(t),t._toolbar=new i({className:"dockedToolbar toolbar",reactToolbar:!0}),t._toolbarRendered=Promise.resolve(),t}return _inherits(n,r),n.prototype.componentDidMount=function(){this._callbacks={state:this._updateState.bind(this),focus:this._focus.bind(this)},this.props.stateProvider.registerCallback(this.props.stateEvent,this._callbacks.state),this.props.stateProvider.registerCallback(this.props.focusEvent,this._callbacks.focus)},n.prototype.componentWillUnmount=function(){this.props.stateProvider.removeCallback(this.props.stateEvent,this._callbacks.state),this.props.stateProvider.removeCallback(this.props.focusEvent,this._callbacks.focus),this._toolbar.remove()},n.prototype._updateState=function(e){var t=this;this._toolbar.clearItems(),this._toolbarRendered=this._toolbar.addItems(e.actions).then((function(){t._toolbar.ready()}))},n.prototype._focus=function(){var e=this;this._initialFocus=document.activeElement,this._toolbarRendered.then((function(){e._toolbar.setFocus()}))},n.prototype._onKeyDown=function(e){e.keyCode===o.ESCAPE&&this._initialFocus&&(this._initialFocus.focus(),this._initialFocus=null)},n.prototype._setRef=function(e){this[n.ROOT]=e;var r=t.findDOMNode(e);this.props.toolbarSectionDOM.setNode(r),e?r.appendChild(this._toolbar.el):this._toolbar.el.parentNode&&this._toolbar.el.parentNode.removeChild(this._toolbar.el)},n.prototype.render=function(){return e.createElement(a,{className:n.ROOT+" "+this.props.className,ref:this._setRef,onKeyDown:this._onKeyDown.bind(this)})},n}(e.Component);return s.ROOT="ToolbarSection",s.propTypes={className:n.string,toolbarSectionDOM:n.shape({setNode:n.func}),stateProvider:n.shape({getState:n.func,registerCallback:n.func,removeCallback:n.func}),stateEvent:n.string,focusEvent:n.string},s.defaultProps={focusEvent:"null_focus"},s})),define("dashboard-core/js/features/dashboard/dashboardProperties/DashboardInternalPropertiesProvider",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../lib/@waca/dashboard-common/dist/api/PropertiesProviderAPI"],(function(e,t){return function(){function r(n){var i=n.features,o=n.options;_classCallCheck(this,r),this._api=e.createAPI(this,[t]),this._templateCollection=o.templateCollection||[],i.Properties.registerProvider(this.getAPI())}return r.prototype.getAPI=function(){return this._api},r.prototype.getPropertyLayoutList=function(){return[]},r.prototype.getPropertyList=function(){var e=this;return[{id:"excludedTemplates",getPropertyValue:function(){return e._getExcludedTemplatesFromCollections()},setPropertyValue:function(){throw new Error("not supported")}}]},r.prototype.reset=function(){},r.prototype._getExcludedTemplatesFromCollections=function(){var e=[];return this._templateCollection.find((function(t){"tab"===t.dataId&&Array.isArray(t.excludedTemplates)&&(e=e.concat(t.excludedTemplates))})),e},r}()})),define("dashboard-core/js/features/dashboard/contentTypeRegistry/api/ContentTypeRegistryAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.getRegisteredTypes=function(){},e.prototype.getContentFeatures=function(){},e.prototype.getExposedContents=function(){},e.prototype.isTypeRegistered=function(){},e.prototype.processFeatureCollection=function(){},e}()})),define("dashboard-core/js/features/dashboard/contentTypeRegistry/api/impl/ContentTypeRegistry",["../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../ContentTypeRegistryAPI"],(function(e,t){var r=["LayoutPropertiesProvider"],n={title:["TextEditor"]};return function(){function i(r){var n=r.options;_classCallCheck(this,i),this._api=e.createAPI(this,[t]),this._contentTypes=n||[],this._contentFeatures=[],this._initContent()}return i.prototype._initContent=function(){var e=this;this._contentTypes.forEach((function(t){t.type&&((t.propertyList||t.propertyLayoutList)&&e._contentFeatures.push({name:"ContentRegistry.internal."+t.type+"Properties",class:"dashboard-core/js/features/content/contentProperties/ContentPropertiesProvider",options:{propertyLayoutList:t.propertyLayoutList,propertyList:t.propertyList},dependencies:["Properties"],types:[t.type]}),e._contentFeatures.push({name:"ContentRegistry.internal."+t.type+"Capabilities",class:"dashboard-core/js/features/content/contentCapabilities/ContentCapabilities",options:t.capabilities||{},types:[t.type]}),t.renderer&&t.renderer.class&&e._contentFeatures.push({name:"renderer",class:t.renderer.class,types:[t.type],dependencies:t.renderer.dependencies||[]}))}))},i.prototype.destroy=function(){this._api=null,this._contentTypes=[],this._contentFeatures=[]},i.prototype.getAPI=function(){return this._api},i.prototype.getContentFeatures=function(){return this._contentFeatures},i.prototype.getExposedContents=function(){return this._contentTypes.filter((function(e){return e.expose})).map((function(e){return e.title=e.name||e.type,e.defaultSpec={spec:{name:e.title,type:e.type}},e}))},i.prototype.isTypeRegistered=function(e){return!!this._contentTypes.find((function(t){return t.type===e}))},i.prototype.getRegisteredTypes=function(){var e=[];return this._contentTypes.forEach((function(t){t.type&&e.push(t.type)})),e},i.prototype._getFeatureDependencies=function(e){var t=[],r=e.capabilities||{};return Object.keys(r).forEach((function(e){var i=r[e],o=n[e];i&&o&&o.forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))})),t},i.prototype.processFeatureCollection=function(e){var t=this,n=e.concat(this._contentFeatures);return this._contentTypes.forEach((function(e){var i=r;e.type&&(i=i.concat(e.features||[]).concat(t._getFeatureDependencies(e))),i.forEach((function(t){var r=n.find((function(e){return e.name===t}));r&&r.types&&(r.types=[].concat(r.types,[e.type]))}))})),n},i}()})),define("dashboard-core/js/features/dashboard/userProfile/UserProfileAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.hasCapability=function(){},e.prototype.getContentLocale=function(){},e.prototype.getProductLocale=function(){},e.prototype.getAvailableContentLocales=function(){},e.prototype.getUserAccount=function(){},e.prototype.getValidDomainList=function(){},e}()})),define("dashboard-core/js/features/dashboard/userProfile/UserProfileImpl",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./UserProfileAPI"],(function(e,t){return function(){function r(){_classCallCheck(this,r),this._api=e.createAPI(this,[t]),this._capabilities={canAuthorDashboard:!0,canUseInteractiveDashboard:!0}}return r.prototype.getAPI=function(){return this._api},r.prototype.getAvailableContentLocales=function(){return Promise.resolve(null)},r.prototype.getValidDomainList=function(){return null},r.prototype.hasCapability=function(e){return!!e&&!!this._capabilities[e]},r.prototype.getContentLocale=function(){return"en"},r.prototype.getProductLocale=function(){return"en"},r.prototype.getUserAccount=function(){return{defaultName:void 0,userName:void 0,id:void 0}},r}()})),define("dashboard-core/js/ca/features/contentStore/api/ContentStoreAPI",[],(function(){return function(){function e(){_classCallCheck(this,e)}return e.prototype.get=function(){},e.prototype.post=function(){},e.prototype.put=function(){},e.prototype.delete=function(){},e}()})),define("dashboard-core/js/ca/features/contentStore/ContentStore",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./api/ContentStoreAPI","underscore"],(function(e,t,r){return function(){function n(e){_classCallCheck(this,n),this.ajaxService=e,this.baseObjectUrl="v1/objects"}return n.prototype.getAPI=function(){return this._api||(this._api=e.createAPI(this,[t])),this._api},n.prototype.get=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".my_folders",t=this._preparePath(e)+"/items?fields=id,type,defaultName,modificationTime,owner{defaultName,userName,email},version";return this.ajaxService.get(t).then((function(e){return e&&e.data.map((function(e){return{id:e.id,type:e.type,defaultName:e.defaultName,modificationTime:e.modificationTime,owner:{defaultName:r.isEmpty(e.owner)?void 0:e.owner[0].defaultName,userName:r.isEmpty(e.owner)?void 0:e.owner[0].userName,email:r.isEmpty(e.owner)?void 0:e.owner[0].email},version:e.version}}))||[]})).catch((function(e,t){return Promise.reject({status:t.status})}))},n.prototype.delete=function(e){var t=this._preparePath(e)+"?force=true&recursive=true";return this.ajaxService.delete(t).then().catch((function(e,t){return Promise.reject({status:t.status})}))},n.prototype.post=function(e,t){var r=this._preparePath(e)+"/items";return this.ajaxService.post(r,{contentType:"application/json",processData:!1,dataType:"text",data:JSON.stringify(t)}).then().catch((function(e,t){return Promise.reject({status:t.status})}))},n.prototype.put=function(e,t){var r=this._preparePath(e);return this.ajaxService.put(r,{contentType:"application/json",processData:!1,dataType:"text",data:JSON.stringify(t)}).then().catch((function(e,t){return Promise.reject({status:t.status})}))},n.prototype._preparePath=function(e){return this.baseObjectUrl+"/"+e},n}()})),define("dashboard-core/js/ca/features/userProfile/CAUserProfile",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../features/dashboard/userProfile/UserProfileAPI"],(function(e,t){return function(){function r(){_classCallCheck(this,r),this._api=e.createAPI(this,[t])}return r.prototype.getAPI=function(){return this._api},r.prototype.initialize=function(e){var t=this;return this._userProfile=e.getCoreSvc(".UserProfile"),this._config=e.getCoreSvc(".Config"),this._config.getConfigValue("ClientValidDomainList").then((function(e){t._validDomainList=e}))},r.prototype.hasCapability=function(e){return-1!=this._userProfile.capabilities.indexOf(e)},r.prototype.getValidDomainList=function(){return this._validDomainList},r.prototype.getContentLocale=function(){var e=this._userProfile&&this._userProfile.preferences;return e&&e.contentLocale||"en"},r.prototype.getProductLocale=function(){var e=this._userProfile&&this._userProfile.preferences;return e&&e.productLocale||"en"},r.prototype.getAvailableContentLocales=function(){return this._config.getContentLocales()},r.prototype.getUserAccount=function(){var e=this._userProfile.userAccount;return{defaultName:e&&e.defaultName,userName:e&&e.userName,id:e&&e.id,email:e&&e.email}},r}()})),define("dashboard-core/js/ca/AppFactory",["../lib/@waca/dashboard-common/dist/core/APIFactory","../dashboard/loader/BoardLoaderHelper","../api/impl/LegacyViewControllers","../api/impl/DashboardCore","../app/util/GlassUtil","./features/contentStore/ContentStore","./features/userProfile/CAUserProfile"],(function(e,t,r,n,i,o,a){var s={"com.ibm.bi.dashboard.features":["DashboardLearning","deleteAction","groupAction","duplicateAction","orderAction","alignAction","pinAction","launchIntoExplore","disconnectEventGroupAction","linkEventGroupAction","createEventGroupAction","ResetDashboard","editNotebookAction","ConvertToTemplate","CanvasDnD","InAppSlideoutState","InAppSlideoutDOM","PropertiesPane","PropertiesPaneDOM","PropertiesAction","lassoSelectAction","contextualGridAction","jumpToAction","changeVisTypeAction","suppressionAction","HideRowColumnAction","SearchAction","AggregationTypeAction","FormatAction","CrosstabActions","FilterDockAction","MetadataDnDProvider","SlotEditorState","SlotEditorDOM","OnLoadFilterModifier","ToolbarDock","ToolbarDockDOM","OnDemandToolbarSectionDOM","CanvasToolbarSectionDOM","Print","DashboardPrint","developerWidgetRefreshAction","LocalFilterExtension","SampleFeature","CsvExport","ToolbarPanelDockDOM","PropertiesPaneDOMV2"],"com.ibm.bi.dashboard.content-features":["VisDnD","VisDnD.utils","contextualGridAction","Visualization.SmartsRecommender","Toolbar","HideRowColumnAction","VisExpandMode","DataBehindTheVis","ViprUITest","LocalFilterDialog","ContentMenu","DropZonesOverlayState","DropZonesOverlayDOM"]};return function(){function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,l),this._glassContext=t.glassContext||window.__glassAppController.glassContext;var r=t.features&&t.features["com.ibm.bi.dashboard.features"]||{},n=t.features&&t.features["com.ibm.bi.dashboard.content-features"]||{};this._featuresOverride={"com.ibm.bi.dashboard.features":{excludes:s["com.ibm.bi.dashboard.features"].filter((function(e){return!r.includes||r.includes.indexOf(e)<0})).concat(r.excludes||[])},"com.ibm.bi.dashboard.content-features":{excludes:s["com.ibm.bi.dashboard.content-features"].filter((function(e){return!n.includes||n.includes.indexOf(e)<0})).concat(n.excludes||[])},bootstrap:t.features&&t.features.bootstrap};var d={metadataBlocksVisualization:!0,disableQueryPreExecution:!0};this._apiConsumerConfig=Object.assign(d,t.apiConsumerConfig);var c=i.getAjaxService(this._glassContext),u=new o(c),h=new a;return h.initialize(this._glassContext),this._featureMap=new Map,this._featureMap.set("ContentStore",u.getAPI()),this._featureMap.set("UserProfile",h.getAPI()),e.createAPI(this,[function(){function e(){_classCallCheck(this,e)}return e.prototype.create=function(){},e.prototype.getFeature=function(){},e}()])}return l.prototype.create=function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=void 0,a=void 0;return this._glassContext.getSvc(".DashboardRuntime").then((function(t){var r={featuresOverride:e._featuresOverride,assetId:i.assetId,spec:i.spec,profiles:i.profiles,apiConsumerConfig:e._apiConsumerConfig};return r.assetId||r.spec||(r.spec=t.getDefaultSpec()),t.getRuntimeEnvironment(r)})).then((function(e){return(a=new t((o=e).dashboardApi)).loadLayoutExtensions(o.layoutExtensions)})).then((function(e){a.registerLayoutExtensions(e);var t=new r({environment:o});return o.dashboardApi.getFeature("FeatureRegistry.internal").registerFeature("LegacyViewControllers",t),new n({dashboardAPI:o.dashboardApi,internalDashboardAPI:o.internalDashboardAPI}).getAPI()})).then((function(e){return o.internalDashboardAPI.onPageReady().then((function(){return e}))}))},l.prototype.getFeature=function(e){return this._featureMap.get(e)},l}()})),define("dashboard-core/js/dashboard/layouts/TabLayout",["../../app/nls/StringResources"],(function(e){return{layout:{type:"tab",layoutPositioning:"relative",items:[{type:"absolute",title:e.get("defaultTabTitle",{index:1})}],style:{height:"100%"},pageSize:{width:1280,height:720},showGrid:!0,snapGrid:!0,snapObjects:!0}}})),define("dashboard-core/js/dashboard/layouts/SinglePageLayout",[],(function(){return{layout:{type:"genericPage",layoutPositioning:"relative",pageSize:{width:1280,height:720},showGrid:!0,snapGrid:!0,snapObjects:!0}}})),define("dashboard-core/js/app/ui/dialogs/TemplateSelectDialog",["@ba/ba-ui-carbon","react","prop-types"],(function(e,t,r){var n=t.Component,i=e.Modal,o=function(e){function r(t){_classCallCheck(this,r);var n=_possibleConstructorReturn(this,e.call(this,t));return n.state={isOpen:!0},n}return _inherits(r,e),r.prototype.render=function(){var e=this;return t.createElement(i,{open:this.state.isOpen,size:this.props.size,modalHeading:this.props.modalHeading,primaryButtonText:this.props.primaryButtonText,secondaryButtonText:this.props.secondaryButtonText,className:this.props.className,hasScrollingContent:this.props.hasScrollingContent,hasForm:this.props.hasForm,onRequestClose:function(){e.setState({isOpen:!1}),e.props.onRequestClose()},onRequestSubmit:function(){e.setState({isOpen:!1}),e.props.onRequestSubmit()}},this.props.children)},r}(n);return o.propTypes={onRequestClose:r.func.isRequired,onRequestSubmit:r.func.isRequired,primaryButtonText:r.string.isRequired,size:r.string,modalHeading:r.string,secondaryButtonText:r.string,className:r.string,hasScrollingContent:r.bool,hasForm:r.bool,children:r.any},o})),define("text!dashboard-core/js/dashboard/views/templates/DataGridView.html",[],(function(){return'<div class="gridTabsView">\n\t<div class="gridTabs"></div>\n\t<div class="gridTabsExpand"></div>\n</div>\n<div class="dataGridView"></div>\n'})),define("dashboard-core/js/dashboard/views/datatray/DataGridView",["jquery","doT","underscore","../../../lib/@waca/core-client/js/core-client/ui/core/View","text!../templates/DataGridView.html","../../../app/nls/StringResources","@ba/ba-ui-carbon-toolkit","prop-types","react","react-dom","../../../lib/@waca/core-client/js/core-client/utils/ClassFactory"],(function(e,t,r,n,i,o,a,s,l,d,c){var u={false:{iconName:"maximize",titleId:"expand"},true:{iconName:"minimize",titleId:"collapse"}},h=a.Button,p=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.render=function(){var e=this;return l.createElement(h,{kind:"ghost",hasIconOnly:!0,title:this.props.title,className:"expandCollapseButton",size:"small",tooltipPosition:"bottom",tooltipAlignment:"end",icon:this.props.icon,onClick:function(){return e.props.handleExpandCollapse()}})},t}(l.Component);p.propTypes={icon:s.object.isRequired,title:s.object.isRequired,handleExpandCollapse:s.function};var g=n.extend({init:function(e){g.inherited("init",this,arguments),this.glassContext=e.services.biGlass.glassContext,this.dashboardApi=e.dashboardApi,this.eventRouter=e.eventRouter,this.services=e.services,this.logger=this.dashboardApi.getGlassCoreSvc(".Logger"),this.dataSourceCollection=this.dashboardApi.getFeature("dataSources.deprecated").getSourcesCollection(),this._registerEvents(),this.gridState={selectedTabId:null,tabs:null,isExpanded:!1},this._loadExtensions(e.appSettings),this._resetReady(),this.renderRequests=[]},_loadExtensions:function(e){var t=this;if(!this._loadExtensionsPromise){var r=[this.dashboardApi,e||{},this.eventRouter],n=this.dashboardApi.findGlassCollection("com.ibm.bi.dashboard.dataTray-extensions");this._loadExtensionsPromise=Promise.resolve(n).then((function(e){var n=[];return t.componentControllers=[],e.forEach((function(e){n.push(c.loadModule(e.class))})),Promise.all(n).then((function(e){e.forEach((function(e){t.componentControllers.push(new(Function.prototype.bind.apply(e,[null].concat(r))))}))}))}))}return this._loadExtensionsPromise},_resetReady:function(){var e=this;this._isReady=!1,this.viewReady=new Promise((function(t){e._readyView=function(){return e._isReady=!0,e._clearRenderQueue().then(t).finally(e._renderReactTabs.bind(e))}}))},_registerEvents:function(){this.registeredEvents=[this.eventRouter.on("dataSourcePanel:dataSourceSelected",this._eventHandler,this),this.eventRouter.on("tab:tabChanged",this._eventHandler,this),this.dashboardApi.getCanvas().on("change:selections",this._eventHandler,this),this.eventRouter.on("dataInVis:selected",this._eventHandler,this),this.dashboardApi.on("widget:rerendered",this._eventHandler,this),this.dashboardApi.on("shapingmodel:changed",this._eventHandler,this),this.dataSourceCollection.on("remove",this._eventHandler,this),this.on("splitterPanel:show",this._eventHandler,this),this.on("splitterPanel:hide",this._eventHandler,this),this.on("splitterPanel:visibleChange",this._eventHandler,this)]},_eventHandler:function(e,t){return"splitterPanel:hide"===t?this._onSplitterHide():("splitterPanel:show"===t&&this._onSplitterShow(),"splitterPanel:visibleChange"===t&&this._handleVisibleChange(e),!this.renderRequests.length&&this._isReady?(this.renderRequests.push({event:e,eventName:t}),this._clearRenderQueue().finally(this._renderReactTabs.bind(this))):(this.renderRequests.push({event:e,eventName:t}),Promise.resolve()))},_clearRenderQueue:function(){var e=this;if(!this.renderRequests.length)return Promise.resolve();var t=this.renderRequests[0];return this.renderDataTray(t.event,t.eventName).finally((function(){return e.renderRequests.shift(),e._clearRenderQueue()}))},shouldShowHandle:function(){return this.componentControllers.some((function(e){return!!e.isSupported&&e.isSupported()}))},renderDataTray:function(e,t){var n=this,i=[];return this.componentControllers.forEach((function(r){r.isSupported?r.isSupported()&&i.push(r.getTabContrib(e,t,n.gridState.selectedTabId)):i.push(r.getTabContrib(e,t,n.gridState.selectedTabId))})),Promise.all(i).then((function(e){if(n.gridState.tabs=r.flatten(r.without(e,null)),!n.gridState.tabs.length)return n.gridState.selectedTabId=null,n._unmountComponents(),Promise.resolve();var t=r.findWhere(n.gridState.tabs,{isSelectedOnTrayRender:!0})||n.gridState.tabs[0];return t.select(n.gridState.selectedTabId,n.gridContainer).finally((function(){return n.gridState.selectedTabId=t.id}))}))},_onSplitterShow:function(){return this._readyView()},_onSplitterHide:function(){this._unmountComponents(),this._resetReady()},_unmountComponents:function(){this._tabsContainer&&(d.unmountComponentAtNode(this._tabsContainer),e(this._tabsContainer).empty()),this.gridContainer&&(d.unmountComponentAtNode(this.gridContainer),e(this.gridContainer).empty()),this._tabsExpandCollapseContainer&&(d.unmountComponentAtNode(this._tabsExpandCollapseContainer),e(this._tabsExpandCollapseContainer).empty())},getSplitterOpts:function(){var e=this;return this._loadExtensionsPromise.then((function(){var t=e.dashboardApi.getFeature("Icons"),r=!e.componentControllers.some((function(e){return!!e.isSupported&&e.isSupported()}));return e.services.getSvc(".StringResources").then((function(n){return{handleClass:"gridHandle",handleIcon:t.getIcon("table").id,hideInConsume:r,handleOpenTitle:n.get("dataTrayHandleOpenLabel"),handleCloseTitle:n.get("dataTrayHandleCloseLabel"),view:e,initialSize:250}}))}))},remove:function(){return this._unmountComponents(),this.registeredEvents.length&&(this.registeredEvents.forEach((function(e){e&&e.remove&&e.remove()})),this.registeredEvents=[]),this.gridState.tabs=null,this.gridState.selectedTabId=null,this.gridState.isExpanded=!1,g.inherited("remove",this,arguments)},_handleVisibleChange:function(e){this._setExpandCollapseIcon(!(!e||!e.isExpanded))},_isRelationshipsEnabled:function(){return this.dashboardApi.getGlassCoreSvc(".FeatureChecker").checkValue("dashboard","RelationshipsView","enabled")||this.dashboardApi.getConfiguration("showRelationships")},_renderExpandCollapseIcon:function(){if(this._isRelationshipsEnabled()){var e=this.dashboardApi.getFeature("Icons").getIcon(u[this.gridState.isExpanded].iconName),t=l.createElement(p,{icon:e,title:o.get(u[this.gridState.isExpanded].titleId),handleExpandCollapse:this._handleExpandCollapseTap.bind(this)});d.render(t,this._tabsExpandCollapseContainer)}},_initializeExpandCollapseButton:function(){this._tabsExpandCollapseContainer=this.$el.find(".gridTabsExpand")[0],this._renderExpandCollapseIcon()},_setExpandCollapseIcon:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.gridState.isExpanded=e,this._renderExpandCollapseIcon()},_handleExpandCollapseTap:function(){var e=this;if(this._isRelationshipsEnabled()){var t=this.dashboardApi.getDashboardCoreSvc(".CanvasExtensions");if(t)return t.splitPaneView.getSplitter().expandCollapse().then((function(t){e._setExpandCollapseIcon(t)}))}return Promise.resolve()},render:function(){var e=this;return this._loadExtensionsPromise.then((function(){e.dotTemplate=t.template(i);var r=e.dotTemplate();return e.$el.html(r).addClass("dashboardGrid"),e.gridContainer=e.$el.find(".dataGridView")[0],e._tabsContainer=e.$el.find(".gridTabs")[0],e._initializeExpandCollapseButton(),e._readyView(),e.viewReady})).catch((function(t){e.logger.log(t)}))},getHighlightedTabId:function(){return this.gridState.selectedTabId},_renderReactTabs:function(){var e=this;if(!this.gridState.tabs||0===this.gridState.tabs.length)return Promise.resolve();var t={tabData:this.gridState.tabs,onTabChange:this.onTabChange.bind(this),selectedTab:this.gridState.selectedTabId};return new Promise((function(r,n){try{require(["ca-modeller/shaping"],(function(n){e._shapingHelper||(e._shapingHelper=new n.Shaping(e.glassContext,{featureConfig:{calculationAction:!0,calculationEditAction:!0,customGroupCreateAction:!0,customGroupReplaceAction:!0}})),e._shapingHelper.render(n.GridTabs,t,e._tabsContainer),r()}),n)}catch(e){n(e)}}))},onTabChange:function(e){var t=r.findWhere(this.gridState.tabs,{id:e});t.select(this.gridState.selectedTabId,this.gridContainer),this.gridState.selectedTabId=t.id,this._renderReactTabs()}});return g})),define("dashboard-core/js/dashboard/glass/plugins/EditToggleSwitch",["../../../lib/@waca/baglass/js/baglass/app/plugins/GlassPlugin","react","../../../lib/@waca/dashboard-common/dist/ui/react_toolbar/components/ToggleSwitch","../../../api/DashboardAPI"],(function(e,t,r,n){return function(e){function i(r){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,e.call(this,r));return n.itemSpec.className="editToggleSwitch",n.itemSpec.small=!0,n.itemSpec.action={apply:n.onPress.bind(n)},n.itemSpec.isChecked=n.isChecked.bind(n),n.myRef=t.createRef(),n}return _inherits(i,e),i.prototype.onPress=function(){var e=this.glassContext.getCoreSvc(".Logger"),t=this.glassContext.addToOptions({target:{plugin:this}});return this.getController().then((function(e){"function"==typeof e.onPress&&e.onPress(t)})).catch((function(t){e.error("failed to retrieved the actionController or invoke its method",t)}))},i.prototype.isChecked=function(){var e=this;return this.glassContext.currentAppView.onViewRendered().then((function(){return e.glassContext.currentAppView.getCurrentContentView().getDashboardApi().getMode()===n.MODES.EDIT}))},i.prototype.render=function(){var e=this;return t.createElement(r,{itemSpec:this.itemSpec,ref:function(t){e._toggleComponent=t}})},i.prototype.setPressed=function(){this._toggleComponent&&this._toggleComponent.setState&&this._toggleComponent.setState({checked:!0})},i.prototype.setUnpressed=function(){this._toggleComponent&&this._toggleComponent.setState&&this._toggleComponent.setState({checked:!1})},i}(e)})),define("dashboard-core/js/dashboard/widgets/staticwidget/StaticWidget",["underscore","../../../lib/@waca/dashboard-common/dist/ui/WidgetBase"],(function(e,t){var r=t.extend({focusOn:!1,init:function(){r.inherited("init",this,arguments)},onContainerReady:function(){r.inherited("onContainerReady",this,arguments)},onChromeSelected:function(){r.inherited("onChromeSelected",this,arguments),this.onFocus()},onChromeDeselected:function(){r.inherited("onChromeDeselected",this,arguments),this.focusOn=!1},onFocus:function(){this.focusOn||(this.focusOn=!0)},getHtmlRender:function(){return null},getWidgetStyleNode:function(){return this.$el.children(".staticContent")},onPropertyUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.inherited("onPropertyUpdate",this,arguments),this.updateModelContent(null,e.transactionId,e.sender)},updateModelContent:function(t,r){t||(t=this.getHtmlRender());var n={};r?e.extend(n,{payloadData:{undoRedoTransactionId:r}}):e.extend(n,{silent:!0}),this.set({content:t},n)}});return r})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/NewWidget.html",[],(function(){return'<div class="staticContent inlineEdit{{?it.contentClass}} {{!it.contentClass}}{{?}}">\n\t{{?it.includeAuthoringMode}}\n\t\t<div class="placeHolderContainer">\n\t\t\t<div class="emptyStatePlaceholder__image{{?it.isHidingBGImg}} hide{{?}}"></div>\n\t\t\t<div class="emptyStatePlaceholder{{?it.isHidingLabels}} shrink{{?}}">\n\t\t\t\t<div class="emptyStatePlaceholder__label responsiveColor {{?it.isHidingLabels}} hide {{?}}">{{!it.emptyStateLabel}}</div>\n\t\t\t\t<div class="emptyStatePlaceholder__urlLabel responsiveColor {{?it.isHidingLabels}} hide {{?}}">{{!it.emptyStateUrlLabel}}</div>\n\t\t\t\t<input type="text" class="inlineEditInput authoringShow widgetContent" aria-label="{{!it.mediaAriaLabel}}" name="url" placeholder="{{!it.title}}"></input>\n\t\t\t\t<div class="emptyStatePlaceholder__helperLabel responsiveColor {{?it.isHidingLabels}} hide {{?}}">{{!it.helperText}}</div>\n\t\t\t\t<div role="alert" class="errorMessage{{?it.isHidingLabels}} hide{{?}}"></div>\n\t\t\t</div>\n\t\t</div>\n\t{{?}}\n\t{{?it.missingUrlText}}\n\t\t<div class="consumeMessage">\n\t\t\t<span class="wfg_boardstate_conflict"></span>\n\t\t\t<span class="message">{{!it.missingUrlText}}</message>\n\t\t</div>\n\t{{?}}\n</div>\n'})),define("dashboard-core/js/dashboard/widgets/staticwidget/UrlWidget",["jquery","doT","./StaticWidget","text!./NewWidget.html"],(function(e,t,r,n){var i=t.template(n),o=null;return(o=r.extend({init:function(){o.inherited("init",this,arguments),this.eventRouter&&this.eventRouter.on("widget:onExitEditMode",this._onExitEditMode,this)},initialize:function(){return Promise.resolve()},getId:function(){return this.id},onContainerReady:function(){o.inherited("onContainerReady",this,arguments),this.isInlineEditMode()&&this.renderInlineEditUi(),this.updateModeMarkup()},isInlineEditMode:function(){return!1},onConsumeMode:function(){o.inherited("onConsumeMode",this,arguments);var e=this.$el.find(".staticContent");e.removeClass("authoring"),e.addClass("consume")},onAuthoringMode:function(){o.inherited("onAuthoringMode",this,arguments);var e=this.$el.find(".staticContent");e.removeClass("consume"),e.addClass("authoring")},getEmptyStateLabel:function(){return null},getEmptyStateUrlLabel:function(){return null},getEmptyStateHelperLabel:function(){return null},getInlineEditCaption:function(){return null},getMissingUrlText:function(){return null},getAriaLabelText:function(){return null},getContentClass:function(){return null},_onExitEditMode:function(e){this._onClick.bind(this)({target:e})},resize:function(){this._hideElements()},_isHidingLabels:function(){if(this.$el&&this.$el.length){var e=this.$el.height(),t=this.$el.width();return e<180||t<250}return!0},_isHidingBGImg:function(){if(this.$el&&this.$el.length){var e=this.$el.height(),t=this.$el.width();return e<280||t<180}return!0},_hideElements:function(){if(this.$el&&this.$el.length){var e=this.$el.find(".emptyStatePlaceholder__image"),t=this.$el.find(".emptyStatePlaceholder__label"),r=this.$el.find(".emptyStatePlaceholder__urlLabel"),n=this.$el.find(".emptyStatePlaceholder__helperLabel"),i=this.$el.find(".emptyStatePlaceholder"),o=this.$el.find(".emptyStatePlaceholder .errorMessage"),a=this._isHidingLabels(),s=this._isHidingBGImg();e.toggleClass("hide",s),i.toggleClass("shrink",a),t.toggleClass("hide",a),r.toggleClass("hide",a),n.toggleClass("hide",a),o.toggleClass("hide",a)}},renderInlineEditUi:function(){if(!this.$el.find(".inlineEditInput").length){var t=this._getParentContainer();t&&!t.hasClass("urlWidgetInlineEdit")&&t.addClass("urlWidgetInlineEdit"),this.$el.find(".staticContent").replaceWith(i({emptyStateLabel:this.getEmptyStateLabel(),emptyStateUrlLabel:this.getEmptyStateUrlLabel(),title:this.getInlineEditCaption(),helperText:this.getEmptyStateHelperLabel(),missingUrlText:this.getMissingUrlText(),mediaAriaLabel:this.getAriaLabelText(),contentClass:this.getContentClass(),includeAuthoringMode:!0,isHidingBGImg:this._isHidingBGImg(),isHidingLabels:this._isHidingLabels()}));var r=this.$el.find(".staticContent input");r.on("click touchend",function(){r.focus()}.bind(this)),e(this.el).on("keydown",".inlineEditInput",this._inlineKeyDown.bind(this)),e(this.el).on("keyup",".inlineEditInput",this._inlineKeyUp.bind(this)),e(this.el).on("input",".inlineEditInput",this._inlineInput.bind(this)),e(this.el).on("click touchend",this._onClick.bind(this)),e(this.el).off("blur.urlWidget"),e(this.el).on("blur.urlWidget",".inlineEditInput",this._onBlur.bind(this))}},_onClick:function(e){var t=this.el.querySelector(".inlineEditInput");t&&e.target!==t&&t.blur()},_getParentContainer:function(){if(this.$el&&this.$el.length){var t=this.$el[0];if(t){var r=t.parentElement;if(r){var n=e(r);if(n.hasClass("widget"))return n}}}return null},_onBlur:function(){this.$el.find(".inlineEditInput").val()&&this._uiSetUrl()},getLabel:function(){},_inlineKeyDown:function(e){13===e.keyCode&&this._uiSetUrl(),e.stopPropagation()},_inlineKeyUp:function(e){e.stopPropagation(),(27===e.keyCode||123===e.keyCode&&e.shiftKey)&&this.$el.focus()},_inlineInput:function(t){var r=this.$el.find(".inlineEdit");""===e(t.target).val()&&r.hasClass("inputError")&&r.removeClass("inputError")},_uiSetUrl:function(){var e=this.$el.find(".inlineEditInput").val();if(e!==this._lastSetURL){this._lastSetURL=e;var t={},r=this.setUrl(e,t),n=this.$el.find(".inlineEdit");if(r){var i=this._getParentContainer();i&&i.hasClass("urlWidgetInlineEdit")&&i.removeClass("urlWidgetInlineEdit"),n.removeClass("inputError")}else n.addClass("inputError"),n.find(".errorMessage").html(t.message),n.find(".emptyStateHelperLabel").hide();this.refreshPropertiesPane()}},setUrl:function(){return!1},updateModeMarkup:function(){this.isAuthoringMode?this.onAuthoringMode():this.onConsumeMode(),this.updateDescription(this.getLabel())},updateMarkup:function(){this.updateModeMarkup()},onChromeSelected:function(){o.inherited("onChromeSelected",this,arguments),this.onFocus(),setTimeout(function(){e(this.el).find(".inlineEditInput").focus()}.bind(this),10)},registerEventGroup:function(){},encodeURL:function(e){var t=e.split("?"),r=encodeURI(decodeURI(t[0])),n=t[1];if((t=[]).push(r),n){for(var i=n.split("&"),o=[],a=0;a<i.length;a++){for(var s=i[a].split("="),l=[],d=0;d<s.length;d++)l.push(encodeURIComponent(decodeURIComponent(s[d].replace(/\+/g," "))));o.push(l.join("="))}t.push(o.join("&"))}return t.join("?")},destroy:function(){e(this.el).off("click touchend",this._onClick.bind(this)),this.eventRouter&&this.eventRouter.off("widget:onExitEditMode",this._onExitEditMode,this),o.inherited("destroy",this,arguments)}}))._isAllowedProtocol=function(e){return!!e&&(0===(e=e.toLowerCase()).indexOf("https://")||0===e.indexOf("//"))},o.isAllowedProtocol=function(e){return o._isAllowedProtocol(e)},o.getDefaultConsumeMarkup=function(e){return i({missingUrlText:e})},o})),define("dashboard-core/js/dashboard/widgets/staticwidget/ScalingUtil",["jquery"],(function(e){return{scale:function(e){var t,r={width:e.width,height:e.height};return r.width||r.height||!e.image||(r.width=e.image.naturalWidth,r.height=e.image.naturalHeight),r.width=this._sanitizeNumberInput(r.width),r.height=this._sanitizeNumberInput(r.height),e.defaultDim&&(r.width<1&&!e.scaleWidth&&(r.width=e.defaultDim.width),r.height<1&&!e.scaleHeight&&(r.height=e.defaultDim.height)),this._applyScale(e.scaleWidth||e.scaleHeight,!!e.scaleWidth,r),t=r.width/r.height,this._enforceMin(e.min,t,r),this._enforceMax(e.max,t,r),this._formatDimens(e.format,r),r},_sanitizeNumberInput:function(t){var r=0;return"number"===e.type(t)?r=t:e.isNumeric(t)&&(r=parseInt(t,10)),r},_applyScale:function(e,t,r){if(e){var n=e.width,i=e.height,o=r.width>0&&r.height>0;r.width<1&&r.height<1?(r.width=n,r.height=i):this._scaleMaintainRatio(e,t,o,r)}},_scaleMaintainRatio:function(e,t,r,n){t&&(n.width<1||r)?n.width=e.width*n.height/e.height:!t&&(n.height<1||r)&&(n.height=e.height*n.width/e.width)},_enforceMin:function(e,t,r){if(e){var n=e.width,i=e.height,o=n?r.width/n:1,a=i?r.height/i:1;o<1&&o<a?(r.width=n,r.height=n/t):a<1&&(r.height=i,r.width=i*t)}},_enforceMax:function(e,t,r){if(e){var n=e.width,i=e.height,o=n?r.width/n:0,a=i?r.height/i:0;o>1&&o>a?(r.width=n,r.height=n/t):a>1&&(r.height=i,r.width=i*t)}},_formatDimens:function(e,t){t.width=Math.round(t.width),t.height=Math.round(t.height),"css"===e&&(t.width=t.width+"px",t.height=t.height+"px")}}})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/ImageUri.html",[],(function(){return'<div class="staticContent consume imageWidgetContent{{? it.loading}} loading{{?}}{{? it.fillColor}} {{!it.fillColor}}{{?}}{{? it.borderColor}} {{!it.borderColor}}{{?}}">\n\t<img src="{{!it.url}}" {{? it.altText}}alt="{{!it.altText}}" {{?}}style="width: 100%; height: 100%;"></img>\n</div>\n'})),define("dashboard-core/js/dashboard/widgets/staticwidget/ImageWidget",["./UrlWidget","./ScalingUtil","../../../app/nls/StringResources","jquery","underscore","doT","text!./ImageUri.html"],(function(e,t,r,n,i,o,a){var s=/^v[1-9]\/ext\//,l=e.extend({init:function(e){l.inherited("init",this,arguments),this.model=this.model||{},this.model.imageLink=e&&e.initialConfigJSON&&e.initialConfigJSON.imageLink,this.model.altText=e&&e.initialConfigJSON&&e.initialConfigJSON.altText,this.model.fillColor=e&&e.initialConfigJSON&&e.initialConfigJSON.fillColor,this.model.borderColor=e&&e.initialConfigJSON&&e.initialConfigJSON.borderColor,this.propertyCallbacks=this.dashboardApi.getFeature("PropertyCallbacks")},onContainerReady:function(){l.inherited("onContainerReady",this,arguments),this.model&&(this.model.on("change:imageLink",this._onPropertyChange,this),this.model.on("change:altText",this._onPropertyChange,this),this.model.on("change:resize",this._onPropertyChange,this),this.addWhiteListAttrs("imageLink","altText","resize")),this.model.fillColor&&this.$el.find("div.staticContent").addClass("fill-"+this.model.fillColor),this.model.borderColor&&this.$el.find("div.staticContent").addClass("border-"+this.model.borderColor),this.model.borderRadius>=0&&this.applyBorderRadius({value:this.model.borderRadius})},render:function(){this.propertyCallbacks.validateImageInput(null,this.model.imageLink).isValid?(this.model.imageLink=this.encodeURL(this.model.imageLink),this.$el.append(this.getHtmlRender())):this.$el.append(e.getDefaultConsumeMarkup(r.get("imgMissingUrl")))},setUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.propertyCallbacks.validateImageInput(null,e);if(t.message=r.message,r.isValid){var n=i.uniqueId("_addImage_");return this.set({imageLink:e},{sender:this,payloadData:{undoRedoTransactionId:n}}),this._initWidthHeight(e,n),!0}return!1},_initWidthHeight:function(e,r){var n=this;return new Promise((function(i,o){try{var a=new Image;a.onload=function(){a=t.scale({image:a,max:{width:500,height:500},format:"css"});var e=n.getWidgetStyleNode().closest(".widget");e.width(a.width),e.height(a.height),n.widgetChromeEventRouter.trigger("widget:updateLayout",{sender:n,payloadData:{undoRedoTransactionId:r}}),i()},a.src=e}catch(e){o(e)}}))},_urlChange:function(e){return this.setUrl(e.item)},onEnterContainer:function(){this.$el.find(".inlineEditInput").focus()},isInlineEditMode:function(){return!this.model.imageLink},getEmptyStateLabel:function(){return r.get("noImgSelected")},getEmptyStateUrlLabel:function(){return r.get("imgUrl")},getEmptyStateHelperLabel:function(){return r.get("imgPasteLink")},getInlineEditCaption:function(){return r.get("enterImgUrl")},getMissingUrlText:function(){return r.get("imgMissingUrl")},getAriaLabelText:function(){return r.get("mediaAriaLabel")},getLabel:function(){return this._getAltText()||r.get("imageWidgetTitle")},getContentClass:function(){return"imageWidgetContent"},_getAltText:function(){return this.model&&this.model.get?this.model.get("altText"):null},_onPropertyChange:function(t){var i=null;if(this.model.imageLink){if(this.model.imageLink=this.encodeURL(this.model.imageLink),this.propertyCallbacks.validateImageInput(null,this.model.imageLink).isValid){var o=this.getWidgetStyleNode();o.find("input").remove(),o.removeClass("inlineEdit");var a=o.find("img");a.length||(a=n("<img></img>"),o.empty(),o.append(a)),a.attr("src",this.model.imageLink);var s=this._getAltText();s?a.attr("alt",s):a.removeAttr("alt");var l="false"===this.model.resize?"auto":"100%";a.css("width",l).css("height",l)}}else this.renderInlineEditUi(),i=e.getDefaultConsumeMarkup(r.get("imgMissingUrl"));this.updateMarkup(),t.data&&t.data.undoRedoTransactionId?this.updateModelContent(i,t.data.undoRedoTransactionId):this.updateModelContent(i)},getPropertyList:function(){var e=this,t=l.inherited("getPropertyList",this,arguments)||[];return i.forEach(t,(function(t){if("imageLink"===t.id&&s.test(e.model.imageLink))return t.editor.readOnly=!0,t})),t},getHtmlRender:function(){var e=o.template(a),t={url:this.model.imageLink},r=this._getAltText();return r&&(t.altText=r),this.model.fillColor&&(t.fillColor="fill-"+this.model.fillColor),this.model.borderColor&&(t.borderColor="border-"+this.model.borderColor),this.model.imageLink&&(t.url=this.model.imageLink),e(t)}});return l.getDefaultSpec=function(t,r){r=r||{};var n={model:{type:"image",avatarHtml:e.getDefaultConsumeMarkup(),imageLink:r.imageLink,altText:r.altText},layoutProperties:{style:{width:"480px",height:"360px"}}};return r.imageLink?new Promise((function(e,t){try{var i=new Image;i.onload=function(){var t=480/(i.naturalWidth||1),r=360/(i.naturalHeight||1);n.layoutProperties.style=t<1||r<1?{height:Math.min(t,r)*i.naturalHeight+"px",width:Math.min(t,r)*i.naturalWidth+"px"}:{height:i.naturalHeight+"px",width:i.naturalWidth+"px"},e(n)},i.onerror=function(){t()},i.src=r.imageLink}catch(e){t(e)}})):Promise.resolve(n)},l})),define("dashboard-core/js/dashboard/widgets/staticwidget/media/MediaBase",[],(function(){return function(){function e(t,r){_classCallCheck(this,e),this.url=t,this.type=r}return e.prototype.getDimensions=function(){return null},e.prototype.getMarkup=function(){return""},e.prototype.markupLoaded=function(e,t){"authoring"===t?this.showAuthoringMode():this.showConsumeMode()},e.prototype.showAuthoringMode=function(){},e.prototype.showConsumeMode=function(){},e}()})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/media/Media.html",[],(function(){return'<div class="staticContent mediaContainer mediaWidgetContent consume">\n\t{{=it.mediaMarkup}}\n</div>'})),define("dashboard-core/js/dashboard/widgets/staticwidget/media/EmbedMedia",["underscore","doT","./MediaBase","text!./Media.html"],(function(e,t,r,n){var i=t.template(n);return function(r){function n(e,i,o,a){_classCallCheck(this,n);var s=_possibleConstructorReturn(this,r.apply(this,arguments));return s.videoTemplate=t.template(o),s.extraTemplateArguments=a||{},s}return _inherits(n,r),n.prototype.getDimensions=function(){return Promise.resolve(null)},n.prototype.getMarkup=function(t){return e.extend(t,this.extraTemplateArguments,{url:this.url}),i({mediaMarkup:this.videoTemplate(t)})},n.prototype.markupLoaded=function(e){var t;this.$el=e,(t=r.prototype.markupLoaded).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))},n.prototype.showAuthoringMode=function(){var e=this.$el.find("iframe.youtubePlayer, video, audio");if(e[0])switch(e[0].tagName){case"IFRAME":e[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break;case"VIDEO":case"AUDIO":e[0].pause()}var t=this.$el.find(".mediaContainer");t.removeClass("consume"),t.addClass("authoring")},n.prototype.showConsumeMode=function(){var e=this.$el.find(".mediaContainer");e.removeClass("authoring"),e.addClass("consume")},n}(r)})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/media/YoutubeVideo.html",[],(function(){return'<div class="placeholder youtubePlaceholder authoringShow"style="background-image:url(\'http://img.youtube.com/vi/{{!it.youtubeId}}/0.jpg\');"></div>\n<iframe {{? it.title }}aria-label="{{!it.title}}" {{?}}class="youtubePlayer authoringHide" src="//www.youtube.com/embed/{{!it.youtubeId}}?cc_load_policy=1&fs=0&html5=1&iv_load_policy=3&modestbranding=1&rel=0&enablejsapi=1" frameborder="0"></iframe>\n'})),define("dashboard-core/js/dashboard/widgets/staticwidget/media/YoutubeVideoLoader",["./EmbedMedia","text!./YoutubeVideo.html"],(function(e,t){var r=[/.*\.youtube\.com\/watch\?v=([A-Za-z0-9-_]+).*/,/.*\/youtu\.be\/([A-Za-z0-9-_]+).*/,/.*\.youtube\.com\/embed\/([A-Za-z0-9-_]+).*/];return function(){function n(e){_classCallCheck(this,n),this.type=e}return n.prototype.tryToLoad=function(n){var i=function(e){for(var t=void 0,n=0;n<r.length;n++)if(t=r[n].exec(e))return t[1];return null}(n);return i&&new e(n,this.type,t,{youtubeId:i})},n}()})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/media/Mp4Video.html",[],(function(){return'<div class="placeholder videoPlaceholder authoringShow"></div>\n<video class="authoringHide" height="100%" width="100%" controls{{? it.title }} aria-label="{{!it.title}}"{{?}}><source src="{{=it.url}}" type="video/mp4"></video>\n'})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/media/Audio.html",[],(function(){return'<div class="placeholder audioPlaceholder authoringShow"></div>\n<audio class="authoringHide" height="100%" width="100%" controls{{? it.title }} aria-label="{{!it.title}}"{{?}}><source src="{{=it.url}}" type="audio/{{=it.type}}"></audio>\n'})),define("dashboard-core/js/dashboard/widgets/staticwidget/media/EmbedMediaLoader",["./EmbedMedia","text!./Mp4Video.html","text!./Audio.html"],(function(e,t,r){return function(){function n(e){_classCallCheck(this,n),this.type=e}return n.prototype.tryToLoad=function(n){var i=function(e){var t=e.lastIndexOf(".");return t>=0?e.substring(t+1).toLowerCase():""}(n),o=null;switch(i){case"mp4":o=new e(n,this.type,t);break;case"mp3":case"aac":o=new e(n,this.type,r,{type:i});break;case"m4a":o=new e(n,this.type,r,{type:"mp4"})}return o},n}()})),define("dashboard-core/js/dashboard/widgets/staticwidget/media/MediaResolver",["underscore","./YoutubeVideoLoader","./EmbedMediaLoader"],(function(e,t,r){var n=[new t("youtube"),new r("embedMedia")],i={};return e.each(n,(function(e){i[e.type]=e})),function(){function t(){_classCallCheck(this,t)}return t.loadFromUrl=function(t){var r=null;return e.find(n,(function(e){return r=e.tryToLoad(t)})),r},t.loadFromModel=function(e){return e.mediaType&&i[e.mediaType]?i[e.mediaType].tryToLoad(e.mediaLink):t.loadFromUrl(e.mediaLink)},t}()})),define("dashboard-core/js/dashboard/widgets/staticwidget/MediaWidget",["./UrlWidget","../../../app/nls/StringResources","./media/MediaResolver","jquery","underscore"],(function(e,t,r,n,i){var o=e.extend({init:function(e){o.inherited("init",this,arguments),this.api={getId:this.getId.bind(this),setMediaUrl:this.setUrl.bind(this)},this.model=this.model||{},this.model.mediaLink=e&&e.initialConfigJSON&&e.initialConfigJSON.mediaLink,this.propertyCallbacks=this.dashboardApi.getFeature("PropertyCallbacks")},onContainerReady:function(){o.inherited("onContainerReady",this,arguments),this.model&&(this.model.on("change:mediaLink",this._onMediaLinkChange,this),this.model.on("change:title",this._onPropertyChange,this),this.addWhiteListAttrs("mediaLink","mediaType","title")),this.eventRouter.trigger("media:ready",this.api)},render:function(){this.propertyCallbacks.validateMediaInput(null,this.model.mediaLink).isValid?(this.model.mediaLink=this.encodeURL(this.model.mediaLink),this.media=r.loadFromModel(this.model),this.$el.append(this.getHtmlRender()),this.media&&this.media.markupLoaded(this.$el,this.isAuthoringMode?"authoring":"consume")):this.$el.append(e.getDefaultConsumeMarkup(t.get("mediaMissingUrl")))},setUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.propertyCallbacks.validateMediaInput(null,e);if(t.message=r.message,r.isValid){var n=i.uniqueId("_addMedia_");return this.set({mediaLink:e,mediaType:r.media.type},{sender:this,payloadData:{undoRedoTransactionId:n}}),this.updateModelContent(),!0}return!1},onAuthoringMode:function(){o.inherited("onAuthoringMode",this,arguments),this.media&&n.contains(document.body,this.el)&&this.media.showAuthoringMode()},onConsumeMode:function(){o.inherited("onConsumeMode",this,arguments),this.media&&n.contains(document.body,this.el)&&this.media.showConsumeMode()},onEnterContainer:function(){this.$el.find(".inlineEditInput").focus()},isInlineEditMode:function(){return!this.model.mediaLink},getInlineEditCaption:function(){return t.get("enterMediaUrl")},getEmptyStateLabel:function(){return t.get("noMediaSelected")},getEmptyStateUrlLabel:function(){return t.get("mediaUrl")},getEmptyStateHelperLabel:function(){return t.get("mediaPasteLink")},getMissingUrlText:function(){return t.get("mediaMissingUrl")},getAriaLabelText:function(){return t.get("mediaAriaLabel")},getLabel:function(){return this._getTitle()||t.get("mediaWidgetTitle")},getContentClass:function(){return"mediaWidgetContent"},_getTitle:function(){return this.model&&this.model.get?this.model.get("title"):null},_onMediaLinkChange:function(e){return delete this.model.mediaType,this._onPropertyChange(e)},_onPropertyChange:function(n){var i=null;if(this.model.mediaLink){if(this.model.mediaLink=this.encodeURL(this.model.mediaLink),this.propertyCallbacks.validateMediaInput(null,this.model.mediaLink).isValid){this.media=r.loadFromModel(this.model),i=this.getHtmlRender();var o=this.$el.find(".staticContent");o.empty(),o.replaceWith(i),this.media.markupLoaded(this.$el,this.isAuthoringMode?"authoring":"consume")}}else this.renderInlineEditUi(),i=e.getDefaultConsumeMarkup(t.get("mediaMissingUrl"));this.updateMarkup(),n.data&&n.data.undoRedoTransactionId?this.updateModelContent(i,n.data.undoRedoTransactionId):this.updateModelContent(i)},getHtmlRender:function(){return this.media?this.media.getMarkup(this._getMediaParams()):""},_getMediaParams:function(){var e={},t=this._getTitle();return t&&(e.title=t),e}});return o.getDefaultSpec=function(){var t={model:{type:"media",avatarHtml:e.getDefaultConsumeMarkup(),title:""},layoutProperties:{style:{width:"480px",height:"360px"}}};return Promise.resolve(t)},o})),define("dashboard-core/js/dashboard/widgets/staticwidget/ShapeWidget",["./StaticWidget","../../../lib/@waca/dashboard-common/dist/utils/HtmlXSSUtils","jquery","underscore","../../../app/nls/StringResources"],(function(e,t,r,n,i){var o='<svg xmlns="http://www.w3.org/2000/svg" version="1.1"  class="staticContent" height="100%" width="100%" preserveAspectRatio="none"  viewBox="$viewBox$">',a='<svg xmlns="http://www.w3.org/2000/svg" version="1.1"  class="staticContent shapesLine" height="100%" width="100%" preserveAspectRatio="none"  viewBox="$viewBox$">',s={lineWidth:"stroke-width",dashStyle:"stroke-dasharray",lineCap:"stroke-linecap"},l=["<altGlyph>","<altGlyphDef>","<altGlyphItem>","<animate>","<animateMotion>","<animateTransform>","<circle>","<clipPath>","<color-profile>","<cursor>","<defs>","<desc>","<ellipse>","<feBlend>","<feColorMatrix>","<feComponentTransfer>","<feComposite>","<feConvolveMatrix>","<feDiffuseLighting>","<feDisplacementMap>","<feDistantLight>","<feFlood>","<feFuncA>","<feFuncB>","<feFuncG>","<feFuncR>","<feGaussianBlur>","<feImage>","<feMerge>","<feMergeNode>","<feMorphology>","<feOffset>","<fePointLight>","<feSpecularLighting>","<feSpotLight>","<feTile>","<feTurbulence>","<filter>","<font>","<font-face>","<font-face-format>","<font-face-name>","<font-face-src>","<font-face-uri>","<foreignObject>","<g>","<glyph>","<glyphRef>","<hkern>","<image>","<line>","<linearGradient>","<marker>","<mask>","<missing-glyph>","<mpath>","<path>","<pattern>","<polygon>","<polyline>","<radialGradient>","<rect>","<set>","<stop>","<svg>","<switch>","<symbol>","<text>","<textPath>","<title>","<tref>","<tspan>","<use>","<view>","<vkern>"],d=function(e){return{width:"120px",height:"shapesLine"===e?"20px":"120px"}},c=null;return(c=e.extend({init:function(e){c.inherited("init",this,arguments),this.model=this.model||{},this.model.content=e&&e.initialConfigJSON&&e.initialConfigJSON.content,this.model.content&&this.isValidHtmlContent(this.model.content)&&(this.model.borderColor=e&&e.initialConfigJSON&&e.initialConfigJSON.borderColor,this.model.fillColor=e&&e.initialConfigJSON&&e.initialConfigJSON.fillColor,this.model.name=e&&e.initialConfigJSON&&e.initialConfigJSON.name,this.$el.append(t.cleanseContentElements(this.model.content,l,!0)),this.applyCommonProperties()),this.content.on("change:property",this.onPropertyChange,this)},destroy:function(){this.content.off("change:property",this.onPropertyChange,this)},_changeLineSVGProperty:function(e,t){if(e=s[e]){var n=this.$el.find("svg");t?r(n.find("path")[0]).attr(e,t):r(n.find("path")[0]).removeAttr(e),this.model.content=n[0].outerHTML}},onPropertyChange:function(e){var t=this.content.getFeature("ShapePropertiesProvider");if(t){var r=t.getPropertyList();if(r&&r.length>0&&e.info.events){var n=e.info.events,i=Array.isArray(n),o=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}var l=a;s[l.info.name]&&this._changeLineSVGProperty(l.info.name,l.info.value)}}}},getHtmlRender:function(){var e,t=this.$el;window.XMLSerializer?e=(new XMLSerializer).serializeToString(t[0]):e=t.outerHTML;return e},getWidgetStyleNode:function(){return this.$el.children(".staticContent")},registerEventGroup:function(){},updateModelContent:function(e,r){e=e?t.cleanseContentElements(e,l,!0):t.cleanseContentElements(this.getHtmlRender(),l,!0);var i={};r?n.extend(i,{payloadData:{undoRedoTransactionId:r}}):n.extend(i,{silent:!0}),this.set({content:e},i)}})).getDefaultSpec=function(e,n){var s,c="shapesLine"===e?"borderColor":"fillColor",u="shapesLine"===e?"fillColor":"borderColor",h=n.ext?e:i.get(e);if(n.template){var p=n.template,g=n&&n.viewBox||"0 0 100 100",f="shapesLine"===e?a:o;f=f.replace("$viewBox$",g),s=t.cleanseContentElements(f+p.replace(/(\/?>)/g,' vector-effect="non-scaling-stroke" $1')+"</svg>",l,!0)}else s=t.cleanseContentElements(function(e){var t="Line"===e?a:o,n=document.getElementById(e).getAttribute("viewBox");t=t.replace("$viewBox$",n);var i=r("body #"+e).children()[1];return t+(i=(new XMLSerializer).serializeToString(i))+"</svg>"}(n.icon),l,!0);var m={model:{type:"shape",name:h,subType:e,content:s},layoutProperties:{style:d(e)}};if(n.dashboardApi){var b=n.dashboardApi.getFeature("Colors"),y=b.getDashboardColorSet();n.fillColor&&b.isColorIdValidForDashboadColorSet(n.fillColor)?m.model[c]=n.fillColor:m.model[c]=y[y.length-1].id}else m.model[c]=n.fillColor;return m.model[u]=n.borderColor,Promise.resolve(m)},c.addFillAndBorderToAvatarIfNeeded=function(e,t){var r=e.find("svg.staticContent")[0],n=r.getAttribute("class").split(/\s+/g);t.model.fillColor&&n.push("fill-"+t.model.fillColor),t.model.borderColor&&n.push("border-"+t.model.borderColor),r.setAttribute("class",n.join(" "))},c})),define("text!dashboard-core/js/dashboard/widgets/staticwidget/Webpage.html",[],(function(){return'<div class="staticContent mediaContainer consume webpageWidgetContent{{? it.isIpad}} ipad{{?}}">\n\t<div class="overlay authoringShow"></div>\n\t<iframe height="100%" width="100%" {{? it.title }}aria-label="{{!it.title}}" {{?}}src="{{!it.url}}"></iframe>\n</div>\n'})),define("dashboard-core/js/dashboard/widgets/staticwidget/WebpageWidget",["underscore","./UrlWidget","../../../app/nls/StringResources","../../../lib/@waca/core-client/js/core-client/utils/Utils","jquery","doT","text!./Webpage.html","react-dom","../../../lib/@waca/dashboard-common/dist/ui/CenterLoadingSpinner","../../../lib/@waca/core-client/js/core-client/utils/BrowserUtils"],(function(e,t,r,n,i,o,a,s,l,d){var c=o.template(a),u=d.isIE()?4:8,h=[],p=void 0,g=function(e){h=h.filter((function(t){return t.id!==e}))},f=function(){p||(p=setTimeout((function(){var e=h.length-u;if(e>0){console.info("Unloading "+e+" webpage widgets");for(var t=0;t<e;t++){h.shift().widget.destroyIframe()}}p=void 0}),50))},m=t.extend({init:function(e){m.inherited("init",this,arguments),this._firstRendering=!0,this.api={getId:this.getId.bind(this),setUrl:this.setUrl.bind(this)},this.model=this.model||{};var t=e?e.initialConfigJSON:null;t&&(this.model.url=t.url,this.model.title=t.title?t.title.translationTable:null),this.propertyCallbacks=this.dashboardApi.getFeature("PropertyCallbacks")},destroy:function(){this.destroyIframe(),this._removeLoadingIndicator(),m.inherited("destroy",this,arguments)},destroyIframe:function(){g(this.model.id);var e=this._getIFrameElement();e&&e.off(),this.$el.empty()},onShow:function(){m.inherited("onShow",this,arguments),g(this.model.id),this.render()},onHide:function(){h.push({id:this.model.id,widget:this}),f(),m.inherited("onHide",this,arguments)},onContainerReady:function(){m.inherited("onContainerReady",this,arguments),this.model&&(this.model.on("change:url",this._onUrlChange,this),this.model.on("change:title",this._onTitleChange,this),this.addWhiteListAttrs("url","title")),this.eventRouter.trigger("webpage:ready",this.api)},render:function(){var e=this.propertyCallbacks.validateWebpageLink(null,this.model.url);if(!1===e.isValid){if(!0===this._firstRendering)if(this._firstRendering=!1,this.isAuthoringMode){var n=e.message;this.$el.append(t.getDefaultConsumeMarkup(n)),this.onAuthoringMode()}else{var i=this.model.url?r.get("webpageUrlValidationError"):r.get("webpageMissingUrl");this.$el.append(t.getDefaultConsumeMarkup(i)),this.onConsumeMode()}}else this.$el.parent().is(":visible")&&0===this._getIFrameElement().length&&(this._updateHtmlContent(this._getUpdatedHtmlContent(),!0),this._newIframe(),this.isAuthoringMode?this.onAuthoringMode():this.onConsumeMode())},setUrl:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(t=t.trim());var n=this.propertyCallbacks.validateWebpageLink(null,t);if(r.message=n.message,n.isValid){var i=e.uniqueId("_addWebpage_");return this.set({url:t},{sender:this,payloadData:{undoRedoTransactionId:i}}),!0}return!1},_getTitle:function(){return this.model&&this.model.get?this.model.get("title"):null},_getHtmlRender:function(t){t=t||{};var r=this._getTitle();return r&&(t.title=r),t=e.extend({},{url:this.model.url},t),n.isIpad()&&(t.isIpad=!0),c(t)},updateMarkup:function(){m.inherited("updateMarkup",this,arguments),this._newIframe()},_newIframe:function(){this._getIFrameElement().on("load",this._onIframeLoaded.bind(this))},onEnterContainer:function(){this.$el.find(".inlineEditInput").focus()},_onUrlChange:function(){var e=this._getUpdatedHtmlContent();this.model.url?(this._updateHtmlContent(e,!1),this._addLoadingIndicator()):this.renderInlineEditUi(),this.updateMarkup(),this.updateModelContent(e),this._lastSetURL=this.model.url||null},_onTitleChange:function(e){var t=this._getIFrameElement();t&&t.attr("aria-label",e.value)},_getUpdatedHtmlContent:function(){return this.propertyCallbacks.validateWebpageLink(null,this.model.url).isValid?(this.model.url=this.encodeURL(this.model.url),this._getHtmlRender()):this._getMissingUrlMarkup()},_updateHtmlContent:function(e,t){this._removeLoadingIndicator(),t?this.$el.append(e):this._getStaticWidgetElement().replaceWith(e)},onStartMove:function(t){var r=this;this.model.url&&t.selectedNodes&&(e.find(t.selectedNodes,(function(e){return r.$el.is(i(e))}))&&this._showLoadingIndicator())},_onIframeLoaded:function(){this._hideLoadingIndicator()},isInlineEditMode:function(){return!this.model.url},getInlineEditCaption:function(){return r.get("enterWebpageUrl")},getEmptyStateLabel:function(){return r.get("noWebpageSelected")},getEmptyStateUrlLabel:function(){return r.get("webpageUrl")},getEmptyStateHelperLabel:function(){return r.get("webpagePasteLink")},getMissingUrlText:function(){return r.get("webpageMissingUrl")},getLabel:function(){return this._getTitle()||r.get("webpageWidgetTitle")},getContentClass:function(){return"webpageWidgetContent"},getHtmlRender:function(){return this._getHtmlRender()},_getStaticWidgetElement:function(){return this.$el.find(".staticContent")},_getIFrameElement:function(){return this.$el.find("iframe")},_getMissingUrlMarkup:function(){return t.getDefaultConsumeMarkup(this.getMissingUrlText())},_addLoadingIndicator:function(){this._$loadingIndicatorBlocker||(this._$loadingIndicatorBlocker=i("<div></div>")),this._getStaticWidgetElement().prepend(this._$loadingIndicatorBlocker),s.render(l({size:"normal",variant:"circle"}),this._$loadingIndicatorBlocker[0])},_hideLoadingIndicator:function(){this._$loadingIndicatorBlocker&&this._$loadingIndicatorBlocker[0].style.setProperty("display","none")},_showLoadingIndicator:function(){this._$loadingIndicatorBlocker&&this._$loadingIndicatorBlocker[0].style.setProperty("display","flex")},_removeLoadingIndicator:function(){this._$loadingIndicatorBlocker&&(s.unmountComponentAtNode(this._$loadingIndicatorBlocker[0]),this._$loadingIndicatorBlocker.remove(),this._$loadingIndicatorBlocker=null)}});return m.getDefaultSpec=function(){return Promise.resolve({model:{type:"webpage",avatarHtml:t.getDefaultConsumeMarkup(),title:""},layoutProperties:{style:{width:"480px",height:"360px"}}})},m})),define("dashboard-core/js/baseBundle",(function(){}));