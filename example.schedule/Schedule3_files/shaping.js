/*!
 * Licensed Materials - Property of IBM
 * IBM Cognos Products: Modeling UI
 * (C) Copyright IBM Corp. 2020
 * US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("bi/moser/moser.min"),require("ca-ui-carbon-toolkit"),require("mobx"),require("mobx-react"),require("ca-graphics/icons-js/ba-graphics-icons-commons"),require("react-dom"),require("ca-ui-common-components"),require("react-dnd"),require("prop-types"),require("ca-ui-carbon"),require("baglass/core-client/js/core-client/utils/BidiUtil"),require("ca-graphics/illustrations-js/ba-graphics-icons-commons"),require("ca-modeller/common"),require("ca-modeller/bridge/StringResourcesBridge"),require("baglass/core-client/js/core-client/i18n/Formatter"),require("ca-modeller/upload"),require("baglass/core-client/js/core-client/ui/ProgressToast"),require("moment"),require("ca-ui-common-filters"),require("react-draggable"),require("baglass/core-client/js/core-client/utils/DateTimeUtils"),require("whatIf/whatIfBundle.min"));else if("function"==typeof define&&define.amd)define(["react","bi/moser/moser.min","ca-ui-carbon-toolkit","mobx","mobx-react","ca-graphics/icons-js/ba-graphics-icons-commons","react-dom","ca-ui-common-components","react-dnd","prop-types","ca-ui-carbon","baglass/core-client/js/core-client/utils/BidiUtil","ca-graphics/illustrations-js/ba-graphics-icons-commons","ca-modeller/common","ca-modeller/bridge/StringResourcesBridge","baglass/core-client/js/core-client/i18n/Formatter","ca-modeller/upload","baglass/core-client/js/core-client/ui/ProgressToast","moment","ca-ui-common-filters","react-draggable","baglass/core-client/js/core-client/utils/DateTimeUtils","whatIf/whatIfBundle.min"],t);else{var o="object"==typeof exports?t(require("react"),require("bi/moser/moser.min"),require("ca-ui-carbon-toolkit"),require("mobx"),require("mobx-react"),require("ca-graphics/icons-js/ba-graphics-icons-commons"),require("react-dom"),require("ca-ui-common-components"),require("react-dnd"),require("prop-types"),require("ca-ui-carbon"),require("baglass/core-client/js/core-client/utils/BidiUtil"),require("ca-graphics/illustrations-js/ba-graphics-icons-commons"),require("ca-modeller/common"),require("ca-modeller/bridge/StringResourcesBridge"),require("baglass/core-client/js/core-client/i18n/Formatter"),require("ca-modeller/upload"),require("baglass/core-client/js/core-client/ui/ProgressToast"),require("moment"),require("ca-ui-common-filters"),require("react-draggable"),require("baglass/core-client/js/core-client/utils/DateTimeUtils"),require("whatIf/whatIfBundle.min")):t(e.react,e["bi/moser/moser.min"],e["ca-ui-carbon-toolkit"],e.mobx,e["mobx-react"],e["ca-graphics/icons-js/ba-graphics-icons-commons"],e["react-dom"],e["ca-ui-common-components"],e["react-dnd"],e["prop-types"],e["ca-ui-carbon"],e["baglass/core-client/js/core-client/utils/BidiUtil"],e["ca-graphics/illustrations-js/ba-graphics-icons-commons"],e["ca-modeller/common"],e["ca-modeller/bridge/StringResourcesBridge"],e["baglass/core-client/js/core-client/i18n/Formatter"],e["ca-modeller/upload"],e["baglass/core-client/js/core-client/ui/ProgressToast"],e.moment,e["ca-ui-common-filters"],e["react-draggable"],e["baglass/core-client/js/core-client/utils/DateTimeUtils"],e["whatIf/whatIfBundle.min"]);for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}(window,(function(e,t,o,r,n,i,s,a,c,p,l,u,d,h,m,b,g,y,f,v,O,S,j){return function(e){function t(t){for(var r,s,a=t[0],c=t[1],p=t[2],u=0,d=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,p||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],r=!0,a=1;a<o.length;a++){var c=o[a];0!==n[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=o[0]))}return e}var r={},n={46:0},i=[];function s(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,r){o=n[e]=[t,r]}));t.push(o[2]=r);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.src=function(e){return s.p+""+({1:"commonAsync",2:"commonAsyncShared__buildQS__expressions__format__grid__pkgEnrich__relationship__sourceSelection",3:"commonAsyncShared__buildQS__grid__pkgEnrich__relationship__sourceSelection",4:"commonAsyncShared__diagram__normalization__queryFlow__sourceSelection",5:"commonAsyncShared__dataSecurity__filters__properties",6:"commonAsyncShared__binning__properties",7:"commonAsyncShared__buildQS__relationship",8:"commonAsyncShared__dataSecurity__properties",9:"commonAsyncShared__expressions__queryInfo",10:"commonAsyncShared__normalization__queryFlow",12:"binning",13:"buildQS",14:"clean",15:"contextMenu",16:"convertQS",19:"dataCache",20:"dataSecurity",21:"diagram",22:"expressions",24:"filters",25:"format",26:"grid",27:"grouping",28:"itemHierarchy",29:"itemPicker",30:"memberSearch",33:"navigationGroup",34:"normalization",37:"parameter",38:"pkgEnrich",39:"properties",40:"queryFlow",41:"queryInfo",42:"relationship",43:"relink",47:"simpleCalculations",48:"sort",50:"sourceSelection",51:"sourceStatus",52:"split",53:"update",55:"validation",56:"whatIf"}[e]||e)+".js"}(e);var c=new Error;i=function(t){a.onerror=a.onload=null,clearTimeout(p);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,o[1](c)}n[e]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:a})}),12e4);a.onerror=a.onload=i,document.head.appendChild(a)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./ca-modeller/",s.oe=function(e){throw console.error(e),e};var a=window.caModellingPerspective=window.caModellingPerspective||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var p=0;p<a.length;p++)t(a[p]);var l=c;return i.push([464,0]),o()}({0:function(t,o){t.exports=e},1:function(e,o){e.exports=t},12:function(e,t){e.exports=n},15:function(e,t){e.exports=i},17:function(e,t){e.exports=s},18:function(e,t){e.exports=a},2:function(e,t){e.exports=o},201:function(e,t,o){"use strict";o.r(t);var r=o(0),n=o.n(r),i=o(41),s=o(2),a=o(97),c=o(4),p=(o(529),o(9)),l=o(37),u=o(12);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}var h=()=>Object(p.m)(p.b,"components/ContextMenuManager",!0);t.default=function(e,t){var{dndBackEnd:o=null}=void 0===t?{}:t;return function(t){var p,m,b=Object(i.DragDropContext)(o)(p=Object(s.withDragLayer)(p=class extends r.Component{render(){return t?n.a.createElement(t,this.props):null}})||p)||p;return Object(u.observer)(m=class extends r.Component{constructor(){super(...arguments),this.component=void 0}render(){return n.a.createElement(s.ContextProvider,e,n.a.createElement("div",null,n.a.createElement(c.b,{store:e.rootStore.dialogStore},n.a.createElement(a.a,null)),e.rootStore.contextMenuStore&&n.a.createElement(l.a,{resolver:h},t=>n.a.createElement(c.b,{store:e.rootStore.contextMenuStore},n.a.createElement(t,null))),n.a.createElement(b,d({ref:e=>this.component=e},this.props))))}})||m}}},206:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g}));var r,n,i,s,a=o(0),c=o.n(a),p=o(9),l=o(18),u=o(111),d=o(2),h=o(4),m=o(73);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}class g extends a.Component{constructor(){super(...arguments),this.state={loaded:!1}}componentDidMount(){Object(p.m)(p.d).then(e=>{i=e["components/DataGrid"].default,s=e["stores/GridStore"].default,this.setState({loaded:!0})})}render(){return this.state.loaded?c.a.createElement(y,this.props):c.a.createElement(l.ProgressPanelMessage,null)}}var y=Object(d.withContext)()(r=Object(h.e)((e,t)=>({moduleId:t.moduleId||e.moduleId||e.moduleURL,globalModuleId:e.moduleId||e.moduleURL,enableSort:Object(u.e)(e.module),filters:t.querySubject?t.querySubject.getFilter().slice().map(e=>e.getExpression()):[],items:t.querySubject?t.querySubject.getItem().slice():[],selection:e.selection,setSelection:e.setSelection,showContextMenu:e.showShapingGridContextMenu}))(((n=class extends a.Component{constructor(){super(...arguments),this.state={gridStore:this._createGridStore()}}componentWillReceiveProps(e){e.moduleId===this.props.moduleId&&e.querySubject===this.props.querySubject&&Object(m.b)(this.props.filters,e.filters)&&Object(m.b)(this.props.items,e.items)||this.setState({gridStore:this._createGridStore(e)})}_createGridStore(e){var{moduleId:t,querySubject:o}=void 0===e?this.props:e,{rootStore:r}=this.props.context,n=this.state&&this.state.gridStore;if(n&&Object(h.l)(n,r),!o)return null;var i=new s({isGlobalSession:e=>e===this.props.globalModuleId},t,o);return Object(h.i)(i,r),i}render(){var{enableSort:e,selection:t,setSelection:o,showContextMenu:r}=this.props,{gridStore:n}=this.state;return n?c.a.createElement(h.b,{store:n},c.a.createElement(i,b({showContextMenu:r,enableSort:e,enableDnD:!0,enableContextMenu:!0,selection:t,setSelection:o},this.props))):null}}).defaultProps={enableSort:!0},r=n))||r)||r},242:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return c}));var r=o(36),n=o(31),i=o(13),s=o(364),a=o(365);function c(e,t){var{featureConfig:o=null,undoCallback:c=null,confirmations:p=null,connectionResolver:l=null,payload:u=null,affinityService:d=null}=void 0===t?{}:t,h=Object(r.a)(e,{createPerspective:()=>new a.a,featureConfig:o,confirmations:p,connResolver:l,payload:u,affinityService:d,onGlobalEvent:(e,t,o)=>{i.track(e.getModuleStats(t,{objectType:o,viaShaping:!0}))},type:n.j});return c&&h.rootStore.mainUndoHistory.addListener((e,t)=>{c(Object(s.a)(e,t))}),h}},364:function(e,t,o){"use strict";var r=o(6);t.a=function(e,t){return{undo:Object(r.action)(()=>{if(e.operationCounter!==t)throw new Error("Error: Undo was called out of order");e.undo()}),redo:Object(r.action)(()=>{if(e.operationCounter!==t-1)throw new Error("Error: Redo was called out of order");e.redo()}),label:e.undoLabel}}},365:function(e,t,o){"use strict";o.d(t,"a",(function(){return B}));var r,n,i,s,a,c,p,l=o(1),u=o.n(l),d=o(6),h=o(4),m=o(9),b=o(10),g=o(191),y=o(11),f=o(33),v=o(44),O=o(16),S=o(269),j=o(55),w=o(370),M=o(118),x=o(53),D=o(29),C=o(7),_=o(5),P=o(323),E=o(21),T=o(24),I=o(268);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function G(e,t,o,r,n,i,s){try{var a=e[i](s),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function R(e){return function(){var t=this,o=arguments;return new Promise((function(r,n){var i=e.apply(t,o);function s(e){G(i,r,n,s,a,"next",e)}function a(e){G(i,r,n,s,a,"throw",e)}s(void 0)}))}}function U(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function k(e,t,o,r,n){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,r){return r(e,t,o)||o}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var B=(r=h.c.undoable("dashboard addExpressionObjectToModuleWithValidation"),n=class extends h.a{constructor(){super(...arguments),U(this,"selection",i,this),U(this,"selectedTabObject",s,this),U(this,"isShapingTreeLastSelection",a,this),U(this,"filter",c,this),this._validationStore=void 0,this._diagramStore=void 0,this.forceRefreshMD=!1,U(this,"propertyList",p,this)}get treeStore(){return this.memberSearchableTreeStore.treeStore}setPropertyList(e){this.propertyList=e}get getPropertyList(){return this.propertyList}get propertiesStore(){var e=Object(m.o)(m.j,"stores/PropertiesStore");return e?new e({setSelection:e=>this.selection=e,getSelection:()=>this.selection},{selectionList:this.selection,propertyList:this.getPropertyList,applyNow:!1}):null}showDiagramContextMenu(e,t,o,r,n){this.provider.showContextMenu(this,"shapingDiagram",{module:this.module,selection:o,position:r,activeElement:n},e,t)}get diagramStore(){var e=Object(m.o)(m.c,"stores/DiagramStore");return e?(this._diagramStore&&this._diagramStore.module===this.provider.getModule()||(this._diagramStore=new e({setSelection:e=>this.selection=e,getSelection:()=>this.selection,getModule:()=>this.module,showContextMenu:this.showDiagramContextMenu},{persistUIProperties:!1,defaultScale:.8})),this._diagramStore):null}get memberSearchableTreeStore(){return new g.a({getSelection:()=>this.selection,setSelection:e=>{var t=this.setSelection(e);return this.isShapingTreeLastSelection=!0,t},openNavigationGroupDialog:this.openNavigationGroupDialog,showContextMenu:this.showShapingTreeContextMenu})}get validationStore(){var e=Object(m.o)(m.l,"stores/ValidationStore");return e?(this._validationStore&&this._validationStore.moduleId===this.provider.getModuleId()||(this._validationStore=new e({getModuleId:()=>this.provider.getModuleId(),getModule:()=>this.provider.getModule()},this.provider.getModule(),this.provider.getMainUndoHistory())),this._validationStore):null}get memberSearchStore(){return this.memberSearchableTreeStore.memberSearchStore}getMemberSearchSubject(){return this.memberSearchStore&&this.memberSearchStore.parentMoserObject}setSelection(e){var t=Object(_.getAncestorOrSelf)(e[e.length-1],u.a.MoserObjectTypes.QUERY_SUBJECT);this.selection=e,this.isShapingTreeLastSelection=!1,this.treeStore.expandSelectedNodes(),t&&this.setSelectedTabObject(t)}setSelectedTabObject(e){this.selectedTabObject=e}openDialog(){return this.provider.openDialog(...arguments)}openNavigationGroupDialog(){return this.provider.openDialog(y.q).then(()=>this.treeStore.expandNavGroups())}get module(){return this.provider.getModule()}get selectedShapingTabId(){return this.selectedTabObject?Object(C.getUniqueId)(this.selectedTabObject):""}get moduleId(){return this.provider.getModuleId()}get moduleURL(){return this.provider.getModuleURL()}_handleGetMetadataResponse(e,t){void 0===t&&(t=!1);var o=this.provider.getMoserContainer();o.remove(this.module);var r=this.provider.getJSONObjectFactory().createModule(e);return this.provider.setModule(r),o.add(r),this.provider.getUndoHistory().flush(),t||this.action(Object(f.A)(r,this.provider.getModuleId(),this.provider.getModuleURL())),Object(O.t)(Object(O.j)(r)),this.treeStore.expandInitialNodes(),r}addSource(e,t){var o=this;return R((function*(){var r=o.provider.getObjectFactory(),n=u.a.EmbeddedModuleUtils.createModule(r,e.name||"newModel","en-us");u.a.EmbeddedModuleUtils.addSource(n,e.type,e.id,e.href,r);var i=yield Object(v.a)(o.context,null,null,n,t).catch(e=>Promise.reject(e)),s=yield o.action(()=>(o.provider.setObjectRef(e.id),o.provider.setModuleId(i.sessionModuleId),Object(j.a)(o.context,o._metadataOpts).catch(e=>Promise.reject(e))));return Promise.resolve(o._handleGetMetadataResponse(s,!o.context.featureConfig[b.VALIDATE]))}))()}createInlineModule(e,t){var o,r=this.provider.getObjectFactory();return t?o=t:(o=u.a.EmbeddedModuleUtils.createModule(r,"newModel","en-us"),u.a.EmbeddedModuleUtils.addSource(o,u.a.UseSpecType.URL,x.c,void 0,r)),this.provider.setBaseURLModule(e),Object(v.c)(this.context,o,e).then(e=>this.action(()=>(this.provider.setModuleURL(e.moduleURL),Object(j.a)(this.context,this._metadataOpts)))).then(e=>this._handleGetMetadataResponse(e,!this.context.featureConfig[b.VALIDATE]))}loadFromModuleUrl(e){return this.provider.setModuleURL(e),Object(j.a)(this.context,this._metadataOpts).then(e=>this._handleGetMetadataResponse(e,!0))}loadFromJSON(e,t){return Object(v.b)(this.context,e,!0,t).then(e=>this.action(()=>(this.provider.setModuleId(e.sessionModuleId),Object(j.a)(this.context,this._metadataOpts)))).then(e=>this._handleGetMetadataResponse(e,!this.context.featureConfig[b.VALIDATE]))}loadFromModuleId(e,t,o){return this.provider.setObjectRef(e),Object(j.a)(this.context,q({},this._metadataOpts,{type:t,metadataSubsetIDs:o})).then(e=>this._handleGetMetadataResponse(e,!0))}reloadMetadata(){return this.provider.saveGlobalSessionModule(!0).then(()=>Object(j.a)(this.context,this._metadataOpts)).then(e=>this._handleGetMetadataResponse(e,!this.context.featureConfig[b.VALIDATE]))}relinkSource(e,t){var o=this;return R((function*(){var r,{source:n,moduleJson:i,module:s,sourceIdToRelink:a=x.b}=e,{module:c}=o;if(c){var p=c.getUseSpec().find(e=>e.getIdentifier()===a);p&&c.removeUseSpec(p),u.a.EmbeddedModuleUtils.addSource(c,n.type,n.id,n.href,o.provider.getObjectFactory());var l=c.getUseSpec()[c.getUseSpec().length-1];l.setIdentifier(a);var d=u.a.ModuleUtils.prepareModuleForSave(c);return r=yield o.loadFromJSON(d,t),o.relinkEmbeddedModule(l,r)}var h=i;if(h||(h=s),h){var m=(r=yield o.loadFromJSON(h,t)).getUseSpec()[r.getUseSpec().length-1];return o.relinkEmbeddedModule(m,r)}return o.addSource(n,t)}))()}relinkEmbeddedModule(e,t){return this.provider.saveGlobalSessionModule(!0).then(()=>Object(j.a)(this.context,{type:e.getType(),moduleId:e.getStoreID()})).then(o=>this.action(()=>{var r=u.a.ModuleUtils.relinkEmbeddedModuleSource(t,e,e.getType(),e.getStoreID(),null,this.provider.getObjectFactory()),n=this.provider.getJSONObjectFactory().createModule(o);u.a.ModuleUtils.relinkEmbeddedModule(t,r,n)})).then(()=>this.reloadMetadata())}relink(e){var t=this;return R((function*(){return t.provider.saveGlobalSessionModule(!0).then(()=>Object(j.a)(t.context,{type:e.type,moduleId:e.id})).then(o=>t.action(()=>{var r=u.a.ModuleUtils.relinkEmbeddedModuleSource(t.module,t.module.getUseSpec()[0],e.type,e.id,null,t.provider.getObjectFactory()),n=t.provider.getJSONObjectFactory().createModule(o);u.a.ModuleUtils.relinkEmbeddedModule(t.module,r,n)})).then(()=>t.reloadMetadata())}))()}_requestData(e,t,o,r,n,i,s){return void 0===o&&(o="module"),void 0===r&&(r={ajaxOptions:{}}),this.provider.saveGlobalSessionModule().then(a=>Object(S.a)(this.context,q({},this._metadataOpts,{querySpec:e,rawResponse:t,type:o,dataOptions:n,requestOptions:r,refreshmd:!a||!a.noSessionSave||this.forceRefreshMD,qfb:i,qfbMode:s})).finally(()=>{this.forceRefreshMD=!1}))}getData(e,t,o,r,n,i){return this._requestData(e,t,o,r,void 0,n,i)}getExploreRelationshipData(e){return this.provider.saveGlobalSessionModule().then(()=>{var t=q({},e.data),o=this.module.getUseSpec()[0];return o&&(t.sourceModuleId=o.getStoreID(),t.type=o.getType()),t.tempModuleId=this.provider.getModuleId(),t.tempModule=this.module,Object(w.a)(this.context,t,e.requestOptions)})}getPredictData(e,t,o,r){return this._requestData(e,t,o,r,{dataType:"fastpatternkeydrivers",specType:"keyDriverSpec"})}deleteSessionModule(){return Object(M.a)(this.context,this._metadataOpts)}clearSelection(){this.selection=[]}openSimpleCalculationDialog(e,t,o){var{forceGlobal:r=!1}=void 0===o?{}:o;return this.provider.openDialog(y.z,{elements:e,edit:t,forceGlobal:r})}openExpressionDialog(e,t,o){var{label:r,expression:n}=void 0===o?{}:o;return this.provider.openDialog(y.j,{element:e,edit:t,label:r,expression:n})}openJoinDialog(e){return this.provider.openDialog(y.p,{activeElement:e})}expressionCreateObject(e,t){var o=t||this.module;return Object(D.createExpressionObject)(this.context,o,e)}expressionCreateObjectSimpleCalculation(e,t,o){var r=t||this.module,n=Object(P.f)({inputtedName:e.inputtedName||"",operation:e.operation||"+",swap:e.swap||!1,elementOperands:e.elementOperands,numberOperands:e.numberOperands},r,o);return Object(D.createExpressionObject)(this.context,r,n)}expressionAddToModuleWithValidation(e,t){var o=t||this.module,r=Object(D.addExpressionObjectToModule)(this.context,o,e);return this.provider.saveGlobalSessionModule(!0).then(()=>Object(I.a)(this.context,q({},this._metadataOpts,{moserObject:r,moserObjectParent:o}))).then(e=>this.action(()=>Object(D.updateExpressionProperties)(this.context,r,e.columnList[0])))}showValidationResults(e){return Object(m.m)(m.l).then(()=>(this.validationStore.setFilterObject(e),this.openDialog(y.L,{store:this.validationStore})))}showShapingTreeContextMenu(e,t,o){this.provider.showContextMenu(this,"shapingTree",{selection:Object.keys(this.treeStore.selected).map(e=>this.treeStore.selected[e]),module:this.module,validationStore:this.validationStore,activeElement:o},e,t)}showShapingGridContextMenu(e,t,o,r,n,i,s){this.provider.showContextMenu(this,"shapingGrid",{module:this.module,selection:o,sortData:r,sortType:n,column:i,activeElement:s},e,t)}removeFromModule(e){void 0===e&&(e=this.selection),this.action(Object(f.p)(e))}removeFromModuleWithConfirmation(e){void 0===e&&(e=this.selection),this.action(Object(f.q)(this.module,e))}openCustomBinDialog(e,t,o,r){return void 0===e&&(e={}),void 0===t&&(t=!1),this.provider.openDialog(y.a,{element:e,edit:t,view:o,data:r})}_customBinAction(e,t,o){var r,n={startView:E.A};return Object(m.m)(m.a,"stores/CustomBinStore",!0).then(i=>(r=new i({},{element:e,edit:o,view:n,data:t}),Object(h.i)(r,this))).then(e=>e.saveCustomBinExpression()).finally(()=>{Object(h.l)(r,this),this.forceRefreshMD=!0})}createCustomBin(e,t){return this._customBinAction(e,t,!1)}editCustomBin(e,t){return this._customBinAction(e,t,!0)}customGroupAction(e,t,o,r){return void 0===e&&(e=null),void 0===t&&(t=!1),o&&o.startView===T.C?t?this.editCustomGroup(e,r):this.createCustomGroup(e,r):this.provider.openDialog(y.m,{element:e,edit:t,view:o,data:r})}openCustomGroupDialog(e,t,o,r){return void 0===e&&(e=null),void 0===t&&(t=!1),this.provider.openDialog(y.m,{element:e,edit:t,view:o,data:r})}_customGroupAction(e,t,o){var r,n={startView:T.C};return Object(m.m)(m.e,"stores/CustomGroupStore",!0).then(i=>(r=new i({},{element:e,edit:o,view:n,data:t}),Object(h.i)(r,this))).then(e=>e.saveCustomGroupExpression()).finally(()=>{Object(h.l)(r,this)})}createCustomGroup(e,t){return void 0===e&&(e=null),this._customGroupAction(e,t,!1)}editCustomGroup(e,t){return void 0===e&&(e=null),this._customGroupAction(e,t,!0)}openItemPicker(e){return this.openDialog(y.o,e)}setTreeFilter(e){this.filter=e}get _metadataOpts(){return{moduleURL:this.provider.getModuleURL(),moduleId:this.provider.getModuleId()}}},i=k(n.prototype,"selection",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=k(n.prototype,"selectedTabObject",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=k(n.prototype,"isShapingTreeLastSelection",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=k(n.prototype,"filter",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=k(n.prototype,"propertyList",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k(n.prototype,"setPropertyList",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"setPropertyList"),n.prototype),k(n.prototype,"getPropertyList",[d.computed],Object.getOwnPropertyDescriptor(n.prototype,"getPropertyList"),n.prototype),k(n.prototype,"propertiesStore",[h.d],Object.getOwnPropertyDescriptor(n.prototype,"propertiesStore"),n.prototype),k(n.prototype,"showDiagramContextMenu",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"showDiagramContextMenu"),n.prototype),k(n.prototype,"diagramStore",[h.d],Object.getOwnPropertyDescriptor(n.prototype,"diagramStore"),n.prototype),k(n.prototype,"memberSearchableTreeStore",[h.k],Object.getOwnPropertyDescriptor(n.prototype,"memberSearchableTreeStore"),n.prototype),k(n.prototype,"validationStore",[h.d],Object.getOwnPropertyDescriptor(n.prototype,"validationStore"),n.prototype),k(n.prototype,"getMemberSearchSubject",[h.j],Object.getOwnPropertyDescriptor(n.prototype,"getMemberSearchSubject"),n.prototype),k(n.prototype,"setSelection",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"setSelection"),n.prototype),k(n.prototype,"setSelectedTabObject",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedTabObject"),n.prototype),k(n.prototype,"openDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openDialog"),n.prototype),k(n.prototype,"openNavigationGroupDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openNavigationGroupDialog"),n.prototype),k(n.prototype,"module",[d.computed],Object.getOwnPropertyDescriptor(n.prototype,"module"),n.prototype),k(n.prototype,"selectedShapingTabId",[d.computed],Object.getOwnPropertyDescriptor(n.prototype,"selectedShapingTabId"),n.prototype),k(n.prototype,"moduleId",[d.computed],Object.getOwnPropertyDescriptor(n.prototype,"moduleId"),n.prototype),k(n.prototype,"moduleURL",[d.computed],Object.getOwnPropertyDescriptor(n.prototype,"moduleURL"),n.prototype),k(n.prototype,"_handleGetMetadataResponse",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"_handleGetMetadataResponse"),n.prototype),k(n.prototype,"addSource",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"addSource"),n.prototype),k(n.prototype,"createInlineModule",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"createInlineModule"),n.prototype),k(n.prototype,"loadFromModuleUrl",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"loadFromModuleUrl"),n.prototype),k(n.prototype,"loadFromJSON",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"loadFromJSON"),n.prototype),k(n.prototype,"loadFromModuleId",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"loadFromModuleId"),n.prototype),k(n.prototype,"reloadMetadata",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"reloadMetadata"),n.prototype),k(n.prototype,"relinkSource",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"relinkSource"),n.prototype),k(n.prototype,"relinkEmbeddedModule",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"relinkEmbeddedModule"),n.prototype),k(n.prototype,"relink",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"relink"),n.prototype),k(n.prototype,"getData",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"getData"),n.prototype),k(n.prototype,"getExploreRelationshipData",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"getExploreRelationshipData"),n.prototype),k(n.prototype,"getPredictData",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"getPredictData"),n.prototype),k(n.prototype,"deleteSessionModule",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"deleteSessionModule"),n.prototype),k(n.prototype,"clearSelection",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"clearSelection"),n.prototype),k(n.prototype,"openSimpleCalculationDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openSimpleCalculationDialog"),n.prototype),k(n.prototype,"openExpressionDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openExpressionDialog"),n.prototype),k(n.prototype,"openJoinDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openJoinDialog"),n.prototype),k(n.prototype,"expressionCreateObject",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"expressionCreateObject"),n.prototype),k(n.prototype,"expressionCreateObjectSimpleCalculation",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"expressionCreateObjectSimpleCalculation"),n.prototype),k(n.prototype,"expressionAddToModuleWithValidation",[r],Object.getOwnPropertyDescriptor(n.prototype,"expressionAddToModuleWithValidation"),n.prototype),k(n.prototype,"showValidationResults",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"showValidationResults"),n.prototype),k(n.prototype,"showShapingTreeContextMenu",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"showShapingTreeContextMenu"),n.prototype),k(n.prototype,"showShapingGridContextMenu",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"showShapingGridContextMenu"),n.prototype),k(n.prototype,"removeFromModule",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"removeFromModule"),n.prototype),k(n.prototype,"removeFromModuleWithConfirmation",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"removeFromModuleWithConfirmation"),n.prototype),k(n.prototype,"openCustomBinDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openCustomBinDialog"),n.prototype),k(n.prototype,"createCustomBin",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"createCustomBin"),n.prototype),k(n.prototype,"editCustomBin",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"editCustomBin"),n.prototype),k(n.prototype,"customGroupAction",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"customGroupAction"),n.prototype),k(n.prototype,"openCustomGroupDialog",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openCustomGroupDialog"),n.prototype),k(n.prototype,"createCustomGroup",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"createCustomGroup"),n.prototype),k(n.prototype,"editCustomGroup",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"editCustomGroup"),n.prototype),k(n.prototype,"openItemPicker",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"openItemPicker"),n.prototype),k(n.prototype,"setTreeFilter",[h.c],Object.getOwnPropertyDescriptor(n.prototype,"setTreeFilter"),n.prototype),k(n.prototype,"_metadataOpts",[d.computed],Object.getOwnPropertyDescriptor(n.prototype,"_metadataOpts"),n.prototype),n)},370:function(e,t,o){"use strict";var r=o(96),n=o(14),i=["type","tempModule"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}t.a=function(e,t,o){return e.resolveConnection(a=>{var{type:c,tempModule:p}=t,l=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(t,i),{groupingNodes:u=!1,lowestConcept:d=!0,timeout:h}=o||{},m=encodeURI(n.t+"/explore/relationship"),b="groupingNodes="+u+"&lowestConcept="+d;return e.ajaxService({url:m+"?"+b,method:"POST",rawResponse:!0,processData:!1,timeout:h,data:JSON.stringify(s({},l,{tempModule:JSON.stringify(p),sourceType:Object(r.b)(c.enumValue),connections:a?JSON.stringify(a):void 0,groupingNodes:u,lowestConcept:d}))})})}},371:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r=o(4);function n(e,t){for(var o=Object.getPrototypeOf(t);o!==Object.prototype;)Object.getOwnPropertyNames(o).forEach(n=>{var i=Object.getOwnPropertyDescriptor(o,n);if("function"==typeof i.value&&(Object(r.f)(i.value)||Object(r.g)(i.value))){if(n in e)throw new Error("Shaping: Can't redefine reserved property "+n);e[n]=t[n]}}),o=Object.getPrototypeOf(o)}},41:function(e,t){e.exports=c},42:function(e,t){e.exports=p},43:function(e,t){e.exports=l},46:function(e,t){e.exports=u},464:function(e,t,o){o(61),e.exports=o(465)},465:function(e,t,o){var r=o(88).default,{getExpressionType:n}=o(29),i=o(441).default,{getCustomGroupViews:s,getCustomGroupMessageIds:a,getCustomGroupObjectData:c,validateCustomGroup:p}=o(69),{getCustomBinViews:l,getCustomBinMessageIds:u,getCustomBinObjectData:d,validateCustomBin:h}=o(58),{updateWhatIf:m,getWhatIfMessageIds:b}=o(456),{migrateCDE:g}=o(315),y=o(526).default,f=o(201).default,v=o(206).default,O=o(543).default,S=o(544).default,j=o(584).default,w=o(585).default,M=o(586).default,x=o(587).default,D=o(242).default,C=o(588).default;e.exports={Shaping:y,ShapingTree:S,ShapingPickTree:j,ShapingAncestorTree:w,ShapingGrid:v,ShapingDiagram:O,ShapingTabGrid:M,ShapingProperties:x,shapingProvider:f,createShapingContext:D,GridTabs:C,formatUtils:i,moserVisitor:r,getExpressionType:n,customGroupUtils:{getCustomGroupViews:s,getCustomGroupMessageIds:a,getCustomGroupObjectData:c,validateCustomGroup:p},customBinUtils:{getCustomBinViews:l,getCustomBinMessageIds:u,getCustomBinObjectData:d,validateCustomBin:h},whatIfUtils:{updateWhatIf:m,getWhatIfMessageIds:b},cdeService:{migrateCDE:g}}},48:function(e,t){e.exports=d},526:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g}));var r=o(0),n=o.n(r),i=o(17),s=o.n(i),a=o(1),c=o.n(a),p=o(2),l=o(4),u=o(18),d=o(201),h=o(242),m=o(371),{GlassDnDBackend:b}=u.utils;class g{constructor(e,t){var{featureConfig:o=null,undoCallback:r=null,glassDnD:i=null,confirmations:a=null,connectionResolver:c=null,payload:u=null,affinityService:g=null}=void 0===t?{}:t;this.context=void 0,this._glassDndBackend=void 0,this._dndBackend=void 0,this._rootWrapper=void 0,this._rootWrapperNode=void 0,this._mountedNodes=void 0,this.ShapingProvider=e=>{var{children:t}=e,o=Object(d.default)(this.context,{dndBackEnd:this._dndBackend})(()=>n.a.createElement(p.Root,null,n.a.createElement(l.b,{store:this.shapingStore},t)));return n.a.createElement(o,null)},this.context=Object(h.default)(e,{featureConfig:o,undoCallback:r,confirmations:a,connectionResolver:c,payload:u,affinityService:g}),Object(m.a)(this,this.shapingStore);var y=document.createElement("div"),f=e=>this._glassDndBackend||(this._glassDndBackend=b({glassDnD:i})(e));document.body.appendChild(y);var v=Object(d.default)(this.context,{dndBackEnd:f})(null);this._dndBackend=f,this._rootWrapper=s.a.render(n.a.createElement(v,null),y),this._rootWrapperNode=y,this._mountedNodes=[]}get rootStore(){return this.context.rootStore}get shapingStore(){return this.rootStore.perspectiveStore}toJSON(){var{module:e}=this.rootStore;return c.a.ModuleUtils.prepareModuleForSave(e)}getModule(){return this.rootStore.module}getModuleId(){return this.rootStore.moduleId}getModuleURL(){return this.rootStore.moduleURL}getSelection(){return this.shapingStore.selection.slice()}saveSessionModule(){return this.rootStore.saveSessionModule().then(e=>(this.shapingStore.forceRefreshMD=!e||!e.noSessionSave||this.shapingStore.forceRefreshMD,this.getModuleId()))}render(e,t,o){-1===this._mountedNodes.indexOf(o)&&this._mountedNodes.push(o),s.a.unstable_renderSubtreeIntoContainer(this._rootWrapper.component,n.a.createElement(p.Root,null,n.a.createElement(p.ContextProvider,this.context,n.a.createElement(l.b,{store:this.shapingStore},n.a.createElement(e,t)))),o)}destroy(){this._mountedNodes.forEach(e=>s.a.unmountComponentAtNode(e)),s.a.unmountComponentAtNode(this._rootWrapperNode),this._rootWrapperNode.parentNode.removeChild(this._rootWrapperNode),Object(l.m)(this.rootStore)}unmountComponentAtNode(e){var t=this._mountedNodes.indexOf(e);t>=0&&(this._mountedNodes.splice(t,1),s.a.unmountComponentAtNode(e))}}},529:function(e,t,o){"use strict";var r,n=o(0),i=o.n(n),s=o(12),a=o(2),c=o(20),p=o(3),l=o(11),u=o(56),d=o(4),h=o(285),m=(o(533),Object(p.getString)("cancel")),b=Object(p.getString)("ok"),g=Object(p.getString)("properties"),y="propertiesDialog",f=Object(c.a)(y,"cancel"),v=Object(c.a)(y),O=Object(c.a)(y,"header"),S=Object(c.a)(y,"ok");Object(u.a)(l.y,{initializer:e=>e.rootStore.perspectiveStore,setupUndoStack:!1})(r=Object(d.e)(e=>({applyUserValues:e.propertiesStore.applyUserValues,isDirty:e.propertiesStore.isDirty}))(r=Object(s.observer)(r=class extends n.Component{constructor(){super(...arguments),this._onClose=()=>{var{onClose:e,applyUserValues:t}=this.props;e(t)}}render(){var{onClose:e,isDirty:t}=this.props;return i.a.createElement(a.Dialog,{"data-tid":v,onClose:e,className:"bi-mui-shapingPropertiesDialog",size:"xlarge"},i.a.createElement(a.Dialog.Header,{"data-tid":O},i.a.createElement(a.TruncatedText,{value:g})),i.a.createElement(a.Dialog.Body,null,i.a.createElement(h.b,null)),i.a.createElement(a.Dialog.Footer,null,i.a.createElement(a.Dialog.Button,{primary:!0,"data-tid":S,label:b,onClick:this._onClose,disabled:!t}),i.a.createElement(a.Dialog.Button,{"data-tid":f,label:m,onClick:e})))}})||r)||r)},533:function(e,t,o){var r=o(534);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0};o(32)(r,n);r.locals&&(e.exports=r.locals)},534:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,".bi-mui-shapingPropertiesDialog .ba-common-propertyPanel{box-shadow:none}.bi-mui-shapingPropertiesDialog .ba-common-textAreaSection{margin-bottom:5px}",""])},543:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return l}));var r,n=o(0),i=o.n(n),s=o(37),a=o(9),c=o(2),p=o(4),l=Object(c.withContext)()(r=Object(p.e)(e=>({diagramStore:e.diagramStore}))(r=class extends n.Component{render(){var{diagramStore:e}=this.props;return i.a.createElement(s.a,{resolver:()=>Object(a.m)(a.c,"components/DiagramView",!0)},t=>e&&i.a.createElement(p.b,{store:e},i.a.createElement(t,null)))}})||r)||r},544:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return S}));var r,n,i,s=o(0),a=o.n(s),c=o(12),p=o(67),l=o(194),u=o(9),d=o(2),h=o(4),m=o(50),b=o(10),g=(o(582),["label","showModule","module","enableContextMenu","onBeginDrag","isValid","showValidationResults"]),y=["memberSearchableTreeStore","shapingStore","showMembers"];function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}var O=m.d,S=Object(d.withContext)(e=>({showMembers:!!e.featureConfig[b.SHOW_MEMBERS]}))(i=Object(h.e)(e=>({memberSearchableTreeStore:e.memberSearchableTreeStore,shapingStore:e}))(i=Object(c.observer)(i=class extends s.Component{render(){var e=this.props,{memberSearchableTreeStore:t,shapingStore:o,showMembers:r}=e,n=v(e,y);return a.a.createElement(h.b,{store:t},a.a.createElement(l.a,f({},n,{resizeable:!1,showFilter:r,itemDragType:O}),e=>a.a.createElement(h.b,{store:o},a.a.createElement(j,e))))}})||i)||i)||i,j=Object(d.withContext)(e=>({context:e,scrollable:!1,showModule:e.featureConfig[b.SHOW_MODULE_TREE_NODE]}))(r=Object(h.e)(e=>({module:e.module,isValid:!e.validationStore||e.validationStore.isValid,showValidationResults:e.showValidationResults,isShapingTreeLastSelection:e.isShapingTreeLastSelection,showContextMenu:e.showShapingTreeContextMenu,membersMode:e.treeStore.membersMode}))(((n=class extends s.Component{constructor(e){var t;super(e),t=this,this._treeProvider=void 0,this._itemRenderer=void 0,this._tree=void 0,this._getTreeProvider=function(e){return void 0===e&&(e=t.props),t.props.getTreeProvider({showNavigationGroups:e.showNavigationGroups,showWhatIfModels:e.showWhatIfModels,showRootNodes:e.showModule,membersMode:e.membersMode,showFullPackage:"showFullPackage"in e?e.showFullPackage:e.context.featureConfig[b.SHOW_FULL_PACKAGE]})},this._onMenu=(e,t)=>{this.props.onMenu(e,t,document.activeElement)},this._treeRef=e=>this._tree=e,this._treeProvider=this._getTreeProvider(e)}componentDidMount(){Object(u.m)(u.l)}componentWillReceiveProps(e){e.showModule===this.props.showModule&&e.showFullPackage===this.props.showFullPackage&&e.showNavigationGroups===this.props.showNavigationGroups&&e.membersMode===this.props.membersMode&&e.showWhatIfModels===this.props.showWhatIfModels||(this._treeProvider=this._getTreeProvider(e))}componentDidUpdate(e){var t=Object.keys(e.selectedNodes),o=Object.keys(this.props.selectedNodes),r=t.length-1,n=o.length-1;this.props.isShapingTreeLastSelection||t[r]===o[n]||this._tree.scrollToId(o[n])}render(){var e=this.props,{label:t,showModule:o,module:r,enableContextMenu:n,onBeginDrag:i,isValid:s,showValidationResults:c}=e,l=v(e,g);return a.a.createElement(p.a,f({},l,{enableDnD:!0,useSelectionOrderBadges:!1,showValidationResults:c,isValid:s,getTreeProvider:()=>this._treeProvider,"aria-label":t,moserObject:this._itemRenderer,className:"bi-mui-shapingTree",activeClassName:"is-active",isAlwaysExpanded:(e,t)=>o&&0===t,selectionMode:"multi",rootObject:r,onMenu:n?this._onMenu:null,onBeginDrag:i,ref:this._treeRef}))}}).defaultProps={showModule:!0,allowReorder:!0,enableContextMenu:!0,showNavigationGroups:!1,scrollable:!1,showWhatIfModels:!0},r=n))||r)||r},582:function(e,t,o){var r=o(583);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0};o(32)(r,n);r.locals&&(e.exports=r.locals)},583:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,'.bi-mui-shapingTree{margin:2px}.bi-mui-shapingTree.is-active:after{border:2px dashed;content:"";position:absolute;left:0;top:0;right:0;bottom:0;margin-right:8px;border-color:#1f57a4}',""])},584:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return p}));var r,n=o(0),i=o.n(n),s=o(12),a=o(4),c=o(67),p=Object(a.e)(e=>({module:e.module}))(r=Object(s.observer)(r=class extends n.Component{constructor(){super(...arguments),this._onSelect=e=>{var t=Object.keys(e).map(t=>e[t]),o=t[t.length-1];o&&this.props.onSelect&&this.props.onSelect(o)}}render(){var{filter:e,module:t,moserObjects:o,moserObjectFilter:r}=this.props;return i.a.createElement(c.a,{filter:e,rootObject:o||t,onSelectionChange:this._onSelect,expandedByDefault:!0,showRootNodes:!0,moserObjectFilter:r,isAlwaysExpanded:()=>!0,showDecoratorIcons:!1})}})||r)||r},585:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return l}));var r,n,i=o(0),s=o.n(i),a=o(12),c=o(67),p=o(16),l=Object(a.observer)(((n=class extends i.Component{render(){var e,{includeParent:t,moserObject:o}=this.props,r=new Set,n=o;do{r.add(n),e=n,n=n&&Object(p.l)(n)}while(n&&t(n));return s.a.createElement(c.a,{moserObjectFilter:e=>r.has(e),rootObject:e,expandedByDefault:!0,isAlwaysExpanded:()=>!0,showDecoratorIcons:!1})}}).defaultProps={includeParent:()=>!0},r=n))||r},586:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return u}));var r,n=o(0),i=o.n(n),s=o(4),a=o(12),c=o(2),p=o(7),l=o(206),u=Object(s.e)(e=>({selectedShapingTabId:e.selectedShapingTabId,setSelectedTabObject:e.setSelectedTabObject}))(r=Object(a.observer)(r=class extends n.Component{constructor(){super(...arguments),this._onTabChange=(e,t)=>{var{querySubjects:o,setSelectedTabObject:r}=this.props;r(o[t])}}componentDidMount(){var{querySubjects:e,setSelectedTabObject:t}=this.props;e.length&&t(e[0])}render(){var{selectedShapingTabId:e,querySubjects:t,onBeginDrag:o,onEndDrag:r}=this.props;return t.length>1?i.a.createElement(c.Tabs,{selected:e,fullHeight:!0,align:"left",onChange:this._onTabChange},t.map(e=>i.a.createElement(c.TabPanel,{id:Object(p.getUniqueId)(e),key:Object(p.getUniqueId)(e),label:e.getLabel()},i.a.createElement(l.default,{querySubject:e,onBeginDrag:o,onEndDrag:r})))):i.a.createElement(l.default,{onBeginDrag:o,onEndDrag:r,querySubject:t[0]})}})||r)||r},587:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g}));var r,n,i,s,a,c,p=o(0),l=o.n(p),u=o(12),d=o(4),h=o(9),m=o(18),b=o(2),g=Object(u.observer)(n=class extends p.Component{constructor(){super(...arguments),this.state={loaded:!1}}componentDidMount(){Object(h.m)(h.j).then(e=>{var t=e["components/general/UsageProperty"].default,o=e["components/general/CalculateAfterAggregationProperty"].default,r=e["components/general/AggregateProperty"].default,n=e["components/general/HighlevelDatatypeProperty"].default,p=e["components/general/RepresentsProperty"].default,l=e["components/general/facetDefinition/FacetDefinitionPropertyPane"].default,u=e["components/general/DescriptionProperty"].default;i=[u,t,o,r,n,p,l],s=e["components/general/LabelProperty"].default,a=e["components/SeparatedMetadataProperties"].default,c=e["utils/propertyUIUtils"].getVisibleMetadata,this.setState({loaded:!0})})}render(){return this.state.loaded?l.a.createElement(y,this.props):l.a.createElement(m.ProgressPanelMessage,null)}})||n,y=Object(d.e)((e,t)=>{var o,r,n,i;return{propertiesStore:e.propertiesStore,fetchTaxonomyOptions:e.propertiesStore.fetchTaxonomyOptions,moserObjects:(t.moserObjects||e.selection).slice(),showEditLabel:null==(o=e.context.glassContext)||null==(r=o.getCurrentContentView())||null==(n=r.getContent())||null==(i=n.options)||!i.config||e.context.glassContext.getCurrentContentView().getContent().options.config.editPropertiesLabel}})(r=Object(u.observer)(r=class extends p.Component{constructor(e){super(e),this._propertyComponents=void 0,e.showEditLabel?this._propertyComponents=[s,...i]:this._propertyComponents=[...i]}componentDidMount(){this.props.fetchTaxonomyOptions()}componentWillReceiveProps(e){e.showEditLabel?this._propertyComponents=[s,...i]:this._propertyComponents=[...i]}render(){var{moserObjects:e,propertiesStore:t}=this.props,o=c(this._propertyComponents,e),r=o.some(e=>e.diagnostics&&e.diagnostics.length>0);return l.a.createElement(d.b,{store:t},l.a.createElement(b.PropertyPanel,null,l.a.createElement(a,{metadata:o,props:{moserObjects:e,showIcon:r}})))}})||r)||r},588:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return s}));var r=o(0),n=o.n(r),i=o(2);class s extends r.Component{constructor(){super(...arguments),this._onTabChange=(e,t)=>{this.props.onTabChange(e,t)}}render(){var{tabData:e,selectedTab:t}=this.props;return n.a.createElement(i.Tabs,{selected:t,onChange:this._onTabChange},e.map(e=>{var{name:t,id:o}=e;return n.a.createElement(i.TabPanel,{key:o,id:o,label:t})}))}}},6:function(e,t){e.exports=r},62:function(e,t){e.exports=h},63:function(e,t){e.exports=m},64:function(e,t){e.exports=b},66:function(e,t){e.exports=g},71:function(e,t){e.exports=y},78:function(e,t){e.exports=f},80:function(e,t){e.exports=v},83:function(e,t){e.exports=O},84:function(e,t){e.exports=S},85:function(e,t){e.exports=j}})}));
//# sourceMappingURL=shaping.js.map