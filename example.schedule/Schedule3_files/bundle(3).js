define("ba_portal/nls/BaPortalResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("ba_portal/nls/root/BaPortalResources",{homePage:"Home page",homeSet:"Your home was set successfully",homeSetError:"An error occurred setting the default home page, try closing and reopening this view.",website:"Website",invalidURLSupplied:"Invalid URL supplied",tenantName:"(%{name})",switcherRemoveIconLabel:"Close",createMenu_title:"New",createMenu_data:"Data",createMenu_explore:"Explore",createMenu_present:"Present",createMenu_other:"Other",createMenu_loading:"Loading",itemOpen:"%{numOpenItems} item open",itemsOpen:"%{numOpenItems} items open"}),define("ba_portal/nls/StringResources",["i18n!./BaPortalResources","../lib/@waca/core-client/js/core-client/utils/Lexicon"],(function(e,t){"use strict";const s=new t({data:e,allowMissing:!0,verbose:!1});return{get(e,n){const a=s.translate(e,n);return a!==e?a:`${t.NOT_TRANSLATED} (${e})`}}})),function(){var e,t,s=function(e){var t,s,a=void 0!==n?n:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(s,(function(e){return t[e]||e})):""});return'<div class="genericIframe_container">\n\t<iframe src="'+a(e.genericIframe_url)+'" title="'+a(e.genericIframe_title)+'" class="genericIframe_iframe"/>\n</div>\n'},n=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(s){return s?s.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=s:"function"==typeof define?define("ba_portal/api/templates/genericIframe",[],(function(){return s})):(window.__templates=window.__templates||{},window.__templates.genericIframe=s)}(),function(){var e,t,s=function(e){return'<div class="genericIframe_container">'+e.errorMessage+"</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=s:"function"==typeof define?define("ba_portal/api/templates/error",[],(function(){return s})):(window.__templates=window.__templates||{},window.__templates.error=s)}(),define("ba_portal/api/IFrameView",["../lib/@waca/baglass/js/baglass/app/ContentView","jquery","../nls/StringResources","./templates/genericIframe","./templates/error"],(function(e,t,s,n,a){"use strict";const i=e.extend({init:function(s){t.extend(this,s),this._id=this.id||window.btoa(this.url),e.inherited("init",this,arguments)},render:function(){return"string"==typeof this.url?this._render():(t.extend(this,this._getOptionsFromId(this.id)),"string"==typeof this.url?this._render():this._injectiFrame(a,{errorMessage:i.ERROR_MESSAGE}))},setFocus:function(){e.inherited("setFocus",this,arguments),this.trigger("change:state")},_render:function(){const e={"/":"_","+":"-"},t=new RegExp(Object.keys(e).join("|\\"),"g"),s={type:"GET",url:"v1/perspectives/home/urls/"+btoa(this.url).replace(t,(function(t){return e[t]})),contentType:"application/json; charset=utf-8",dataType:"json",skipErrorHandling:!0};return this.glassContext.getCoreSvc(".Ajax").ajax(s).then((()=>this._injectiFrame(n,{genericIframe_url:this.url}))).catch((()=>this._injectiFrame(a,{errorMessage:i.ERROR_MESSAGE})))},_getOptionsFromId:function(e){try{return this.glassContext.appController.findElement(e).options}catch(e){return null}},_injectiFrame:function(e,s){t.extend(s,{genericIframe_title:this.getTitle()});const n=e(s);return this.$el.append(n),Promise.resolve()},getContent:function(){return{id:this._id,url:this.url,title:this.getTitle()}},getType:function(){return"generic_iframe"},getTitle:function(){return this.title||s.get("website")},execute:function(e){const t=e.glassContext.appController.currentAppView.currentContentView.getContent();return t.perspective=this.getType(),t}});return i.ERROR_MESSAGE=s.get("invalidURLSupplied"),i})),define("ba_portal/common/controllers/AccountSettingsMenuController",["jquery","../../lib/@waca/baglass/js/baglass/app/plugins/MenuActionInterface","../../lib/@waca/core-client/js/core-client/utils/IsBootstrap3"],(function(e,t,s){"use strict";const n="personalMenuCssOverride";if(!s){0===e(`#${n}`).length&&e(`<style type="text/css" id="${n}">div.popover.ba-carbon-personalMenu { transform: translate3d(100vw,48px,0) translateX(-100%) !important; }</style>`).appendTo("head")}return class extends t{onRender(e){const t=e.target;if(t.plugin&&t.plugin.getButtonElement){const e=t.plugin.getButtonElement();e&&e.find("svg").addClass("svgIcon").wrap('<div class="account-settings-background"/>')}}isItemVisible(){return!1}}})),define("ba_portal/common/utils/CreateAssetItemGroups",["../../nls/StringResources"],(e=>t=>{const s=[],n=[],a=[],i=[];return t.forEach((e=>{if(e.assetClass)switch(e.assetClass){case"data":return s.push(e);case"explore":return n.push(e);case"present":return a.push(e);default:return i.push(e)}else switch(e.id){case"com.ibm.bi.ca-uploadModeller.ca-modeller-glass-upload":case"com.ibm.bi.ca-modeller.ca-modeller":return s.push(e);case"com.ibm.bi.explore.createDashboard":case"com.ibm.bi.notebook.createNotebook":return n.push(e);case"com.ibm.bi.dashboard.createDashboard":case"com.ibm.bi.authoring.createTemplate":case"com.ibm.bi.story.createStory":return a.push(e);default:return i.push(e)}})),[{label:e.get("createMenu_data"),className:"data",items:s},{label:e.get("createMenu_explore"),className:"explore",items:n},{label:e.get("createMenu_present"),className:"present",items:a},{label:e.get("createMenu_other"),className:"other",items:i}].filter((e=>e.items.length>0))})),define("ba_portal/common/views/CreateAssetMenu",["react","prop-types","ba-ui-carbon","ba-ui-carbon-toolkit","../utils/CreateAssetItemGroups","../../nls/StringResources","baglass/glass.webpack.bundle"],((e,t,s,n,a,i,o)=>{var r,l;const c=s.Loading,g=n.Slideout,p=o.ListKeyboardNavigation,d="newMenuPrefs";return l=r=class extends e.Component{constructor(t){super(t),this._maxWindow=window.innerWidth-300,this.state={loading:!0,active:!1,items:[],width:this.getWidth()},this.props.Glass.externalMenuSupport.getVisibleItems(this.props.menuSpec).then((e=>{this.setState({items:e,loading:!1})})).catch((e=>{this.props.Glass.getCoreSvc(".Logger").warn(e),this.setState({items:[],loading:!1})})),this._listRef=e.createRef()}getWidth(){const e=Number(window.localStorage.getItem(d));return e?e>this._maxWindow?this._maxWindow:e:320}updateWidth(e,t){e&&t!==this.state.width&&(this.setState({width:t}),window.localStorage.setItem(d,t))}onSelectItem(e){this.props.Glass.externalMenuSupport.handleMenuAction(e.featureId,e.id,this.props.menuSpec),this.props.onClose(),this.closeMenu()}_renderGroupHeader(t){return e.createElement("li",{role:"group",tabIndex:"-1",style:{"pointer-events":"none"},className:"create-menu-item","aria-label":t.label,key:t.id},e.createElement("a",{className:"create-menu-link header",role:"menuitem"},e.createElement("span",{title:t.label,dir:"ltr","aria-label":t.label},t.label)))}_renderGroupItem(t,s){return e.createElement("li",{id:s.id,role:"group",tabIndex:"0",className:"create-menu-item","aria-label":s.label,key:s.id,"data-item":s.id,onClick:this.onSelectItem.bind(this,s)},e.createElement("a",{className:"create-menu-link item",role:"menuitem","data-item":s.id},e.createElement("svg",{className:`svgIcon ${t.className}`,role:"img",focusable:"false"},e.createElement("use",{style:{"pointer-events":"none"},xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:`#${s.icon}`})),e.createElement("span",{title:s.label,dir:"ltr",className:"hasIcon","aria-label":s.label,"data-item":s.id},s.label)))}renderGroups(e){return e.map((e=>[this._renderGroupHeader(e)].concat(e.items.map(this._renderGroupItem.bind(this,e)))))}_getFocusableElements(){if(this._listRef.current){const e=this._listRef.current.querySelectorAll("li"),t=[];return e.forEach((e=>{0===e.tabIndex&&t.push(e)})),t}return[]}_focusFirstElement(){const e=this._getFocusableElements();e.length>0&&e[0].focus()}onKeyDown(e,t){const s=t.keyCode||t.which;if(9===s&&this._listRef.current){const e=this._getFocusableElements();if(e.length>0){const s=e[0],n=e[e.length-1];t.shiftKey?document.activeElement===s&&(n.focus(),t.preventDefault()):document.activeElement===n&&(s.focus(),t.preventDefault())}}else 13!==s&&32!==s||(this.onSelectItem(e),this.props.Glass.hideOpenMenus())}render(){var t=this.state;const s=t.items,n=t.active,o=t.loading,r=t.width,l=a(s);return e.createElement(g,{width:r,className:"hamburger-menu-slideout-menu",id:this.props.menuId,active:n,resizable:!0,resizeDirection:"x",resizeMinConstraintsX:250,resizeMaxConstraintsX:this._maxWindow,onResizeStop:(e,t)=>{this.updateWidth(e,t.size.width)},onKeyUp:e=>{const t=e.keyCode||e.which;if(27===t||37===t)return this._setFocus=!0,this.setState({active:!1})},onHidden:()=>{this._setFocus&&(this._setFocus=!1,this.props.onHidden())},autoFocus:!1,onOpened:()=>{this._setFocus&&(this._setFocus=!1,this._focusFirstElement())},onClickAway:()=>{}},e.createElement("ul",{role:"menu",tabIndex:"-1",className:"create-menu-items",ref:this._listRef},e.createElement("li",{className:"create-menu-item create-menu-header","aria-label":i.get("createMenu_title"),tabIndex:"-1"},i.get("createMenu_title")),o&&e.createElement(c,{description:i.get("createMenu_loading"),withOverlay:!1}),!o&&e.createElement(p,{listItems:s,setMenuVisible:this.toggleState.bind(this),handleMenuItemClickEvent:this.onSelectItem.bind(this)},this.renderGroups(l))))}toggleState(e){this._setFocus=e;const t=this.state.active;this.setState({active:!t})}closeMenu(){this._setFocus=!1,this.setState({active:!1})}},r.propTypes={menuSpec:t.any,Glass:t.any,menuId:t.string,onHidden:t.function,onClose:t.function},l})),define("ba_portal/common/controllers/NavMenuActionController",["react","react-dom","jquery","../../lib/@waca/baglass/js/baglass/app/plugins/MenuActionInterface","../views/CreateAssetMenu","../../lib/@waca/core-client/js/core-client/utils/IsBootstrap3"],((e,t,s,n,a,i)=>{const o="com.ibm.bi.glass.common.createMenu",r="navmenu:slideout:open",l="navMenuCssOverride";if(!i){0===s(`#${l}`).length&&s(`<style type="text/css" id="${l}">div.popover.ba-carbon-nav-menu { transform: translate3d(0px, 48px, 0px) !important; } </style>`).appendTo("head")}return class extends n{onSelectItem(e){const t=this._getPluginKey(e.target.itemId),s=e.glassContext;if("gohome"===t)return s.openAppView();s.getCoreSvc(".Logger").warn(`NavMenuActionController: Unknown Plugin: ${e.target.itemId}`)}onRenderItem(e){const t=this._getPluginKey(e.target.itemId),s=e.glassContext;if("gohome"===t){const t=s.getCurrentPerspective();return s.getHomePageObject().then((s=>{s.perspective===t&&e.target.activeObject.addClass("isActive")}))}"newAsset"===t&&this._renderNewMenu(s,e)}_getPluginKey(e){const t=e.split(".");return t[t.length-1]}_renderNewMenu(n,i){const l=i.target.activeObject;l.addClass("link"),this._newItemsPromise=n.findCollection("com.ibm.bi.glass.global.menus").then((e=>{if(e&&e.length>0)return e.find((e=>e.id===o))})).then((c=>{if(c&&c.items&&c.items.length>0){if(!l._newMenu){const g=l.parents(".popover.ba-carbon-nav-menu"),p=s('<div class="hamburger-menu-slideout-container"/>');p.appendTo(g),l._newMenu=t.render(e.createElement(a,{Glass:n,menuSpec:c,menuId:o,onHidden:()=>{l.focus()},onClose:()=>{i.target.plugin.closeGlassMenu()}}),p[0]),n.getCoreSvc(".Events").on(r,(e=>{e.target!==o&&(l.removeClass("isActive"),l._newMenu.closeMenu())})),s(".hamburger-menu-slideout-menu").on("click",(e=>{e.target&&e.target.classList.contains("react-resizable-handle")&&this._toggleNewMenu(n,l,e,!1,!1)})),l.on("clicktap",this._toggleNewMenu.bind(this,n,l)),l.on("keypress keyup",(e=>{e.preventDefault()&&e.stopPropagation()})),l.on("keyup",(e=>{const t=e.keyCode||e.which;13!==t&&32!==t||this._toggleNewMenu(n,l,e,!0)}))}}else l.hide()}))}_toggleNewMenu(e,t,s,n=!0,a=!0){s.stopPropagation(),s.preventDefault(),t.blur(),this._newItemsPromise.then((()=>{e.getCoreSvc(".Events").trigger(r,{target:o}),setTimeout((()=>{t.toggleClass("isActive"),a&&t._newMenu.toggleState(n)}),0)}))}}})),define("ca_portal/common/controllers/BrandTextController",["bi/glass/app/plugins/ButtonActionInterface"],(function(e){"use strict";return e.extend({onPress(e){e.glassContext.openAppView()}})})),define("ca_portal/common/controllers/CognosLogoController",["bi/glass/app/plugins/MenuActionInterface"],(function(e){"use strict";return e.extend({actionHandlers:{aboutCognos(e){const t="actions.openCognosAnalyticsAboutBox";e.glassContext.appController.canExecuteAction(t,e)&&e.glassContext.appController.performAction(t,e)}},onSelectItem(e){const t=this._getPluginKey(e.target.itemId),s=this.actionHandlers[t];if(s){return s.bind(this,e)()}},_getPluginKey(e){const t=e.split(".");return t[t.length-1]}})})),define("ca_portal/common/views/UserInfoCell",["react","prop-types"],((e,t)=>{var s,n;return n=s=class extends e.Component{render(){return e.createElement("a",{className:"user-info-cell",tabIndex:"-1"},e.createElement("div",{className:"user-icon"},e.createElement("div",{className:"background"}),e.createElement("svg",{className:"userIcon","aria-label":"userIcon",role:"img",focusable:"false"},e.createElement("use",{style:{"pointer-events":"none"},xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"#ba_portal-user_24"}))),e.createElement("div",{className:"user-info"},e.createElement("ul",{tabIndex:"-1"},this.props.displayName&&e.createElement("li",{className:"display-name",tabIndex:"-1",title:this.props.displayName},this.props.displayName),this.props.email&&e.createElement("li",{className:"account-info",tabIndex:"-1",title:this.props.email},this.props.email),this.props.tenantName&&e.createElement("li",{className:"account-info",tabIndex:"-1",title:this.props.tenantName},this.props.tenantName),this.props.linkText&&e.createElement("li",{className:"account-settings",tabIndex:"0",onClick:this.props.linkAction},this.props.linkText))))}},s.propTypes={displayName:t.string,email:t.string,tenantName:t.string,linkText:t.string,linkAction:t.function},n})),define("ca_portal/nls/CaPortalResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("ca_portal/nls/root/CaPortalResources",{rtl:"Right-to-left",timeZoneID:"Time zone",skin:"Style",metricsFileImportTask:"New Import from Files",displayMode:"Default view",credentialRenewed:"Your credentials were renewed with your current user ID and password.",productLocale:"Product language",toggleDisabled:"off",credentialChange:"Renew",log_level_Debug:"Debug",confirmNewPassword:"Confirm new password",unsavedViewMsg2:"Your changes will be lost if you don't save them first.",supportPortalErrorMessage:"Try again.  If the problem persists, contact your administrator.",legalText:'Licensed Materials - Property of IBM Corp. © Copyright IBM Corporation and other(s) 2005, %{year}. IBM, the IBM logo, ibm.com and Cognos are trademarks or registered trademarks of International Business Machines Corp., registered in many jurisdictions worldwide. A current list of IBM trademarks is available on the Web at www.ibm.com/legal/copytrade.shtml. This Program is licensed under the terms of the license agreement accompanying the Program. This license agreement may be either located in a Program directory folder or library identified as "License" or "Non_IBM_License" if applicable, or provided as a printed license agreement. Please read the agreement carefully before using the Program. By using the Program you agree to these terms.',groupsAndRoles:"Groups and roles",metricsMaintenanceTask:"New Maintenance",email:"Email",contextual:"Contextual",resetHome:"Reset to default",ltr:"Left-to-right",credentials:"Credentials",logging_congfig_title:"Logging",changePasswordTitle:"Change my password",format:"Report format",showUnread:"Show unread",AILearning_active:"AI Learning is on:",docsErrorMessage:"Try again.  If the problem persists, contact your administrator.",toggleEnabled:"on",homeSetError:"An error occurred setting the default home page, try closing and reopening this view.",passwordChange:"Change your password",profile:"Profile",pdfRestricted:"PDF (Restricted)",drillThrough:"Drill-Through definitions",homeSet:"Your home was set successfully",regionalOptions:"Regional options",myPreferences:"My preferences",defaultHome:"Default",version:"Version",controller:"Controller",manage:"Manage",biDirectionalFeaturesEnabled:"Bidirectional language support",newFeaturesErrorTitle:"The link to New Features did not work",passwordMatch:"Password match",updateProfileAndsettings:"Update profile and settings",dashboardConsole:"Workspace",legacyAppsSlideoutLabel:"Available Legacy Applications",logging_config_description:"Logging is used for troubleshooting. Consult your administrator for guidance on settings.",confirmDeletion:"Confirm deletion",signInButtonText:"Log in",dataSourceCredentials:"Data server credentials",AILearningConfigurationSlideoutAllyLabel:"AI learning configuration",loadingSettings:"Loading settings",spreadsheetMLRestricted:"Excel (Restricted)",manageAILearning:"AI learning",xlsxDataRestricted:"Excel Data (Restricted)",advanced:"Advanced options",ok:"OK",changeEmail:"Change",showHints:"Show hints",general:"General",xlsxData:"Excel Data",newPassword:"New password",hideAll:"Hide all",confirmPassword:"Confirm password",AILearning_config_description:"Improve in-product recommendations by allowing Cognos Analytics to learn about your usage.",metricStudio:"Studio",supportPortalErrorTitle:"The link to Support Portal didn't work",log_level_Warn:"Warning",contentSettings:"Content settings",setHomeButton:"Set",myCapabilities:"My capabilities",homePage:"Home page",helpErrorMessage:"Try again.  If the problem persists, contact your administrator.",loadingProfile:"Loading profile",portal:"Portal",metricsPackage:"New Package",myCredentials:"My credentials",myApiKeys:"My API keys",credentialCreate:"Create",eventStudio:"Event Studio",updatePWUnknownError:"Unable to update password",showHiddenObjects:"Show hidden entries",csv:"CSV",docsErrorTitle:"The link to Documentation didn't work",log_level_Error:"Error",wrongPassword:"Unable to authenticate",productName:"IBM Cognos Analytics with Watson %{version}",log_level_Info:"Information",welcomeBanner:"Welcome banner",helpErrorTitle:"The link to Help didn't work",contentLocale:"Content language",pdf:"PDF",oldPassword:"Old password",spreadsheetML:"Excel",accessibilityFeatures:"Accessibility features",manageLogging:"Logging",loggingConfigurationSlideoutA11yLabel:"Logging Configuration",communityErrorTitle:"The link to Community didn't work",companionApps:"Companion applications",setHomeLabel:"Set home as (current view)",metricsExportTask:"New Export",csvRestricted:"CSV (Restricted)",newFeaturesErrorMessage:"Try again.  If the problem persists, contact your administrator.",contributor:"Contributor",showAll:"Show all",logging_active:"Logging is on:",html:"HTML",profileAndSettings:"Profile and settings",baseTextDirection:"Base direction for text",queryStudio:"Query Studio",metricsManager:"Metrics Manager",password:"Password",invalidEmail:"Enter a valid email address",credentialCreateSuccess:"You have successfully created your credentials",settings:"Settings",restrictedFormatSelected:"You do not have the capability to run reports in this format, but you can access reports that are saved in this format.",usageDataDeletionConfirmation:"Deleting usage data resets any AI learning.  Are you sure you want to delete usage data?",powerplayStudio:"PowerPlay Studio",viewDetails:"View details",deleteUsageData:"Delete usage data:",showPassword:"Show password",AILearning_config_title:"AI learning",myPreferencesSlideoutLabel:"Profile and settings",passWordChangeSuccess:"You have successfully changed your password",logging_level:"Logging level:",analysisStudio:"Analysis Studio",communityErrorMessage:"Try again.  If the problem persists, contact your administrator.",cancel:"Cancel",shareSetError:"This action cannot be performed before closing and reopening this view.",passwordNotMatch:"Oops, password does not match",xml:"XML",xmlRestricted:"XML (Restricted)",openMenu:"Open menu",closeMenu:"Close menu"}),define("ca_portal/nls/StringResources",["i18n!./CaPortalResources","baglass/core-client/js/core-client/utils/Lexicon"],(function(e,t){"use strict";var s=new t({data:e,allowMissing:!0,verbose:!1});return{get:function(e,n){var a=s.translate(e,n);return a!==e?a:t.NOT_TRANSLATED+"("+e+")"}}})),define("ca_portal/common/controllers/MyMenuController",["react","react-dom","../views/UserInfoCell","../../nls/StringResources","bi/glass/app/plugins/MenuActionInterface","caglass/caglass.webpack.bundle","jquery"],(function(e,t,s,n,a,i,o){"use strict";const r={login:e=>i.secondaryLogin(e.glassContext).catch((function(t){e.glassContext.getCoreSvc(".Logger").error("Secondary login failed",t)})),logout(e){const t=e.glassContext.appController;return t.trigger("application:logout"),t.close(!1,!1).then((function(){const t=function(e){return e.getCoreSvc(".UserProfile").disableLoggingSession()},s=function(e){return e.getCoreSvc(".DigitalContext").killDcoCookie()},n=function(e){return e.getCoreSvc(".Instrumentation").resetAnalyticsCookie()};return e.glassContext.getSvc(".Logout").then((function(a){return a.registerPreLogout(t),a.registerPreLogout(s),e.glassContext.getCoreSvc(".Instrumentation").enabled&&a.registerPreLogout(n),a.logOut(e)}))}))},accountSettings(e){const t="actions.openMyPreferences";if(e.glassContext.appController.canExecuteAction(t,e))return e.glassContext.appController.performAction(t,e)},about(e){const t="actions.openCognosAnalyticsAboutBox";e.glassContext.appController.canExecuteAction(t,e)&&e.glassContext.appController.performAction(t,e)}};return class extends a{onSelectItem(e){const t=this._getPluginKey(e.target.itemId),s=r[t];if(s){return s.bind(this,e)()}}_renderAccountSettings(a){const i=a.glassContext.profile.account;if(i){a.target.activeObject.empty();const l=a.target.activeObject,c=o('<div class="com.ibm.bi.glass.caPersonalMenu.accountSettings"/>');c.appendTo(l);var r=this._getUserInfoProps(i);const g=r.displayName,p=r.email,d=r.tenantName;t.render(e.createElement(s,{displayName:g,email:p,tenantName:d,linkText:n.get("profileAndSettings"),linkAction:this.onSelectItem.bind(this,a)}),c[0])}}onRenderItem(e){switch(this._getPluginKey(e.target.itemId)){case"accountSettings":return this._renderAccountSettings(e);case"login":case"logout":return e.target.activeObject.addClass("link")}}_getUserInfoProps(e){const t={displayName:e.displayName};return e.email&&(t.email=e.email),e.tenantName&&(t.tenantName=`(${e.tenantName})`),t}onRender(){}isItemVisible(e){const t=e.target.itemId,s=e.glassContext.profile.account;switch(t){case"com.ibm.bi.glass.common.login":case"login.divider":return s.showLogIn;case"com.ibm.bi.glass.common.logout":case"logout.divider":return!s.isAnonymous;default:return!0}}_getPluginKey(e){const t=e.split(".");return t[t.length-1]}}})),define("ca_portal/common/controllers/all",["./BrandTextController","./CognosLogoController","./MyMenuController"],(function(){})),define("ca_portal/common/actions/OpenMyPreferencesAction",["../../nls/StringResources","lodash"],(function(e,t){return class{constructor(e){t.extend(this,e)}canExecute(e){return!!this.normalizeContext(e)&&void 0!==e.slideOutOptions}doAction(e){return e?(this.normalizeContext(e),this._doAction(e.slideOutOptions,e.glassContext)):Promise.reject(new Error("No objects selected"))}normalizeContext(t){if(t){let s;try{const e=t.target.plugin.itemSpec.items,n=t.target.specItemIndex;null!==e&&null!==n&&e[n]?(t.slideOutOptions=e[n].options,s=t.target.plugin.getButtonElement()):(t.slideOutOptions=t.options||this._findMyPreferencesDefaultOptions(t.itemSpec),s=t.$el)}catch(e){t.slideOutOptions=t.options||this._findMyPreferencesDefaultOptions(t.itemSpec),s=t.$el}t.slideOutOptions&&(t.slideOutOptions.launchPoint=s,t.slideOutOptions.label=e.get("profileAndSettings"),t.slideOutOptions.width="400px")}return t}_doAction(e,t){let s;return e.onHide=function(){s.contentView.hide()},s=t.appController.showSlideOut(e),Promise.resolve()}_findMyPreferencesDefaultOptions(e){const t=e.items;let s;for(let e=0;e<t.length;e++)if("com.ibm.bi.glass.caPersonalMenu.accountSettings"===t[e].id){s=t[e].options;break}return s}}})),define("ca_portal/common/actions/all",["./OpenMyPreferencesAction"],(function(){})),define("ca_portal/common/services/NPSService",[],(function(){"use strict";return class{initialize(e){if(this._context=e,this._context){this._setLogger(e);try{const e=this._context.getCoreSvc(".UserProfile");this._embedMedalliaTag(this._context.currentPerspective.perspectiveModel.spec.context.NetPromoterScore,this._context.profile.account,e.preferences)}catch(e){this._getLogger().error("NPSService.initialize():: error calling _embedMedalliaTag()",e)}}}_embedMedalliaTag(e,t,s){if(e&&!0===e.isEnabled&&!1===this._isLoaded()&&t&&s){const n={country:this._getCountry(s.contentLocale),language:this._getLanguage(s.productLocale),noQuarantine:this._getQuarantineStatus(e.noQuarantine),daysSinceFirstLogin:this._calculateDaysSinceFirstLogin(t.creationTime),givenName:t.givenName,surname:t.surname,email:t.email,id:t.id},a=this._buildMetadataObject(e,n);a&&(this._setMedalliaObj(a),this._injectScriptTag())}}_buildMetadataObject(e,t){return e&&t&&t.country&&t.language&&t.noQuarantine&&t.daysSinceFirstLogin&&(t.givenName||t.surname)&&t.email&&t.id?{offeringName:e.offeringName,offeringId:e.offeringId,highLevelOfferingName:e.highLevelOfferingName,userFirstName:t.givenName,userLastName:t.surname,userEmail:t.email,userId:t.id,userIdType:e.userIdType,country:t.country,language:t.language,customerName:e.customerName,icn:e.icn,quarterlyIntercept:e.quarterlyIntercept,daysSinceFirstLogin:t.daysSinceFirstLogin,testData:e.isTestData,noQuarantine:t.noQuarantine}:(this._getLogger().error("NPSService::_buildMetadataObject():: Bad input"),null)}_setMedalliaObj(e){window.IBM_Meta=e}_isLoaded(){return null!==document.getElementById("medalliaScriptTag")}_injectScriptTag(){const e=document.createElement("script");e.src="https://nebula-cdn.kampyle.com/we/28600/onsite/embed.js",e.id="medalliaScriptTag",document.body.appendChild(e)}_getLanguage(e){let t="";if(e){switch(e.toLowerCase()){case"zh-tw":case"fr-ca":case"pt-pt":case"es-co":t=e;break;default:t=this._splitLocale(e,"language")}return t.toLowerCase()}return this._getLogger().error("NPSService::_getLanguage():: Bad productLocale"),null}_getCountry(e){return e?this._splitLocale(e,"country").toLowerCase():(this._getLogger().error("NPSService::_getCountry():: Bad contentLocale"),null)}_splitLocale(e,t){const s=e.split("-");if(2!==s.length)return e;switch(t){case"language":return s[0];case"country":return s[1]}}_calculateDaysSinceFirstLogin(e){const t=this._getCreationDate(e),s=this._getCurrentDate();let n=null;if(t&&s){const e=s.getTime()-t.getTime();n=Math.round(e/864e5),n<1&&this._getLogger().error("NPSService::_calculateDaysSinceFirstLogin():: daysSinceFirstLogin is < 1")}else this._getLogger().error("NPSService::_calculateDaysSinceFirstLogin():: Passed bad timestamp");return n}_getCurrentDate(){return new Date}_getCreationDate(e){let t;return e&&(t=new Date(e),isNaN(t)&&(t=null)),t}_getQuarantineStatus(e){return!0===e?"yes":"no"}_setLogger(e){e.glassContext&&e.glassContext.getCoreSvc(".Logger")?this._logger=e.glassContext.getCoreSvc(".Logger"):this._logger=console}_getLogger(){return this._logger}}})),define("ca_portal/common/services/all",["./NPSService"],(function(){})),define("ca_portal/features/legacyApps/list_columns/LegacyAppsIcon",["bi/content_apps/common/ui/list_columns/Icon","bi/commons/utils/Utils","jquery"],(function(e,t,s){"use strict";return class extends e{createObjectImg(e){const n=s("<div/>");if(!this.icon||!e.apps){let s=this.icon;s?n.addClass("legacyLink"):s=e.icon,t.setIcon(n,s,e.label),n.attr("role","presentation")}return n}}})),define("ca_portal/features/legacyApps/list_columns/LegacyAppsText",["bi/content_apps/common/ui/list_columns/Text","bi/commons/utils/JQueryExt"],(function(e){"use strict";var t=e.extend({createEllipseCell:function(e,s,n){const a=t.inherited("createEllipseCell",this,arguments);return a.addClass(n.type),a}});return t})),define("ca_portal/features/legacyApps/LegacyPane",["bi/content_apps/common/ContentListPageView","bi/content_apps/common/ui/EllipsisLabel","../../nls/StringResources","./list_columns/LegacyAppsIcon","./list_columns/LegacyAppsText","bi/commons/utils/LegacyUtils","lodash"],(function(e,t,s,n,a,i,o){"use strict";return e.extend({renderContent(){return this.renderContentList({columns:this._getColumnSpecification(),multiSelect:!1})},_getColumnSpecification(){return[{module:n,clickCallback:this._handleClick.bind(this)},{module:a,propertyName:"label",clickCallback:this._handleClick.bind(this)},{module:n,icon:"common-open-tab",clickCallback:this._handleClick.bind(this)}]},_handleClick(e={}){const t=this.slideout.parent||this.slideout;e.apps?this.slideout.addChild({position:"left",perspective:"home",content:{module:"ca_portal/features/legacyApps/LegacyPane",id:"LegacyPane",parent:e}}):o.isFunction(e.handler)?(e.glassContext=this.glassContext,e.handler.call(i,e),t.remove()):(i.legacyLaunch(this.glassContext,e.type),t.remove())},contentbarItems(){return[{name:"nameLabel",position:"leading",style:"nameLabel",module:t,label:this.parent?this.parent.label:s.get("companionApps")}]},getListControlOptions(){return{disableColumnHeaders:!0,getJSONDataCallback:()=>{const e=[],t=this.parent?this.parent.apps:i.legacyApps;for(let n in t){const a=t[n];i.canUseLegacyTool(this.glassContext,a)&&(this.parent&&!a.handler&&(a.handler=this.parent.handler,a.handler.bind(this,a)),e[e.length]={type:n,label:s.get(n[0].toLowerCase()+n.substr(1)),icon:a.icon,apps:a.apps,handler:a.handler})}return Promise.resolve({data:e})}}},setFocus(){this.$el.find(".nowrap.ellipsis_cell").first().focus()}})})),define("ca_portal/features/legacyApps/MenuItemController",["bi/glass/app/plugins/MenuActionInterface","../../nls/StringResources","bi/commons/utils/LegacyUtils"],(function(e,t,s){"use strict";return class extends e{onSelectItem(e){const s=e.target.plugin.itemSpec.items[e.target.specItemIndex].options;s.launchPoint=e.target.plugin.getButtonElement(),s.label=t.get("legacyAppsSlideoutLabel"),e.glassContext.appController.showSlideOut(s)}isItemVisible(e){if(e.glassContext.legacyLaunchable)for(let t in s.legacyApps)if(s.canUseLegacyTool(e.glassContext,t))return!0;return!1}}})),define("ca_portal/features/legacyApps/all",["./LegacyPane","./MenuItemController"],(function(){})),define("ca_portal/features/mypreferences/LoggingConfigSlideout",["lodash","baglass/core-client/js/core-client/ui/properties/PropertyPageView","../../nls/StringResources"],(function(e,t,s){"use strict";const n=t.extend({init(t){n.inherited("init",this,arguments),e.extend(this,t),this.logger=this.glassContext.getCoreSvc(".Logger")},render(){this.$el.addClass("loggingConfigPane");const e=this.logger.getLevel();return this.renderPropertyUIControl({ariaLabel:s.get("loggingConfigurationSlideoutA11yLabel"),glassContext:this.glassContext,el:this.$el,items:[{value:s.get("logging_congfig_title"),type:"Banner",backButton:!0,centerLabel:!0,onClose:this._onClose.bind(this),doClose:this._closeSlideout.bind(this)},{type:"HintText",name:"TypeInHintText",visibility:"visible",label:s.get("logging_config_description")},{name:"loggingConfigLoggingEnable",checked:this.logger.isActive(),label:s.get("logging_active"),type:"ToggleButton"},{type:"Separator"},{type:"DropDown",name:"loggingConfigLogLevel",label:s.get("logging_level"),options:[{label:s.get("log_level_Error"),value:this.logger.logLevelEnum.error,selected:this.logger.logLevelEnum.error===e},{label:s.get("log_level_Warn"),value:this.logger.logLevelEnum.warn,selected:this.logger.logLevelEnum.warn===e},{label:s.get("log_level_Info"),value:this.logger.logLevelEnum.info,selected:this.logger.logLevelEnum.info===e},{label:s.get("log_level_Debug"),value:this.logger.logLevelEnum.debug,selected:this.logger.logLevelEnum.debug===e}]}]})},_doSave(){const e=this.getPropertyUIControl().getModifiedProperties(),t=e.loggingConfigLogLevel,s=e.loggingConfigLoggingEnable;this.logger.saveConfig(t,s)},_onClose(){this._doSave()},_closeSlideout(){this.slideout.hide()}});return n})),define("ca_portal/features/mypreferences/Tab",["baglass/core-client/js/core-client/ui/properties/PropertyTabView","lodash"],(function(e,t){"use strict";const s=e.extend({init(e){s.inherited("init",this,arguments),t.extend(this,e)},render(){return this.renderPropertyUIControl({glassContext:this.glassContext,el:this.$el,items:this.items})}});return s})),define("ca_portal/features/mypreferences/all",["./LoggingConfigSlideout","./Tab"],(function(){})),define("ca_portal/features/profileAndSettings/controls/SingleLineLink",["react","prop-types"],((e,t)=>{var s,n;return n=s=class extends e.Component{_onKeyUp(e){switch(e.keyCode||e.which){case 13:case 32:return this.props.clickCallback()}}render(){return e.createElement("div",{className:`carbonPropertyRow singleLineLink capp_${this.props.name}`},e.createElement("div",{tabIndex:"0",className:"propsLabel",ariaLabel:this.props.label},this.props.label),e.createElement("div",{className:"spacer"}),this.props.enabled&&e.createElement("a",{tabIndex:"0",role:"link",className:"propsValue",ariaLabel:this.props.value,onClick:this.props.clickCallback,onKeyUp:this._onKeyUp.bind(this)},this.props.value),!this.props.enabled&&e.createElement("div",{tabIndex:"0",className:"propsLabel",ariaLabel:this.props.value},this.props.value))}},s.propTypes={name:t.string.isRequired,label:t.string.isRequired,value:t.string.isRequired,enabled:t.bool.isRequired,clickCallback:t.function},n})),define("ca_portal/features/profileAndSettings/controls/SectionTitle",["react","prop-types"],((e,t)=>{var s,n;return n=s=class extends e.Component{render(){return e.createElement("div",{className:`carbonPropertyRow sectionTitle capp_${this.props.name}`},e.createElement("div",{tabIndex:"0",className:"propsLabel",ariaLabel:this.props.label},this.props.label))}},s.propTypes={name:t.string.isRequired,label:t.string.isRequired},n})),define("ca_portal/features/profileAndSettings/controls/Separator",["react","prop-types"],((e,t)=>{var s,n;return n=s=class extends e.Component{render(){return e.createElement("div",{className:`carbonPropertyRow separator capp_${this.props.name}`})}},s.propTypes={name:t.string.isRequired},n})),define("ca_portal/features/profileAndSettings/CredentialDialogs",["jquery","bi/glass/common/ui/SubmitPasswordDialog","../../nls/StringResources"],((e,t,s)=>class{constructor(e){this.Glass=e}openRenewCredentialDialog(e){return this._openCredentialDialog(e,s.get("credentialChange"),"renewCredential")}openCreateCredentialDialog(e){return this._openCredentialDialog(e,s.get("credentialCreate"),"createCredential")}_openCredentialDialog(e,n,a){return new Promise(((i,o)=>{const r=this._buildParameters(e),l={buttons:[{text:s.get("ok"),handler:this._submitCredential.bind(this,i,o),type:"primary",defaultId:a},"cancel"],title:n,viewOptions:{glassContext:this.Glass,displayPrompts:r},cancelCallback:()=>{this._credentialDialogObj.dialog.hide(),o()}};t.prototype.openSubmitPasswordDialog(l).then((e=>{this._credentialDialogObj=e}),o)}))}_submitCredential(t,n){e.each(this.credentialParameters,((t,s)=>{const n=e(`input[class*="${s.name}"]`);if(n.length){const e=n.val();e&&(s.value=e)}}));const a={type:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},url:"v1/users/~/credentials",data:JSON.stringify({parameters:this.credentialParameters}),skipErrorHandling:!0};this.Glass.services.ajax.ajax(a).then((()=>{this._credentialDialogObj.dialog.hide(),this.Glass.showToast(s.get("credentialCreateSuccess")),t()}),((e,t,a,i)=>{t.status===this.Glass.ajaxCodes.UNAUTHORIZED&&t.responseJSON&&"camAuthUserRecoverable"===t.responseJSON.errorCodeString?(this.Glass.showToast(s.get("wrongPassword"),{type:"error"}),this._buildParameters(t.responseJSON.promptInfo.displayObjects)):(n(),this.Glass.showToast(i,{type:"error"}),this._credentialDialogObj.dialog.hide())}))}openResetPasswordDialog(){return new Promise(((e,n)=>{const a={buttons:[{text:s.get("ok"),handler:this._resetPassword.bind(this),type:"primary",defaultId:"updatePassword"},"cancel"],title:s.get("changePasswordTitle"),viewOptions:{glassContext:this.Glass}};t.prototype.openSubmitPasswordDialog(a).then((t=>{this._passwordDialogObj=t,e()}),n)}))}_resetPassword(){const t=e(`input[class*="${this._passwordDialogObj.oldPasswordName}"]`).val(),n=e(`input[class*="${this._passwordDialogObj.newPasswordName}"]`).val(),a={type:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},url:`v1/users_ex/${this.Glass.getCoreSvc(".UserProfile").preferences.id}`,data:JSON.stringify({password:n,oldPassword:t})};return this.Glass.getCoreSvc(".Ajax").ajax(a).then((e=>{1===e.errorCode?this.Glass.showToast(s.get("wrongPassword"),{type:"error"}):(this.Glass.showToast(s.get("passWordChangeSuccess")),this._passwordDialogObj.dialog.hide())})).catch((e=>{this.Glass.showToast(s.get("updatePWUnknownError"),{type:"error"}),console.error(e),this._passwordDialogObj.dialog.hide()}))}_buildParameters(t){this.credentialParameters=[];const s=[];return e.each(t,((e,t)=>{this.credentialParameters.push(t),"hidden"!==t.type&&"display"!==t.type&&s.push(t)})),s}})),define("ca_portal/features/profileAndSettings/ProfileTab",["react","prop-types","ba-ui-carbon","./controls/SingleLineLink","./controls/SectionTitle","./controls/Separator","./CredentialDialogs","caglass/ajax/CAAuthentication","../../nls/StringResources"],((e,t,s,n,a,i,o,r,l)=>{var c,g;const p=s.Loading;return g=c=class extends e.Component{constructor(){super(...arguments),this.state={loading:!0},this.credentialDialogs=new o(this.props.Glass)}componentDidMount(){const e=this.props.Glass.getCoreSvc(".UserProfile");return Promise.all([this._isCognosExNamespaceUser(),e.getCapabilities()]).then((e=>{const t=e[0],s=e[1];this.setState({isCognosExNamespaceUser:t,capabilities:s,loading:!1})}))}_getItems(){const t=[];if(!this.state.loading){const s=this.props.Glass.getCoreSvc(".UserProfile");t.push(e.createElement(a,{name:"emailTitle",label:l.get("email")})),t.push(e.createElement(n,{name:"email",label:s.userAccount.email})),this.state.isCognosExNamespaceUser&&t.push(e.createElement(n,{name:"changePassword",label:l.get("password"),value:l.get("passwordChange"),enabled:!0,clickCallback:this._resetPassword.bind(this)})),t.push(e.createElement(i,{name:"emailSeparator"})),t.push(e.createElement(a,{name:"advancedOptions",label:l.get("advanced")})),t.push(e.createElement(n,{name:"renewCredentials",label:l.get("credentials"),value:l.get("credentialChange"),enabled:!0,clickCallback:this._renewCredentials.bind(this)})),t.push(e.createElement(n,{name:"viewCredentials",label:l.get("myCredentials"),value:l.get("manage"),enabled:!0===s.hasCredentials,clickCallback:this._openCredentialsViewSlideout.bind(this)})),t.push(e.createElement(n,{name:"apiKeys",label:l.get("myApiKeys"),value:l.get("manage"),enabled:!0,clickCallback:this._openMyApiKeys.bind(this)})),this.props.Glass.hasCapability("canUsePersonalDataSourceCredentials")&&t.push(e.createElement(n,{name:"datasourceCredentials",label:l.get("dataSourceCredentials"),value:l.get("manage"),enabled:!0,clickCallback:this._openDataSourceCredentialsViewSlideout.bind(this)})),t.push(e.createElement(n,{name:"myGroupsAndRoles",label:l.get("groupsAndRoles"),value:l.get("viewDetails"),enabled:!0,clickCallback:this._openGroupsAndRolesViewSlideout.bind(this)})),t.push(e.createElement(n,{name:"myCapabilities",label:l.get("myCapabilities"),value:l.get("viewDetails"),enabled:!0,clickCallback:this._openCapabilitesViewSlideout.bind(this)})),t.push(e.createElement(n,{name:"editLoggingConfig",label:l.get("manageLogging"),value:l.get("manage"),enabled:!0,clickCallback:this._openLoggingConfigSlideout.bind(this)})),this.props.Glass.hasCapability("canLearnFromProductUsage")&&t.push(e.createElement(n,{name:"editAILearningConfig",label:l.get("manageAILearning"),value:l.get("manage"),enabled:!0,clickCallback:this._openAILearningConfigSlideout.bind(this)}))}return t}render(){return e.createElement("div",{className:"profileTab"},this.state.loading&&e.createElement(p,{description:l.get("loadingProfile"),withOverlay:!1}),this._getItems())}_isCognosExNamespaceUser(){return this.props.Glass.getCoreSvc(".Ajax").ajax({type:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},url:"v1/users/~/identity"}).then((e=>{if(e&&e.data){const t=e.data.data;for(let e=0;e<t.length;e++)if("namespace"==t[e].type&&'CAMID("CognosEx")'==t[e].searchPath)return!0}return!1}))}_renewCredentials(){return(new r).storeCredentials(this.props.Glass).then((()=>this.props.Glass.showToast(l.get("credentialRenewed"))),(e=>{if(e&&e.displayObjects)return this.credentialDialogs.openRenewCredentialDialog(e.displayObjects)}))}_resetPassword(){return this.credentialDialogs.openResetPasswordDialog()}_openMyApiKeys(){this.props.Glass.openAppView("apiKeys")}_openAILearningConfigSlideout(){this.props.slideout.addChild({glassContext:this.props.Glass,enableTabLooping:!0,overlay:!0,label:l.get("AILearningConfigurationSlideoutAllyLabel"),global:!!this.props.slideout.global,content:{module:"ca_portal/features/mypreferences/AILearningConfigSlideout",glassContext:this.props.Glass,userProfileSvc:this.props.Glass.getCoreSvc(".UserProfile")}})}_openLoggingConfigSlideout(){this.props.slideout.addChild({glassContext:this.props.Glass,enableTabLooping:!0,overlay:!0,label:l.get("loggingConfigurationSlideoutA11yLabel"),global:!!this.props.slideout.global,content:{module:"ca_portal/features/mypreferences/LoggingConfigSlideout",glassContext:this.props.Glass}})}_openCredentialsViewSlideout(){this.props.slideout.addChild({glassContext:this.props.Glass,enableTabLooping:!0,overlay:!0,global:!!this.props.slideout.global,content:{module:"bi/content_apps/CredentialsView",glassContext:this.props.Glass}})}_openDataSourceCredentialsViewSlideout(){this.props.slideout.addChild({glassContext:this.props.Glass,enableTabLooping:!0,overlay:!0,global:!!this.props.slideout.global,content:{module:"bi/content_apps/DataSourceCredentialsView",glassContext:this.props.Glass}})}_openGroupsAndRolesViewSlideout(){this.props.slideout.addChild({glassContext:this.props.Glass,enableTabLooping:!0,overlay:!0,global:!!this.props.slideout.global,content:{module:"bi/content_apps/GroupsAndRolesView",glassContext:this.props.Glass}})}_openCapabilitesViewSlideout(){this.props.slideout.addChild({glassContext:this.props.Glass,enableTabLooping:!0,overlay:!0,global:!!this.props.slideout.global,content:{module:"bi/content_apps/CapabilitiesView",glassContext:this.props.Glass}})}},c.propTypes={Glass:t.any,slideout:t.any},g})),define("ca_portal/common/Constants",[],(function(){const e={};return Object.defineProperty(e,"CAPABILITY_NAMES",{enumerable:!0,writable:!1,value:Object.freeze({CAN_GENERATE_CSV_OUTPUT:"canGenerateCSVOutput",CAN_GENERATE_XML_OUTPUT:"canGenerateXMLOutput",CAN_GENERATE_PDF_OUTPUT:"canGeneratePDFOutput",CAN_GENERATE_XLS_OUTPUT:"canGenerateXLSOutput"}),configurable:!1}),Object.defineProperty(e,"OUTPUT_FORMATS",{enumerable:!0,writable:!1,value:Object.freeze({HTML:"HTML",CSV:"CSV",XML:"XML",PDF:"PDF",SPREADSHEETML:"spreadsheetML",XLSXDATA:"xlsxData"}),configurable:!1}),e})),define("ca_portal/features/profileAndSettings/controls/SingleLineToggle",["react","prop-types","ba-ui-carbon"],((e,t,s)=>{var n,a;const i=s.ToggleSmall;return a=n=class extends e.Component{render(){return e.createElement("div",{className:`carbonPropertyRow singleLineToggle capp_${this.props.name}`},e.createElement("div",{tabIndex:"0",className:"propsLabel",ariaLabel:this.props.label},this.props.label),e.createElement("div",{className:"toggleContainer"},e.createElement(i,{className:"toggle",id:this.props.name,defaultToggled:this.props.enabled,labelA:this.props.toggleStrings.disabled,labelB:this.props.toggleStrings.enabled,onToggle:this.props.onToggleChange})))}},n.propTypes={name:t.string.isRequired,label:t.string.isRequired,enabled:t.bool.isRequired,onToggleChange:t.function,toggleStrings:t.any},a})),define("ca_portal/features/profileAndSettings/SettingsTab",["lodash","react","prop-types","ba-ui-carbon","moment-timezone","baglass/core-client/js/core-client/utils/ClassFactory","../../common/Constants","./controls/SingleLineToggle","./controls/SingleLineLink","./controls/SectionTitle","./controls/Separator","../../nls/StringResources"],((e,t,s,n,a,i,o,r,l,c,g,p)=>{var d,u;const m={disabled:"",enabled:""},h=[{id:"RTL",label:p.get("rtl")},{id:"LTR",label:p.get("ltr")},{id:"AUTO",label:p.get("contextual")}],b=n.Dropdown,f=n.Loading,C=e=>Object.keys(e).map((t=>({id:t,label:e[t]}))),_=e=>t.createElement("div",{"data-value":e.id,title:e.label},e.label),S=e=>{switch(e){case"open.menu":return p.get("openMenu");case"close.menu":return p.get("closeMenu");default:return e}};return u=d=class extends t.Component{constructor(){super(...arguments),this.state={loading:!0}}componentDidMount(){const e=this.props.Glass.getCoreSvc(".Config"),t=this.props.Glass.getCoreSvc(".UserProfile");return Promise.all([this._isSetHomeEnabled(),this.props.Glass.getHomePageObject(),e.getProductLocales(),e.getContentLocales(),e.getTimeZones(),t.getCapabilities()]).then((s=>{const n=s[0],i=t.preferences,o=t.capabilities;let r=!1;try{const e=i.homePage,t=e&&JSON.parse(e);r=!t||"home"===t.perspective}catch(e){}let l=i.timeZoneID;const c=e[e.TIMEZONES];!c||null!==a.tz.zone(i.timeZoneID)&&c.hasOwnProperty(i.timeZoneID)||(l="America/New_York");const g=this._getShowWelcomeBanner(),p=o&&o.indexOf("canUseShowHiddenObjectsPreference")>=0;this.setState({loading:!1,showWelcomeBanner:g,isSetHomeEnabled:n,isHomePageDefault:r,accessibilityFeatures:i.accessibilityFeatures,biDirectionalFeaturesEnabled:i.biDirectionalFeaturesEnabled,showHiddenObjects:i.showHiddenObjects,canUseShowHiddenObjects:p,format:i.format,productLocale:i.productLocale,contentLocale:i.contentLocale,timeZoneID:l,baseTextDirection:i.baseTextDirection})}))}_getItems(){const e=[];if(!this.state.loading){const s=this.props.Glass.getCoreSvc(".Config");e.push(t.createElement(c,{name:"general",label:p.get("general")})),e.push(t.createElement(l,{name:"homePage",label:p.get("homePage"),value:this.state.isHomePageDefault?p.get("defaultHome"):p.get("resetHome"),enabled:!this.state.isHomePageDefault,clickCallback:this._setHomeToDefault.bind(this)})),this.state.isSetHomeEnabled&&e.push(t.createElement(l,{name:"homePage",enabled:!0,label:p.get("setHomeLabel"),value:p.get("setHomeButton"),clickCallback:this._setAsHome.bind(this)})),e.push(t.createElement(g,{name:"generalSeparator"})),e.push(t.createElement(r,{name:"welcomeBanner",label:p.get("welcomeBanner"),enabled:this.state.showWelcomeBanner,toggleStrings:m,onToggleChange:this._toggleWelcomeBanner.bind(this)})),e.push(t.createElement(r,{name:"enableAccessibilityFeatures",label:p.get("accessibilityFeatures"),enabled:this.state.accessibilityFeatures,toggleStrings:m,onToggleChange:this._changeTogglePreference.bind(this,"accessibilityFeatures")})),e.push(t.createElement(g,{name:"contentSeparator"})),e.push(t.createElement(c,{name:"contentSettings",label:p.get("contentSettings")})),this.state.canUseShowHiddenObjects&&e.push(t.createElement(r,{name:"showHiddenObjects",label:p.get("showHiddenObjects"),enabled:this.state.showHiddenObjects,toggleStrings:m,onToggleChange:this._changeTogglePreference.bind(this,"showHiddenObjects")})),e.push(t.createElement(b,{ariaLabel:p.get("format"),id:"format",items:this._getReportFormats(),itemToElement:_,label:this._getReportFormat(this.state.format),selected:this.state.format,titleText:p.get("format"),onChange:this._changeReportFormat.bind(this),translateWithId:e=>S(e)})),e.push(t.createElement(g,{name:"regionalSeparator"})),e.push(t.createElement(c,{name:"regionalOptions",label:p.get("regionalOptions")})),e.push(t.createElement(b,{ariaLabel:p.get("timeZoneID"),id:"timeZoneID",selected:this.state.timeZoneID,items:C(s[s.TIMEZONES]),itemToElement:_,label:s[s.TIMEZONES][this.state.timeZoneID],titleText:p.get("timeZoneID"),onChange:this._changeDropdownPreference.bind(this,"timeZoneID"),translateWithId:e=>S(e)})),e.push(t.createElement(b,{ariaLabel:p.get("productLocale"),id:"productLocale",selected:this.state.productLocale,items:C(s[s.PRODUCTLOCALES]),itemToElement:_,label:s[s.PRODUCTLOCALES][this.state.productLocale],titleText:p.get("productLocale"),onChange:this._changeDropdownPreference.bind(this,"productLocale"),translateWithId:e=>S(e)})),e.push(t.createElement(b,{ariaLabel:p.get("contentLocale"),id:"contentLocale",selected:this.state.contentLocale,items:C(s[s.CONTENTLOCALES]),itemToElement:_,label:s[s.CONTENTLOCALES][this.state.contentLocale],titleText:p.get("contentLocale"),onChange:this._changeDropdownPreference.bind(this,"contentLocale"),translateWithId:e=>S(e)})),e.push(t.createElement(r,{name:"bidiSupport",label:p.get("biDirectionalFeaturesEnabled"),enabled:this.state.biDirectionalFeaturesEnabled,toggleStrings:m,onToggleChange:this._changeTogglePreference.bind(this,"biDirectionalFeaturesEnabled")})),this.state.biDirectionalFeaturesEnabled&&e.push(t.createElement(b,{ariaLabel:p.get("baseTextDirection"),id:"baseTextDirection",items:h,itemToElement:_,selected:this.state.baseTextDirection,label:this.state.baseTextDirection,titleText:p.get("baseTextDirection"),onChange:this._changeDropdownPreference.bind(this,"baseTextDirection"),translateWithId:e=>S(e)})),e.push(t.createElement("div",{className:"ddVerticalSpacer",style:{width:"100%",height:"128px"}}))}return e}render(){return t.createElement("div",{className:"settingsTab"},this.state.loading&&t.createElement(f,{className:"loading",description:p.get("loadingSettings"),withOverlay:!1}),this._getItems())}_setHomeToDefault(){this.props.Glass.resetHome().then((()=>{this.setState({isHomePageDefault:!0})}))}_setAsHome(){const e=this.props.Glass;return e.currentAppView.setAsHome({glassContext:e}).then((()=>{e.perspectiveLifeCycle.openPerspectiveController.setHomeFlag(e.currentAppView,!0),e.showToast(p.get("homeSet")),this.setState({isHomePageDefault:"home"===e.getCurrentPerspective()})}),(t=>{e.showToast(p.get("homeSetError"),{type:"error"}),e.getCoreSvc(".Logger").error(t)}))}_toggleWelcomeBanner(e){const t=this._getHomeUserPrefs()||{};t.showWelcomeBanner=e,window.localStorage.setItem("homeUserPrefs",JSON.stringify(t));this.props.Glass.getCoreSvc(".Events").trigger("home:toggleWelcomeBanner",e),this.setState({showWelcomeBanner:e})}_isSetHomeEnabled(){return this.props.Glass.findCollection("com.ibm.bi.glass.common.setAsHome").then((t=>{if(t){const s=[];return t.forEach((e=>{e.perspectives&&e.perspectives.indexOf(this.props.Glass.getCurrentPerspective())>-1&&s.push(i.instantiate(e.actionController))})),Promise.all(s).then((t=>!!e.find(t,(e=>e&&e.isItemVisible({glassContext:this.props.Glass})))))}return!1}))}_getHomeUserPrefs(){const e=window.localStorage.getItem("homeUserPrefs");return e&&JSON.parse(e)}_getShowWelcomeBanner(){const e=this._getHomeUserPrefs();return!e||e.showWelcomeBanner}_changeTogglePreference(e,t){this._setUserPreference(e,t),this.setState({[e]:t})}_changeDropdownPreference(e,t){const s=t.selectedItem.id;this._setUserPreference(e,s),this.setState({[e]:s})}_changeReportFormat(e){this._getRestrictedFormats()[e.selectedItem.id]?this.props.Glass.showToast(p.get("restrictedFormatSelected"),{type:"info"}):this._changeDropdownPreference("format",e)}_getReportFormat(e){return this._getFormats()[e]}_getReportFormats(){const e=this._getFormats();return C(e)}_getFormats(){const e=this._getRestrictedFormats(),t={};return t[o.OUTPUT_FORMATS.HTML]=p.get("html"),t[o.OUTPUT_FORMATS.PDF]=e[o.OUTPUT_FORMATS.PDF]?p.get("pdfRestricted"):p.get("pdf"),t[o.OUTPUT_FORMATS.CSV]=e[o.OUTPUT_FORMATS.CSV]?p.get("csvRestricted"):p.get("csv"),t[o.OUTPUT_FORMATS.SPREADSHEETML]=e[o.OUTPUT_FORMATS.XLSXDATA]?p.get("spreadsheetMLRestricted"):p.get("spreadsheetML"),t[o.OUTPUT_FORMATS.XLSXDATA]=e[o.OUTPUT_FORMATS.XLSXDATA]?p.get("xlsxDataRestricted"):p.get("xlsxData"),t[o.OUTPUT_FORMATS.XML]=e[o.OUTPUT_FORMATS.XML]?p.get("xmlRestricted"):p.get("xml"),t}_getRestrictedFormats(){const e=this.props.Glass,t={};return t[o.OUTPUT_FORMATS.PDF]=!e.hasCapability(o.CAPABILITY_NAMES.CAN_GENERATE_PDF_OUTPUT),t[o.OUTPUT_FORMATS.CSV]=!e.hasCapability(o.CAPABILITY_NAMES.CAN_GENERATE_CSV_OUTPUT),t[o.OUTPUT_FORMATS.SPREADSHEETML]=!e.hasCapability(o.CAPABILITY_NAMES.CAN_GENERATE_XLS_OUTPUT),t[o.OUTPUT_FORMATS.XLSXDATA]=!e.hasCapability(o.CAPABILITY_NAMES.CAN_GENERATE_XLS_OUTPUT),t[o.OUTPUT_FORMATS.XML]=!e.hasCapability(o.CAPABILITY_NAMES.CAN_GENERATE_XML_OUTPUT),t}_setUserPreference(e,t){this.props.Glass.getCoreSvc(".UserProfile").savePreferences({[e]:t}).then((()=>{if("showHiddenObjects"===e){this.props.Glass.getCoreSvc(".Events").trigger("content:refresh")}}))}},d.propTypes={Glass:s.any,slideout:s.any},u})),define("ca_portal/features/profileAndSettings/ProfileAndSettings",["react","react-dom","prop-types","ba-ui-carbon","./ProfileTab","./SettingsTab","../../nls/StringResources"],((e,t,s,n,a,i,o)=>{const r=n.Tabs,l=n.Tab;class c extends e.Component{render(){return e.createElement("div",{className:"profileAndSettings"},e.createElement("div",{className:"profileTitle"},o.get("profileAndSettings")),e.createElement("div",{className:"profileSubtitle"},o.get("updateProfileAndsettings")),e.createElement(r,null,e.createElement(l,{href:"#",id:"profile",label:o.get("profile")},e.createElement(a,{Glass:this.props.Glass,slideout:this.props.slideout})),e.createElement(l,{href:"#",id:"settings",label:o.get("settings")},e.createElement(i,{Glass:this.props.Glass,slideout:this.props.slideout}))))}}c.propTypes={Glass:s.any,slideout:s.any};return class{constructor(e){this.Glass=e.glassContext,this.slideout=e.slideout,this.el=this.slideout.$el[0]}show(){}hide(){}remove(){t.unmountComponentAtNode(this.el)}setFocus(){const e=this.el.querySelector("#profile");e&&e.focus()}render(){t.render(e.createElement(c,{Glass:this.Glass,slideout:this.slideout}),this.el)}}})),define("js/ca_portal/bundle",(function(){}));