function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();define("baglass/core-client/js/core-client/utils/ValidationUtils",["../i18n/Formatter","lodash","../nls/StringResources","../ui/dialogs/MessageBox"],(function(e,t,i,n){return{_getValidationMessages:function(){return{isNumber:function(){return i.get("invalidNumber")},isEmail:function(){return i.get("invalidEmailMessage")},maxLength:function(t,n){return n=n||{},i.get("exceedMaxLength",{maxLength:e.formatNumber(t.maxLength,{locale:n.contentLocale})})}.bind(this),numericRange:function(t,n){var s;return void 0!==t.numericRange.min&&void 0!==t.numericRange.max?s=i.get("numberOutOfRange",{min:e.formatNumber(t.numericRange.min,{locale:n.contentLocale}),max:e.formatNumber(t.numericRange.max,{locale:n.contentLocale})}):void 0!==t.numericRange.min?s=i.get("numberTooSmall",{min:e.formatNumber(t.numericRange.min,{locale:n.contentLocale})}):void 0!==t.numericRange.max&&(s=i.get("numberTooBig",{max:e.formatNumber(t.numericRange.max,{locale:n.contentLocale})})),s}}},validateInput:function(e,t,s,o){var a=function(e){return e.stopPropagation(),n.inherited("ok",this,arguments),s&&s(),!1};for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var r="_validate"+l.charAt(0).toUpperCase()+l.slice(1);if(this[r]&&!this[r](e,t)){var d=new n("warning",i.get("invalidInput"),this.GET_VALIDATION_MESSAGES[l](t,o));return d.ok=a,d.open(),!1}}return!0}}})),define("baglass/core-client/js/core-client/utils/GlassContextHelper",[],(function(){"use strict";var e=function(){};return e.prototype.showAjaxServiceErrorMessage=function(e,t){var i="";if(t){var n=t.responseJSON;if(n){if(n.messages)i=t.responseJSON.messages.join("\n");else if(n.cause)try{var s=JSON.parse(n.cause);s.messages&&(i=s.messages.join("\n"))}catch(e){i=n.cause}}else i=t.responseText}e.appController.showErrorMessage(i,"Error")},e.prototype.displayToast=function(e,t,i){e.appController.showToast(t,i)},e.prototype.getUserPreference=function(e,t){return e.getCoreSvc(".UserProfile").preferences[t]},e.prototype.getContentLocales=function(e){return e.getCoreSvc(".Config").getContentLocales()},e.prototype.getLocaleTime=function(e){var t=e?e.getCoreSvc(".UserProfile").preferences:{};return{timeZone:t.timeZoneID||"America/New_York",contentLocale:t.contentLocale||"en"}},new e})),define("baglass/core-client/js/core-client/ui/properties/BaseProperty",["../core/View","jquery","lodash","../../utils/BidiUtil","../../utils/ContentFormatter","../../utils/ValidationUtils","../KeyCodes","../../nls/StringResources","../../utils/GlassContextHelper","../dialogs/MessageBox"],(function(e,t,i,n,s,o,a,l,r,d){"use strict";var c=e.extend({init:function(e){e.editable&&(i.isUndefined(this.events)&&(this.events={}),this.events["focus .editable"+e.id]="_onFocus",this.events["keydown .editable"+e.id]="_onKeyDown",this.events["clicktap .toggleEdit"+e.id]="_onToggleEdit",this.events["touchend .toggleEdit"+e.id]="_handleEditClick"),c.inherited("init",this,arguments),i.extend(this,e),this._modifiedProperties={},this._lastChangedValue=this.value,this._isValidValue=!0,this._updatedOnClose=!1},render:function(){return Promise.resolve(this.doRender()).then(function(){this.processIndent(),this.processEllipses(),this.processStaticValidation(),this.processHidden(),this._updatedOnClose=!1}.bind(this))},doRender:function(){},onResize:function(){},processIndent:function(){if(this.indent){var e=this.getPropertyNode();e&&e.css("margin-left",10*this.indent+"px")}},processEllipses:function(){if(this.ellipses&&this.getPropertyNode().is(":visible")){var e=this.getPropertyNode().find(".ellipses");t.each(e,(function(e,t){s.middleShortenString(t),s.resizeInput(t)}))}},processStaticValidation:function(e){if(this.staticValidationCallback&&(e||(e=this.getPropertyNode().closest(".propertyRow")),0!==e.closest(".propertyUIControl.staticValidationMode").length)){var i=l.get("validationControl"),n=t("<div>").addClass("validationIcon").prependTo(e).attr({tabindex:0,title:i});t('<svg><use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-failed"></use></svg>').appendTo(n),"function"==typeof this.staticValidationCallback&&n.on("primaryaction",function(e){this.staticValidationCallback(e),e.target=this.$el,this.$el.trigger(e),e.stopPropagation()}.bind(this))}},processHidden:function(){this.hidden&&this.hide()},getPropertyNode:function(){return this._propertyNode||(this._propertyNode=this.$el.find(".property_"+this.id)),0===this._propertyNode.length&&(this._propertyNode=this.$el),this._propertyNode},setFocus:function(){var e=this.getPropertyNode().find("[tabindex=0]")[0];e&&e.focus()},_hasValueChanged:function(e){return void 0===this._lastChangedValue||this._lastChangedValue!==e},_onChange:function(e,t,i){if(!this._validate(t))return!1;if(this.value=t,this._hasValueChanged(t)){if(this._modifiedProperties[e]=t,"function"==typeof this.onChange){this._lastChangedValue=this.value;var n=i?{focusSelector:i}:void 0;this.onChange(e,t,n)}}else this._modifiedProperties={};return!0},hasValidationError:function(){return!this._isValidValue},_validate:function(e){var t=this._isValidValue;if(this.validator){var n=function(){this.setFocus()}.bind(this),s=r.getLocaleTime(this.glassContext);this._isValidValue=t=o.validateInput(e,this.validator,n,s)}else if(this.customValidatorCallback){var a=this.customValidatorCallback(e);if(this._isValidValue=t=!a||!1!==a.isValid,a&&!1===a.isValid)if(i.isFunction(a.customHandler))a.customHandler();else if(!0===this.showInlineError&&this.showError)this.showError(a.message);else{new d("warning",l.get("invalidInput"),a.message).open()}else this.showInlineError&&this.hideError&&this.hideError()}return t},getModifiedProperties:function(){return this._modifiedProperties},_onBlur:function(){var e=this.getHTMLControl();e.removeClass("focus");var t,i=this.preserveLineBreak?e.val().trim():e.val();t=this.isString||isNaN(i)||""===i?i:this.parseFloat?parseFloat(i):this.decimalPlaces?parseFloat(i).toFixed(this.decimalPlaces):parseInt(i,10);var n=e.attr("class"),s=n?"."+n.replace(/\s/g,"."):"",o=e.attr("id"),a=(o?"#"+o:"")+s;this._onChange(this.name,t,a)&&(e.attr("value")&&e.attr("value",t),this.processEllipses()),this.$el.find(".editIcon"+this.id).css("display",""),this.getHTMLControl().off("blur.BaseProperty")},_onFocus:function(){if(this.editable){this.getHTMLControl().addClass("focus"),this.$el.find(".editIcon"+this.id).css("display","none");var e=this.getHTMLControl();this.isSTT||n.initElementForBidi(e[0]),this._placeCaretAtEnd(e[0]),setTimeout(function(){this.getHTMLControl().on("blur.BaseProperty",this._onBlur.bind(this))}.bind(this),1)}},_onToggleEdit:function(){this.getHTMLControl().is(":focus")||this.getHTMLControl().focus()},_placeCaretAtEnd:function(e){if(t(e).is("DIV")){e.focus();var i=document.createRange();i.selectNodeContents(e),i.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(i)}else if(t(e).is("TEXTAREA"))if(e.createTextRange){var o=e.createTextRange();o.move("character",e.value.length),o.select()}else e.focus(),e.setSelectionRange(e.value.length,e.value.length);else t(e).is("INPUT")&&(this.ellipses&&t(e).css("width","99%"),this.highlightTextOnFocus||!this._isValidValue?setTimeout((function(){t(e).select(),e.setSelectionRange&&e.setSelectionRange(0,e.value.length)}),1):(t(e).val(""),this.isSTT&&""!==n.userPreferredTextDir?t(e).val(n.enforceTextDirectionForSTT(this.value)):t(e).val(this.value)))},getHTMLControl:function(){return this._htmlControl||(this._htmlControl=this.getPropertyNode().find("input")),this._htmlControl},enable:function(){this.readOnly||(this.getPropertyNode().removeClass("disabled"),this.getHTMLControl().removeAttr("disabled"),this.getHTMLControl().attr("aria-disabled","false"))},disable:function(){this.getPropertyNode().addClass("disabled"),this.getHTMLControl().attr("disabled","disabled"),this.getHTMLControl().attr("aria-disabled","true")},hide:function(){var e=this.getPropertyNode();e.addClass("hidden"),e.attr("aria-hidden","true")},show:function(){var e=this.getPropertyNode();e.removeClass("hidden"),e.attr("aria-hidden","false")},_onKeyDown:function(e){if(13===e.keyCode){if(this.handleReturnKey&&(this.getHTMLControl().blur(),this.enterKeyCallback&&this.enterKeyCallback()),"input"===e.target.nodeName.toLowerCase())return e.stopPropagation(),!1}else{if(27===e.keyCode)return this._onEscFromInput(e);e.keyCode===a.s&&e.ctrlKey&&this.getHTMLControl().blur()}},_onEscFromInput:function(e){return this.getHTMLControl().val()===String(this.value)||(this.getHTMLControl().val(this.value),e.stopPropagation(),!1)},onClose:function(){return(this.getHTMLControl().is(":focus")||this.getHTMLControl().hasClass("focus"))&&this.editable&&!this._updatedOnClose&&(this.getHTMLControl().off("blur.BaseProperty"),this._onBlur(),this._updatedOnClose=!0),Promise.resolve()},remove:function(){this.getPropertyNode().remove()}});return c})),function(){var e,t,i=function(e){var t=' <div class="propertyRow banner flex property_'+e.id+'">\n \t';if(e.backButton&&(t+='\n\t\t<div class="headerBack">\n\t\t\t<div class="arrow blueArrow leftArrow leftAlignedArrow"></div>\n\t\t\t<div class="back blueText" tabindex="0" role="button">'+e.strings.back+"</div>\n\t\t</div>\n\t"),t+="\n\t",e.iconFontClass&&(t+='\n\t\t<div class="propertiesBannerIcon '+e.iconFontClass+'"></div>\n\t'),t+="\n\t",e.svgIcon&&(t+='\n\t\t<div class="propertiesBannerIcon" role="img" title="'+e.svgToolTip+'">\n\t\t\t<svg class="svgIcon" role="presentation" >\n\t\t\t\t<text>'+e.svgToolTip+'</text>\n\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+e.svgIcon+'"></use>\n\t\t\t</svg>\n\t\t</div>\n\t'),t+="\n\t",e.iconImgUrl&&(t+='\n\t\t<div class="propertiesBannerIcon">\n\t\t\t<img src="'+e.iconImgUrl+'">\n\t\t</div>\n\t'),t+="\n\t",!0===e.editable?(t+='\n\n\t\t<input type="text" class="ellipses blueText propertyValue editable'+e.id+" propertiesBannerLabel ",e.name&&(t+="v_"+e.name),t+='" value="'+_.escape(e.label)+'"',e.direction&&(t+=' dir="'+e.direction+'"'),e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=' tabindex="0"></input>\n\n\t\t<div class="propertyNameEdit toggleEdit'+e.id+'" role="img" title="'+e.strings.edit+'">\n\t\t\t<svg class="svgIcon editIcon editIcon'+e.id+'" role="presentation">\n\t\t\t\t<text>'+e.strings.edit+'</text>\n\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-edit"></use>\n\t\t\t</svg>\n\t\t</div>\n\t'):(t+='\n\t\t<div class="propertiesBannerLabel ellipses ',!0===e.centerLabel&&(t+="centerBannerLabel"),t+=" ",e.name&&(t+="v_"+e.name),t+='"',e.direction&&(t+=' dir="'+e.direction+'"'),e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=">"+_.escape(e.label)+"</div>\n\t"),t+="\n\n\t",e.clickables){t+='\n\t<div class="bannerClickables flex">\n\t\t';var i=e.clickables;if(i)for(var n,s=-1,o=i.length-1;s<o;)t+="\n\t\t\t","text"===(n=i[s+=1]).type&&(t+='\n\t\t\t\t<div tabindex="0" class="',n.name&&(t+=""+n.name+e.id),e.disabled||(t+=" clickable"),t+='" role="link">'+_.escape(n.value)+"</div>\n\t\t\t"),t+="\n\t\t\t","icon"===n.type&&n.svgIcon&&(t+='\n\t\t\t\t<div class="',n.name&&(t+=""+n.name+e.id),e.disabled||(t+=" clickable"),t+='"title="'+_.escape(n.iconTooltip)+'" ',n.clickCallback&&(t+=' role="button" tabindex="0" '),t+='>\n\t\t\t\t\t<svg class="svgIcon" role="presentation">\n\t\t\t\t\t\t<use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+n.svgIcon+'"></use>\n\t\t\t\t\t\t<text>'+_.escape(n.iconTooltip)+"</text>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t"),t+="\n\t\t";t+="\n\t"}return t+="\n\t</div>\n\t",e.hintText&&(t+="\n\t\t<div class='bannerHintText'>\n\t\t\t"+e.hintText+"\n\t\t</div>\n\t"),t+="\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/Banner",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.Banner=i)}(),define("baglass/core-client/js/core-client/ui/properties/Banner",["./BaseProperty","../../utils/BidiUtil","./templates/Banner","../../nls/StringResources","lodash"],(function(e,t,i,n,s){"use strict";var o=e.extend({ellipses:!0,handleReturnKey:!1,init:function(e){this.events={},this.events["primaryaction .headerBack"]="_goBack",e.clickables&&e.clickables.forEach(function(t){t.name&&t.clickCallback&&(this.events["primaryaction ."+t.name+e.id]=t.clickCallback)}.bind(this)),o.inherited("init",this,arguments),s.extend(this,e),this.ariaLabel||(this.ariaLabel=n.get("title"))},doRender:function(){var e={iconFontClass:this.iconClass,svgIcon:this.svgIcon,svgToolTip:this.svgToolTip,iconImgUrl:this.iconImgUrl,label:this.value,direction:t.resolveBaseTextDir(this.value||""),centerLabel:this.centerLabel,id:this.id,editable:this.editable&&!this.readOnly,hintText:this.hintText,backButton:this.backButton,strings:{back:n.get("back"),edit:n.get("edit")},name:this.name,clickables:this.clickables,ariaLabel:this.ariaLabel},s=i(e);this.$el.append(s)},_goBack:function(){this.closeCallback&&this.closeCallback()}});return o})),define("baglass/core-client/js/core-client/ui/properties/Button",["./BaseProperty","lodash","../Button"],(function(e,t,i){"use strict";var n=e.extend({ellipses:!0,init:function(e){n.inherited("init",this,arguments),t.extend(this,e)},doRender:function(){var e=this.primary?"propertyButton primary":"propertyButton secondary",t=i;this._button=new t({buttonSpec:{label:this.label,onSelect:this.onSelect,class:e}}),this._button.render(),void 0!==this.id&&this._button.$el.addClass(this.id),this.$el.append(this._button.$el)},disable:function(){this._button.$el.addClass("disabled")},enable:function(){this._button.$el.removeClass("disabled")}});return n})),function(){var e,t,i=function(e){var t,i,s=void 0!==n?n:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(i,(function(e){return t[e]||e})):""}),o='<div class="';return e.nestedUIControl||(o+="propertyRow"),o+=" property_"+e.id,e.readOnly&&(o+=" disabled"),o+=' clickable" >\n\t',e.controlOnLeft?e.controlOnLeft&&(o+="\n\t\t",e.label&&(o+='\n\t\t\t<span class="checkbox_icon_'+e.id+' checkboxIcon"></span>\n\t\t\t<div class="propertyName controlOnLeft l_'+e.name+'" id="label'+e.id+'">'+s(e.label)+"</div>\n\t\t"),o+="\n\t"):(o+="\n\t\t",e.label&&(o+='\n\t\t\t<span class="checkbox_icon_'+e.id+' icon_controlOnRight checkboxIcon"></span>\n\t\t\t<div class="propertyName l_'+e.name+'" id="label'+e.id+'">'+s(e.label)+"</div>\n\t\t"),o+="\n\t"),o+='\n\t<div class="checkbox',!0===e.controlOnLeft?o+=" controlOnLeft":o+=" rightAlign",o+=" "+e.checked+'" ',e.readOnly||(o+='tabindex="0"'),o+=' role="checkbox" aria-checked='+e.ariaChecked+' aria-disabled="',e.readOnly?o+="true":o+="false",o+='"',e.label&&(o+=' aria-labelledby="label'+e.id+'"'),e.ariaLabel&&(o+=' aria-label="'+e.ariaLabel+'"'),o+='>\n\t\t<div class="checkmark"></div>\n\t</div>\n</div>\n'},n=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(i){return i?i.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/CheckBox",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.CheckBox=i)}(),define("baglass/core-client/js/core-client/ui/properties/CheckBox",["./BaseProperty","./templates/CheckBox","../../utils/Utils","jquery","lodash"],(function(e,t,i,n,s){"use strict";var o=e.extend({init:function(e){this.events={},this.events["clicktap .property_"+e.id]="_handleClick",this.events["keydown .property_"+e.id]="_handleKeyDown",this.checked=!1,this.nestedUIControl=!1,o.inherited("init",this,arguments),s.extend(this,e)},doRender:function(){var e=t({label:this.label,checked:"mixed"===this.checked?"indeterminate":!0===this.checked?"checked":"",ariaChecked:this.checked,id:this.id,name:this.name,controlOnLeft:this.controlOnLeft||this.nestedUIControl,readOnly:this.readOnly||this.disabled,nestedUIControl:this.nestedUIControl,ariaLabel:this.ariaLabel});this.$el.append(e),this.svgIcon&&this._setIcon()},_handleClick:function(e){return this.toggleCheckBox(),e.stopPropagation(),!1},_hasValueChanged:function(e){return e!==this.checked&&(this.checked=e,!0)},_setIcon:function(){i.setIcon(this.getPropertyNode().find(".checkbox_icon_"+this.id),"common-"+this.svgIcon)},isChecked:function(){return!0===this.checked},check:function(e){this._toggledCheckbox(!0,e)},uncheck:function(e){this._toggledCheckbox(!1,e)},toggleCheckBox:function(e){this._toggledCheckbox(!this.checked,e)},indeterminateState:function(e){this._toggledCheckbox("mixed",e)},_toggledCheckbox:function(e,t){var i=this.getPropertyNode().find(".checkbox");"mixed"===e?(i.removeClass("checked"),i.addClass("indeterminate"),i.attr("aria-checked","mixed")):!0===e?(i.removeClass("indeterminate"),i.addClass("checked"),i.attr("aria-checked","true")):(i.removeClass("checked indeterminate"),i.attr("aria-checked","false"));var n=this.onChange;!1===t&&(this.onChange=null),this._onChange(this.name,e),!1===t&&(this.onChange=n)},getHTMLControl:function(){return this.getPropertyNode().find(".checkbox")},_handleKeyDown:function(e){32!==e.keyCode&&13!==e.keyCode||(this.toggleCheckBox(),e.preventDefault())}});return o})),function(){var e,t,i=function(e){var t='<div class="';e.nestedUIControl||(t+="propertyRow "),t+="property_"+e.id,e.readOnly&&(t+=" disabled"),t+=" ",e.colorPicker&&(t+=" colorPickerStyle"),t+='" ',e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+='>\n\t<div class="collapsibleSectionToggle'+e.id+" collapsiblePicker ",e.name&&(t+="l_"+e.name),e.readOnly&&(t+=" disabled"),t+='">\n\t\t',e.label&&(t+='\n\t\t\t<div id="label_'+e.id+'" class="singleLine">\n\t\t\t\t'+e.label,e.isRequired&&(t+='<span class="collapsiblePickerRequired">*</span>'),t+="\n\t\t\t</div>\n\t\t"),t+='\n\t\t<div class="selectedItemBox selectedItemBox'+e.contentSize+" toggleSection"+e.id,"Class"===e.selectedValueType&&(t+=" "+e.value),t+='"\n\t\t\tdata-value="'+e.value+'" role="link" tabindex="0"\n\t\t\taria-controls="region_'+e.id+'" aria-haspopup="true" aria-labelledby="label_'+e.id+'"\n\t\t\t',"ColorCode"===e.selectedValueType?t+='style="background:'+e.value+';"\n\t\t\t':"Class"===e.selectedValueType?t+='style="background:'+e.hexValue+';"\n\t\t\t':t+="\n\t\t\t",t+=">\n\t\t\t\t",e.value&&"transparent"===e.value.toLowerCase()&&(t+="<div class='transparentIndicator'></div>"),t+="\n\t\t</div>\n\t\t",e.showHexValue&&(t+='\n\t\t<div class="selectedColorHex">'+e.hexValue+"</div>\n\t\t"),t+="\n\t\t",e.displayLabel&&(t+='\n\t\t<div class="selectedLabel">'+e.selectedLabel+"</div>\n\t\t"),t+='\n\t</div>\n\n\t<div class="collapsibleSection collapsiblePicker property_'+e.id,e.readOnly&&(t+=" disabled"),t+='" id="region_'+e.id+'"\n\t\taria-hidden="true" aria-live="off" role="region"\n\t\t',e.ariaLabel?t+='aria-label="'+e.ariaLabel+'"':t+='aria-labelledby="label_'+e.id+'"',t+=">\n\n\t\t";var i=e.items;if(i)for(var n,s=-1,o=i.length-1;s<o;)n=i[s+=1],t+='\n\t\t\t<div class="collapsiblePickerBox collapsiblePickerBox'+e.contentSize+" "+n.name,n.value===e.value&&(t+=" selected"),"Class"===n.type&&(t+=" "+n.value),t+='"\n\t\t\t\tdata-value="'+n.value+'" data-name="'+n.name+'" title="'+n.label+'" role="button"\n\t\t\t\ttabindex="',e.readOnly?t+="-1":t+="0",t+='"\n\t\t\t\t',n.hidden?t+='\n\t\t\t\t\tstyle="display:none;"\n\t\t\t\t':(t+="\n\t\t\t\t\t","ColorCode"===n.type&&(t+='style="background:'+n.value+';"'),t+="\n\t\t\t\t"),t+="\n\t\t\t\t",n.value===e.value?t+=' aria-pressed="true"':t+=' aria-pressed="false"',t+='\n\t\t\t\taria-disabled="',e.readOnly?t+="true":t+="false",t+='">\n\t\t\t\t\t',n.value&&"transparent"===n.value.toLowerCase()&&(t+="<div class='transparentIndicator'></div>"),t+="\n\t\t\t</div>\n\t\t";return t+="\n\t\t",e.addButton&&(t+='\n\t\t\t<div class="addCustomColor"></div>\n\t\t'),t+="\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/CollapsiblePicker",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.CollapsiblePicker=i)}(),define("baglass/core-client/js/core-client/ui/properties/PropertyUIControl",["../core/View","lodash","jquery","../../utils/ClassFactory","../../utils/Deferred","../../utils/Utils"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({_uiPropertiesComponentPath:"../ui/properties/",init:function(e){a.inherited("init",this,arguments),this.readOnly=!1,this.primaryUIControl=!0,this.animatedSpinner=!1,this.nestedUIControls=!1,this.loadlimit=600,this._aProperties=[],t.extend(this,e),this._oPropertyMap={},this._aNestedUIControls=[],this._uniqueNameSpace="resize.propertyuicontrol"+this.viewId,i(o.getCurrentWindow()).on(this._uniqueNameSpace,function(){this.onResize()}.bind(this))},render:function(){return this.$el.parent().hasClass("tab-content")&&(this.primaryUIControl=!1),this.$el.addClass("propertyUIControl"),this.ariaLabel&&(this.$el.attr("aria-label",this.ariaLabel),this.$el.attr("role","region")),this.primaryUIControl&&this.$el.addClass("flexHeight"),this.$container=i("<div></div>",{class:"containerUIControl"}),this.primaryUIControl&&(this.$container.addClass("propertiesUIControlPageView"),this.$bannerContainer=i("<div></div>",{class:"propertyUIControlBanner"}),this.$el.prepend(this.$bannerContainer)),!0===this.animatedSpinner&&(this._spinnerEl=o.getSpinner(),i(this._spinnerEl).addClass("animatedSpinner"),this.$el.addClass("spinnerWrapper"),this.$container.html(i(this._spinnerEl)[0])),this.staticValidationMode&&this.$el.addClass("staticValidationMode"),this.$el.append(this.$container),this.items?(this.$itemContainer=i("<span></span>",{class:"hidden itemContainerUIControl"}),this.$container.append(this.$itemContainer),this.items.length>this.loadlimit?this._renderPages(this.items,this.loadlimit):this.renderItems(this.items).then(function(e){return this._postRender(e),e.results}.bind(this))):Promise.resolve(this)},_postRender:function(e){this.$itemContainer.removeClass("hidden"),e.properties.forEach((function(e){t.isFunction(e.processEllipses)&&e.processEllipses()})),this._spinnerEl&&(i(this._spinnerEl).remove(),this.$el.removeClass("spinnerWrapper"),delete this._spinnerEl)},renderItems:function(e){var i=[];return e.forEach(function(e){var s=e.type?this._uiPropertiesComponentPath+e.type:e.module,o=n.loadModule(s).then(function(i){i=e.moduleClass?i[e.moduleClass]:i,e.el||("Banner"===e.type&&this.$bannerContainer?e.el=this.$bannerContainer[0]:"Footer"===e.type?e.el=this.$el:e.el=this.$itemContainer[0]),e.id=e.id?e.id.replace(/\./g,"_"):t.uniqueId(),e.glassContext=this.glassContext,e.closeCallback=e.doClose||this.onClose.bind(this),e.readOnly=void 0!==e.readOnly?e.readOnly:this.readOnly,e.nestedUIControl=this.nestedUIControls,this.onChange&&!e.onChange&&(e.onChange=this.onChange);var n=new i(e);return this._aProperties.push(n),e.name&&(this._oPropertyMap[e.name]=n),"CollapsibleSection"!==e.type&&"SingleLineLinks"!==e.type||this._aNestedUIControls.push(n),n}.bind(this));i.push(o)}.bind(this)),Promise.all(i).then(function(e){var t=[];return e.forEach((function(e){var i=e.render();i&&t.push(i)})),Promise.all(t).then((function(t){return{results:t,properties:e}}))}.bind(this))},_renderPages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.loadlimit;for(this._pagesToRender=[];e.length>0;)this._pagesToRender.push(e.splice(0,t));return this.renderItems(this._pagesToRender.shift()).then(function(e){return this._postRender(e),this._scrollNode=i.find(".containerUIControl"),i(this._scrollNode).on("scroll",this._onScroll.bind(this)),e.results}.bind(this))},_onScroll:function(e){var t=i(e.target);if(t.scrollTop()+t.innerHeight()>=t[0].scrollHeight-20&&this._pagesToRender.length>0)return this.renderItems(this._pagesToRender.shift()).bind(this)},hasValidationError:function(){for(var e=0;e<this._aProperties.length;e+=1){var t=this._aProperties[e];if(t.hasValidationError&&t.hasValidationError())return!0}return!1},hasModifiedProperties:function(){var e=this.getModifiedProperties();if(!i.isEmptyObject(e))return!0},getModifiedProperties:function(){var e={};return this._aProperties.forEach((function(t){t.getModifiedProperties&&i.extend(e,t.getModifiedProperties())})),e},onClose:function(){var e=new s,t=[];return this._aProperties.forEach((function(e){e.onClose&&t.push(e.onClose())})),Promise.all(t).then(function(){this.closeCallback&&this.closeCallback(this.getModifiedProperties()),e.resolve()}.bind(this)),e.promise},remove:function(){this._aProperties.forEach((function(e){e.remove&&e.remove()})),i(o.getCurrentWindow()).off(this._uniqueNameSpace),this.$container&&this.$container.remove()},focus:function(){this.$el.attr("tabindex",0),this.$el.focus(),this.ariaLabel||console.log("Setting focus to property UI control container without an aria label.")},setFocus:function(e){if(e){var t=this.getProperty(e);if(!t)return;t.setFocus()}else this.setFocusCallback&&this.setFocusCallback(this)},getProperty:function(e){var t=this._oPropertyMap[e],i=0;if(!t)for(i=0;i<this._aNestedUIControls.length&&!(t=this._aNestedUIControls[i].getProperty(e));i+=1);if(!t&&this._aProperties)for(i=0;i<this._aProperties.length;i++){var n=this._aProperties[i];if("TabControl"===n.type&&n._tabs)for(var s=0;s<n._tabs.length;s++){var o=n._tabs[s];if(o.tabContent&&o.tabContent.getPropertyUIControl){var a=o.tabContent.getPropertyUIControl().getProperty(e);if(a)return a}}}return t||null},getProperties:function(){return this._aProperties},removeProperty:function(e){var t,i=this._oPropertyMap[e];return i&&(i.remove&&i.remove(),delete this._oPropertyMap[e],(t=this._aNestedUIControls.indexOf(i))>=0&&this._aNestedUIControls.splice(t,1),(t=this._aProperties.indexOf(i))>=0&&this._aProperties.splice(t,1)),!!i},onResize:function(e,t){this._aProperties&&this._aProperties.forEach((function(e){e.onResize&&e.onResize()}))}});return a})),define("baglass/core-client/js/core-client/ui/properties/PropertyContainerBaseClass",["./BaseProperty","jquery","lodash","./PropertyUIControl"],(function(e,t,i,n){"use strict";var s=e.extend({init:function(e){s.inherited("init",this,arguments),i.extend(this,e)},initUIControl:function(e){var i={glassContext:this.glassContext,el:e,readOnly:this.readOnly,items:this.items,onChange:this.onChange,primaryUIControl:!1,nestedUIControls:t(e).hasClass("propertyRow")};this.items&&(i.items=this.items),this._oPropertyUIControl=new n(i)},getModifiedProperties:function(){return this._oPropertyUIControl?this._oPropertyUIControl.getModifiedProperties():{}},hasValidationError:function(){return!!this._oPropertyUIControl&&this._oPropertyUIControl.hasValidationError()},onClose:function(){if(this._oPropertyUIControl)return this._oPropertyUIControl.onClose()},getProperty:function(e){return this._oPropertyUIControl?this._oPropertyUIControl.getProperty(e):null}});return s})),function(){var e,t,i=function(e){var t='<div class="propertyRow flex property_'+e.id+" ";e.readOnly&&(t+=" disabled"),t+='"',e.clickCallback&&(t+=' role="button"',e.readOnly||(t+=' tabindex="0"')),t+='>\n\t<div class="flex left singleLineLinks" style="flex:1 1 auto;">\n\t';var i=e.left;if(i)for(var n=-1,s=i.length-1;n<s;)t+="\n\t\t","text"===(a=i[n+=1]).type?(t+='\n\t\t\t<div class="singleLine ellipses l_'+e.name+n,a.name&&(t+=" "+a.name),a.class&&(t+=" "+a.class),a.clickCallback&&(t+=" clickable"+e.id+" clickCallback_left_"+n+"_"+e.id,e.disabled||(t+=" clickable")),a.hidden&&(t+=" hidden"),t+='"',a.clickCallback&&(t+=' role="link" ',e.readOnly||(t+='tabindex="0"')),a.name&&(t+=' id="control_'+a.name+"_"+e.id+'"'),a.ariaLabelledby&&(t+=' aria-labelledby="'+a.ariaLabelledby+'"'),t+=">",a.labelFor?t+='<label for="control_'+a.labelFor+"_"+e.id+'">'+_.escape(a.value)+"</label>":t+=""+_.escape(a.value),t+="</div>\n\t\t"):(t+="\n\t\t\t","icon"===a.type?(t+="\n\t\t\t\t",a.svgIcon&&(t+='\n\t\t\t\t\t<div class="l_'+e.name+n,a.name&&(t+=" "+a.name),a.class&&(t+=" "+a.class),a.clickCallback&&(t+=" clickable"+e.id+" clickCallback_left_"+n+"_"+e.id,e.disabled||(t+=" clickable")),t+='" title="'+_.escape(a.iconTooltip)+'"',a.clickCallback&&(t+=' role="button" ',e.readOnly||(t+='tabindex="0"')),a.name&&(t+=' id="control_'+a.name+"_"+e.id+'"'),a.ariaLabelledby&&(t+=' aria-labelledby="'+a.ariaLabelledby+'"'),a.role?t+=' role="'+a.role+'" ':t+=' role="img"',t+='>\n\t\t\t\t\t\t<svg class="',a.clickCallback&&(t+="clickableLink "),t+='svgIcon" role="presentation">\n\t\t\t\t\t\t\t<use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+a.svgIcon+'"></use>\n\t\t\t\t\t\t\t<text>'+_.escape(a.iconTooltip)+"</text>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t"),t+="\n\t\t\t"):(t+='\n\t\t\t\t<div class="innerControlContainer_'+a.type+e.id+n+' flex" ',a.styles&&(t+='style="'+a.styles+'"'),t+="></div>\n\t\t\t"),t+="\n\t\t"),t+="\n\t";t+='\n\t</div>\n\t<div class="flex right singleLineLinks singleLineLinksFocusBounds">\n\t';var o=e.right;if(o)for(var a,l=-1,r=o.length-1;l<r;)t+="\n\t\t","text"===(a=o[l+=1]).type?(t+='\n\t\t\t<div class="r_'+e.name+n,a.name&&(t+=" "+a.name),a.class&&(t+=" "+a.class),a.clickCallback&&(t+=" clickable"+e.id+" clickCallback_right_"+l+"_"+e.id,e.disabled||(t+=" clickable")),a.hidden&&(t+=" hidden"),t+='"',a.clickCallback&&(t+=' role="link" ',e.readOnly||(t+='tabindex="0"')),a.name&&(t+=' id="control_'+a.name+"_"+e.id+'"'),a.ariaLabelledby&&(t+=' aria-labelledby="'+a.ariaLabelledby+'"'),t+=">",a.labelFor?t+='<label labelFor="control_'+a.labelFor+"_"+e.id+'">'+_.escape(a.value)+"</label>":t+=""+_.escape(a.value),t+="</div>\n\t\t\t",a.showRightArrow&&(t+='\n\t\t\t<svg class="',a.clickCallback&&(t+="clickableLink "),t+='svgIcon chevron">\n\t\t\t\t<use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-chevron_right"></use>\n\t\t\t</svg>\n\t\t\t'),t+="\n\t\t\t"):(t+="\n\t\t\t","icon"===a.type?(t+="\n\t\t\t\t",a.svgIcon&&(t+='\n\t\t\t\t\t<div class="r_'+e.name+n,a.name&&(t+=" "+a.name),a.class&&(t+=" "+a.class),a.clickCallback&&(t+=" clickable"+e.id+" clickCallback_right_"+l+"_"+e.id,e.disabled||(t+=" clickable")),t+='" title="'+_.escape(a.iconTooltip)+'"',a.clickCallback&&(t+=' role="button" ',e.readOnly||(t+='tabindex="0"')),a.name&&(t+=' id="control_'+a.name+"_"+e.id+'"'),a.ariaLabelledby&&(t+=' aria-labelledby="'+a.ariaLabelledby+'"'),a.role?t+=' role="'+a.role+'" ':t+=' role="img"',t+='>\n\t\t\t\t\t\t<svg class="',a.clickCallback&&(t+="clickableLink "),t+='svgIcon" role="presentation">\n\t\t\t\t\t\t\t<use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+a.svgIcon+'"></use>\n\t\t\t\t\t\t\t<text class="hidden">'+_.escape(a.iconTooltip)+"</text>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t",a.showRightArrow&&(t+='\n\t\t\t\t\t\t\t<svg class="',a.clickCallback&&(t+="clickableLink "),t+='svgIcon chevron">\n\t\t\t\t\t\t\t\t<use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-chevron_right"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t'),t+="\n\t\t\t\t\t</div>\n\t\t\t\t"),t+="\n\t\t\t"):(t+='\n\t\t\t\t<div class="innerControlContainer_'+a.type+e.id+l+' flex" ',a.styles&&(t+='style="'+a.styles+'"'),t+="></div>\n\t\t\t"),t+="\n\t\t"),t+="\n\t";return t+="\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/SingleLineLinks",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.SingleLineLinks=i)}(),define("baglass/core-client/js/core-client/ui/properties/SingleLineLinks",["./PropertyContainerBaseClass","./templates/SingleLineLinks","jquery","lodash"],(function(e,t,i,n){"use strict";var s=e.extend({ellipses:!0,init:function(e){this.events={},this.subControls=[],e.items.forEach(function(t){t.items.forEach(function(i,n){if(i.clickCallback){var s="clickCallback_"+t.align+"_"+n+"_"+e.id;this.events["primaryaction ."+s]=function(e){this._handleClick(e,i.clickCallback)}.bind(this)}}.bind(this))}.bind(this)),e.clickCallback&&(this.events["primaryaction .property_"+e.id]=function(t){this._handleClick(t,e.clickCallback)}.bind(this)),s.inherited("init",this,arguments),n.extend(this,e)},doRender:function(){for(var e=[],i=[],n=0;n<this.items.length;n+=1)"left"===this.items[n].align?e=this.items[n].items:"right"===this.items[n].align&&(i=this.items[n].items);e.forEach(this._updateAriaLabelledBy.bind(this)),i.forEach(this._updateAriaLabelledBy.bind(this));var s=t({disabled:this.disabled,id:this.id,left:e,right:i,clickCallback:this.clickCallback,readOnly:this.readOnly,name:this.name,styles:this.styles,showRightArrow:this.showRightArrow,role:this.role,iconTooltip:this.iconTooltip,hidden:this.hidden});this.$el.append(s);var o=e.map(function(e,t){return this._postRender(e,t)}.bind(this));return i.forEach(function(e,t){o.push(this._postRender(e,t))}.bind(this)),Promise.all(o).then(function(){this.disabled&&this.disable()}.bind(this))},_updateAriaLabelledBy:function(e){if(e.ariaLabelledby){var t=e.ariaLabelledby.split(" ");t.forEach(function(e,i){t[i]="control_"+e+"_"+this.id}.bind(this)),e.ariaLabelledby=t.join(" ")}},_postRender:function(e,t){if("text"!==e.type&&"icon"!==e.type){this._oPropertyUIControl||this.initUIControl(this.$el.find(".propertyRow")[0]);var i=this.$el.find(".innerControlContainer_"+e.type+this.id+t);return i.length>0?(e.el=i[0],e.id=this.id,this._oPropertyUIControl.renderItems([e])):Promise.resolve()}return Promise.resolve()},_handleClick:function(e,t){!this.disabled&&t&&t(e)},_findClickableNodes:function(){return this.clickable||(this.clickable=this.getPropertyNode().find(".clickable"+this.id)),this.clickable},disable:function(){this._toggleEnabled(!0),this._propertyNode.addClass("disabled"),this._oPropertyUIControl&&this._oPropertyUIControl.getProperties().forEach((function(e){e.disable()}))},enable:function(){this._toggleEnabled(!1),this._propertyNode.removeClass("disabled"),this._oPropertyUIControl&&this._oPropertyUIControl.getProperties().forEach((function(e){e.enable()}))},toggleEnabled:function(){this.disabled?this.enable():this.disable()},_toggleEnabled:function(e){this.disabled=e;var t=this._findClickableNodes();if(t)for(var n=0;n<t.length;n+=1){var s=t.get(n);e?i(s).removeClass("clickable"):i(s).addClass("clickable")}},setValue:function(e,t){this.getPropertyNode().find("."+e).text(t),this.processEllipses()}});return s})),define("baglass/core-client/js/core-client/ui/properties/CollapsiblePicker",["./BaseProperty","./templates/CollapsiblePicker","jquery","lodash","react","authoring-common","./SingleLineLinks","../../nls/StringResources","../../utils/Utils"],(function(e,t,i,n,s,o,a,l,r){"use strict";var d=o.CustomColorDialog,c=e.extend({contentSizeMap:{small:"Sm",medium:"Md",large:"Lg"},init:function(e){this.events={},this.events["clicktap .property_"+e.id+" .collapsiblePickerBox"]="_handleClick",this.events["keydown .property_"+e.id+" .collapsiblePickerBox"]="_handleKeyDown",this.events["clicktap .collapsibleSectionToggle"+e.id]="toggleCollapsibleSection",this.events["keydown .collapsibleSectionToggle"+e.id]="_toggleCollapsibleSectionKeyDown",this.nestedUIControl=!1,this.open=!1,this.closeOnSelect=!0,this.contentSize="small",this.itemType="color",this.isRequired=!1,c.inherited("init",this,arguments),n.extend(this,e),this._isColorPicker="color"===this.itemType,this._isRequired=!this.selectedName&&this.placeholder&&this.isRequired},doRender:function(){this.placeholder&&!this.selectedName?this.selectedItem=this.placeholder:this.selectedItem=this._getSelectedItemFromName(this.selectedName);var e="ColorCode"===this.selectedItem.type?this.selectedItem.value:this.selectedItem.hexValue;"transparent"===e&&(e="");var n=t({name:this.name,label:this.label,items:this.items,id:this.id,readOnly:this.readOnly,value:this.selectedItem.value,hexValue:e&&e.toUpperCase(),selectedValueType:this.selectedItem.type,showHexValue:this.showHexValue,displayLabel:this.displayLabel,selectedLabel:this.selectedItem.label,addButton:this.addButton,ariaLabel:this.ariaLabel,nestedUIControl:this.nestedUIControl,contentSize:this.contentSizeMap[this.contentSize.toLowerCase()]||this.contentSizeMap.small,colorPicker:this._isColorPicker,isRequired:this._isRequired}),s=i(n);if(this.addButton){var o=s.find(".addCustomColor");new a({el:o,name:this.name,id:this.id,type:"SingleLineLinks",items:[{align:"right",items:[{type:"text",name:"customColorLink",value:l.get("addCustomColor"),clickCallback:this.addCustomColor.bind(this)}]}]}).doRender()}if(this.$el.append(s),this.open&&this._doToggleCollapsibleSection(),"svg"===this.selectedItem.type){var d=this.$el.find(".property_"+this.id+" .selectedItemBox");r.setIcon(d,this.selectedItem.value,this.selectedItem.label,this.selectedItem.label)}this.$el.find(".property_"+this.id+" .collapsiblePickerBox").each(function(e,t){"svg"===this.items[e].type.toLowerCase()&&r.setIcon(i(t),this.items[e].value,this.items[e].label,this.items[e].label)}.bind(this))},toggleCollapsibleSection:function(){this.open=!this.open,this._doToggleCollapsibleSection(),this.onOpenChange&&this.onOpenChange(this.name,this.open)},openCollapsibleSection:function(){if(!this.open){this.open=!this.open;var e=this.getCollapsibleDiv();e.addClass("visible"),this.$el.find(".toggleSection"+this.id).attr("aria-expanded","true"),e.attr("aria-hidden","false")}},selectItem:function(e){var t=i(e.currentTarget);(t.data("name")!==this.getSelectedItem().name||this.allowSameSelection)&&this.setSelectedItem(t),this.closeOnSelect&&this.toggleCollapsibleSection()},setSelectedItem:function(e){this._isRequired&&(this._isRequired=!1,this.$el.find(".collapsiblePickerRequired").remove()),this.selectedItem=this._getSelectedItemFromName(e.data("name"));var t=this.getSelectedValue();this._unselectPreviousItem(),this._updateSelectedNode(e),this._updatedSelectedNode(this.selectedItem.value,t),this._onChange(this.name,this.getSelectedItem())},getSelectedItem:function(){return{name:this.getSelectedName(),label:this.getSelectedLabel(),value:this.getSelectedValue(),type:this.getSelectedType()}},getCollapsibleDiv:function(){return this.$el.find(".collapsibleSection.property_"+this.id)},getSelectedNode:function(){return this.$el.find(".property_"+this.id+" .selected")},getSelectedName:function(){return this.getSelectedNode().data("name")},getSelectedValue:function(){return this.getSelectedNode().data("value")},getSelectedLabel:function(){return this.getSelectedNode().attr("title")},getSelectedType:function(){var e=void 0;return n.each(this.items,function(t){n.isEqual(t.value,this.selectedItem.value)&&(e=t.type)}.bind(this)),e},_getSelectedItemFromName:function(e){var t=this.items[0];return n.each(this.items,(function(i){i.name===e&&(t=i)})),t},_getSelectedItemFromValue:function(e){var t=this.items[0];return n.each(this.items,(function(i){i.value===e&&(t=i)})),t},_updatedSelectedNode:function(e,t){var i=this.$el.find(".property_"+this.id+" .selectedItemBox");t&&"transparent"===t.toLowerCase()&&i.find(".transparentIndicator").remove(),e&&"transparent"===e.toLowerCase()&&i.append('<div class="transparentIndicator"></div>');var n=this.getSelectedType();if(i.removeAttr("style").removeClass(t).find(".svgIcon").remove(),"Class"===n)i.addClass(e);else if("ColorCode"===n)i.css("background",e);else{var s=this.getSelectedItem();r.setIcon(i,s.value,s.label,s.label)}if(this.showHexValue){var o="transparent"===e.toLowerCase()?"":r.rgbToHex(i.css("backgroundColor"));o&&(o=o.toUpperCase()),i.siblings(".selectedColorHex").text(o)}this.displayLabel&&i.siblings(".selectedLabel").text(this.getSelectedItem().label),i.attr({"data-value":e})},_updateSelectedNode:function(e){e.addClass("selected").attr("aria-pressed","true")},_handleKeyDown:function(e){32!==e.keyCode&&13!==e.keyCode||this.selectItem(e)},_handleClick:function(e){this.selectItem(e),e.stopPropagation()},onChangeCustom:function(e){if(e){this.selectedItem=this.createCustomColor(e),this.items.push(this.selectedItem);var t=this.getSelectedValue();this._unselectPreviousItem(),this._updatedSelectedNode(e,t),this._onChange(this.name,this.selectedItem)}else{var i=this.glassContext.getCoreSvc(".Logger");i&&i.error("No color returned by the Color Picker dialog.",this)}},openCustomColorDialog:function(){var e=void 0,t=s.createElement(d,{key:"colorDialog",selectedColor:this.selectedItem&&this.selectedItem.hexValue,glassContext:this.glassContext,ref:function(t){e=t},onChange:this.onChangeCustom.bind(this),onCloseDialog:r.removeTemporaryContainer.bind(this)});r.reactRender(t,r.createTemporaryContainer()).then((function(){e.openDialog()}))},addCustomColor:function(e){this.openCustomColorDialog(e)},_unselectPreviousItem:function(){this.getSelectedNode().removeClass("selected").attr("aria-pressed","false")},_toggleCollapsibleSectionKeyDown:function(e){32!==e.keyCode&&13!==e.keyCode||this.toggleCollapsibleSection()},_doToggleCollapsibleSection:function(){var e=this.getCollapsibleDiv();e.toggleClass("visible");var t=e.hasClass("visible");this.$el.find(".toggleSection"+this.id).attr("aria-expanded",t?"true":"false"),e.attr("aria-hidden",t?"false":"true")}});return c})),function(){var e,t,i=function(e){var t="";return e.hideSectionTitle||(t+='\n<div class="',1==e.styleAsSimpleRow?t+="simpleCollapsibleSectionTitle propertyRow":t+="collapsibleSectionTitle",t+="  collapsibleSectionToggle"+e.id+" ",e.name&&(t+="l_"+e.name),t+='">\n\t<div id="label_'+e.id+'" class="singleLine">'+e.label+'</div>\n\t<div class="rightAlign">\n\t\t<div class="arrow blueArrow downArrow toggleSection'+e.id+'" aria-haspopup="true" aria-controls="region_'+e.id+'" role="link" tabindex="0" aria-controls="region_'+e.id+'" aria-labelledby="label_'+e.id+'"></div>\n\t</div>\n</div>\n'),t+='\n<div class="collapsibleSection property_'+e.id,e.horizontalAlign&&(t+=" horizontalAlign"),t+='" id="region_'+e.id+'" aria-hidden="true" aria-live="off"',e.hideSectionTitle?e.ariaLabel&&(t+=' role="region" aria-label="'+e.ariaLabel+'"'):t+=' role="region" aria-labelledby="label_'+e.id+'"',t+=">\n",e.sectionExtraMessage&&(t+='\n\t<div id="sectionExtraMessageBox" style="margin-left:15px;margin-right: 15px;margin-bottom: 10px;font-size: 12px; line-height: 1.2;"> '+e.sectionExtraMessage+"</div>\n"),t+="\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/CollapsibleSection",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.CollapsibleSection=i)}(),define("baglass/core-client/js/core-client/ui/properties/CollapsibleSection",["./PropertyContainerBaseClass","./templates/CollapsibleSection","./PropertyUIControl","jquery","lodash"],(function(e,t,i,n,s){"use strict";var o=e.extend({init:function(e){this.events={},this.events["clicktap .collapsibleSectionToggle"+e.id]="toggleCollapsibleSection",this.events["keydown .collapsibleSectionToggle"+e.id]="_handleKeyDown",this.ellipses=!0,o.inherited("init",this,arguments),s.extend(this,e)},render:function(){var e=t({label:this.label,id:this.id,name:this.name,ariaLabel:this.ariaLabel,styleAsSimpleRow:this.styleAsSimpleRow,hideSectionTitle:this.hideSectionTitle,horizontalAlign:this.horizontalAlign,sectionExtraMessage:this.sectionExtraMessage}),i=n(e).appendTo(this.$el);return this.items?(this.initUIControl(this.getCollasibleDiv()[0]),this.processIndent(),this.processStaticValidation(i.first()),this.open&&this._doToggleCollapsibleSection(),this._oPropertyUIControl.render()):Promise.resolve(!0)},getCollasibleDiv:function(){return this.$el.find(".property_"+this.id)},_handleKeyDown:function(e){32!==e.keyCode&&13!==e.keyCode||this.toggleCollapsibleSection()},toggleCollapsibleSection:function(){this.open=!this.open,this._doToggleCollapsibleSection(),this.onOpenChange&&this.onOpenChange(this.name,this.open)},_doToggleCollapsibleSection:function(){this.getCollasibleDiv().toggleClass("visible"),this.$el.find(".toggleSection"+this.id).toggleClass("upArrow");var e=this.getCollasibleDiv().hasClass("visible");this.$el.find(".toggleSection"+this.id).attr("aria-expanded",e?"true":"false"),this.getCollasibleDiv().attr("aria-hidden",e?"false":"true"),this.processEllipses()},isEmpty:function(){return void 0===this.items||null===this.items},refreshProperties:function(e){return this.items=e,this._oPropertyUIControl&&this._oPropertyUIControl.remove(),n(this.getCollasibleDiv()[0]).empty(),this._oPropertyUIControl=new i({glassContext:this.glassContext,el:this.getCollasibleDiv()[0],readOnly:this.readOnly,items:this.items,onChange:this.onChange,primaryUIControl:!1,animatedSpinner:!0}),this.processIndent(),this._oPropertyUIControl.render()}});return o})),define("baglass/core-client/js/core-client/ui/properties/ColorPicker",["./CollapsiblePicker"],(function(e){"use strict";return e})),function(){var e,t,i=function(e){var t=" ";return""!=e.placeHolderText&&e.newLook&&(t+='\n <div class="propertyRow property_'+e.id,e.readOnly&&(t+=" disabled"),t+='">\n\t<div>\n\t\t<div class="l_'+e.name+' inputHintText">',""!=e.value?t+=""+e.placeHolderText:t+="&nbsp;",t+="</div>\n "),t+='\n <div class="inputContainer '+e.inputClass,e.showInlineError&&(t+=" flex"),t+='" style="overflow:hidden;">\n\t<input id="control_'+e.name+"_"+e.id+'" type="'+e.inputType+'" ',"password"===e.inputType&&(t+='autocomplete="off"'),t+=' class="',"password"!=e.inputType&&e.ellipses&&(t+="ellipses"),t+=" blueText editable"+e.id,e.newLook&&(t+=" newUXLook"),t+=" "+e.inputClass+'"',e.inputStyles&&(t+=' style="'+e.inputStyles+'"'),t+=" ",""!=e.placeHolderText&&(t+='placeholder="'+e.placeHolderText+'"'),t+='value="'+_.escape(e.value)+'"',e.direction&&(t+=' dir="'+e.direction+'"'),e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=" ",e.readOnly?t+="disabled":t+='tabindex="0"',t+="></input>\n</div>\n",""!=e.placeHolderText&&e.newLook&&(t+="\n  \t</div>\n</div>\n"),t+="\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/Input",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.Input=i)}(),define("baglass/core-client/js/core-client/ui/properties/Input",["./BaseProperty","./templates/Input","jquery","../../utils/BidiUtil","lodash","../../utils/Utils"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({handleReturnKey:!1,init:function(e){this.inputType="text",this.inputClass="",this.inputStyles="",this.ellipses=!0,this.highlightTextOnFocus=!1,this.placeHolderText="",e.editable=!0,e.editable&&e.newLook&&e.placeHolderText&&(s.isUndefined(this.events)&&(this.events={}),this.events["keyup .editable"+e.id]="_onKeyUp"),a.inherited("init",this,arguments),s.extend(this,e),"password"===this.inputType&&(this.ellipses=!1)},getTemplateOptions:function(){return{value:this.isSTT&&""!==n.userPreferredTextDir?n.enforceTextDirectionForSTT(this.value):this.value,direction:this.isSTT?"":n.resolveBaseTextDir(this.value||""),id:this.id,readOnly:this.readOnly,name:this.name,inputType:this.inputType,inputClass:this.inputClass,inputStyles:this.inputStyles,ellipses:this.ellipses,placeHolderText:this.placeHolderText,ariaLabel:this.ariaLabel,newLook:this.newLook,showInlineError:this.showInlineError}},getHTMLTemplate:function(){return t},doRender:function(){var e=this.getHTMLTemplate()(this.getTemplateOptions());return this.$el.append(e),this.disabled&&this.disable(),Promise.resolve(!0)},setValue:function(e){var t=this.getPropertyNode().find("input");t.length>0?t.val(e):this.getPropertyNode().find(".propertyValue").text(e),this.processEllipses(),this._onChange(this.name,e),this._updateHintTextPlacement()},getValue:function(){var e=this.getPropertyNode().find("input");return e.length>0?e.val():""},showError:function(e){if(this.errorMessageNode)this.errorMessageNode.attr("title",e);else{this.errorMessageNode=i("<div>",{tabindex:0,title:e,class:"inlineValidationIcon"}),i('<svg><use style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-failed"></use></svg>').appendTo(this.errorMessageNode),o.embedSVGIcon(this.errorMessageNode);var t=this.getPropertyNode().find(".inputContainer");t.append(this.errorMessageNode),t.find("input").addClass("error")}},hideError:function(){this.errorMessageNode&&(this.errorMessageNode.remove(),this.getPropertyNode().find("input").removeClass("error"),this.errorMessageNode=null)},_onKeyUp:function(){this._updateHintTextPlacement()},_updateHintTextPlacement:function(){var e=this.getValue();if(this.newLook&&this.placeHolderText){var t=this.getPropertyNode().find(".inputHintText");""===e?t.html("&nbsp;"):t.text(this.placeHolderText)}}});return a})),function(){var e,t,i=function(e){var t='<div class="propertyRow property_'+e.id;return 1==e.multiline?t+=" multiline":t+=" flex",e.readOnly&&(t+=" disabled"),t+='">\n\t\t<div class="propertyName',1!=e.multiline&&(t+=" singleLine"),t+=" l_"+e.name+' textSelectable">\n\t\t\t<div id="label_'+e.id+'" ',e.editable&&(t+='for="control_'+e.name+"_"+e.id+'"'),t+=' title="'+e.label+'">'+e.label+"</div>\n\t\t</div>\n\t\t",!0===e.editable&&(t+='\n\t\t\t<div class="propertyNameEdit toggleEdit'+e.id+'" role="img" title="'+e.strings.edit+'">\n\t\t\t\t<svg class="svgIcon editIcon editIcon'+e.id+'" role="presentation" >\n\t\t\t\t\t<text>'+e.strings.edit+'</text>\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-edit"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t'),t+="\n\t",1==e.multiline&&(t+='\n\t<div class="multilineValue">\n\t'),t+="\n\t\t",e.editable?t+='\n\t\t\t<div class="placeholder_Input'+e.id+' wideProperty"></div>\n\t\t':(t+='\n\t\t\t<div class="',1!=e.multiline&&(t+="rightAlign"),e.editable&&(t+=" inputContainer"),t+='" style="overflow:hidden;">\n\t\t\t\t<div id="value_'+e.id+'" class="propertyValue ellipses textSelectable ',!0===e.editCallback&&(t+="secondaryEdit"+e.id+" clickable"),t+=" v_"+e.name+'"',e.direction&&(t+=' dir="'+e.direction+'"'),t+=">"+_.escape(e.value)+"</div>\n\t\t\t</div>\n\t\t"),t+="\n\t\t",!0===e.editCallback&&(t+="\n\t\t\t<div ",e.readOnly||(t+='tabindex="0"'),t+=' role="button" aria-labelledby="label_'+e.id,e.value&&!e.editable&&(t+=" value_"+e.id),t+='" class="arrow blueArrow clickable rightArrow secondaryEdit'+e.id+" a_"+e.name+'"></div>\n\t\t'),t+="\n\t",1==e.multiline&&(t+="\n\t</div>\n\t"),t+="\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/SingleLineValue",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.SingleLineValue=i)}(),define("baglass/core-client/js/core-client/ui/properties/SingleLineValue",["./BaseProperty","./Input","./templates/SingleLineValue","jquery","../../utils/BidiUtil","lodash","../../nls/StringResources"],(function(e,t,i,n,s,o,a){"use strict";var l=e.extend({init:function(e){this.events={},e.editCallback&&(this.events["clicktap .secondaryEdit"+e.id]="_handleClick",this.events["keydown .property_"+e.id]="_handleKeyDown"),e.editable&&(this.events["keydown .editable"+e.id]="_colorInputBorder");var t={inputType:"text",ellipses:!0};l.inherited("init",this,arguments),o.extend(this,t,e),this.ellipses="password"!==this.inputType&&this.ellipses},doRender:function(){l.inherited("doRender",this,arguments);var e=i({label:this.label,value:this.isSTT&&""!==s.userPreferredTextDir?s.enforceTextDirectionForSTT(this.value):this.value,direction:this.isSTT?"":s.resolveBaseTextDir(this.value||""),editCallback:!!this.editCallback,id:this.id,editable:this.editable&&!this.readOnly,readOnly:this.readOnly,name:this.name,multiline:this.multiline,inputType:this.inputType,strings:{edit:a.get("edit")},labelTitle:this.title||""});return this.$el.append(e),this.svgIconClickCallback&&this.getPropertyNode().find(".svgIconClickCallback"+this.id).on("clicktap",function(){this._handleSvgIconClick()}.bind(this)),this._renderInput().then(function(){this.disabled&&this.disable(),this._colorInputBorder()}.bind(this))},onResize:function(){this.setValue(this.isSTT&&""!==s.userPreferredTextDir?s.enforceTextDirectionForSTT(this.value):this.value)},_renderInput:function(){return this.inputPlaceholder=this.$el.find(".placeholder_Input"+this.id),this.inputPlaceholder.length>0?(this.ellipses=!1,this.editable=!1,this._inputControl=new t({el:this.inputPlaceholder[0],name:this.name,value:this.value,readOnly:this.readOnly,disabled:this.disabled,id:this.id,onChange:this.onChange,inputType:this.inputType,inputClass:this.multiline?"":"rightAlign",ariaLabel:this.ariaLabel,validator:this.validator,isString:this.isString}),this._inputControl.render()):Promise.resolve()},_colorInputBorder:function(){""===this.getHTMLControl().val()?this.getHTMLControl().addClass("empty"):this.getHTMLControl().removeClass("empty")},_handleKeyDown:function(e){console.log("key down"),32!==e.keyCode&&13!==e.keyCode||this._handleClick()},_handleClick:function(){this.editCallback&&this.editCallback()},_handleSvgIconClick:function(){this.svgIconClickCallback&&this.svgIconClickCallback()},disable:function(){this.editCallback&&(this._clickable||(this._clickable=this.getPropertyNode().find(".clickable")),this._secondaryEdit||(this._secondaryEdit=this.getPropertyNode().find(".secondaryEdit"+this.id)),this._clickable.removeClass("clickable blueText"),this._secondaryEdit.removeClass("blueArrow secondaryEdit"+this.id)),this._inputControl&&this._inputControl.disable(),this.editable&&l.inherited("disable",this,arguments)},enable:function(){this._clickable&&this._clickable.addClass("clickable blueText"),this._secondaryEdit&&this._secondaryEdit.addClass("blueArrow secondaryEdit"+this.id),this._inputControl&&this._inputControl.enable(),this.editable&&l.inherited("enable",this,arguments)},setValue:function(e){this._inputControl?this._inputControl.setValue(e):this.getPropertyNode().find(".propertyValue").text(e),this.processEllipses(),this._onChange(this.name,e),this._colorInputBorder()},getModifiedProperties:function(){var e=n.extend({},l.inherited("getModifiedProperties",this,arguments));return this._inputControl&&n.extend(e,this._inputControl.getModifiedProperties()),e}});return l})),function(){var e,t,i=function(e){var t='<div class="';e.nestedUIControl||(t+="propertyRow"),t+=" property_"+e.id,e.readOnly&&(t+=" disabled"),t+='">\n\t',e.label&&(t+='\n\t\t<div class="propertyName singleLine l_'+e.name+'">\n\t\t\t<label for="control_'+e.name+"_"+e.id+'">'+e.label+"</label>\n\t\t\t",e.coachMark&&(t+='<div class="coachMarkContainer"></div>'),t+="\n\t\t</div>\n\t"),t+='\n\t<div class="dropDown rightAlign">\n\t\t',e.ariaDescribedby&&(t+='<span class="screenReader" id="control_describedby_'+e.id+'">'+e.ariaDescribedby+"</span>"),t+='\n\t\t<select id="control_'+e.name+"_"+e.id+'"',e.ariaLabel&&(t+='aria-label="'+e.ariaLabel+'"'),t+=' class="dropDown'+e.id+" v_"+e.name+'"',e.readOnly&&(t+=' disabled="disabled"'),e.style&&(t+=' style="'+e.style+'"'),t+=' tabindex="0" ',e.ariaDescribedby&&(t+='aria-describedby="control_describedby_'+e.id+'"'),t+=">\n\t\t\t";var i=e.options;if(i)for(var n,s=-1,o=i.length-1;s<o;)t+="\n\t\t\t\t<option",(n=i[s+=1]).cssClass&&(t+=' class="'+n.cssClass+'"'),t+=' value="'+_.escape(n.value)+'" ',!0!==n.selected&&e.defaultValue!==n.value||(t+="selected"),t+=" ",!0===n.disabled&&(t+="disabled"),t+=">"+_.escape(n.label)+"</option>\n\t\t\t";return t+="\n\t\t</select>\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/DropDown",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.DropDown=i)}(),define("baglass/core-client/js/core-client/ui/properties/DropDown",["../Slideout","./BaseProperty","./SingleLineValue","../../utils/Utils","./templates/DropDown","jquery","lodash"],(function(e,t,i,n,s,o,a){"use strict";var l=t.extend({position:"right",ellipses:!0,init:function(e){this.events={},this.events["change .dropDown"+e.id]="_handleChange",this.nestedUIControl=!1,l.inherited("init",this,arguments),a.extend(this,e)},doRender:function(){this.glassContext&&!1!==this.responsive&&this.options.length>10&&this.parentEl?this._renderSingleSelectValue():this._renderCheckbox()},_renderSingleSelectValue:function(){this.selectedIndex=0;var e=a.find(this.options,(function(e){return e.selected})),t=e?e.value:this.defaultValue;if(t)for(var n=0;n<this.options.length;n++)if(t===this.options[n].value){this.selectedIndex=n;break}this._singleLineValue=new i({el:this.$el,name:this.name,label:this.label,value:this.options[this.selectedIndex].label,editCallback:this._showPropertyEditView.bind(this),id:this.id,onChange:this._onChange.bind(this),disabled:this.disabled,indent:this.indent||0,readOnly:this.readOnly}),this._singleLineValue.render()},_renderCheckbox:function(){var e=s({label:this.label,selected:this.checked,id:this.id,defaultValue:this.defaultValue,options:this.options,name:this.name,readOnly:this.readOnly||this.disabled,nestedUIControl:this.nestedUIControl,ariaLabel:this.ariaLabel,ariaDescribedby:this.ariaDescribedby,style:this.style,coachMark:this.coachMark});this.$el.append(e),this.coachMark&&a.isFunction(this.coachMark.render)&&this.coachMark.render({$el:this.$el.find(".coachMarkContainer"),glassContext:this.glassContext})},getHTMLControl:function(){return this._$select||(this._$select=o(".dropDown"+this.id)),this._$select},enable:function(){this.disabled=!1,this._singleLineValue?this._singleLineValue.enable():l.inherited("enable",this,arguments),this.getPropertyNode().removeClass("disabled")},disable:function(){this.disabled=!0,this._singleLineValue?this._singleLineValue.disable():l.inherited("disable",this,arguments),this.getPropertyNode().addClass("disabled")},_handleChange:function(e){this._onChange(this.name,o(e.currentTarget)[0].value),n.isIpad()&&o(e.currentTarget).trigger("tap")},getSelectedValue:function(){return this.getHTMLControl().find("option:selected").attr("value")},_onPropertyEditViewClose:function(e){if(this._oPropertyEditView){if(!e&&this._oPropertyEditView.contentView&&this._oPropertyEditView.contentView.getModifiedProperties&&(e=this._oPropertyEditView.contentView.getModifiedProperties()),this._oPropertyEditView.hide(),this._oPropertyEditView=null,e){for(var t=e[this.name],i=0;i<this.options.length;i+=1)if(this.options[i].value===t){this.selectedIndex=i;break}this.getPropertyNode().find(".propertyValue").text(this.options[this.selectedIndex].label),this._onChange(this.name,t),this.processEllipses()}this.setFocus()}},onClose:function(){return l.inherited("onClose",this,arguments).then(this._onPropertyEditViewClose.bind(this))},_showPropertyEditView:function(){var t=o("<div></div>");this.parentEl.append(t);var i=new e({glassContext:this.glassContext,position:this.position,el:t,content:this._getPropertyEditViewSpec(),width:this.parentEl.width(),enableTabLooping:!0});i.render().then((function(){i.show()})),this._oPropertyEditView=i},_getPropertyEditViewSpec:function(){var e=[];return o.each(this.options,function(t,i){e.push({label:i.label,value:i.value})}.bind(this)),{module:"../ui/properties/PropertyUIControl",closeCallback:this._onPropertyEditViewClose.bind(this),setFocusCallback:function(e){e.setFocus(this.name)}.bind(this),items:[{value:this.label,centerLabel:!0,type:"Banner",backButton:!0,ariaLabel:this.ariaLabel||this.label},{type:"RadioButtonGroup",name:this.name,separator:!0,ariaLabel:this.ariaLabel||this.label,value:this.options[this.selectedIndex].value,items:e}]}},setValue:function(e,t){for(var i=0;i<this.options.length;i+=1)if(this.options[i].value===e){this.selectedIndex=i;break}this._singleLineValue?this._singleLineValue.setValue(this.options[this.selectedIndex].label,!1):this.getHTMLControl().val(e),t&&this._onChange(this.name,e)}});return l})),define("baglass/core-client/js/core-client/ui/properties/Footer",["./PropertyContainerBaseClass","jquery","lodash"],(function(e,t,i){"use strict";var n=e.extend({ellipses:!0,init:function(e){this.events={},n.inherited("init",this,arguments),i.extend(this,e)},doRender:function(){var e=t("<footer></footer>");return this.$el.append(e),this.initUIControl(e[0]),this._oPropertyUIControl.render()}});return n})),function(){var e,t,i=function(e){var t,i,s=void 0!==n?n:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(i,(function(e){return t[e]||e})):""}),o="<div>\n\t<table class='listTable'>\n\t\t";for(var a in e.data){for(var l in o+='\n\t\t\t<tr>\n\t\t\t\t<td class="listParent">'+s(e.data[a].defaultName)+"<td>\n\t\t\t</tr>\t\n\t\t\t",e.data[a].children)o+='\n\t\t\t\t<tr>\n\t\t\t\t\t<td class="listChild">'+s(e.data[a].children[l].defaultName)+"</td>\n\t\t\t\t</tr>\n\t\t\t";o+="\n\t\t"}return o+="\n\t</table>\n</div>\t\n"},n=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(i){return i?i.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/HierarchicalList",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.HierarchicalList=i)}(),define("baglass/core-client/js/core-client/ui/properties/HierarchicalList",["./BaseProperty","./templates/HierarchicalList","jquery","lodash"],(function(e,t,i,n){"use strict";var s=e.extend({init:function(e){this.events||(this.events={}),this.events["keydown .editable"+e.id]="_handleEditKeydown",s.inherited("init",this,arguments),n.extend(this,e)},doRender:function(){var e=t({data:this.data});this.$el.append(e),this._setAutoGrow()},_setAutoGrow:function(){var e=this.$el.find("table").get(0);e&&e.scrollHeight>e.clientHeight&&(i(e).addClass("capEditableHeight"),e.style.height=e.scrollHeight+"px")}});return s})),function(){var e,t,i=function(e){var t='<div class="flex property_'+e.id+'">\n\t';return e.svgIcon&&(t+='\n\t<div class="',e.name&&(t+="i_"+e.name),t+='" role="img" title="'+e.label+'">\n\t\t<svg class="svgIcon',e.svgIconClass&&(t+=" "+e.svgIconClass),t+='" role="presentation">\n\t\t\t<title>'+e.label+'</title>\n\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+e.svgIcon+'"></use>\n\t\t</svg>\n\t</div>\n\t'),t+='\n\t<div class="l_'+e.name+' hintText">'+e.label+"</div>\n</div>"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/HintText",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.HintText=i)}(),define("baglass/core-client/js/core-client/ui/properties/HintText",["./BaseProperty","./templates/HintText","lodash"],(function(e,t,i){"use strict";var n=e.extend({ellipses:!0,init:function(e){this.visibility="visible",n.inherited("init",this,arguments),i.extend(this,e)},doRender:function(){var e=t({label:this.label,id:this.id,name:this.name,svgIcon:this.svgIcon,svgIconClass:this.svgIconClass?this.svgIconClass:""});this.$el.append(e),this.setVisibility(this.visibility),this.$el.append(this._hintTextNode)},setVisibility:function(e){this.getPropertyNode().css("visibility",e)}});return n})),function(){var e,t,i=function(e){var t='<ul class="radioGroup radiogroup_'+e.id+'" role="radiogroup"';e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=">\n";var i=e.items;if(i)for(var n,s=-1,o=i.length-1;s<o;)n=i[s+=1],t+='\n\t<li class="propertyRow clickable radioButton property_'+e.id,e.readOnly&&(t+=" disabled"),n.value===e.value&&(t+=" checked"),t+='" role="radio" aria-labelledby="'+e.id+"radioButton"+s+'"',n.value===e.value?t+=' aria-checked="true" tabindex="0"':(t+=' aria-checked="false"',!1===e.selectOnNavigation?t+=' tabindex="0"':t+=' tabindex="-1"'),t+=' aria-disabled="',e.readOnly?t+="true":t+="false",t+='" data-value="'+n.value+'">\n\t\t',!0!==e.controlOnLeft&&(t+='\n\t\t\t<div id="'+e.id+"radioButton"+s+'" class="radioButtonLabel radioLeft l_'+e.name+s+'">'+n.label+"</div>\n\t\t"),t+='\n\t\t<div class="roundButton roundButton'+e.id+" circle ",!0===e.controlOnLeft?t+="radioLeft":t+="radioRight",t+='">\n\t\t\t<svg>\n\t\t\t\t<circle class="outer" cx="8" cy="8" r="7"/>\n\t\t\t\t<circle class="radioBtn inner" cx="8" cy="8" r="5"/>\n\t\t\t</svg>\n\t\t</div>\n\t\t',!0===e.controlOnLeft&&(t+='\n\t\t\t<div id="'+e.id+"radioButton"+s+'" class="radioButtonLabel l_'+e.name+s+' controlOnLeft">'+n.label+"</div>\n\t\t"),t+="\n\t</li>\n\t",e.separator&&(t+="\n\t\t",e.length!==s&&(t+='\n\t\t\t<li class="separator"></li>\n\t\t'),t+="\n\t"),t+="\n";return t+="\n</ul>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/RadioButtonGroup",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.RadioButtonGroup=i)}(),define("baglass/core-client/js/core-client/ui/properties/RadioButtonGroup",["./BaseProperty","./templates/RadioButtonGroup","jquery","lodash","../KeyCodes"],(function(e,t,i,n,s){"use strict";var o=e.extend({defaultValue:null,init:function(e){this.events={},this.events["primaryaction .property_"+e.id]="_handleClick",o.inherited("init",this,arguments),n.extend(this,e),this.defaultValue=this.value,!1!==this.selectOnNavigation&&(this.selectOnNavigation=!0)},doRender:function(){var e=t({id:this.id,value:this.value,name:this.name,items:this.items.map((function(e){return e.label=n.escape(e.label),e})),separator:this.separator,length:this.items.length-1,controlOnLeft:this.controlOnLeft,readOnly:this.readOnly,ariaLabel:this.ariaLabel,selectOnNavigation:this.selectOnNavigation});this.$el.append(e),this._postRender()},getPropertyNode:function(){return this._propertyNode||(this._propertyNode=this.$el.find(".radiogroup_"+this.id)),0===this._propertyNode.length&&(this._propertyNode=this.$el),this._propertyNode},_postRender:function(){this._$radioGroupNode=this.$el.find("ul.radiogroup_"+this.id),this._$radioGroupNode.find("li.radioButton").keydown(function(e){this._handleKeyDown(e)}.bind(this)),this.disabled&&this.disable()},_selectRow:function(e){var t=i(e);this._uncheckCurrentSelection(),t.attr("aria-checked","true"),t.addClass("checked"),t.attr("tabindex","0");var n=t.data("value");this._onChange(this.name,n)},_handleClick:function(e){return this._selectRow(e.currentTarget),e.stopPropagation(),!1},_hasValueChanged:function(e){return e!==this.checked},enable:function(){this.readOnly||this._setDisabled(!1)},disable:function(){this._setDisabled(!0)},_setDisabled:function(e){this._$radioGroupNode.find("li.radioButton").each((function(t,n){var s=i(n);e?(s.addClass("disabled"),s.attr("aria-disabled","true")):(s.removeClass("disabled"),s.attr("aria-disabled","false"))}))},_uncheckCurrentSelection:function(){var e=this._$radioGroupNode.find("li.checked");e.removeClass("checked"),e.attr("aria-checked","false"),this.selectOnNavigation&&e.attr("tabindex","-1")},getValue:function(){return this._$radioGroupNode.find("li.checked").data("value")},setValue:function(e,t){this._uncheckCurrentSelection();var i=this._$radioGroupNode.find("li[data-value="+e+"]")[0];e=i?e:null,i&&this._selectRow(i),t&&this._onChange(this.name,e)},reset:function(){var e=this._$radioGroupNode.find('li[data-value="'+this.defaultValue+'"]');this._selectRow(e)},_handleKeyDown:function(e){if(e.keyCode===s.UP_ARROW||e.keyCode===s.DOWN_ARROW||e.keyCode===s.LEFT_ARROW||e.keyCode===s.RIGHT_ARROW){var t=this._$radioGroupNode.find("li.checked");t.length||(t=i(e.currentTarget));var n=void 0;return e.keyCode===s.UP_ARROW||e.keyCode===s.LEFT_ARROW?0===(n=t.prevAll("li.radioButton").first()).length&&(n=t.nextAll("li.radioButton").last()):0===(n=t.nextAll("li.radioButton").first()).length&&(n=t.prevAll("li.radioButton").last()),this.selectOnNavigation&&this._selectRow(n),n.focus(),e.preventDefault(),!1}}});return o})),function(){var e,t,i=function(e){var t='/**\n * Licensed Materials - Property of IBM\n * IBM Cognos Products: BI Content Explorer \n * (C) Copyright IBM Corp. 2015, 2017\n * US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.\n */\n<div class="propertyRow propertyRowLineHeight';e.readOnly&&(t+=" disabled"),t+=" hradioButtonGroup_"+e.id,e.label&&(t+=" flex"),t+='">\n\t',e.label&&(t+='\n\t\t<div class="propertyName singleLine label_'+e.name+'">'+e.label+"</div>\n\t"),t+='\n\n\t<div class="hradioButtonGroup',e.label||(t+=" controlOnLeft flex"),t+='">\n\t\t<ul class="radioGroup radiogroup_'+e.id,e.label||(t+=" flex"),t+='" role="radiogroup"',e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=">\n\t\t\t";var i=e.items;if(i)for(var n,s=-1,o=i.length-1;s<o;)n=i[s+=1],t+='\n\t\t\t\t<li class="hradioButton radioButton flex property_'+e.id+" hradioButton"+e.id,e.label||(t+=" leftAlign"),n.value===e.value&&(t+=" checked"),t+='" role="radio" aria-labelledby="'+e.id+"radioButton"+s+'"',n.value===e.value?t+=' aria-checked="true" tabindex="0"':t+=' aria-checked="false" tabindex="-1"',t+='aria-disabled="',e.readOnly?t+="true":t+="false",t+='" data-value="'+n.value+'">\n\t\t\t\t\t<div class="rbutton roundButton">\n\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t<circle class="outer" cx="8" cy="8" r="7"/>\n\t\t\t\t\t\t\t<circle class="radioBtn inner" cx="8" cy="8" r="5"/> \n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="'+e.id+"radioButton"+s+'" class="rlabel">'+n.label+"</div>\n\t\t\t\t</li>\n\t\t\t";return t+="\n\t\t</ul>\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/HorizontalRadioButtonGroup",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.HorizontalRadioButtonGroup=i)}(),define("baglass/core-client/js/core-client/ui/properties/HorizontalRadioButtonGroup",["./RadioButtonGroup","./templates/HorizontalRadioButtonGroup"],(function(e,t){"use strict";var i=e.extend({init:function(){i.inherited("init",this,arguments)},doRender:function(){var e=t({id:this.id,label:this.label,value:this.value,name:this.name,items:this.items,readOnly:this.readOnly,ariaLabel:this.ariaLabel});this.$el.append(e),this._postRender()},enable:function(){this.readOnly||this._setDisabled(!1)},disable:function(){this._setDisabled(!0)},_setDisabled:function(e){var t=this.$el.find(".hradioButtonGroup_"+this.id);e?t.addClass("disabled"):t.removeClass("disabled"),i.inherited("_setDisabled",this,arguments)}});return i})),function(){var e,t,i=function(e){var t='<div class="';e.nestedUIControl||(t+="propertyRow"),t+=" property_"+e.id,e.readOnly&&(t+=" disabled"),t+='">\n\t<div class="iconCollectionContainer',e.showText&&(t+=" showText"),t+='" ',e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=">\n\t";var i=e.items;if(i)for(var n,s=-1,o=i.length-1;s<o;)t+="\n\t\t",(n=i[s+=1]).image?(t+='\n\t\t\t<div class=\'itemOption itemImage\' role="button" data-name="'+n.name+'" ',e.readOnly?t+='tabindex="-1"':t+='tabindex="0"',t+="\n\t\t\t\t",n.ariaLabel&&(t+=' aria-label="'+n.ariaLabel+'"'),t+=' title="'+n.label+'">\n\t\t\t\t<div class="itemThumbnail"\n\t\t\t\t\talt="'+n.image.altText+'"\n\t\t\t\t\trole="button"\n\t\t\t\t\taria-label="'+n.image.altText+'"\n\t\t\t\t\ttitle="'+n.image.altText+'"\n\t\t\t\t\tstyle="background-image: url(\''+n.image.imageLink+"')\">\n\t\t\t\t</div>\n\t\t"):(t+='\n\t\t\t<div class=\'itemOption\' role="button" data-name="'+n.name+'" ',e.readOnly?t+='tabindex="-1"':t+='tabindex="0"',t+="\n\t\t\t\t",n.ariaLabel&&(t+=' aria-label="'+n.ariaLabel+'"'),t+=' title="'+n.label+'">\n\t\t\t',n.svg&&(t+=""+n.svg),t+="\n\t\t\t",e.showText&&n.label&&(t+='<div class="itemLabel">'+n.label+"</div>"),t+="\n\t\t"),t+="\n\t\t</div>\n\t";return t+="\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/IconCollection",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.IconCollection=i)}(),define("baglass/core-client/js/core-client/ui/properties/IconCollection",["jquery","lodash","./BaseProperty","./templates/IconCollection","../../utils/Utils","../KeyCodes","hammerjs","jquery.hammer"],(function(e,t,i,n,s,o){"use strict";var a=i.extend({init:function(e){this.events={},this.events["clicktap .property_"+e.id+" .itemOption"]="_onItemClick",this.events["mousedown .property_"+e.id+" .itemOption"]="_onItemMouseDownStartDrag",this.events["keydown .property_"+e.id+" .itemOption"]="_onItemKeyDown",this.nestedUIControl=!1,a.inherited("init",this,arguments),t.extend(this,e)},doRender:function(){var t=n({items:this.items,id:this.id,readOnly:this.readOnly,ariaLabel:this.ariaLabel||this.label,nestedUIControl:this.nestedUIControl,showText:this.showText});this.$el.append(t),this.$el.find(".property_"+this.id+" .itemOption").each(function(t,i){this.items[t].icon&&s.setIcon(e(i),this.items[t].icon,this.items[t].label,this.items[t].ariaLabel),e(i).hammer(),e(i).on("hold",this._onItemHoldAndStartDrag.bind(this))}.bind(this))},_getEntry:function(i){var n=e(i).closest(".itemOption").data("name");return t.find(this.items,(function(e){return e.name===n})).content},_onItemKeyDown:function(e){e.keyCode!==o.ENTER&&e.keyCode!==o.SPACE||this._onItemClick(e)},_onItemClick:function(t){var i=t.currentTarget;if(!0!==e.data(i,"_clickEventReceived")){if(e.data(i,"_clickEventReceived",!0),setTimeout((function(){e.data(i,"_clickEventReceived",!1)}),500),this.options.onItemClick){var n=this._getEntry(t.target);this.options.onItemClick(n,t),t&&t.gesture&&t.gesture.preventDefault()}this.options.autoClose&&e('[data-toggle="dropdown"]').parent().removeClass("open")}},_onStartDrag:function(e){if(this.options.onItemStartDrag){e.preventDefault&&e.preventDefault();var t=this._getEntry(e.target);this.options.onItemStartDrag(t,e)}},_onItemHoldAndStartDrag:function(e){e.showAvatarImmediately=!0,this._onStartDrag(e)},_onItemMouseDownStartDrag:function(e){this._onStartDrag(e)}});return a})),function(){var e,t,i=function(e){var t='<div class="';e.nestedUIControl||(t+="propertyRow"),t+=" property_"+e.id,e.readOnly&&(t+=" disabled"),t+='">\n\t<div id="label_'+e.id+'" class="singleLine iconPikcerLabel ',e.name&&(t+=" "+e.name),t+='">'+e.label+"</div>\n\t<div class='iconPickerContainer' ",e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=' role="radiogroup">\n\t';var i=e.items;if(i)for(var n,s=-1,o=i.length-1;s<o;)n=i[s+=1],t+="\n\t\t<div class ='iconOption",e.values&&e.values.indexOf(n.name)>-1&&(t+=" selected"),t+=" ",1==n.disabled&&(t+=" disabled"),t+='\' role="radio" aria-checked="',e.values&&e.values.indexOf(n.name)>-1?t+="true":t+="false",t+='" data-value="'+n.value+'" data-name="'+n.name+'">',e.showLabels&&(t+="<div class='iconOptionLabel",e.name&&(t+="_"+e.name),t+="'>"+n.label+"</div>"),t+="</div>\n\t";return t+="\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/IconPicker",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.IconPicker=i)}(),define("baglass/core-client/js/core-client/ui/properties/IconPicker",["./BaseProperty","./templates/IconPicker","jquery","lodash","../../utils/Utils","../KeyCodes"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({init:function(e){this.events={},this.events["clicktap .property_"+e.id+" .iconOption"]="_handleClick",this.events["keydown .property_"+e.id+" .iconOption"]="_handleKeyDown",this.nestedUIControl=!1,this.useToggling=!1,this.allowMultiple=!1,this.showLabels=!1,a.inherited("init",this,arguments),n.extend(this,e),n.isString(e.values)&&(this.values=[e.values])},doRender:function(){var e=t({name:this.name,label:this.label,items:this.items,id:this.id,readOnly:this.readOnly,values:this.values,ariaLabel:this.ariaLabel,nestedUIControl:this.nestedUIControl,showLabels:this.showLabels});this.$el.append(e);var n=this;this.$el.find(".property_"+this.id+" .iconOption").each((function(e){s.setIcon(i(this),n.items[e].value,n.items[e].label,n.items[e].label),i(this).find(".svgIcon").attr("tabindex",this.readOnly?"-1":"0")}))},getSelectedOptions:function(){var e=[];return this.$el.find(".property_"+this.id+" .iconOption.selected").each((function(){var t={value:i(this).data("value"),name:i(this).data("name")};e.push(t)})),e},_handleClick:function(e){this._selectNode(e.target)},_handleKeyDown:function(e){e.keyCode!==o.ENTER&&e.keyCode!==o.SPACE||this._selectNode(e.target)},_selectNode:function(e){var t=i(e).closest(".iconOption");this.useToggling&&t.hasClass("selected")||this.allowMultiple||this._uncheckCurrentSelection(),!this.useToggling&&this.allowMultiple&&t.hasClass("selected")||this._updateSelectedNode(t),this._onChange(this.name,this.getSelectedOptions())},_updateSelectedNode:function(e){e.hasClass("selected")?e.attr("aria-checked","false").removeClass("selected"):e.attr("aria-checked","true").addClass("selected")},_uncheckCurrentSelection:function(){this.$el.find(".property_"+this.id+" .iconOption.selected").removeClass("selected").attr({"aria-checked":"false"})}});return a})),function(){var e,t,i=function(e){var t='<div class="propertyRow property_'+e.id;return 1==e.multiline?t+=" multiline":t+=" flex",t+='">\n\t<div class="propertyName ',1!=e.multiline&&(t+=" singleLine"),t+=" l_"+e.name+'">\n\t\t<div id="label_'+e.id+'" class="propertyNameText" title="'+e.label+'"',e.editable&&(t+='for="control_'+e.name+"_"+e.id+'"'),t+=">"+e.label+'</div>\n\t</div>\n\t<div class="',1!=e.multiline&&(t+="rightAlign"),t+=' inputContainer" style="overflow:hidden;">\n\t\t<div id="value_'+e.id+'" class="propertyValue ellipses textSelectable ',!0===e.editCallback&&(t+="secondaryEdit"+e.id+" clickable"),t+=" v_"+e.name+'"',e.direction&&(t+=' dir="'+e.direction+'"'),t+='>\n\t\t\t<input id="control_'+e.name+"_"+e.id+'"\n\t\t\t\ttype="'+e.inputType+'"\n\t\t\t\tclass="',"password"!=e.inputType&&e.ellipses&&(t+="ellipses"),t+=" blueText editable"+e.id+" newUXLook "+e.inputClass+'"\n\t\t\t\t',e.inputStyles&&(t+=' style="'+e.inputStyles+'"'),t+="\n\t\t\t\t",""!=e.placeHolderText&&(t+='placeholder="'+e.placeHolderText+'"'),t+='value="'+_.escape(e.value)+'"',e.direction&&(t+='\n\t\t\t\tdir="'+e.direction+'"'),e.ariaLabel&&(t+='\n\t\t\t\taria-label="'+e.ariaLabel+'"'),t+="\n\t\t\t\t",e.readOnly?t+=" readOnly":t+='tabindex="0" ',t+=">\n\t\t\t</input>\n\t\t</div>\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/InputLabel",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.InputLabel=i)}(),define("baglass/core-client/js/core-client/ui/properties/InputLabel",["./Input","./templates/InputLabel","lodash"],(function(e,t,i){"use strict";var n=e.extend({init:function(e){n.inherited("init",this,arguments),this.ellipses=!1},getHTMLTemplate:function(){return t},getTemplateOptions:function(){var e=n.inherited("getTemplateOptions",this,arguments);return i.extend(e,{label:this.label,multiline:this.multiline}),e}});return n})),function(){var e,t,i=function(e){var t,i,s=void 0!==n?n:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(i,(function(e){return t[e]||e})):""}),o='\n<div class="ba-theme-default ';e.id&&(o+="property_"+e.id),o+=" paletteColors ",e.selected&&(o+=" selected "),o+=" ",e.readOnly&&(o+="readOnly"),o+='" aria-label="',e.ariaLabel&&(o+=s(e.ariaLabel)+" "),o+=s(e.content.label)+'" tabindex="0" data-id="'+e.palette.id+'"',e.readOnly?o+=' role="presentation"':(o+=' role="button" aria-pressed= "',e.selected?o+="true":o+="false",o+='"'),o+='>\n\t<div class="paletteTop">\n\t\t<div class="paletteName ellipses" dir="'+e.direction+'">'+s(e.content.label)+'</div>\n\t\t<div class="paletteMenu" aria-label="'+e.showMorePalette+'" title="'+e.showMorePalette+'"></div>\n\t</div>\n\t<div class="paletteContent flex">\n\t';var a=!0===e.reverse?e.content.fills.slice().reverse():e.content.fills;if(o+="\n\t","continuous"===e.content.fillType){if(o+="\n\t\t","step"===e.content.renderMode){o+='\n\t\t\t<div class="gradientPalette" style="display: inline-flex;">\n\t\t\t\t';var l=a;if(l)for(var r=-1,d=l.length-1;r<d;)o+='\n\t\t\t\t<div class="gradientPalette-step" style="background: '+(u=l[r+=1]).fill+";height:100%;width:"+100/a.length+'%;"></div>\n\t\t\t\t';o+="\n\t\t\t</div>\n\t\t"}else{o+='\n\t\t\t<div class="gradientPalette" style=\'background:linear-gradient(to right, ';var c=a;if(c){r=-1;for(var h=c.length-1;r<h;)o+=""+(u=c[r+=1]).fill,r<a.length-1&&(o+=",")}o+=")'></div>\n\t\t"}o+="\n\t"}else{o+="\n\t\t";var p=a;if(p){r=-1;for(var u,f=p.length-1;r<f;)u=p[r+=1],o+="\n\t\t\t","simple"===e.content.fillType?(o+="\n\t\t\t\t",u&&(o+="\n\t\t\t\t\t","transparent"===u.toLowerCase()?o+='\n\t\t\t\t\t\t<div class="paletteOption" data-index='+r+' data-value="'+u+"\">\n\t\t\t\t\t\t\t<div class='transparentIndicator'></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t":(o+='\n\t\t\t\t\t\t<div class="paletteOption ',r>=e.maxColors&&(o+=" hidden "),o+='"  aria-hidden="',r>=e.maxColors?o+=" true ":o+=" false",o+='"data-index='+r+' data-value="'+u+"\" style='background:"+u+"'></div>\n\t\t\t\t\t"),o+="\n\t\t\t\t"),o+="\n\t\t\t"):"ImgPath"===e.content.fillType&&(o+='\n\t\t\t\t<div class="paletteOption ',r>=e.maxColors&&(o+=" hidden "),o+='"  aria-hidden="',r>=e.maxColors?o+=" true ":o+=" false",o+='"data-index='+r+' data-value="'+u.pattern+'" style="background: url('+e.content.path+u.pattern+(e.content.fileType||e.defaultImageType)+');"></div>\n\t\t\t'),o+="\n\t\t"}o+="\n\t\t ",a.length>e.maxColors&&(o+='\n\t\t <div class="paletteBottom">\n\t\t\t<a class="showColorsButton showMoreColors" tabindex="0" aria-label="'+e.showMoreColors+'">'+e.showMoreColors+'</a>\n\t\t\t<a class="showColorsButton showLessColors hidden" tabindex="0" aria-hidden=true aria-label="'+e.showLessColors+'">'+e.showLessColors+"</a>\n\t\t</div>\n\t\t"),o+="\n\t"}return o+="\n\t</div>\n</div>\n"},n=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(i){return i?i.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/NewPalette",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.NewPalette=i)}(),define("baglass/core-client/js/core-client/ui/ContextMenuButton",["react","prop-types","ca-ui-carbon-toolkit","./KeyCodes"],(function(e,t,i,n){var s=e.Component,o=i.ContextMenu,a=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={open:!1},t.menuItems=e.menuItems,t.placement=e.placement,t.domNodeToAttachTo=e.domNodeToAttachTo,t.id=e.id,t}return _inherits(i,t),_createClass(i,[{key:"openMenu",value:function(e){e.stopPropagation(),this.setState({open:!this.state.open})}},{key:"onChange",value:function(e,t){this.setState({open:!this.state.open}),this.props.onChange(e,t)}},{key:"onKeyPressed",value:function(e){e.stopPropagation(),e.keyCode!==n.ENTER&&e.keyCode!==n.SPACE||this.setState({open:!this.state.open})}},{key:"_closeMenu",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var t=this.state.open;return e.createElement("div",{className:"contextMenuButton "+this.id,tabIndex:"0",onClick:this.openMenu.bind(this),onKeyDown:this.onKeyPressed.bind(this),"aria-label":this.props.ariaLabel,role:"button"},e.createElement("svg",{className:"svgIcon"},e.createElement("use",{xlinkHref:"#common-menuoverflow"})),t&&e.createElement(o,{theme:!0,placement:this.placement,onClose:this._closeMenu.bind(this),onChange:this.onChange.bind(this),domNodeToAttachTo:this.domNodeToAttachTo,className:"ba-theme-default glassContextMenu "+this.id},e.createElement(o.List,{content:this.menuItems,name:"contextMenu"})))}}]),i}(s);return a.propTypes={onChange:t.func.isRequired,menuItems:t.array.isRequired,domNodeToAttachTo:t.object,placement:t.string,id:t.string.isRequired,ariaLabel:t.string},a.defaultProps={placement:"bottom",domNodeToAttachTo:document.body,ariaLabel:""},a})),define("baglass/core-client/js/core-client/ui/properties/NewPalette",["./BaseProperty","./templates/NewPalette","./SingleLineLinks","react","jquery","../../nls/StringResources","lodash","../KeyCodes","../ContextMenuButton","../../utils/Utils","../../utils/BidiUtil","authoring-common"],(function(e,t,i,n,s,o,a,l,r,d,c,h){"use strict";var p=h.CustomPalette,u=[{id:"edit_palette",label:o.get("edit_palette"),value:"edit"},{id:"duplicate_palette",label:o.get("duplicate_palette"),value:"duplicate"},{id:"reverse_palette",label:o.get("reverse_palette"),value:"reverse"},{id:"delete_palette",label:o.get("delete_palette"),value:"delete"}],f=e.extend({init:function(e){if(this.readOnly=!0,this.maxColors=26,this.reverse=!1,this.defaultImageType=".svg",this.events={},this.events["clicktap .property_"+e.id+".paletteColors:not(.readOnly)"]="_handleClick",this.events["keydown .property_"+e.id+".paletteColors:not(.readOnly)"]="_handleKeyDown",this.events["clicktap .property_"+e.id+" .showColorsButton"]="_showHideColorsClick",this.events["keydown .property_"+e.id+" .showColorsButton"]="_showHideColorsKeyDown",f.inherited("init",this,arguments),a.extend(this,e),this.hasSection&&this.sectionLabel){var t={el:this.$el,name:this.name,id:this.id+"topSection",type:"SingleLineLinks",items:[{align:"left",items:[{type:"text",name:"currentPaletteLabel",value:this.sectionLabel}]}]};(this.canCreatePalettes||void 0===this.canCreatePalettes)&&t.items.push({align:"right",items:[{name:"addNewPalette",type:"icon",svgIcon:"common-add-new",iconTooltip:e.newPaletteLabel||o.get("createPalette"),clickCallback:this.openCreateDialog.bind(this)}]}),this.header=new i(t)}this.changePaletteCb&&this.linkLabel&&(this.link=new i({el:this.$el,name:this.name,id:this.id,type:"SingleLineLinks",items:[{align:"right",items:[{type:"text",name:"changePalette",value:this.linkLabel,clickCallback:this.changePaletteCb}]}]}))},_getContainerNode:function(){return this.containerNode||(this.containerNode=this.$el.parentsUntil(".propertyUIControl.flexHeight"),this.containerNode||(this.containerNode=this.$el)),this.containerNode},deselectPreviousPalette:function(){this._getContainerNode().find(".paletteColors.selected").removeClass("selected").attr("aria-pressed","false")},deselectPalette:function(){this._getContainerNode().find(".property_"+this.id).removeClass("selected").attr("aria-pressed","false")},selectPalette:function(){this._getContainerNode().find(".property_"+this.id).addClass("selected").attr("aria-pressed","true")},handleSelectPalette:function(){this.deselectPreviousPalette(),this.selectPalette(),this._onChange(this.name,{reverse:this.reverse,id:this.palette.id,isSystem:this.palette.systemPalette})},_handleClick:function(e){"svg"!==e.target.tagName.toLowerCase()&&this.handleSelectPalette()},_handleKeyDown:function(e){e.keyCode!==l.ENTER&&e.keyCode!==l.SPACE||-1===e.target.className.indexOf("contextMenuButton")&&this.handleSelectPalette()},showHiddenColors:function(e){var t=s(e.target).parents(".paletteContent");t.find(".showLessColors").hasClass("hidden")?t.find(".paletteOption.hidden").toggleClass("hidden"):s(t[0].querySelectorAll(".paletteOption:nth-child(n+"+(this.maxColors+1)+")")).toggleClass("hidden"),t.find(".showColorsButton").toggleClass("hidden"),t.find(".showColorsButton.hidden").attr("aria-hidden",!0),t.find(".showColorsButton:not(.hidden)").attr("aria-hidden",!1)},_showHideColorsClick:function(e){e.stopPropagation(),this.showHiddenColors(e)},_showHideColorsKeyDown:function(e){e.stopPropagation(),e.keyCode!==l.ENTER&&e.keyCode!==l.SPACE||this.showHiddenColors(e)},onMenuChange:function(e,t){var i=this,s=void 0;switch(t){case"edit":var l=n.createElement(p,{key:"editPalette",glassContext:this.glassContext,paletteDef:this.palette.content,paletteId:this.palette.id,paletteType:this.createPaletteType,removeDialog:d.removeTemporaryContainer.bind(this),ref:function(e){s=e}});d.reactRender(l,d.createTemporaryContainer()).then((function(){s.openDialog()}));break;case"duplicate":var r=a.extend({},this.palette.content);r.label=o.get("palette_copy",{paletteName:r.label});var c=n.createElement(p,{key:"duplicatePalette",glassContext:this.glassContext,paletteDef:r,paletteType:this.createPaletteType,removeDialog:d.removeTemporaryContainer.bind(this),type:this.isAdminUI?"global":"",ref:function(e){s=e}});d.reactRender(c,d.createTemporaryContainer()).then((function(){s.openDialog()}));break;case"reverse":return this.reverse=!this.reverse,this._onChange(this.name,{reverse:this.reverse}),this.reRender();case"delete":this.glassContext.getSvc(".Palette").then((function(e){e.deletePalette(i.palette.id)}))}},_filterItems:function(){var e=this;return this.menuItems?u.filter((function(t){return-1!==e.menuItems.indexOf(t.value)})):u},onPaletteCreated:function(e){this.onCreatePalette&&this.onCreatePalette(e)},openCreateDialog:function(){var e=void 0,t=n.createElement(p,{key:"createPalette",glassContext:this.glassContext,paletteType:this.createPaletteType,ref:function(t){e=t},onPaletteCreated:this.onPaletteCreated.bind(this),removeDialog:d.removeTemporaryContainer.bind(this)});d.reactRender(t,d.createTemporaryContainer()).then((function(){e.openDialog()}))},reRender:function(){return this.$el.find("*[class^='property_"+this.id+"'], *[class*=' property_"+this.id+"']").remove(),this.doRender()},doRender:function(){this.header&&this.header.doRender();var e=t({id:this.id,palette:this.palette,readOnly:this.readOnly,ariaLabel:this.ariaLabel,selected:this.selected,maxColors:this.maxColors,showLessColors:o.get("showLessColors"),showMoreColors:o.get("showMoreColors"),content:this.palette.content,direction:c.resolveBaseTextDir(this.palette.content.label),defaultImageType:this.defaultImageType,reverse:this.reverse,showMorePalette:o.get("showMoreColorPalette")});this.$el.append(e),this.link&&this.link.doRender();var i=this._filterItems();if(i.length>0){var s=this.$el.find(".property_"+this.id+" .paletteMenu").get(0),a=n.createElement(r,{menuItems:i,onChange:this.onMenuChange.bind(this),domNodeToAttachTo:document.body,id:this.id,ariaLabel:o.get("moreActionsForPalette",{paletteName:this.palette.content.label})});return d.reactRender(a,s)}return Promise.resolve()}});return f})),function(){var e,t,i=function(e){var t='<table role="presentation" class="propertyRow property_'+e.id+'">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td class="ownerImage">\n\t\t\t\t<div class="wft_owner"></div>\n\t\t\t</td>\n\t\t\t<td class="ownerName">\n\t\t\t\t<div class="propertyName lightText">'+e.strings.owner+'</div>\n\t\t\t\t<div class="propertyValue darkText owner ellipses">'+_.escape(e.owner)+'</div>\n\t\t\t</td>\n\t\t\t<td class="horizontalSeparator">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<table class="propertyDetails" role="presentation">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="propertyName singleLine wrap lightText">'+e.strings.created+'</td>\n\t\t\t\t\t\t<td class="propertyValue creationTime wrap darkText">'+e.creationTime+'</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="propertyName singleLine wrap lightText">'+e.strings.modified+'</td>\n\t\t\t\t\t\t<td class="propertyValue modificationTime wrap darkText">'+e.modificationTime+"</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t";return e.refreshTime&&(t+='\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="propertyName singleLine wrap lightText">'+e.strings.dataRefreshed+'</td>\n\t\t\t\t\t\t<td class="propertyValue modificationTime wrap darkText">'+e.refreshTime+"</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t"),t+='\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="propertyName singleLine wrap lightText">'+e.strings.file+'</td>\n\t\t\t\t\t\t<td class="propertyValue fileType wrap darkText">'+e.fileType+"</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/OwnerRow",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.OwnerRow=i)}(),define("baglass/core-client/js/core-client/ui/properties/OwnerRow",["./BaseProperty","./templates/OwnerRow","lodash","../../nls/StringResources"],(function(e,t,i,n){"use strict";var s=e.extend({name:"ownerRow",ellipses:!0,init:function(e){s.inherited("init",this,arguments),i.extend(e,e)},doRender:function(){var e=t({owner:this.owner,modificationTime:this.modificationTime||"",creationTime:this.creationTime||"",fileType:this.fileType,id:this.id,refreshTime:this.refreshTime||"",strings:{owner:n.get("owner"),created:n.get("createdWithColon"),modified:n.get("modifiedWithColon"),file:n.get("typeWithColon"),dataRefreshed:n.get("dataRefWithColon")}});this.$el.append(e)}});return s})),function(){var e,t,i=function(e){var t='<div class="';e.nestedUIControl||(t+="propertyRow"),t+=" property_"+e.id,e.readOnly&&(t+=" disabled"),t+='"',e.ariaLabel&&(t+='aria-label="'+e.ariaLabel+'"'),t+='>\n\t<div class="collapsibleSectionToggle'+e.id+" palette ",e.name&&(t+="l_"+e.name),e.readOnly&&(t+=" disabled"),t+='">\n\t\t',e.label&&(t+='<div id="label_'+e.id+'" class="singleLine">'+e.label+"</div>"),t+='\n\t\t<div class="paletteContainer">\n\t\t\t<div class="pickedOption toggleSection'+e.id+'" aria-haspopup="true" data-value="'+e.value+'" role="button" tabindex="',e.readOnly?t+="-1":t+="0",t+='">\n\t\t\t';var i=e.value;if(i)for(var n=-1,s=i.length-1;n<s;)c=i[n+=1],t+="\n\t\t\t\t<div class='singlePaletteOption","Class"===e.selectedValueType&&(t+=" "+c),n>=e.maxLength&&(t+=" hiddenOption"),t+="' style='width:"+100/Math.min(e.value.length,e.maxLength)+"%;","ColorCode"===e.selectedValueType&&(t+="background:"+c.toLowerCase()+";"),"ImgPath"===e.selectedValueType&&(t+="background:url("+e.items[e.index].path+c+(e.items[e.index].fileType||e.defaultImageType)+');"'),t+="'></div>\n\t\t\t";t+="\n\t\t\t</div>\n\t\t\t",e.enableReorder&&(t+="\n\t\t\t<div class=\"orderButton\" role='button' tabindex='",e.readOnly?t+="-1":t+="0",t+='\'>\n\t\t\t\t<svg class="svgIcon">\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-swap"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t'),t+='\n\t\t</div>\n\n\t</div>\n\t<div class="collapsibleSection collapsibleOptions property_'+e.id,e.readOnly&&(t+=" disabled"),t+='" id="region_'+e.id+'" aria-hidden="true" aria-live="off" role="radiogroup"',e.ariaLabel?t+='aria-label="'+e.ariaLabel+'"':t+='aria-labelledby="label_'+e.id+'"',t+=">\n\t\t";var o=e.items;if(o)for(var a,l=-1,r=o.length-1;l<r;){a=o[l+=1],t+='\n\t\t\t<div class="paletteOption ',JSON.stringify(a.value).toLowerCase()===JSON.stringify(e.value).toLowerCase()&&(t+=" selected"),t+='" title="'+a.label+"\" data-name='"+a.name+'\' role="radio" tabindex="',e.readOnly?t+="-1":t+="0",t+='" aria-pressed="',JSON.stringify(a.value).toLowerCase()===JSON.stringify(e.value).toLowerCase()?t+="true":t+="false",t+='"aria-disabled="',e.readOnly?t+="true":t+="false",t+='">\n\t\t\t';var d=a.value;if(d)for(var c,h=-1,p=d.length-1;h<p;)c=d[h+=1],t+="\n\t\t\t\t<div class='singlePaletteOption","Class"===a.type&&(t+=" "+c),h>=e.maxLength&&(t+=" hiddenOption"),t+="' data-value=\""+c+"\" style='width:"+100/Math.min(a.value.length,e.maxLength)+"%;background:","ColorCode"===a.type&&(t+=""+c),"ImgPath"===a.type&&(t+="url("+a.path+c+(a.fileType||e.defaultImageType)+")"),t+=";'>\n\t\t\t\t</div>\n\t\t\t";t+="\n\t\t\t</div>\n\n\t\t"}return t+="\n\t</div>\n</div>"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/Palette",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.Palette=i)}(),define("baglass/core-client/js/core-client/ui/properties/Palette",["./BaseProperty","./templates/Palette","jquery","lodash","../KeyCodes"],(function(e,t,i,n,s){"use strict";var o=e.extend({init:function(e){this.events={},this.events["clicktap .property_"+e.id+" .paletteOption"]="_handleClick",this.events["keydown .property_"+e.id+" .paletteOption"]="_handleKeyDown",this.events["clicktap .property_"+e.id+" .orderButton"]="_handleReorderClick",this.events["keydown .property_"+e.id+" .orderButton"]="_handlerReorderKeydown",this.events["clicktap .collapsibleSectionToggle"+e.id]="toggleCollapsibleSection",this.events["keydown .collapsibleSectionToggle"+e.id]="_toggleCollapsibleSectionKeyDown",this.nestedUIControl=!1,this.open=!1,this.enableReorder=!1,this.reverse=!1,this.defaultImageType=".svg",this.maxValueLength=5,o.inherited("init",this,arguments),n.extend(this,e)},doRender:function(){this.index=this._getItemIndexFromName(this.selectedName);var e=t({name:this.name,label:this.label,items:this.items,id:this.id,readOnly:this.readOnly,value:this.getSelectedValueArray(),selectedValueType:this.getSelectedValueType(),ariaLabel:this.ariaLabel,nestedUIControl:this.nestedUIControl,enableReorder:this.enableReorder,index:this.index,maxLength:this.maxValueLength,defaultImageType:this.defaultImageType});if(this.$el.append(e),this.reverse){var i=this.$el.find(".property_"+this.id+" .pickedOption, .paletteOption");this._reverseChildren(i)}this.open&&this._doToggleCollapsibleSection()},toggleCollapsibleSection:function(){this.open=!this.open,this._doToggleCollapsibleSection(),this.onOpenChange&&this.onOpenChange(this.name,this.open)},getCollasibleDiv:function(){return this.$el.find(".collapsibleSection.property_"+this.id)},getToggleSectionNode:function(){return this.$el.find(".toggleSection"+this.id)},setSelectedColor:function(e,t){this._unselectPreviousColor(),this.index=e,this._updateSelectedNode(t),this._updatePickedPaletteNode(),this._onChange(this.name,this.getIsReversedAndSelectedItem())},getSelectedValueArray:function(){if(n.isArray(this.items))return this.items[this.index].value},getSelectedColorNode:function(){return this.$el.find(".property_"+this.id+" .selected")},getIsReversedAndSelectedItem:function(){return{reverse:this.reverse,value:this.getSelectedValueArray(),name:this.getSelectedItemName()}},handleSelectColor:function(e){var t=i(e.target).closest(".paletteOption"),n=t.data("name"),s=this._getItemIndexFromName(n);this.index!==s&&this.setSelectedColor(s,t),this.toggleCollapsibleSection()},getSelectedValueType:function(){if(n.isArray(this.items))return this.items[this.index].type},getSelectedItemName:function(){if(n.isArray(this.items))return this.items[this.index].name},_getItemIndexFromName:function(e){var t=void 0;return n.each(this.items,(function(i,n){i.name===e&&(t=n)})),t},_updatePickedPaletteNode:function(){var e=this.getSelectedValueType(),t=this.getSelectedValueArray(),n=this,s=this.$el.find(".property_"+this.id+" .pickedOption");s.children().each((function(s){if("ColorCode"===e)i(this).css("background",t[s]);else if("ImgPath"===e){var o=n.items[n.index],a=o.path+t[s]+(o.fileType||n.defaultImageType);i(this).css("background","url("+a+")")}else"Class"===e&&i(this).addClass(t[s])})),this.reverse&&this._reverseChildren(s)},_handleReorderClick:function(e){e.stopPropagation(),this._doReorder()},_handlerReorderKeydown:function(e){e.stopPropagation(),e.keyCode!==s.ENTER&&e.keyCode!==s.SPACE||this._doReorder()},_doReorder:function(){var e=this.$el.find(".property_"+this.id+" .pickedOption, .paletteOption");this._reverseChildren(e),this.reverse=!this.reverse,this._onChange(this.name,this.getIsReversedAndSelectedItem())},_reverseChildren:function(e){var t=this;e.each((function(){var e=i(this).children();e.removeClass("hiddenOption");var n=e.length-t.maxValueLength;e.slice(0,n).addClass("hiddenOption"),i(this).append(e.get().reverse())}))},_updateSelectedNode:function(e){e&&e.addClass("selected").attr("aria-pressed","true")},_handleKeyDown:function(e){e.keyCode!==s.ENTER&&e.keyCode!==s.SPACE||this.handleSelectColor(e)},_handleClick:function(e){this.handleSelectColor(e),e.stopPropagation()},_unselectPreviousColor:function(){this.getSelectedColorNode().removeClass("selected").attr("aria-pressed","false"),this.getToggleSectionNode().children().each((function(){i(this).css("background",""),i(this).hasClass("hiddenOption")?i(this).attr("class","singlePaletteOption hiddenOption"):i(this).attr("class","singlePaletteOption")}))},_toggleCollapsibleSectionKeyDown:function(e){e.keyCode!==s.ENTER&&e.keyCode!==s.SPACE||this.toggleCollapsibleSection()},_doToggleCollapsibleSection:function(){var e=this.getCollasibleDiv();e.toggleClass("visible");var t=e.hasClass("visible");this.$el.find(".property_"+this.id+" .toggleSection"+this.id).attr("aria-expanded",t?"true":"false"),e.attr("aria-hidden",t?"false":"true")}});return o})),define("baglass/core-client/js/core-client/ui/properties/PropertyPageView",["../View","lodash","../../nls/StringResources","../dialogs/ConfirmationDialog","../KeyCodes","./PropertyUIControl"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({_bIsCancelRequest:!1,init:function(e){a.inherited("init",this,arguments),t.extend(this,e),this.$el.on("keydown",this._keydownHandler.bind(this))},renderPropertyUIControl:function(e){return this._oPropertyUIControl=new o(e),this._oPropertyUIControl.render().then(function(){return this._oPropertyUIControl}.bind(this))},getPropertyUIControl:function(){return this._oPropertyUIControl},canHide:function(e){return this._bIsCancelRequest=!1,e.isEscape?(this._bIsCancelRequest=!0,this._canCancel()):this._canClose()},setFocus:function(){this._oPropertyUIControl.focus()},onHide:function(){return this._bIsCancelRequest||!this._oPropertyUIControl?Promise.resolve(!0):this._oPropertyUIControl.onClose().then(function(){return this._doSave()}.bind(this)).then(function(){this._oPropertyUIControl.remove()}.bind(this))},_canClose:function(){return this._oPropertyUIControl?this._oPropertyUIControl.onClose().then(function(){return!this._oPropertyUIControl.hasValidationError()}.bind(this)):Promise.resolve(!0)},_canCancel:function(){return!this._needToConfirmCancel()||this._confirmCancel()},_doSave:function(){},_needToConfirmCancel:function(){return this._oPropertyUIControl.hasModifiedProperties()},_closeSlideout:function(){this.slideout.hide()},_confirmCancel:function(){return new Promise((function(e,t){new n("confirmCancel",i.get("confirmCancel"),i.get("confirmCancelMessage")).confirm(e,t)}))},_keydownHandler:function(e){var t=!0;return(e.keyCode||e.which)===s.s&&e.ctrlKey&&(this._closeSlideout(),t=!1),t||e.stopPropagation(),t}});return a})),define("baglass/core-client/js/core-client/ui/properties/PropertyTabView",["../View","lodash","./PropertyUIControl"],(function(e,t,i){"use strict";var n=e.extend({init:function(e){n.inherited("init",this,arguments),t.extend(this,e)},renderPropertyUIControl:function(e){return this._oPropertyUIControl=new i(e),this._oPropertyUIControl.render().then(function(){return this._oPropertyUIControl}.bind(this))},getPropertyUIControl:function(){return this._oPropertyUIControl},onClose:function(){return this._oPropertyUIControl.onClose()},getModifiedProperties:function(){return this._oPropertyUIControl.getModifiedProperties()},hasValidationError:function(){return this._oPropertyUIControl.hasValidationError()}});return n})),function(){var e,t,i=function(e){return'<div class="propertyRow wrap property_'+e.id+' sectionLabel">'+e.label+"</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/SectionLabel",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.SectionLabel=i)}(),define("baglass/core-client/js/core-client/ui/properties/SectionLabel",["./BaseProperty","./templates/SectionLabel","lodash"],(function(e,t,i){"use strict";var n=e.extend({init:function(e){n.inherited("init",this,arguments),i.extend(this,e)},doRender:function(){var e=t({label:this.label,id:this.id});this.$el.append(e)},processStaticValidation:function(){}});return n})),function(){var e,t,i=function(e){return'<div class="separator property_'+e.id+'"></div>'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/Separator",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.Separator=i)}(),define("baglass/core-client/js/core-client/ui/properties/Separator",["./BaseProperty","./templates/Separator","lodash"],(function(e,t,i){"use strict";var n=e.extend({init:function(e){n.inherited("init",this,arguments),i.extend(this,e)},doRender:function(){var e=t({id:this.id});this.$el.append(e)},processStaticValidation:function(){}});return n})),function(){var e,t,i=function(e){return'<div class="split flex property_'+e.id+'">\n\t<div class="splitLeft">\n\t</div>\n\t<div class="splitRight">\n\t</div>\n</div>'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/Split",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.Split=i)}(),define("baglass/core-client/js/core-client/ui/properties/Split",["./PropertyContainerBaseClass","./PropertyUIControl","./templates/Split","lodash"],(function(e,t,i,n){"use strict";var s=e.extend({ellipses:!0,init:function(e){this.events={},s.inherited("init",this,arguments),n.extend(this,e)},doRender:function(){for(var e=[],t=[],n=0;n<this.items.length;n+=1)"left"===this.items[n].align?e=this.items[n].items:"right"===this.items[n].align&&(t=this.items[n].items);var s=i({disabled:this.disabled,id:this.id,readOnly:this.readOnly,name:this.name,styles:this.styles,role:this.role,hidden:this.hidden});return this.$el.append(s),this._render(e,t)},getSplitLeftDiv:function(){return this.$el.find(".property_"+this.id+" .splitLeft")},getSplitRightDiv:function(){return this.$el.find(".property_"+this.id+" .splitRight")},_render:function(e,t){return this.propertyUIControlLeft=this._renderSplit(this.getSplitLeftDiv(),e),this.propertyUIControlRight=this._renderSplit(this.getSplitRightDiv(),t),this.processIndent(),this.propertyUIControlLeft.render().then(function(){return this.propertyUIControlRight.render()}.bind(this))},_renderSplit:function(e,i){return new t({glassContext:this.glassContext,el:e,readOnly:this.readOnly,items:i,onChange:this.onChange,primaryUIControl:!1})}});return s})),function(){var e,t,i=function(e){return'<div class="tabbable">\n  <ul class="nav nav-tabs" role="tablist">\n  </ul>\n  <div class="tab-content">\n  </div>\n</div>'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/TabControl",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.TabControl=i)}(),define("baglass/core-client/js/core-client/ui/properties/TabControl",["./BaseProperty","./templates/TabControl","../KeyCodes","jquery","lodash","../../utils/ClassFactory"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({tabLabelPrefix:"tabLabel_",init:function(e){this.events={},this.events["keydown .tab"+e.id]="_handleKeyDown",a.inherited("init",this,arguments),s.extend(this,e),this._tabs=[]},render:function(){var e=t({});if(this.$el.append(e),0!==this.items.length){var i=0;return this.items.forEach(function(e,t){this._createTab(e,t),!0===e.selected&&(i=t)}.bind(this)),this.selectTab(this._tabs[i])}return Promise.resolve()},remove:function(){a.inherited("remove",this,arguments),this._tabs.forEach((function(e){e.tabContent&&e.tabContent.remove()})),this._tabs=[]},onClose:function(){var e=[];return this._tabs.forEach((function(t){t.tabContent&&t.tabContent.onClose&&e.push(t.tabContent.onClose())})),Promise.all(e)},_handleKeyDown:function(e){if(e.keyCode!==i.LEFT_ARROW&&e.keyCode!==i.RIGHT_ARROW)return!0;var t=n(e.target),s=Number(t.attr("tabNumber"));return 37===e.keyCode?s=0===s?this._tabs.length-1:s-1:39===e.keyCode&&(s=s>=this._tabs.length-1?0:s+1),this.$el.find(".tabNumber"+s).focus(),this.selectTab(this._tabs[s]),e.stopPropagation(),!1},selectTab:function(e){return e&&e.item?this._selectedTabObject&&e.item.name===this._selectedTabObject.item.name?Promise.resolve():(this._hideTabContent(this._selectedTabObject),this._selectedTabObject=e,this._showTabContent(this._selectedTabObject).then(function(){this.onTabChange&&this.onTabChange(this.name,e.item)}.bind(this))):Promise.reject()},selectTabByName:function(e){var t=s.find(this._tabs,(function(t){return t.item.name===e}));return this.selectTab(t)},_hideTabContent:function(e){e&&(e.tabContent&&e.tabContent.hide&&(e.tabContent.hide(),e.tabContent.$el.attr("aria-hidden","true")),e.pane.removeClass("active"),e.label.removeClass("active"),e.label.attr("aria-selected","false"),e.label.attr("tabindex","-1"))},_showTabContent:function(e){return e.pane.addClass("active"),this._populateTab(e).then(function(){return e.tabContent.show(),e.tabContent.$el.attr("aria-hidden","false"),e.label.addClass("active"),e.label.attr("aria-selected","true"),e.label.attr("tabindex","0"),!0}.bind(this))},_createTab:function(e,t){var i={};i.item=e,i.pane=this._createTabPane(t),i.label=this._createTabLabel(i,t),this.$el.find("div.tab-content").append(i.pane),this.$el.find("ul.nav").append(i.label),this.processStaticValidation.call(s.extend({},this,{staticValidationCallback:i.item.staticValidationCallback}),i.label.find("a")),this._tabs.push(i)},_createTabLabel:function(e,t){var i=n("<a>",{class:this.tabLabelPrefix+e.item.name.replace(" ","_"),html:e.item.name}),s=n("<li></li>",{id:this.id+t,role:"tab","aria-selected":"false",class:"tab"+this.id+" tabNumber"+t,tabNumber:t,tabindex:"-1"});return s.on("primaryaction",function(e){e.preventDefault();var t=Number(e.currentTarget.getAttribute("tabNumber"));this.selectTab(this._tabs[t])}.bind(this)),s.append(i)},_populateTab:function(e){return e.tabContent?Promise.resolve(!0):o.loadModule(e.item.module).then(function(t){return e.item.el=e.pane,e.item.glassContext=this.glassContext,this.onChange&&!e.item.onChange&&(e.item.onChange=this.onChange),e.tabContent=new t(e.item),e.tabContent.render()}.bind(this)).then((function(){return e.tabContent.$el.attr("aria-hidden","false"),e.tabContent.show&&e.tabContent.show(),this}))},_createTabPane:function(e){return n("<div>",{class:"tab-pane",role:"tabpanel","aria-labelledby":this.id+e,"aria-hidden":"true"})},getModifiedProperties:function(){var e={};return this._tabs.forEach((function(t){t.tabContent&&t.tabContent.getModifiedProperties&&n.extend(e,t.tabContent.getModifiedProperties())})),e},hasValidationError:function(){for(var e=0;e<this._tabs.length;e+=1){var t=this._tabs[e];if(t.tabContent&&t.tabContent.hasValidationError&&t.tabContent.hasValidationError())return!0}return!1}});return a})),function(){var e,t,i=function(e){var t='<div class="propertyRow';return 1==e.multiline&&(t+=" multiline"),t+=" property_"+e.id+'">\n\t<div class="flex">\n\t\t<div class="propertyName toggleEdit'+e.id+" l_"+e.name+'">\n\t\t\t<label for="control_'+e.name+"_"+e.id+'">'+e.label+"</label>\n\t\t</div>\n\t\t",!0===e.editable&&(t+='\n\t\t\t<div class="propertyNameEdit toggleEdit'+e.id+'" role="img" title="'+e.strings.edit+'">\n\t\t\t\t<svg class="svgIcon editIcon editIcon'+e.id+'" role="presentation">\n\t\t\t\t\t<title>'+e.strings.edit+'</title>\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-edit"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t'),t+="\n \t\t",!1===e.multiline&&(t+='\n\t\t\t<textarea id="control_'+e.name+"_"+e.id+'" rows="1" class="propertyValue rightAlign',1==e.editable&&(t+=" toggleEdit"+e.id+" editable"+e.id),t+=" wrap v_"+e.name+'"',!1===e.editable&&(t+=' readOnly="true"'),e.direction&&(t+=' dir="'+e.direction+'"'),e.editable||(t+=' readOnly="true"'),t+=" ",""!=e.placeHolderText&&(t+='placeholder="'+e.placeHolderText+'"'),t+=' tabindex="0">'+_.escape(e.value)+"</textarea>\n \t\t"),t+="\n\t</div>\n \t",1==e.multiline&&(t+='\n\t\t<textarea id="control_'+e.name+"_"+e.id+'" rows="1" class="propertyValue',1==e.editable&&(t+=" toggleEdit"+e.id+" editable"+e.id),t+=" wrap v_"+e.name,e.readOnly&&(t+=" changeTextColor"),t+='"',!1===e.editable&&(t+=' readOnly="true"'),e.direction&&(t+=' dir="'+e.direction+'"'),e.editable||(t+=' readOnly="true"'),t+=" ",""!=e.placeHolderText&&(t+='placeholder="'+e.placeHolderText+'"'),t+=' tabindex="0">'+_.escape(e.value)+"</textarea>\n\t"),t+="\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/TextArea",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.TextArea=i)}(),define("baglass/core-client/js/core-client/ui/properties/TextArea",["./BaseProperty","../../utils/BidiUtil","./templates/TextArea","jquery","lodash","../../nls/StringResources"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({init:function(e){e.editable&&(this.events||(this.events={}),this.events["input .editable"+e.id]="_handleEditInput",this.events["keydown .editable"+e.id]="_handleEditKeydown"),a.inherited("init",this,arguments),s.isString(e.placeHolderText)||(e.placeHolderText=""),s.extend(this,e),this.preserveLineBreak=!0},doRender:function(){var e=i({id:this.id,label:this.label,value:this.value,multiline:this.multiline,direction:t.resolveBaseTextDir(this.value,!0),editable:this.editable&&!this.readOnly,name:this.name,readOnly:this.readOnly,strings:{edit:o.get("edit")},placeHolderText:this.placeHolderText});this.$el.append(e),this._setAutoGrow()},_handleEditKeydown:function(e){if(27===e.keyCode)return this._onEscFromInput(e);this._setAutoGrow()},_handleEditInput:function(){this._setAutoGrow()},_setAutoGrow:function(){var e=this.$el.find("textarea").get(0);e&&e.scrollHeight>e.clientHeight&&(n(e).addClass("capEditableHeight"),e.style.height=e.scrollHeight+"px")},getHTMLControl:function(){return this._htmlControl||(this._htmlControl=this.getPropertyNode().find("textarea")),this._htmlControl}});return a})),function(){var e,t,i=function(e){var t='<div class="';return e.nestedUIControl||(t+="propertyRow propertyRowLineHeight"),t+=" property_"+e.id,e.readOnly&&(t+=" disabled"),t+=' clickable">\n\t',e.label&&(t+='\n\t\t<div class="propertyName singleLine propertyNameText l_'+e.name+'" title="'+e.label+'" id="label'+e.id+'">'+e.label+"</div>\n\t"),t+='\n\n\t<div class="toggleButtonContainer toggleButton'+e.id+'">\n\t\t<div class="toggleButton',null==e.checkedLabel&&null==e.uncheckedLabel&&(t+=" checkMarkLabel"),!0===e.checked&&(t+=" checked"),t+='" tabindex="0" role="checkbox" aria-checked="',e.checked?t+="true":t+="false",t+='" aria-disabled="',e.readOnly?t+="true":t+="false",t+='"',e.label&&(t+=' aria-labelledby="label'+e.id+'"'),e.ariaLabel&&(t+=' aria-label="'+e.ariaLabel+'"'),t+=">\n\t\t\t",null!=e.checkedLabel&&(t+="<span>"+e.checkedLabel+"</span>"),t+="\n\t\t\t",null!=e.uncheckedLabel&&(t+="<span>"+e.uncheckedLabel+"</span>"),t+="\n\t\t</div>\n\t</div>\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/ToggleButton",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.ToggleButton=i)}(),define("baglass/core-client/js/core-client/ui/properties/ToggleButton",["./BaseProperty","./templates/ToggleButton","lodash"],(function(e,t,i){"use strict";var n=e.extend({buttonSelector:".toggleButton",init:function(e){this.events={},this.events["clicktap .property_"+e.id]="_handleClick",this.events["keydown .property_"+e.id]="_handleKeyDown",this.checked=!1,this.nestedUIControl=!1,n.inherited("init",this,arguments),i.extend(this,e)},doRender:function(){var e=t({label:this.label,checked:this.checked,id:this.id,name:this.name,readOnly:this.readOnly,uncheckedLabel:this.uncheckedLabel,checkedLabel:this.checkedLabel,nestedUIControl:this.nestedUIControl,ariaLabel:this.ariaLabel});this.$el.append(e),this.disabled&&this.disable()},getHTMLControl:function(){return this.getPropertyNode().find(this.buttonSelector)},_handleClick:function(e){return this._toggleButton(),e.stopPropagation(),!1},isChecked:function(){return this.getHTMLControl().hasClass("checked")},_toggleButton:function(){this.setValue(!this.isChecked(),!0)},_hasValueChanged:function(e){return e!==this.isChecked()},check:function(e){this.setValue(!0,e)},uncheck:function(e){this.setValue(!1,e)},setValue:function(e,t){var i=this.getHTMLControl();t&&this._onChange(this.name,e),e?i.addClass("checked"):i.removeClass("checked"),i.attr("aria-checked",!!e&&"true")},_handleKeyDown:function(e){32!==e.keyCode&&13!==e.keyCode||this._toggleButton()}});return n})),function(){var e,t,i=function(e){var t='<div class="';return e.nestedUIControl||(t+="propertyRow"),t+=" property_"+e.id,e.readOnly&&(t+=" disabled"),t+=" ",e.name&&(t+=e.name+"}"),t+='" ',e.ariaLabel&&(t+='aria-label="'+e.ariaLabel+'"'),t+='>\n\t<div class="toggledComboCheckBox"></div>\n\t<div class="toggledComboOptions">\n\t\t<div class="toggledComboInput"></div>\n\t\t<div class="toggledComboDropDown"></div>\n\t</div>\n\t',e.toggledComboHint&&(t+="<div class='toggledComboHint'>"+e.toggledComboHint+"</div>"),t+="\n</div>\n"};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/ToggledCombo",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.ToggledCombo=i)}(),define("baglass/core-client/js/core-client/ui/properties/ToggledCombo",["./BaseProperty","./CheckBox","./Input","./DropDown","./ToggleButton","./templates/ToggledCombo","lodash"],(function(e,t,i,n,s,o,a){"use strict";var l=e.extend({init:function(e){this.events={},this.nestedUIControl=!1,l.inherited("init",this,arguments),a.extend(this,e)},doRender:function(){var e=o({name:this.name,id:this.id,readOnly:this.readOnly,ariaLabel:this.ariaLabel,nestedUIControl:this.nestedUIControl,toggledComboHint:this.toggledComboHint});this.$el.append(e),this._renderCheckBox(),this._renderInput(),this._renderDropDown()},_renderCheckBox:function(){var e={el:this.$el.find(".property_"+this.id+" .toggledComboCheckBox")[0],id:this.id+"_checkbox",checked:this.checkBoxOptions.checked,name:this.checkBoxOptions.name,label:this.label,onChange:this._checkboxOnChange.bind(this)};this.checkBox=this.useToggleButton?new s(e):new t(e),this.checkBox.doRender()},_renderInput:function(){var e={el:this.$el.find(".property_"+this.id+" .toggledComboInput")[0],value:this.inputOptions.value,name:this.inputOptions.name,id:this.id+"_input",newLook:!0,highlightTextOnFocus:!0,ellipses:!1,inputClass:"narrowInput",customValidatorCallback:this._validateInput.bind(this),onChange:this._controlOnChange.bind(this),disabled:!this.checkBoxOptions.checked};this.input=new i(e),this.input.doRender()},_renderDropDown:function(){var e={el:this.$el.find(".property_"+this.id+" .toggledComboDropDown")[0],name:this.dropDownOptions.name,options:this.dropDownOptions.options,defaultValue:this.dropDownOptions.defaultValue,id:this.id+"_dropDown",ariaLabel:this.dropDownOptions.ariaDescribedby,onChange:this._controlOnChange.bind(this),disabled:!this.checkBoxOptions.checked,customValidatorCallback:this._validateDropDown.bind(this)};this.dropDown=new n(e),this.dropDown.doRender()},_validateInput:function(e){return this._validateBase(e,this.dropDown.getSelectedValue())},_validateDropDown:function(e){return this._validateBase(parseInt(this.input.getValue(),10),e)},_validateBase:function(e,t){var i=!0;return a.isFunction(this.validateInput)&&(i=this.validateInput(e,t)),{isValid:i,customHandler:this._resetInput.bind(this)}},_resetInput:function(){this.input.setValue(this.inputOptions.value),this.dropDown.setValue(this.dropDownOptions.defaultValue||this.dropDownOptions.options[0].value)},_checkboxOnChange:function(e,t){t?(this.input.enable(),this.dropDown.enable()):(this.input.disable(),this.dropDown.disable()),this._controlOnChange(t)},_controlOnChange:function(e){var t=this.getValues();a.isBoolean(e)&&(t[this.checkBoxOptions.name]=e),this._onChange(this.name,t)},getValues:function(){var e={};return e[this.checkBoxOptions.name]=this.checkBox.isChecked(),e[this.dropDownOptions.name]=this.dropDown.getSelectedValue(),e[this.inputOptions.name]=this.input.getValue(),e}});return l})),function(){var e,t,i=function(e){var t='<div class="';return e.nestedUIControl||(t+="propertyRow "),t+="property_"+e.id,e.readOnly&&(t+=" disabled"),t+=" ",e.name&&(t+=""+e.name),t+='"\n\t',e.ariaLabel&&(t+='aria-label="'+e.ariaLabel+'"'),t+='>\n\t<div class="twoStageComboControls"></div>\n</div>\n'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define?define("baglass/core-client/js/core-client/ui/properties/templates/TwoStageCombo",[],(function(){return i})):(window.__templates=window.__templates||{},window.__templates.TwoStageCombo=i)}(),define("baglass/core-client/js/core-client/ui/properties/TwoStageCombo",["./BaseProperty","./DropDown","./CollapsiblePicker","./Separator","./templates/TwoStageCombo","lodash"],(function(e,t,i,n,s,o){"use strict";var a=e.extend({init:function(e){this.events={},this.nestedUIControl=!1,this.collapsiblePickerOptions=[],a.inherited("init",this,arguments),o.extend(this,e),this.currentValue=this.dropDownOptions.defaultValue},doRender:function(){var e=s({name:this.name,id:this.id,readOnly:this.readOnly,ariaLabel:this.ariaLabel,nestedUIControl:this.nestedUIControl});this.$el.append(e),this.$controls=this.$el.find(".property_"+this.id+" .twoStageComboControls"),this._renderDropDown()},_onChange:function(e,t){this._updateCurrentValue(t),a.inherited("_onChange",this,arguments)},_onChangeForDropDown:function(e,t){for(var i=[],n=0;n<this.dropDownOptions.options.length;n++)i.push(this.dropDownOptions.options[n].value);var s=o.indexOf(i,t);this.collapsiblePickerOptions[s]?this._renderPickerControl(s):(this.collapsiblePicker&&(this._removeSeparator(),this._removeCollapsiblePicker()),t!==this.currentValue&&this._onChange(e,t))},_onChangeForCollapsiblePicker:function(e,t){this._onChange(e,t)},_updateCurrentValue:function(e){this.currentValue=e},_createControlNode:function(e){var t=document.createElement("div");return t.classList.add(e),this.$controls.append(t),t},_renderDropDown:function(){var e={id:this.id+"_dropDown",name:this.dropDownOptions.name,label:this.dropDownOptions.label,defaultValue:this.dropDownOptions.defaultValue,options:this.dropDownOptions.options,nestedUIControl:!0,el:this._createControlNode("twoStageComboControl"),onChange:this._onChangeForDropDown.bind(this)};this.dropDown=new t(e),this.dropDown.doRender();for(var i=0;i<this.dropDownOptions.options.length;i++){if(this.dropDownOptions.options[i].value===this.dropDownOptions.defaultValue){this._renderPickerControl(i);break}}},_renderSeparator:function(){this.separator=new n({id:this.id+"_separator",el:this.$controls[0],nestedUIControl:!0}),this.separator.doRender()},_renderPickerControl:function(e){var t=this.collapsiblePickerOptions[e];t&&(this._renderSeparator(),t.id=this.id+"_collapsiblePicker",t.el=this._createControlNode("twoStageComboControl"),t.open=!0,t.readOnly=!1,t.closeOnSelect=!1,t.nestedUIControl=!0,t.itemType="svg",t.onChange=this._onChangeForCollapsiblePicker.bind(this),this.collapsiblePicker=new i(t),this.collapsiblePicker.doRender())},_removeSeparator:function(){this.separator.hide(),this.separator.remove(),this.separator=null},_removeCollapsiblePicker:function(){this.collapsiblePicker.hide(),this.collapsiblePicker.remove(),this.collapsiblePicker.$el.remove(),this.collapsiblePicker=null}});return a})),define("baglass/core-client/js/core-client/ui/properties/all",["./Banner","./BaseProperty","./Button","./CheckBox","./CollapsiblePicker","./CollapsibleSection","./ColorPicker","./DropDown","./Footer","./HierarchicalList","./HintText","./HorizontalRadioButtonGroup","./IconCollection","./IconPicker","./Input","./InputLabel","./NewPalette","./OwnerRow","./Palette","./PropertyContainerBaseClass","./PropertyPageView","./PropertyTabView","./PropertyUIControl","./RadioButtonGroup","./SectionLabel","./Separator","./SingleLineLinks","./SingleLineValue","./Split","./TabControl","./TextArea","./ToggleButton","./ToggledCombo","./TwoStageCombo"],(function(){})),define("js/glass/propertiesBundle",(function(){}));