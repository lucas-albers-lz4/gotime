function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}define("baglass/api/ActionInterface",[],(function(){"use strict";return function(){this.execute=function(){},this.isVisible=function(){}}})),define("baglass/core-client/js/core-client/ui/core/Class",[],(function(){"use strict";var e=function(){};return e.extend=function(e,t){1===arguments.length&&(t=e,e=null);var n=this.prototype,i=n,r=Object.create(i),s=function(){"function"==typeof this.init&&this.init.apply(this,arguments)};return e&&(e.forEach((function(e){var t=e.prototype;0===Object.keys(t).length?Object.getOwnPropertyNames(t).filter((function(e){return"constructor"!==e})).forEach((function(e){r=Object.assign(r,_defineProperty({},e,t[e]))})):r=Object.assign(r,t)})),i=r,r=Object.create(r),"function"!=typeof t.init&&(t.init=function(){s.inherited("init",this,arguments)})),r=Object.assign(r,t),s.prototype=r,s.extend=this.extend,s.inherited=function(t,r,s){if("init"===t)"function"==typeof n[t]&&n[t].apply(r,s),e&&e.forEach((function(e){"function"==typeof e.prototype[t]&&e.prototype[t].apply(r,s)}));else if("function"==typeof i[t])return i[t].apply(r,s)},s},e})),define("baglass/core-client/js/core-client/ui/core/Events",["./Class"],(function(e){"use strict";var t=e.extend({init:function(){this._events={}},on:function(e,t,n){"function"!=typeof t&&console.log("ERROR in Events.on: Invalid event handler"),this._events[e]||(this._events[e]=[]),this._events[e].push({handler:t,context:n});var i=this;return{remove:function(){i.off(e,t,n)}}},off:function(e,t,n){var i=function(e,t){var n=t._events;if(!e)return n;var i=e.split(":");if((n={})[i[0]]=t._events[i[0]],i.length>1&&"*"!==i[1])n[e]=t._events[e];else if(i.length>1&&"*"===i[1])for(var r in t._events)0===r.indexOf(i[0]+":")&&(n[r]=t._events[r]);return n}(e,this);for(var r in i){var s=0,o=i[r];if(o)for(;s<o.length;)o[s].handler!==t&&t||o[s].context!==n&&n?s++:o.splice(s,1)}},trigger:function(e,t){var n=e.split(":"),i=[].concat(this._events.all||[]).concat(this._events[n[0]]||[]);n.length>1&&(i=i.concat(this._events[e]||[]));for(var r=0;r<i.length;r++)"function"==typeof i[r].handler&&i[r].handler.call(i[r].context,t,e)}});return t.prototype.emit=t.prototype.trigger,t})),define("baglass/core-client/js/core-client/utils/BidiUtil",[],(function(){"use strict";var e="auto",t={ar:"arab",ar_AE:"arab",ar_BH:"arab",ar_DJ:"arab",ar_DZ:"latn",ar_EG:"arab",ar_EH:"latn",ar_ER:"arab",ar_IL:"arab",ar_IQ:"arab",ar_JO:"arab",ar_KM:"arab",ar_KW:"arab",ar_LB:"arab",ar_LY:"latn",ar_MA:"latn",ar_MR:"arab",ar_OM:"arab",ar_PS:"arab",ar_QA:"arab",ar_SA:"arab",ar_SD:"arab",ar_SO:"arab",ar_SS:"arab",ar_SY:"arab",ar_TD:"arab",ar_TN:"latn",ar_YE:"arab"},n=function(){this._isIE=this._detectIE(navigator.userAgent),this.userPreferredTextDir=this._getUserPreferredTextDir()||e,this.LRE="‪",this.RLE="‫",this.PDF="‬",this.LRM="‎"};return n.prototype._detectIE=function(e){return/\b(MSIE|Trident|Edge)\b/.test(e)},n.prototype._getUserPreferredTextDir=function(){return this.userPreferredTextDir||(this.userPreferredTextDir=document.documentElement.getAttribute("data-pref-text-dir")),this.userPreferredTextDir},n.prototype._getNodeValue=function(e){return e.value||"INPUT"===e.tagName?e.value:e.textContent},n.prototype._setNodeValue=function(e,t){e.value||"INPUT"===e.tagName?e.value=t:e.textContent=t},n.prototype._isArabicChar=function(e){return e>=1568&&e<=1641||e>=1786&&e<=2047||e>=64336&&e<=65023||e>=65136&&e<=65276},n.prototype._isHebrewChar=function(e){return e>=1488&&e<=1535},n.prototype._isBidiChar=function(e){return this._isArabicChar(e)||this._isHebrewChar(e)},n.prototype._isLatinChar=function(e){return e>64&&e<91||e>96&&e<123},n.prototype._isAsianChar=function(e){return/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/.test(e)},n.prototype._handleInputEvent=function(e){this._resolveDirAttr(e.target)},n.prototype._addBidiEventListeners=function(e){if(!e._hasBidiEventListeners){e._hasBidiEventListeners=!0;for(var t=["keyup","cut","paste"],n=0;n<t.length;++n)e.addEventListener(t[n],this._handleInputEvent.bind(this),!1)}},n.prototype._resolveDirAttr=function(t){if(!this._isIE||this.userPreferredTextDir!==e&&this.userPreferredTextDir)t.dir=this.userPreferredTextDir||e;else{var n=this._getNodeValue(t);t.dir=this.resolveBaseTextDir(n)}},n.prototype._parseSTT=function(e,t){var n,i=t?">":":/@=[]'<>",r=[],s=0;for(n=0;n<e.length;n++)i.indexOf(e.charAt(n))>=0&&(r[s]=n,s++);return r},n.prototype.initElementForBidi=function(e){e&&(this._resolveDirAttr(e),this._isIE&&this._addBidiEventListeners(e))},n.prototype.enforceTextDirection=function(e){if(e){var t=this.resolveBaseTextDir(e),n=e;return"ltr"===t?n=this.LRE+n+this.PDF:"rtl"===t&&(n=this.RLE+n+this.PDF),n}return e},n.prototype.resolveBaseTextDir=function(t,n){var i=this.userPreferredTextDir;if(i||(i=e),i===e&&(!n||this._isIE)){for(var r=0;t&&r<t.length;r++){var s=t.charCodeAt(r);if(this._isBidiChar(s)){i="rtl";break}if(this._isLatinChar(s)){i="ltr";break}if(this._isAsianChar(t[r])){i="ltr";break}}this._isIE&&i===e&&(i="")}return i},n.prototype.enforceTextDirectionForSTT=function(e){if(e){var t,n=((e=this.removeMarkers(e)).match(/ > /g)||[]).length>0,i=this._parseSTT(e,n),r="",s=this.LRM,o=n?1:0;r=0===i.length?this.enforceTextDirection(e):this.enforceTextDirection(e.substring(0,i[0]-o));for(var a=0;a<i.length;a++)if(t=i[a]){var l=a<i.length-1?i[a+1]-o:e.length,c=e.substring(t+1+o,l);r=r+s+e.substring(t-o,t+o+1)+this.enforceTextDirection(c)}return r}return e},n.prototype.enforceTextDirectionForLocation=function(e){return this.enforceTextDirectionForSTT(e)},n.prototype.removeMarkers=function(e){return e.replace(/[\u202A\u202B\u202C\u200E]/g,"")},n.prototype._isArabicLocale=function(e){return e.match(/^ar[-_].*$/i)},n.prototype._useLatinNums=function(e){return!this._isArabicLocale(e)||t[e]&&"latn"===t[e]},n.prototype.enforceNumericShaping=function(t,n){if(this.bidiSupport&&this.userPreferredContentLocale.startsWith("ar")&&("number"==typeof t||"string"==typeof t)){var i=this.userPreferredTextDir;this.userPreferredTextDir===e&&(i=this.resolveBaseTextDir(t));var r="undefined"==typeof navigator?"":navigator.language||navigator.userLanguage||"";r=r.replace("-","_");var s=t;"number"==typeof t&&(s=t.toString());var o=this;return s.replace(/([0-9])|([\u0660-\u0669])|([\u0590-\u05FF\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FF\u0750-\u077F\u08A0-\u08E3\u200F\u202B\u202E\u2067\uFB50-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFC\uFDFE-\uFDFF\uFE70-\uFEFE]+)|([^0-9\u0590-\u05FF\u0660-\u0669\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FF\u0750-\u077F\u08A0-\u08E3\u200F\u202B\u202E\u2067\uFB50-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFC\uFDFE-\uFDFF\uFE70-\uFEFE\u0600-\u0607\u0609-\u060A\u060C\u060E-\u061A\u064B-\u066C\u0670\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u08E4-\u08FF\uFD3E-\uFD3F\uFDD0-\uFDEF\uFDFD\uFEFF\u0000-\u0040\u005B-\u0060\u007B-\u007F\u0080-\u00A9\u00AB-\u00B4\u00B6-\u00B9\u00BB-\u00BF\u00D7\u00F7\u02B9-\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u02FF\u2070\u2074-\u207E\u2080-\u208E\u2100-\u2101\u2103-\u2106\u2108-\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A-\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189\uA720-\uA721\uA788\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE]+)/g,(function(e,t,s,a,l){return s?n&&"ltr"===i||!n&&o._useLatinNums(r)?s.charCodeAt(0)-1632:s:t?n&&"rtl"===i||!n&&!o._useLatinNums(r)?String.fromCharCode(parseInt(t)+1632):t:(a?i="rtl":l&&(i="ltr"),e)}))}return t},n.prototype.setUserPreferredTextDir=function(e,t){this.userPreferredTextDir="",this.bidiSupport=!1,"true"===t&&(this.userPreferredTextDir=e.toLowerCase(),this.bidiSupport=!0)},n.prototype.setUserPreferredContentLocale=function(e){this.userPreferredContentLocale=e},new n})),define("baglass/core-client/js/core-client/utils/dom-utils",[],(function(){"use strict";return{getAncestorOfClass:function(e,t){for(var n=document;e&&e!==n;){if(e.className.split(" ").indexOf(t)>=0)return e;e=e.parentNode}return null},isTouchEvent:function(e){return 0===e.type.indexOf("touch")},isPointerTouch:function(e){return e.gesture&&"touch"===e.gesture.pointerType},isMultiTouchEvent:function(e){var t=e.originalEvent||e;return!!(t&&t.touches&&t.touches.length>1)},isGesture:function(e){return!!(e.gesture&&e.gesture.touches&&e.gesture.touches.length>0)},getEventPos:function(e){var t,n=function(e){return e&&(e.pageX||0===e.pageX)&&(e.pageY||0===e.pageY)};if(this.isGesture(e)){var i=e.gesture.touches[0];n(i)&&(t={pageX:i.pageX,pageY:i.pageY})}if(!t&&this.isTouchEvent(e)){var r=e.originalEvent||e;r&&r.touches.length>0&&n(r.touches[0])&&(t={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY})}return!t&&n(e)&&(t={pageX:e.pageX,pageY:e.pageY}),!t&&n(e.originalEvent)&&(t={pageX:e.originalEvent.pageX,pageY:e.originalEvent.pageY}),t||(t={pageX:0,pageY:0}),t},getEventTarget:function(e){if(this.isTouchEvent(e)){var t=e.originalEvent||e;if(t&&t.touches.length>0)return t.touches[0].target}return e.target},withinElementBoundaries:function(e,t){var n=this.getEventPos(e),i=t.getBoundingClientRect(),r=n.pageX>=i.left&&n.pageX<=i.right,s=n.pageY>=i.top&&n.pageY<=i.bottom;return r&&s}}})),define("baglass/core-client/js/core-client/utils/dnd/DnDManager",["jquery","lodash","../../ui/core/Class","../dom-utils"],(function(e,t,n,i){"use strict";return new(n.extend({dropTargets:null,currentDropTarget:null,init:function(){this.dropTargets=[],this.currentDropTarget={},this.addDropTarget(e("body")[0],".dialogBlocker",{accepts:function(){return!0}})},on:function(e,t,n,i,r){return e.on(t,n,i,r),{remove:function(){e.off(t,n,r)}}},addDropTarget:function(e,t,n){return"string"!=typeof t&&(n=t,t=null),this.removeDropTarget(e),this.dropTargets.push({el:e,selector:t,callbacks:n}),{remove:function(){this.removeDropTarget(e)}.bind(this)}},removeDropTarget:function(e){var n=t.find(this.dropTargets,(function(t){return t.el===e}));n&&this.dropTargets.splice(t.indexOf(this.dropTargets,n),1)},_isScrollDropSupported:function(){return!(!this.currentDropTarget.target||!this.currentDropTarget.target.callbacks.isScrollDropSupported)},_validateDropTarget:function(t,n,i){var r=t;return n&&((i.x+1>=e(window).innerWidth()||i.y+1>=e(window).height()||i.x<=1||i.y<=1)&&(r=r?this._getClosestTargetWithScrollSupport(r.node):this.lastActiveScrollableTarget),!r&&this.currentDropTarget&&(r=this._getClosestTargetWithScrollSupport(this.currentDropTarget.node))),r||{}},_getClosestTargetWithScrollSupport:function(t){var n=e(t).parents();n.splice(0,0,t);for(var i=null,r=0;r<n.length;r++)if(i=this._getDropTargetWithScrollSupport(n[r])){this.lastActiveScrollableTarget=i;break}return i},_getDropTargetWithScrollSupport:function(n){var i=null,r=t.find(this.dropTargets,function(i){var r=e(i.el);return i.selector&&(r=r.find(i.selector)),t.find(r,function(e){return e===n&&i.callbacks.isScrollDropSupported&&(!i.callbacks.accepts||i.callbacks.accepts(this.dragObject))}.bind(this))}.bind(this));return r&&(i={target:r,node:n}),i},getDropTargetFromPos:function(n,i){var r=i&&!i.disableScrollableDropZoneSupport,s=null,o=0,a=0,l=[];return t.each(this.dropTargets,function(i){var r=e(i.el);i.selector&&(r=r.find(i.selector)),t.each(r,function(e){var t=this.getTargetMatchInformation(n,e,i,s,o,a);t.isMatch&&(!i.callbacks.accepts||i.callbacks.accepts(this.dragObject)?(s={target:i,node:e},o=t.area,a=t.priority):i.callbacks.receiveEventsWhenNotAccepting&&l.push({target:i,node:e}))}.bind(this))}.bind(this)),(s=this._validateDropTarget(s,r,n))&&(s.nonActiveDropZones=l),s||{}},_isInRange:function(e,t,n){return e>=t&&e<t+n},_getPriority:function(e){var t=e.callbacks.priority;return"function"==typeof t&&(t=t()),t||0},getTargetMatchInformation:function(t,n,i,r,s,o){var a={},l=e(n),c=n.getBoundingClientRect();if(l.is(":visible")){var u=this._isInRange(t.x,c.left,c.width),d=this._isInRange(t.y,c.top,c.height);u&&d&&((a={area:c.width*c.height,priority:this._getPriority(i)}).isMatch=!r||a.priority>o||s>a.area&&a.priority>=o)}return a},getDropTargetFromNode:function(e){for(var t=null,n=0;n<this.dropTargets.length;n++)if(e===this.dropTargets[n].el){t=this.dropTargets[n];break}return t},dragObject:null,startDrag:function(t){if(!this.dragObject){e("body").addClass("preventSelection"),this.isDragStartCalled=!1,this.targetMap={};var n=i.isTouchEvent(t.event);this.dragObject={type:t.type,data:t.data,avatar:t.avatar,isTouch:n||void 0!==t.event.gesture};var r=i.getEventPos(t.event);this.dragObject.startPosition={x:r.pageX,y:r.pageY},this.setAvatar(t.avatar,t),this.callerCallbacks=t.callerCallbacks?t.callerCallbacks:{};var s=e(window);if(n&&(s=e(i.getEventTarget(t.event))),this.attachedMoveHandler=this.on(s,"mousemove touchmove",this.moveHandler.bind(this,t)),this.attachedUpHandler=this.on(s,"mouseup touchend touchcancel",this.upHandler.bind(this)),"mousedown"===t.event.type&&(this.attachedScrollHandler=this.on(e(t.event.target),"scroll",this.scrollHandler.bind(this))),t.currentDropZoneNode){var o=this.getDropTargetFromNode(t.currentDropZoneNode);o&&(this.currentDropTarget={target:o,node:t.currentDropZoneNode})}}},scrollHandler:function(){this.resetDragging()},_setAvatarPosition:function(t){if(this.avatar&&this.dragObject.position){this.avatar.parentNode||e("body").append(this.avatar);var n=t&&t.avatarXOffset?t.avatarXOffset:1,i=t&&t.avatarYOffset?t.avatarYOffset:1;e(this.avatar).css({left:this.dragObject.position.x+n+"px",top:this.dragObject.position.y+i+"px"})}},setAvatar:function(e,t){this.avatar=e,this._setAvatarPosition(t)},moveHandler:function(e,t){t.preventDefault();var n=i.getEventPos(t),r=n.pageX,s=n.pageY;if(this.dragObject.position={x:r,y:s},e.restrictToXAxis&&(this.dragObject.position.y=this.dragObject.startPosition.y),e.restrictToYAxis&&(this.dragObject.position.x=this.dragObject.startPosition.x),this.isDragStartCalled||!this._isThresholdNotMet(e)){this._setAvatarPosition(e);var o=this.getDropTargetFromPos(this.dragObject.position,e);this._callStartDrag(t),this._callMove(o,t),this._processCallbacks(o)}},_processCallbacks:function(e){var t=this.currentDropTarget.nonActiveDropZones;e.target!==this.currentDropTarget.target||e.node!==this.currentDropTarget.node?(this._dropTargetCallback(this.currentDropTarget,"onDragLeave"),this.currentDropTarget=e,this._dropTargetCallback(this.currentDropTarget,"onDragEnter")):this._dropTargetCallback(this.currentDropTarget,"onDragMove"),this._processCallbacksForNonActiveDropzones(e.nonActiveDropZones,t)},_processCallbacksForNonActiveDropzones:function(e,n){t.each(e,function(e){this._isDropZoneInArray(e,n)?this._dropTargetCallback(e,"onDragMove"):this._dropTargetCallback(e,"onDragEnter")}.bind(this)),n&&t.each(n,function(t){this._isDropZoneInArray(t,e)||this._dropTargetCallback(t,"onDragLeave")}.bind(this)),this.currentDropTarget.nonActiveDropZones=e},_dropTargetCallback:function(e,t){return!(!e.target||!e.target.callbacks[t])&&(e.target.callbacks[t](this.dragObject,e.node),!0)},_isDropZoneInArray:function(e,t){var n=!1;if(t)for(var i=0;i<t.length;i++)if(e.target===t[i].target){n=!0;break}return n},_isThresholdNotMet:function(e){var t=e.moveXThreshold||e.moveYThreshold,n=!e.moveXThreshold||e.moveXThreshold>Math.abs(this.dragObject.position.x-this.dragObject.startPosition.x),i=!e.moveYThreshold||e.moveYThreshold>Math.abs(this.dragObject.position.y-this.dragObject.startPosition.y);return t&&n&&i},_callMove:function(e,t){this.callerCallbacks.onMove&&this.callerCallbacks.onMove(t,{dragObject:this.dragObject,dropTargetNode:e.node})},_callStartDrag:function(n){this.callerCallbacks.onDragStart&&!this.isDragStartCalled&&(this.callerCallbacks.onDragStart(n,{dragObject:this.dragObject}),t.each(this.dropTargets,function(e){e.callbacks.onDragStart&&e.callbacks.onDragStart(this.dragObject)}.bind(this))),e("body").addClass("dragging"),this.isDragStartCalled=!0},upHandler:function(n){if(this.isDragStartCalled){var i=!1;e("body").removeClass("dragging");var r=this.currentDropTarget;this._dropTargetCallback(r,"onDrop")&&(i=!0),this.callerCallbacks.onDragDone&&this.callerCallbacks.onDragDone(n,{dragObject:this.dragObject,dropTargetNode:i?r.node:null,isDropped:i}),r.nonActiveDropZones&&t.each(r.nonActiveDropZones,function(e){this._dropTargetCallback(e,"onDrop")}.bind(this)),t.each(this.dropTargets,function(e){e.callbacks.onDragEnd&&e.callbacks.onDragEnd(this.dragObject)}.bind(this))}this.resetDragging()},resetDragging:function(){document.releaseCapture&&document.releaseCapture(),this.attachedMoveHandler&&this.attachedMoveHandler.remove(),this.attachedUpHandler&&this.attachedUpHandler.remove(),this.attachedScrollHandler&&this.attachedScrollHandler.remove(),e("body").removeClass("preventSelection"),this.currentDropTarget={},this.dragObject=null,this.isDragStartCalled=!1,this.targetMap=null,this.lastActiveScrollableTarget=null,e(this.avatar).remove()}}))})),define("baglass/core-client/js/core-client/utils/EventHelper",["jquery","./BidiUtil","./dnd/DnDManager","lodash","hammerjs","jquery.hammer"],(function(e,t,n,i,r){var s=[];for(var o in r.gestures)Object.prototype.hasOwnProperty.call(r.gestures,o)&&s.push(r.gestures[o].name);var a={prevent_mouseevents:!0,stop_browser_behavior:!1};e.each(s,(function(t,n){e.event.special[n]={setup:function(){var t=e(this);t.data("hammer")||t.hammer(a)}}})),e.fn.onClick=function(e){return this.on("click",(function(t){e(t)})).on("tap",(function(t){e(t),t.gesture.preventDefault()})),this};var l=function(n,i,r){var s=n._$inlineEdit;n._updateWidth=function(){if(s){var e=s.val()||"";e!==s._hidden.text()&&(s._hidden.text(e),s.width(s._hidden.width()+2))}},n._inlineEditChangedFn=function(){var e=s.val().trim();0===e.length&&r.noEmptyText&&(e=n._previousInlineText),s.removeClass("inlineText").off("keypress").off("keydown").off("blur");var t=!1;n._previousInlineText!==e&&(t=!0),n._previousInlineText=null,s._hidden.remove(),s._hidden=null,s.off(),s.hide(),s.parent().remove(),s=null,n._$inlineEdit=null,n.text(e),n.removeClass("inEditMode"),n.show().focus(),t&&i(e);var o=r&&r.onEditEnd;o&&o()}.bind(n);var o=n.text();if(n._previousInlineText=o,s)s.val(o);else{n.addClass("inEditMode");var a=e("<div>",{class:"inlineEditContainer"});a.css(function(t,n){var i=t.css(["padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","border-bottom-color","border-bottom-style","border-bottom-width","border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-left-color","border-left-style","border-left-width","position","top","right","left","bottom","height","width","min-height","min-width","max-height","max-width"]);if("0px"===i.height&&delete i.height,"0px"===i.width&&delete i.width,n&&n.maxSizeNode){var r=e(n.maxSizeNode);n.maxSizeNode.style.width?(i["max-width"]="100%",delete i.width):i["max-width"]=r.width()+"px"}return i}(n,r)),n.after(a),(s=e("<input>",{class:"inlineText"})).css("max-width","100%"),s.css(function(e){var t={width:"0px","min-width":e.css("fontSize")},n=e.css("text-align");return"center"===n?t.margin="0px auto":"right"===n&&(t.margin="0px 0px 0px auto"),t}(n));var l=function(e){return e.css(["fontSize","fontFamily","fontWeight","letterSpacing","color"])}(n);s.css(l),a.append(s),n._$inlineEdit=s,s.val(o),s._hidden=e('<div style="white-space:pre; top:-999px; left:-999px; position:absolute;"></div>'),s._hidden.css(l),n.hide(),n.after(s._hidden),s.on("keyup keydown input propertychange change",(function(){n._updateWidth()})),r&&r.style&&s.css(r.style),n._updateWidth(),s.on("blur",n._inlineEditChangedFn).on("keypress",(function(e){13===e.keyCode&&n._inlineEditChangedFn()})).on("keyup",(function(e){46!==e.keyCode&&8!==e.keyCode||e.stopPropagation()})).on("keydown",(function(e){37!==e.keyCode&&39!==e.keyCode||e.stopPropagation()})).on("mousedown mouseup dblclick",(function(e){e.stopPropagation()})),t.initElementForBidi(s[0]),s.show()}return s.focus(),s[0].setSelectionRange(0,9999),!1};e.fn.inlineEditor=function(e,t){if("remove"===e)this._$inlineEdit&&this._inlineEditChangedFn(),this.off("dblclick",this._inlineEditFn),this.off("hold",this._inlineEditFn),delete this._inlineEditFn,delete this._previousInlineText,delete this._inlineEditChangedFn,delete this._updateWidth;else if("blur"===e)this._$inlineEdit&&this._inlineEditChangedFn();else{if("isEditing"===e)return!!this._$inlineEdit;if("edit"===e)this._inlineEditFn&&this._inlineEditFn();else{var i=t&&t.onEditStart;this._inlineEditFn=function(r){n.resetDragging(),i&&i(),l(this,e,t),r&&r.stopPropagation()}.bind(this),this.hammer({stop_browser_behavior:!1,prevent_mouseevents:!0}),this.on("dblclick",this._inlineEditFn),this.on("hold",this._inlineEditFn),this.on("keypress",function(e){var t=e.keyCode||e.charCode;13!==t&&32!==t||this._inlineEditFn(e)}.bind(this))}}}})),define("baglass/core-client/js/core-client/ui/core/View",["jquery","lodash","doT","./Events","../../utils/EventHelper"],(function(e,t,n,i){"use strict";var r=null,s=/^(\S+)\s*(.*)$/,o=["el","id","className","tagName","events"];return r=i.extend({templateString:null,templateFn:null,id:null,init:function(e){r.inherited("init",this,arguments),this.viewId=t.uniqueId("view"),this.tempalteFn?this.dotTemplate=this.templateFn:(this.templateString&&console.debug("Support for doT templates in core/View base class is deprecated..."),this.dotTemplate=n.template(this.templateString||"")),t.extend(this,t.pick(e||{},o)),this._initDomElement(),this._attachEvents()},tagName:"div",_initDomElement:function(){if(this.el)this.setElement(t.result(this,"el"));else{var e={};this.id&&(e.id=t.result(this,"id")),this.className&&(e.class=t.result(this,"className")),this.setElement(document.createElement(this.tagName)),this.$el.attr(e)}},$:function(e){return this.$el.find(e)},hide:function(){this.$el.hide()},show:function(){this.$el.show()},getTarget:function(t,n){var i=e(t);if(!i.hasClass(n)){var r=i.parents("."+n);r.length>0&&(t=r[0])}return t},render:function(){return this},remove:function(){return this.$el&&this.$el.remove(),this.off&&this.off(),this},setElement:function(t){return this._detachEvents(),this.$el=t instanceof e?t:e(t),this.el=this.$el[0],this._attachEvents(),this},_attachEvents:function(){var e=this.events;for(var n in this._detachEvents(),e){var i=e[n];if(t.isFunction(i)||(i=this[e[n]]),i){var r=n.match(s),o=r[1],a=r[2];this.$el.on(o+".privateViewEvents"+this.viewId,a,i.bind(this))}}return this},_detachEvents:function(){return this.$el&&this.$el.off(".privateViewEvents"+this.viewId),this}})})),define("baglass/core-client/js/core-client/ui/View",["./core/View"],(function(e){var t=e.extend({init:function(e){e&&e.glassContext&&e.glassContext.getCoreSvc&&(this.logger=e.glassContext.getCoreSvc(".Logger")),t.inherited("init",this,arguments)},hide:function(){this.$el.addClass("hidden"),this.$el.attr("aria-hidden","true")},show:function(){this.$el.removeClass("hidden"),this.$el.removeAttr("aria-hidden")}});return t})),define("baglass/core-client/js/core-client/utils/ClassFactory",["require"],(function(e){var t=function(){};return t.prototype.FAIL_CREATE_INSTANCE="Failed to create the instance",t.prototype.FAIL_LOAD_MODULE="Failed to load the module",t.prototype.instantiate=function(e){var t=arguments;return this.loadModule(e).then(function(e){try{var n=new(e.bind.apply(e,t));return n.moduleID=t[0],n}catch(e){throw{msg:this.FAIL_CREATE_INSTANCE,causedBy:e}}}.bind(this))},t.prototype.loadModule=function(t){return new Promise(function(n,i){if("function"!=typeof t)return e([t],function(e){e?n(e):i({msg:this.FAIL_LOAD_MODULE,causedBy:"Module is not set",moduleId:t})}.bind(this),function(e){i({msg:this.FAIL_LOAD_MODULE,causedBy:e,moduleId:t})}.bind(this));n(t)}.bind(this))},new t})),define("baglass/utils/Utils",["jquery","lodash","../core-client/js/core-client/utils/ClassFactory","jquery-bbq"],(function(e,t,n){e.browser={};var i={_ClassFactory:n,buildRedirectURL:function(n,i,r){var s=n,o={};return null!=i&&(o.m_redirect=i),r&&t.extend(o,r),s&&e.each(o,(function(e,t){s=s+(s.indexOf("?")>-1?"&":"?")+encodeURIComponent(e)+"="+encodeURIComponent(t)})),s},getCookieValue:function(e){for(var t,n=document.cookie.split(";"),i=0;i<n.length;i++){var r=n[i].split("=");if(decodeURIComponent(r[0].trim())===e&&r.length>1){t=decodeURIComponent(r[1]);break}}return t},_needsProtection:function(n){return e.isFunction(n)&&(t.isUndefined(n.needsProtection)||!1===n.needsProtection)},_markAsProtected:function(e){e.needsProtection=!1},_isPromise:function(n){return!t.isUndefined(n)&&n.then&&e.isFunction(n.then)},waitForAllOrSomePromises:function(n){var r=e.Deferred();if(t.isUndefined(n)||null===n||0===n.length)return r.resolve(),r;for(var s=n.length,o=0,a=[],l=0;l<n.length;l+=1){var c=n[l];i._isPromise(c)?function(e){e.then((function(n){t.isUndefined(n)&&(n={}),e.responseModule=n,s-=1,n.isSuccess=!0,a.push(n),s<=0&&r.resolve.apply(r,a)}),(function(e){t.isUndefined(e)&&(e={}),s-=1,o+=1,e.isSuccess=!1,a.push(e),console.info(e),s<=0&&(o===n.length?r.reject.apply(r,a):r.resolve.apply(r,a))}))}(c):console.warn("waitForAllOrSomePromises found an invalid promise: "+c)}return r},errorProtect:function(n,r,s){if(!t.isUndefined(r))for(var o=0;o<r.length;o+=1){var a=r[o];(function(r){var o=n[r];i._needsProtection(o)&&(n[r]=function(){var r=null;try{return r=o.apply(n,arguments)}catch(n){if(console.error(n),t.isUndefined(s)||s(n),t.isUndefined(r)||null===r){var a=e.Deferred();return a.reject(n),a.promise()}i._isPromise(r)&&r.reject(n)}},i._markAsProtected(n[r]))}).bind(n)(a)}},isFactoryMode:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return"undefined"!=typeof isFactoryMode&&!0===isFactoryMode})),isUiPreview:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return"undefined"!=typeof isUiPreview&&!0===isUiPreview})),getSharedResourceActionController:function(e,n,r){return e.findCollection(i.SHARE_CONTAINER).then(s=>{if(!s)return;const o=[];return s.sort((e,t)=>(t.weight||0)-(e.weight||0)),s.forEach(t=>{if(t.types&&-1!==t.types.indexOf(n)){const r=this._ClassFactory.instantiate(t.actionController).catch(t=>{throw e.getCoreSvc(".Logger").error(i.COLLECTION_MODULE_NOT_FOUND+n),t});o.push(r)}}),Promise.all(o).then(n=>{const i={glassContext:e,context:r};return t.find(n,e=>e&&(!e.isEnabled||"function"==typeof e.isEnabled&&e.isEnabled(i)))})})},addCoachmark:function(){return Promise.resolve()},getAppContent:function(e,t,n){try{var r=i._checkCoerceFeatureFlag(n);return i._getAppContent(e,t,r)}catch(e){return n?n.getCoreSvc(".Logger").error(e):console.error(e),{}}},_checkCoerceFeatureFlag:function(e){var t=e&&e.getCoreSvc(".FeatureChecker");return t&&t.checkValue("ba-glass","stringOnlyQS","disabled")},_getAppContent:function(t,n,r){var s,o=t&&this.deparam(t,r)||{},a=n&&e.deparam(n,r)||{},l=e.extend(!0,a,o);if(r)for(var c in l)0===c.indexOf("p_")&&(s=s||i._getAppContent(t,n,!1),l[c]=s[c]);return l},deparam:function(e,n){let i,r,s;const o={},a={true:!0,false:!1,null:null},l=(e=e.replace(/\+/g," "))?e.split("&"):[];return t.map(l,e=>{i=e.split("="),s=decodeURIComponent(i[0]),r=i.length>2?i.slice(1).join("="):i[1],r=decodeURIComponent(r),n&&(r=r&&!isNaN(r)?+r:"undefined"===r?void 0:void 0!==a[r]?a[r]:r),void 0!==o[s]?o[s]=Array.isArray(o[s])?o[s].concat(r):[].concat(o[s],r):o[s]=r}),o},getQueryDataParameterMap:function(n){let r=t.unescape(e("#queryString_data").text());return i.getAppContent(r,e.param.fragment(),n)},getFilteredLoginParameters:function(e,n,i){var r=e.getAllowedUrlLoginParameters(),s=["CAMNamespace"],o={},a=[];return t.isString(r)&&t.each(r.split(","),(function(e){s.push(e.trim())})),n&&t.each(n,(e,n)=>{t.isString(e)&&-1!==s.indexOf(n)&&null==o[n]&&(o[n]=e)}),i&&t.each(i,(e,n)=>{t.isString(i[n].value)&&null==o[i[n].name]&&(o[i[n].name]=i[n].value)}),t.each(o,(e,t)=>{a.push({name:t,value:e})}),a},getObjectProperty:(e,t)=>{if(e){const n=(e,t)=>e&&e[t]?e[t]:null;return e.reduce(n,t)}return null},getCircularReplacer:()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}},encryptString:(e,t)=>{t=Number(String(Number(t)))===t?Number(t):13;let n=e.split("").map(e=>e.charCodeAt(0)).map(e=>e^t);return String.fromCharCode.apply(void 0,n)},SSO_PARAMS:{m:"portal/main.xts",h_CAM_action:"logon"},SHARE_CONTAINER:"com.ibm.bi.glass.common.sharedResources",COLLECTION_MODULE_NOT_FOUND:"Unable to load collection item for shareable type: "};return i})),define("baglass/app/ContentView",["../core-client/js/core-client/ui/View","jquery","../utils/Utils"],(function(e,t,n){var i=e.extend({init:function(e){t.extend(this,e),i.inherited("init",this,[e]),this.$el.addClass("pageView"),n.errorProtect(this,["render","getTitle","getContent"])},isDirty:function(){return!1},render:function(){return Promise.resolve(this)},getTitle:function(){if(this.module){var e=this.module.split("/");return e[e.length-1]}return this.glassContext.currentAppView.perspective},getContent:function(){return{}},setFocus:function(){var e=this.$el.find(":tabbable:first");e.length>0&&e.focus()}});return i})),define("baglass/api/Context",[],(function(){"use strict";var e=function(e){e.getCoreSvc?this.logger=e.getCoreSvc(".Logger"):console.info("There is no logged part of this context. Logs generated in the console log.");try{this._openPerspective=e.appController.openAppView.bind(e.appController)}catch(e){this.logger?this.logger.error(e):console.error(e)}};return e.prototype.openPerspective=function(e,t){return new Promise(function(n,i){this._openPerspective(e,t).then(n,i)}.bind(this))},e})),define("baglass/api/ExtensionViewAdaptor",["../app/ContentView","jquery","lodash","../core-client/js/core-client/utils/ClassFactory","./Context"],(function(e,t,n,i,r){var s=e.extend({init:function(e){this.content=e,this.glassContext=e.glassContext,this.displayInfo={},this.shallowContext=new r(this.glassContext),s.inherited("init",this,arguments)},createView:function(){return new Promise((e,t)=>{i.instantiate(this.type,{}).done(t=>{Object.assign(t,this.content),delete this.content,this.view=t,this.bindToView(t),e(t)}).fail(e=>t({msg:"Internal error: unable to create content View "+this.type,causedBy:e}))})},bindToView:function(e){e.login=this.login.bind(this),e.signin=this.signin.bind(this)},callViewOpen:function(e){return this.view&&n.isFunction(this.view.open)?e.open(this.shallowContext,this.options).then(e=>(this.$el.empty().append(t(e)),this.displayInfo=this._proxyMethod("getDisplayInfo")||{},this.show(),this)):Promise.reject({msg:"Internal error: content view open method not implemented for "+this.type})},doRender:function(){return this.createView().then(e=>this.callViewOpen(e))},render:function(){return this.doRender()},login:function(e){var n=t.Deferred();return this.signin(e).then((function(){n.resolve()})).catch((function(e){n.reject(n,e.jqXHR)})),n.promise()},signin:function(){},show:function(){this._proxyMethod("onShow")},deactivate:function(){this._proxyMethod("onHide")},getTitle:function(){return this.displayInfo.title||""},getIcon:function(){return this.displayInfo.icon||""},getContent:function(){return this._proxyMethod("getContent")||{}},remove:function(){this._proxyMethod("close")},_proxyMethod:function(e,t){if(this.view&&n.isFunction(this.view[e]))return this.view[e](t);this.glassContext.getCoreSvc(".Logger").warn("method not implemented",e)}});return s})),define("baglass/api/IFrameOpener",["../core-client/js/core-client/ui/core/Class","jquery","lodash"],(function(e,t,n){"use strict";var i=e.extend({init:function(e){i.inherited("init",this,arguments),t.extend(this,e)},onSelectItem:function(e){this.onPress(e)},onPress:function(e){return new Promise(function(t,n){try{e.glassContext.openAppView("generic_iframe",this._buildPayload(e)).then(t,n)}catch(t){e.glassContext.getCoreSvc(".Logger").error(t),n(t)}}.bind(this))},_buildPayload:function(e){const t=this._getOptions(e);return{content:{id:t.id,url:t.url,title:t.title}}},_getOptions:function(e){var i={};if(this._isValidContext(e)){var r=e.target.plugin.itemSpec;if(!0===this._isItMenuItem(e)){var s=e.target.specItemIndex,o=r.items[s];(i=n.pick(o.options,"url","title")).id=this._getID(o)}else!0===this._isItButton(e)&&((i=n.pick(r.options,"url","title")).id=this._getID(r));return n.isUndefined(i.url)&&t.extend(i,this.getOptionsFromid(e,i.id)),i}},_isValidContext:function(e){return e&&e.target&&e.target.plugin&&e.target.plugin.itemSpec},_getID:e=>e.id?btoa(e.id+e.options.url):btoa(e.options.url),getOptionsFromid:function(e,t){try{return e.glassContext.findElement(t).options}catch(e){return{}}},_isItMenuItem:function(e){return void 0!==e.target.specItemIndex&&e.target.plugin.itemSpec.items.length>0&&void 0!==e.target.plugin.itemSpec.items[e.target.specItemIndex].options},_isItButton:function(e){return void 0!==e.target.plugin.itemSpec.options}});return i})),define("baglass/api/View",[],(function(){"use strict";return function(){this.open=function(){},this.close=function(){},this.onShow=function(){},this.onHide=function(){},this.getDisplayInfo=function(){}}})),define("baglass/api/all",["./ActionInterface","./ExtensionViewAdaptor","./IFrameOpener","./View"],(function(){})),define("baglass/nls/BAGlassResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("baglass/nls/root/BAGlassResources",{signInButtonText:"Log in",userPlaceholder:"Username",passPlaceholder:"Password",nsPlaceholder:"Namespace",anonymousLoginFail:"Failed to open session as Anonymous",retrieveInstallInfoErrorTitle:"Installation Information Error",retrieveInstallInfoErrorMsg:"A failure occurred while retrieving the installation environment. Some features may not be available. The root cause is the following: %{reason}",loginBrandMessage:"Log in",selectNamespace:"Select a namespace",connectAnonymously:"Connect anonymously",CAInitTitle:"CA Initialization Information",CALoginAuthError:"CA Login Authentication Error",unableSetSSOURL:"unable to set up SSO URL",unableGetInstallInfo:"Unable to get CA install information",loginInfoTitle:"CA Login Information",loginInProgress:"Logging in",loginSuccess:"Login Successful",unableLogin:"Cannot login",invalidLogin:"The provided credentials are invalid. Please type your credentials for authentication.",unableGetAccountInfo:"Cannot get user's account information!",accountInfoTitle:"Account Information Error",credentialSubmitError:"Error submitting login credentials",invalidLoginResponse:"Invalid login response",CAMPromptInfoMissing:"Error retrieving CAM PromptInfo Response",CAMMessagesMissing:"Error retrieving CAM Messages Response",changePassword:"Change Password",newPasswordsDoNotMatch:"The new passwords you entered do not match. Please retype the new password in both text boxes.",loginLegalText:"Licensed Materials - Property of IBM Corp. © Copyright IBM Corporation and other(s) 2005, %{fullYear}. IBM, the IBM logo, ibm.com and Cognos are trademarks or registered trademarks of International Business Machines Corp., registered in many jurisdictions worldwide.",legalText:'Licensed Materials - Property of IBM Corp. © Copyright IBM Corporation and other(s) 2005, %{fullYear}. IBM, the IBM logo, ibm.com and Cognos are trademarks or registered trademarks of International Business Machines Corp., registered in many jurisdictions worldwide. A current list of IBM trademarks is available on the Web at www.ibm.com/legal/copytrade.shtml. This Program is licensed under the terms of the license agreement accompanying the Program. This license agreement may be either located in a Program directory folder or library identified as "License" or "Non_IBM_License", if applicable, or provided as a printed license agreement. Please read the agreement carefully before using the Program. By using the Program you agree to these terms.',CAMNamespaceDisplayName:"Log in with your %{promptValue} ID",customLoginPerspectiveNotFound:"The custom sign-in view could not be found",defaultToIBMLoginPage:"The custom sign-in view is not available. The default sign-in view is displayed instead.",errorRetrievePerspectiveURL:"Error retrieving perspective: %{url}",CAMUserNameForDisplay:"User ID: %{promptValue}",genericPrompt:"%{promptName} %{promptValue}",errLoadingView:"Unable to load requested view.",errLoadingViewShowHome:"Unable to load requested view. Displaying home view instead.",productName:"IBM Cognos Analytics %{version}",version:"Version",myPreferences:"My preferences",skin:"Style",showHiddenObjects:"Show hidden entries",format:"Report format",accessibilityFeatures:"Turn on accessibility features",displayMode:"Default view",productLocale:"Product language",contentLocale:"Content language",biDirectionalFeaturesEnabled:"Bidirectional language support",baseTextDirection:"Base direction for text",portal:"Portal",regionalOptions:"Options for your region",timeZoneID:"Time zone",email:"Email",homePage:"Home page",defaultHome:"Default",resetHome:"Reset to default",homeSet:"Your home was set successfully",homeSetError:"An error occurred setting the default home page, try closing and reopening this view.",resetHomeSuccess:"You have successfully reset your home to default.",shareSetError:"This action cannot be performed before closing and reopening this view.",general:"General",personal:"Personal",nameSpace:"Namespace",userName:"User name",password:"Password",confirmPassword:"Confirm password",passwordChange:"Change your password",changePasswordTitle:"Change my password",showPassword:"Show password",oldPassword:"Old password",newPassword:"New password",confirmNewPassword:"Confirm new password",passwordMatch:"Password match",passwordNotMatch:"Oops, password does not match",wrongPassword:"Unable to authenticate",updatePWUnknownError:"Unable to update password",passWordChangeSuccess:"You have successfully changed your password",advanced:"Advanced",credentials:"Credentials",credentialCreate:"Create",credentialCreateSuccess:"You have successfully created your credentials",credentialChange:"Renew",credentialRenewed:"Your credentials were renewed with your current user ID and password.",myCredentials:"My credentials",myCapabilities:"My capabilities",viewDetails:"View details",manage:"Manage",dataSourceCredentials:"Data server credentials",groupsAndRoles:"Groups and roles",welcome:"Welcome",welcomeMsg:"Welcome to %{brandName}",samples:"Sample content to explore",sampleName1:"Call Activity and Win Plans",sampleName2:"Product Line Dashboard",welcomeGetStarted:"Get started with a tour of the new interface and see what is new and exciting",submit:"Submit",companionApps:"Companion applications",analysisStudio:"Analysis Studio",dashboardConsole:"Workspace",drillThrough:"Drill-Through definitions",eventStudio:"Event Studio",queryStudio:"Query Studio",metricsManager:"Metrics Manager",powerplayStudio:"PowerPlay Studio",controller:"Controller",contributor:"Contributor",metricStudio:"Studio",metricsFileImportTask:"New Import from Files",metricsMaintenanceTask:"New Maintenance",metricsExportTask:"New Export",metricsPackage:"New Package",ok:"OK",html:"HTML",pdf:"PDF",spreadsheetML:"Excel",xlsxData:"Excel Data",csv:"CSV",cancel:"Cancel",rtl:"Right-to-left",ltr:"Left-to-right",contextual:"Contextual",showAll:"Show all",showUnread:"Show unread",hideAll:"Hide all",showHints:"Show hints",defaultCompleteMessage:"Operation completed.",defaultProgressMessage:"Operation in progress...",defaultFailMessage:"Operation failed.",defaultIndefiniteMessage:"Operation in progress...",defaultPauseMessage:"Operation paused.",progressHideBtn:"Hide",coachMarkLabel:"Learn more about - %{title}",coachMarkTurnOffHints:"Turn off hints",coachMarkClose:"Close",secondaryWelcomeMsg:"Get started by opening a report, dashboard, or story!",invalidHomePageTitle:"The home page cannot be retrieved. Click OK to reset the home page to the Welcome page.",unsavedViewsMsg:"You have work that has not been saved:",unsavedViewMsg1:"Close the view?",unsavedViewMsg2:"You have unsaved changes that will be lost if you don’t save them first.",unsavedViewMsg3:"Close without saving",unsavedViewMsg4:"Close without saving?",errorLabel:"Error",unknownError:"An unknown error occurred trying to view the requested resource.",notFound:"The requested resource cannot be retrieved. It might have been deleted or renamed.",noCapability:"You do not have the capability to view the requested resource.",noPermission:"You do not have sufficient privileges to view the requested resource.",knowledgeCenterErrorTitle:"The link to Knowledge Center didn't work",knowledgeCenterErrorMessage:"Try again.  If the problem persists, contact your administrator.",communityErrorTitle:"The link to the community didn't work",communityErrorMessage:"Try again.  If the problem persists, contact your administrator.",close:"Close",info:"Info",warning:"Warning",error:"Error",success:"Success",defaultSlideoutLabel:"Slideout",legacyAppsSlideoutLabel:"Available Legacy Applications",myPreferencesSlideoutLabel:"My Preferences",pinSlideout:"Pin Slideout",unpinSlideout:"Unpin Slideout",paginationControl:"Open Collapsed Slideout(s)",openPerspectiveFailed:"Failed to open %{name}",untitled:"Untitled",invalidPerspectiveErrorTitle:"Invalid perspective name",invalidPerspectiveErrorMessage:"Perspective name cannot contain '/' or '.'",perspective404ErrorTitle:"Perspective not available",perspective404ErrorMessage:"The perspective name at the end of the URL is not available. Please try again, using a valid perspective name.",perspective404HomeErrorMessage:"The home perspective name at the end of the URL is not available. Please check if a valid extension exists and try again.",log_level_Error:"Error",log_level_Warn:"Warning",log_level_Info:"Information",log_level_Debug:"Debug",logging_level:"Logging level:",logging_active:"Logging is on:",logging_config_description:"Logging is used for troubleshooting. Consult your administrator for guidance on settings.",logging_congfig_title:"Logging",manageLogging:"Logging",loggingConfigurationSlideoutA11yLabel:"Logging Configuration",validationControl:"Show validation information",previewDialogTitle:"Preview",error404NotFound:"The asset that you want to open is not available. You might not have the required permissions to access it, or it might be deleted or disabled.",website:"Website",unavailable:"Unavailable",offlineErrorTitle:"Trying to reconnect",offlineErrorMessage:"There seems to be a network problem. Please wait while we try to reconnect or check your network connection and try again",refreshButton:"Refresh",shareDialogTitle:"Share",shareDialogCodeLabel:"Share URL",shareDialogText:"Copy this link to share this content with other users.",embedDialogTitle:"Embed",embedDialogCodeLabel:"Embed code",embedDialogText:"Copy this code to embed.",embedURLWidthLabel:"Width:",embedURLHeightLabel:"Height:",embedURLWidth:"Width",embedURLHeight:"Height",copyText:"Copy",bypassBlockButtonTitle:"Skip to content",whatIsNewAlert:"%{currentIndex}/%{totalCount} Alerts",whatIsNewDismiss:"Dismiss",whatIsNewNext:"Next",whatIsNewPrevious:"Previous",searchText:"Search content",cannotOpenLocation:"Invalid URL detected",invalidUrl:"A request to navigate the browser to a new location has been denied. Reload Application?",alertTitle:"%{alertTitle}:",alertBannerTooltipMessage:"%{alertTitle}: %{alertMessage}",getEmptyMenuItemLabel:"No actions available"}),define("baglass/core-client/js/core-client/utils/Lexicon",["../ui/core/Class","jquery","polyglot"],(function(e,t,n){var i=e.extend({init:function(e){t.extend(!0,this,e),this._polyglot=new n({phrases:this.data})},translate:function(e,t){var n=this._polyglot.t(e,t);return this.verbose&&n===e&&(n=i.NOT_TRANSLATED+"("+e+")"),n}});return i.NOT_TRANSLATED="__NOT_TRANSLATED__",i})),function(e,t){"function"==typeof define&&define.amd?define("baglass/nls/StringResources",["i18n!./BAGlassResources","../core-client/js/core-client/utils/Lexicon"],t):"object"==typeof exports?module.exports=t(require("i18n!./BAGlassResources"),require("../core-client/js/core-client/utils/Lexicon")):(void 0).Requester=t((void 0).BAGlassResources,(void 0).Lexicon)}(0,(function(e,t){var n=new t({data:e,allowMissing:!0,verbose:!1});return{get:function(e,i){var r=n.translate(e,i);return r!==e?r:"".concat(t.NOT_TRANSLATED,"(").concat(e,")")}}})),define("baglass/core-client/js/core-client/errors/BaseError",["../ui/core/Class","lodash"],(function(e,t){return e.extend({init:function(e,t,n){var i=Error.apply(this,arguments);this.name="BaseError",this.message=e||"Error",this._isValidCause(t)?(this.causedBy=t,this._setAdditionalInfo(n)):this._setAdditionalInfo(t),i.stack&&(this.stack=i.stack)},toString:function(){var e=this.name+": "+this.message;return t.each(t.keys(this).sort(),function(t){"name"!==t&&"causedBy"!==t&&"message"!==t&&"stack"!==t&&(e+="\n"+t+": "+this[t])}.bind(this)),this.causedBy&&(e+="\nCaused by: "+this.causedBy),e},_isValidCause:function(e){return e instanceof Error||t.isString(e)||t.isObject(e)&&e.message},_setAdditionalInfo:function(e){t.isObject(e)&&t.extend(this,e)}})})),define("baglass/core-client/js/core-client/utils/PerfUtils",[],(function(){var e=!1;try{e=!!window.localStorage.getItem("performance.log.timers")}catch(e){}return{createPerformanceMark:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};performance.mark(t.component+"-"+t.name+"-"+t.state),e&&("start"===t.state?console.time(t.component+"-"+t.name):"end"===t.state&&console.timeEnd(t.component+"-"+t.name))},clearPerformanceMark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};performance.clearMarks(e.component+"-"+e.name+"-"+e.state)}}})),define("baglass/api/Url",["jquery","lodash","../utils/Utils","jquery-bbq"],(function(e,t,n){var i=function(){};return e.extend(i.prototype,{URL_EMBED_API:[{key:"closeWindowOnLastView",values:[!0],getValue:function(e,t,n){return!0===n||t},preserveInUrl:!0},{key:"ui_appbar",values:[!1],getValue:function(e,t,n){return!0!==n&&t},preserveInUrl:!0},{key:"ui_navbar",values:[!1],getValue:function(e,t,n){return!0!==n&&t},preserveInUrl:!0},{key:"shareMode",values:["embedded"],getValue:function(e,t,n){return!0===n?"embedded":void 0}},{key:"productLocale",preserveInUrl:!0}],URL_API:[{key:"perspective"},{key:"pathRef"},{key:"factoryMode",values:[!0],getValue:function(e,t){return void 0===t?n.isFactoryMode():t}},{key:"id"},{key:"nextgen3p"},{key:"prefetchsvc"},{key:"appcue"}],ENDPOINT_PATHS:{objRef:"v1/objects",pathRef:"v1/path",searchPathRef:"v1/search_path"},_getUrlPath:function(e){const t=e&&e.gateway&&e.gateway.replace(/\/$|$/,"/");return location.origin+(t||location.pathname)},_completeURIEncoding:function(e){return e.replace(/[!'()*~]/g,(function(e){var t="";switch(e){case"!":t="%21";break;case"'":t="%27";break;case"(":t="%28";break;case")":t="%29";break;case"*":t="%2A";break;case"~":t="%7E";break;default:t=e}return t}))},getUrl:function(n,i){t.isUndefined(i)&&console.warn("The Glass Context is not being passed to the getUrl method. In the current usage of getUrl, the Glass Context should be passed as an argument --\x3e getUrl(context, glassContext)");var r=this.getMap(n);const s=i&&i.getCoreSvc(".URLEncoder");if(s)for(const e in r)r[e]=s.encodeQSValue(r[e]);var o=this._getUrlPath(i),a=e.param.querystring(o,r),l=a.replace(/^([^\?]+)(\?.+)$/,"$2");return 0===l.indexOf("?")&&(a=o+this._completeURIEncoding(l)),a},getPublicMap:function(n){var i={},r=(n=n||{}).urlMap||{};return e.each(this.URL_API,function(e,s){var o=r[s.key];if(t.isFunction(o))throw new Error("Value cannot be a function: "+s.key);if(s.required&&!o)throw new Error("Missing required attribute: "+s.key);var a=t.isFunction(s.getValue)?s.getValue(s.key,o,n.isEmbed):void 0;o=t.isUndefined(a)?o:a,!t.isUndefined(o)&&(s.preserveInUrl||!s.values||s.values.indexOf(o)>=0)&&(i[s.key]=o)}.bind(this)),i},getMap:function(n){n=n||{};var r=this.getPublicMap(n),s=i.prototype.URL_API.map(e=>e.key),o=t.omit(n.urlMap,s);return e.each(o,(function(e,n){if(t.isFunction(n))throw new Error("Value cannot be a function: "+e)})),e.extend(r,o)},isAppBarVisible:function(e){return!e||!1!==e.ui_appbar},getPathRefInfo:function(e,t,n,i){return this._getObjInfo(e,this.ENDPOINT_PATHS.pathRef+"?path="+encodeURIComponent(t)+"&",n,i)},getObjRefInfo:function(e,t,n){return this._getObjInfo(e,this.ENDPOINT_PATHS.objRef+"/"+encodeURIComponent(t)+"?",n)},_getObjInfo:function(e,t,n,i){n||(n=["type"]);var r=t+"fields="+n.concat(["id","path"]).join(",");return this._getAjaxSvc(e).ajax({url:r,type:"GET",dataType:"json"}).then(e=>this._getFormattedObjInfo(e,n)).catch(t=>{if(i)return this._getObjInfoBySearchPath(e,i,n);throw t})},_getObjInfoBySearchPath(e,t,n){const i=this.ENDPOINT_PATHS.searchPathRef+"?searchPath="+encodeURIComponent(t)+"&fields="+n.concat(["id","path"]).join(",");return this._getAjaxSvc(e).ajax({url:i,type:"GET",dataType:"json"}).then(e=>this._getFormattedObjInfo(e,n)).catch(e=>{throw e})},_getFormattedObjInfo(e,i){const r=n.getObjectProperty(["data","data",0],e);let s=null,o=n.getObjectProperty(["_meta","links","path","url"],r);if(o){const e=o.indexOf("=");s=decodeURIComponent(o.substring(e+1))}let a={pathRef:s,objRef:r.id?r.id:null};return t.extend(a,t.pick(r,i)),a},_getAjaxSvc:function(e){return e&&e.getCoreSvc?e.getCoreSvc(".Ajax"):(console.warn('API Change: ba-glass-client/api/Url now expects "glassContext" instead of "services.ajax" in public API calls. Please update your code!'),window.__glassAppController.glassContext.getCoreSvc(".Ajax"))},_isValueAcceptableAPIValue:function(e,t){return("true"===t||"false"===t)&&(t=JSON.parse(t)),e.values.includes(t)},getObjInfoFromContent:function(e,t,n){return Promise.try(function(){if(t&&t.pathRef)return this.getPathRefInfo(e,t.pathRef,n);if(t&&t.objRef)return this.getObjRefInfo(e,t.objRef,n);throw new Error("Missing pathRef and objRef")}.bind(this))},getContextFromUrlMap:function(e){if(e)return{perspective:e.perspective,content:e}},getUrlMap:function(e,n,i){return Promise.resolve().then(function(){if(e&&t.isFunction(e.execute)){var r=i&&i.glassContext&&i.glassContext.currentAppView;return r&&r.context&&r.context.isDefaultAction&&(i.isDefaultAction=r.context.isDefaultAction),Promise.resolve(e.execute(i)).then(function(e){return i&&i.urlMap&&i.urlMap.pathRef?e:this.getPathRef(n,e.objRef).then(function(t){return i&&"defaultAction"!==i.mode&&delete e.objRef,e.pathRef=t,e}.bind(this))}.bind(this))}}.bind(this))},getPathRef:function(e,t,n){return t?this.getPathRefInfo(e,t,null,n).then((function(e){return e.pathRef})):Promise.resolve()},updateContextWithCurrentUIFilters:function(e,t){return e&&this.URL_EMBED_API.forEach(n=>{n.preserveInUrl&&!0===n.preserveInUrl&&e.hasOwnProperty(n.key)&&this._isValueAcceptableAPIValue(n,e[n.key])&&(t.content[n.key]=e[n.key])}),t}}),i.prototype.URL_UI_API=i.prototype.URL_EMBED_API,i.prototype.URL_API=t.union(i.prototype.URL_API,i.prototype.URL_UI_API),i.MODES={DYNAMIC:"dynamic",CURRENT:"current",DEFAULT_ACTION:"defaultAction"},i})),define("baglass/core-client/js/core-client/ui/KeyCodes",[],(function(){return{NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSEBREAK:19,CAPSLOCK:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,SECOND:50,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,FORWARDSLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACKSLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222}})),define("baglass/app/utils/CloseViewUtils",["jquery","baglass/nls/StringResources"],(function(e,t){return class{static waitForCloseConfirmation(n,i){return new Promise((r,s)=>{var o=(i=i||{}).unsaveMessage||t.get("unsavedViewMsg2"),a=i.title||t.get("unsavedViewMsg4");const l=[{defaultId:"ok",text:t.get("unsavedViewMsg3")},"cancel"];n.showMessage(o,a,"info",l,"default",e=>{"ok"===e.btn&&r(),s()}).then(()=>{e(".dialogButton.secondary").focus()})})}}})),define("baglass/core-client/js/core-client/utils/JQueryTabbable",["jquery"],(function(e){function t(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}function n(n){var i=n.nodeName.toLowerCase();if("area"===i){var r=n.parentNode,s=r.name;if(!n.href||!s||"map"!==r.nodeName.toLowerCase())return!1;var o=e("img[usemap=#"+s+"]")[0];return!!o&&t(o)}var a=!isNaN(e.attr(n,"tabindex"));return(/^(input|select|textarea|button|object)$/.test(i)?!n.disabled:"a"===i&&n.href||a)&&t(n)}e.extend(e.expr[":"],{data:e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})),focusable:function(t){return n(t,isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t)}})})),define("baglass/core-client/js/core-client/ui/AccessibleView",["jquery","lodash","./View","../utils/JQueryTabbable"],(function(e,t,n){var i=n.extend({init:function(n){i.inherited("init",this,arguments),t.extend(this,n),void 0===this.launchPoint||null===this.launchPoint?this._launchPoint=document.activeElement:(this._launchPoint=this.launchPoint,delete this.launchPoint),this.$entryHeader=e('<div tabindex="0" class="entryHeaderAV"></div>'),this.$exitHeader=e('<div tabindex="0" class="exitHeaderAV"></div>'),this.$el.append(this.$entryHeader),this.$el.append(this.$exitHeader),this.$entryHeader.on("focus",this._enterView.bind(this)),this.$exitHeader.on("focus",this._setFocusToLaunchPoint.bind(this))},getLaunchPoint:function(){return this._launchPoint},setInnerContent:function(t){t instanceof e&&t.insertAfter(this.$exitHeader)},_enterView:function(){this.$el.find(":tabbable").eq(2).focus()},setLaunchPoint:function(e){this._launchPoint=e},enableLooping:function(t){t instanceof e&&!0===this.enableTabLooping&&!1===t.next().hasClass("tabLoopFooter")&&(this.$loopFooter=e('<div class="tabLoopFooter" tabindex="0" style="height:0px;width:0px"></div>'),this.$loopFooter.insertAfter(t),this.$loopFooter.on("focus",this._tabToFirstElementInView.bind(t)),this.$loopHeader=e('<div class="tabLoopHeader" tabindex="0" style="height:0px;width:0px"></div>'),this.$loopHeader.insertBefore(t),this.$loopHeader.on("focus",this._tabToLastElementInView.bind(t)))},_setFocusToLaunchPoint:function(){void 0!==this.getLaunchPoint()&&null!==this.getLaunchPoint()&&e(this.getLaunchPoint()).focus()},_tabToFirstElementInView:function(){var e=this.find(":tabbable").first();null!=e&&e.focus()},_tabToLastElementInView:function(){var e=this.find(":tabbable").last();null!=e&&e.focus()},removeContainerOnlyFromTabOrder:function(){this.$entryHeader.removeAttr("tabIndex"),this.$exitHeader.removeAttr("tabIndex"),this.$loopFooter&&this.$loopFooter.removeAttr("tabIndex"),this.$loopHeader&&this.$loopHeader.removeAttr("tabIndex")},enterContainerOnlyInTabOrder:function(){this.$entryHeader.attr("tabindex","0"),this.$exitHeader.attr("tabindex","0"),this.$loopFooter&&this.$loopFooter.attr("tabIndex","0"),this.$loopHeader&&this.$loopHeader.attr("tabIndex","0")},remove:function(){i.inherited("remove",this,arguments)}});return i})),define("baglass/core-client/js/core-client/utils/UniqueId",[],(function(){return{get:function(e){var t,n,i="",r=0,s=Date.now();do{"4"===(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[r])||"-"===t?i+=t:(n=(s+16*Math.random())%16|0,s=Math.floor(s/16),i+=("x"===t?n:3&n|8).toString(16))}while(++r<36);return e?[e,i].join(""):i}}})),function(){var e,t,n=function(e){return'<div class="wait_loading_animation" role="presentation">\n\t<div id="wait_loader_div1" role="presentation"></div>\n\t<div id="wait_loader_div2" role="presentation"></div>\n\t<div id="wait_loader_div3" role="presentation"></div>\n\t<div id="wait_loader_div4" role="presentation"></div>\n\t<div id="wait_loader_div5" role="presentation"></div>\n\t<div id="wait_loader_div6" role="presentation"></div>\n\t<div id="wait_loader_div7" role="presentation"></div>\n\t<div id="wait_loader_div8" role="presentation"></div>\n</div>\n'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/core-client/js/core-client/ui/templates/LoadingWaitAnimation1",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.LoadingWaitAnimation1=n)}(),function(){var e,t,n=function(e){return'<div class="wait_loading_bar" role="presentation">\n</div>'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/core-client/js/core-client/ui/templates/LoadingWaitAnimation2",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.LoadingWaitAnimation2=n)}(),function(){var e,t,n=function(e){return'<div class="mediumSpinner" role="presentation">\n</div>\n'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/core-client/js/core-client/ui/templates/MediumSpinner",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.MediumSpinner=n)}(),function(){var e,t,n=function(e){var t,n,r=void 0!==i?i:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,(function(e){return t[e]||e})):""}),s='<span role="img" class="webfont '+r(e.icon)+'" ';return e.tooltip&&(s+='title="'+r(e.tooltip)+'"'),s+=" ",e.label&&(s+='aria-label="'+r(e.label)+'"'),s+=" ",e.color&&(s+='style="color:'+r(e.color)+'"'),s+="></span>"},i=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(n){return n?n.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/core-client/js/core-client/utils/templates/webfont",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.webfont=n)}(),function(){var e,t,n=function(e){var t,n,r=void 0!==i?i:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,(function(e){return t[e]||e})):""}),s='<img src="'+r(e.icon)+'" ';return e.tooltip&&(s+='title="'+r(e.tooltip)+'"'),s+=" ",e.label&&(s+='alt="'+r(e.label)+'"'),s+="></img>"},i=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(n){return n?n.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/core-client/js/core-client/utils/templates/image",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.image=n)}(),function(){var e,t,n=function(e){var t,n,r=void 0!==i?i:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,(function(e){return t[e]||e})):""}),s='<svg class="svgIcon ';return e.class&&(s+=r(e.class)+" "),s+='" role="img" ',e.label&&(s+='aria-label="'+r(e.label)+'"'),s+=" focusable=false>",e.tooltip&&(s+="<title>"+r(e.tooltip)+"</title>"),s+='<use style="pointer-events: none; ',e.fill&&(s+="fill:"+r(e.fill)+" "),s+='" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+r(e.icon)+'"></use></svg>'},i=(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g,function(n){return n?n.toString().replace(t,(function(t){return e[t]||t})):""});"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/core-client/js/core-client/utils/templates/svg",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.svg=n)}(),define("baglass/core-client/js/core-client/utils/BrowserUtils",[],(function(){return{isBrowser:{ie:function(){return this.isIE()},ieEdge:function(){return this.isIEEdge()},ie11:function(){return this.isIE11()},ff:function(){return this.isFirefox()},chrome:function(){return this.isChrome()},safari:function(){return this.isSafari()},iPad:function(){return this.isIPad()}},isIE:function(){return/\b(MSIE|Trident|Edge)\b/.test(this._getUserAgent())},isIE11:function(){return/Trident\/7\./.test(this._getUserAgent())},isIEEdge:function(){return/Edge/.test(this._getUserAgent())},isFirefox:function(){return/.*Firefox.*/i.test(this._getUserAgent())},isChrome:function(){return/chrome/i.test(this._getUserAgent())&&!this.isIE()},isSafari:function(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(this._getUserAgent())&&!this.isChrome()&&!this.isIE()&&!this.isIPad()},isIPad:function(){return/iPad/i.test(this._getUserAgent())||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1&&!window.MSStream},_getUserAgent:function(){return navigator.userAgent},isMobile:function(){return[/Android/i,/webOS/i,/iPhone/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return window.navigator.userAgent.match(e)}))}}})),define("baglass/core-client/js/core-client/utils/LegacyUtils",["jquery","lodash","./BrowserUtils"],(function(e,t,n){return{legacyLaunch:function(e,t,n){this._openLegacyWindow(this._getLaunchParms(e,t,n))},getLegacyLaunchUrl:function(e,t,n,i){return this._getUrl(this._getLaunchParms(e,t,n,i))},_getLaunchParms:function(e,n,i,r){var s=this.legacyApps[n]||n;return t.isUndefined(s)||t.isUndefined(s.launchParams)?{b_action:"xts.run",m:"portal/launch.xts","ui.gateway":e.gateway+"/v1/disp","ui.tool":n,"ui.object":i,"ui.action":r||"new","launch.launchinWindow":"true",backURL:"disp?b_action=xts.run&m=portal/close.xts"}:s.launchParams},canUseLegacyTool:function(e,i){var r=this.legacyApps[i]||i;if(!t.isUndefined(r)&&e.hasCapability(r.capability)){var s=r.browsers;if(t.isUndefined(s))return!0;for(var o=0;o<s.length;o++){if(n.isBrowser[s[o]].call(n))return!0}}return!1},legacyApps:{DashboardConsole:{icon:"common-workspace",capability:"canUseDashboardViewer",browsers:["ie","ff","chrome","safari"]},QueryStudio:{icon:"common-query",capability:"canUseQueryStudio",browsers:["ie","ff"]},AnalysisStudio:{icon:"common-analysis_studio",capability:"canUseAnalysisStudio",browsers:["ie","ff"]},DrillThrough:{icon:"common-drill_through_definition",capability:"canUseDrillThroughAssistant",launchParams:{b_action:"xts.run",m:"portal/cc_drillthrough.xts"}},EventStudio:{icon:"common-agent",capability:"canUseEventStudio",browsers:["ie","ff","chrome"]},Subscriptions:{capability:"DO_NOT_SHOW_IN_COMPANION_APPS",launchParams:{b_action:"xts.run",m:"portal/subscriptions/subscriptions.xts"}},MetricsManager:{icon:"common-metrics",capability:"canUseMetricStudio",apps:{MetricStudio:{icon:"common-metrics",capability:"canUseMetricStudio",handler:function(e){this._launchLegacyWindow(e)},browsers:["ie","ff"]},metricsFileImportTask:{icon:"common-metricsImport",capability:"canUseMetricsManagerAdministration"},metricsMaintenanceTask:{icon:"common-metricsMaintenance",capability:"canUseMetricsManagerAdministration"},metricsExportTask:{icon:"common-metricsExport",capability:"canUseMetricsManagerAdministration"},metricsPackage:{icon:"common-metricsNewPackage",capability:"canUseMetricsManagerAdministration",handler:function(){this._openLegacyWindow({b_action:"mms.run",pid:"new_mpwizard_start"})}}},handler:function(e){var t={b_action:"xts.run",m:"portal/newMetricsTasks/processNewTasks.xts","so.select":"newmetricstaskspackage","so.return.m":"portal/new_general.xts",m_new_class:e.type};this._openLegacyWindow(t)}},PowerplayStudio:{icon:"common-powerPlayCube",capability:"canUsePowerPlay",browsers:["ie","ff","chrome","safari"]},Controller:{icon:"common-controller",capability:"canUseControllerStudio",browsers:["ie"]},Contributor:{icon:"common-planning",capability:"canUsePlanningContributor"}},_openLegacyWindow:function(e){this._openWindow(this._getUrl(e))},_openWindow:function(e){window.open(e)},_launchLegacyWindow:function(e){this.legacyLaunch(e.glassContext,e.type)},_getUrl:function(t){return"v1/disp?"+e.param(t,!0)}}})),define("baglass/core-client/js/core-client/nls/CommonsResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("baglass/core-client/js/core-client/nls/root/CommonsResources",{save:"Save",saveAs:"Save as",saveAsLabel:"Save as:",teamFolders:"Team Folders",open:"Open",openDialogTitle:"Open file",openDialogFooter:"Open and cancel button",saveDialogTitle:"Save as",saveDialogFooter:"Save and cancel button",shareDialogTitle:"Share",shareDialogCodeLabel:"Share URL",shareDialogText:"Copy this link to share this content with other users.",embedDialogTitle:"Embed",embedDialogCodeLabel:"Embed code",embedDialogText:"Copy this code to embed.",embedURLWidthLabel:"Width:",embedURLHeightLabel:"Height:",embedURLWidth:"Width",embedURLHeight:"Height",filesToOpen:"Files to open:",remove:"Remove",loading:"Loading",ok:"OK",cancel:"Cancel",close:"Close",datasetLoading:"Your data set %{name} is loading...",datasetFinishedLoading:"Your data set %{name} loaded successfully.",datasetLoadingFailed:"Your data set %{name} did not load.",datasetLoadingCancelled:"The loading of your data set %{name} was cancelled.",datasetRefreshing:"Your data set %{name} is refreshing...",datasetFinishedRefreshing:"Your data set %{name} refreshed successfully.",datasetRefreshFailed:"Your data set %{name} did not refresh.",datasetRefreshCancelled:"The refreshing of your data set %{name} was cancelled.",userID:"User ID",password:"Password",signOnMessage:"Please provide your credentials to use this data",rememberCre:"Remember my credentials",signOnDialogFooter:"Submit and cancel button",signOnTitle:"Credentials required: %{dataSource}",errMessage:"The credentials are missing or invalid.\n Please type your credentials for authentication.",submit:"Submit",datepicker_input_describedby:"Type a date in the format YYYY dash MM dash DD.",schedule_datepicker_label:"Date",schedule_datepicker_description:"Date Picker",time_picker_label:"Time",unknown:"Unknown",EllapsedTimeDays:"%{days}d %{hours}h %{minutes}m %{seconds}s",EllapsedTimeHours:"%{hours}h %{minutes}m %{seconds}s",EllapsedTimeMinutes:"%{minutes}m %{seconds}s",EllapsedTimeSeconds:"%{seconds}s",confirmRefreshUpload:"Confirm replacement of existing data",msgConfirmRefreshUpload:"The file '%{fileName}' already exists. Do you want to replace its data with the data contained in the selected file?",promptDialogTitle:"Prompt",promptControlTitle:"Specify the prompt values for %{paramLabel}",copyText:"Copy",copySuccess:"Copied to Clipboard successfully",copyFail:"Copy to Clipboard failed",clear:"Clear",invert:"Invert",numSelected:"%{number} of %{total} selected",search_box_default_text:"Find",title:"Title",back:"Back",edit:"Edit",invalidInput:"Invalid input",owner:"Owner",createdWithColon:"Created:",modifiedWithColon:"Modified:",typeWithColon:"Type:",dataRefWithColon:"Data refreshed:",defaultSlideoutLabel:"Slideout",invalidNumber:"The value entered is not a number. Type a number.",exceedMaxLength:"The text is too long. Shorten to %{maxLength} characters.",invalidEmailMessage:"Email address is not valid.",numberOutOfRange:"The value entered must be a number between %{min} and %{max}",numberTooSmall:"The value entered must be a number greater than %{min}",numberTooBig:"The value entered must be a number less than %{max}",defaultCompleteMessage:"Operation completed.",defaultProgressMessage:"Operation in progress...",defaultFailMessage:"Operation failed.",defaultIndefiniteMessage:"Operation in progress...",defaultPauseMessage:"Operation paused.",progressHideBtn:"Hide",paginationControl:"Open Collapsed Slideout(s)",confirmCancelMessage:"Do you want to discard your changes?",confirmCancel:"Confirm cancel",pinSlideout:"pin",unpinSlideout:"Unpin",details:"Details",edit_palette:"Edit",duplicate_palette:"Duplicate",reverse_palette:"Reverse",delete_palette:"Delete ",palette_copy:"%{paletteName} copy",showMoreColors:"More",showLessColors:"Less",addCustomColor:"Select custom color",createPalette:"Create a custom palette",moreActionsForPalette:"More actions for %{paletteName}",showMoreColorPalette:"More"}),define("baglass/core-client/js/core-client/nls/StringResources",["i18n!./CommonsResources","../utils/Lexicon"],(function(e,t){var n=new t({data:e,allowMissing:!0,verbose:!1});return{get:function(e,i){var r=n.translate(e,i);return r!==e?r:t.NOT_TRANSLATED+"("+e+")"}}})),define("baglass/core-client/js/core-client/utils/Utils",["jquery","lodash","../ui/templates/LoadingWaitAnimation1","../ui/templates/LoadingWaitAnimation2","../ui/templates/MediumSpinner","./templates/webfont","./templates/image","./templates/svg","./LegacyUtils","../nls/StringResources","./BrowserUtils"],(function(e,t,n,i,r,s,o,a,l,c,u){var d={WFG:"wfg",WFT:"wft",WFBI:"wfbi"},h={PNG:".png",JPEG:".jpeg",JPG:".jpg",GIF:".gif",SVG:".svg"};return{ALERT_ID:"com-ibm-ca-alert",setAttr:function(e,t,n){n&&e.attr(t,n)},addClass:function(e,t){t&&e.addClass(t)},_embed:function(t){e("use",t).each((function(n,i){var r=i.getAttribute("xlink:href")||i.getAttribute("href"),s=e(r)[0];if(s){var o=e("title",i)[0],a=!t.getAttribute("viewBox")&&s.getAttribute("viewBox"),l=document.createElementNS("http://www.w3.org/2000/svg","svg");e.each(i.attributes,(function(e,t){l.setAttribute(t.name,t.value)})),a&&l.setAttribute("viewBox",a);for(var c=s.cloneNode(!0);c.firstChild;)"title"===c.firstChild.tagName?c.removeChild(c.firstChild):l.appendChild(c.firstChild);var u=i.parentNode;u.appendChild(l),o&&u.appendChild(o),u.removeChild(i)}}))},embedSVGIcon:function(t){if(!u.isIE())return t;var n=e("svg",t);return n.length||(n=e(t).filter("svg")),n.length&&n.each(function(e,t){this._embed(t)}.bind(this)),t},setIcon:function(n,i,r,l,c,u){if(i){t.isBoolean(c)||(c=!1);var d=l||r,h=void 0,p=!1;this._isWebFont(i)?h=s:this._isImageIcon(i)?h=o:(p=!0,h=a);var g={icon:i,tooltip:r,label:d,color:u},f=u&&u.split(".");f&&f.length>1?g.class=f.join(" "):g.fill=u;var m=h(g),v=e(m);p&&this.embedSVGIcon(v),c?n.append(v):n.prepend(v)}},getLoadingAnimation:function(t){var r=void 0,s=void 0,o={loadingBarLabel:c.get("loading")};return 1===t?s=n:(s=i,this.activateAriaAlert(o.loadingBarLabel)),(r=e(s(o))).attr("aria-label",c.get("loading")),r[0]},getSpinner:function(){var t={loadingBarLabel:c.get("loading")},n=e(r(t));return n.attr("aria-label",c.get("loading")),n[0]},activateAriaAlert:function(t){if(t&&t.length){var n=e("#"+this.ALERT_ID);n.length&&n.remove(),(n=e("<div>",{id:this.ALERT_ID,style:"position:absolute; top:-9000px;",role:"alert","aria-live":"assertive"})).text(t),e("body").append(n),setTimeout(function(){n.remove()}.bind(this),100)}},closeDialog:function(){e(".dialogBlocker").find("#cancel").trigger("primaryaction")},_isWebFont:function(e){if(e)for(var t=Object.keys(d),n=0;n<t.length;n++){var i=d[t[n]],r=new RegExp("^"+i,"g");if(-1!==e.search(r))return!0}return!1},_isImageIcon:function(e){if(e)for(var t=Object.keys(h),n=0;n<t.length;n++){var i=h[t[n]],r=new RegExp(i,"g");if(-1!==e.search(r))return!0}return!1},legacyLaunch:function(e,t,n,i){return l.legacyLaunch(e,t,n,i)},EVENT_DIALOG:"eventDialog",setEventProperty:function(e,t,n){this._getSourceEvent(e)[t]=n},getEventProperty:function(e,t){var n=this._getSourceEvent(e);return n[t]&&!0===n[t]},_getSourceEvent:function(e){return e.gesture?e.gesture.srcEvent:e.originalEvent?e.originalEvent:e},isIpad:function(){return null!==navigator.userAgent.match(/iPad/i)&&(e("body").addClass("mobile"),!0)},isControlKey:function(e){return/Macintosh/.test(this._getBrowserUserAgent())?e.metaKey:e.ctrlKey},_getBrowserUserAgent:function(){return navigator.userAgent},isInIframe:function(e){try{return(e=e||window).self!==e.top}catch(e){return!0}},formatDuration:function(e){if(!e||isNaN(e))return c.get("unknown");var t=Math.floor(e/1e3)%60,n=Math.floor(t/60)%60,i=Math.floor(n/60)%24,r=Math.floor(i/24);return r>0?c.get("EllapsedTimeDays",{days:r,hours:i,minutes:n,seconds:t}):i>0?c.get("EllapsedTimeHours",{hours:i,minutes:n,seconds:t}):n>0?c.get("EllapsedTimeMinutes",{minutes:n,seconds:t}):c.get("EllapsedTimeSeconds",{seconds:t})},rgbToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},createTemporaryContainer:function(){var t=e(document.body).find(".reactTemporaryContainer");return 0===t.length&&(t=e('<div class="reactTemporaryContainer">'),e(document.body).append(t)),t.get(0)},removeTemporaryContainer:function(){e(document.body).find(".reactTemporaryContainer").remove()},reactRender:function(e,t){return new Promise((function(n,i){require(["react-dom"],(function(r){try{r.render(e,t,n)}catch(e){i(e)}}),i)}))},getCurrentWindow:function(){return window},traverse:function(e,n){for(var i=[e];i.length;){var r=i.shift();if(r&&n(r))return r;(t.isObject(r)||t.isArray(r))&&(i=i.concat(t.values(r)))}}}})),define("baglass/core-client/js/core-client/ui/Slideout",["./AccessibleView","jquery","lodash","../utils/UniqueId","../utils/ClassFactory","../utils/Utils","../utils/PerfUtils","../nls/StringResources"],(function(e,t,n,i,r,s,o,a){function l(){n.isString(this.id)||(this.id=this.content&&n.isString(this.content.module)?this.content.module:n.uniqueId("undefinedModule"))}function c(e,n){for(var i=!1;null!==e;)i=i||t.contains(e.$el.get(0),n),e=e.child;return i}function u(){var e=null;null===this.parent&&(this.hideHandler=function(n){"mousedown"===n.type||"touchstart"===n.type?e=n:(function(e,n,i){return!c(e,n.target)&&(!!t.contains(document.body,n.target)&&(!n.isDefaultPrevented()&&(0===e.$el.closest(".tabhidden").length&&(!s.getEventProperty(n,s.EVENT_DIALOG)&&(null===i||!c(e,i.target))))))}(this,n,e)&&this.hide({hideOnly:this.hideOnly}),e=null)}.bind(this))}function d(){null===this.hideHandler||this.hasOpenChild()||t(document).off(this.closeEventPattern,this.hideHandler),this.$el.children(".ui-resizable-handle").hide(),this.trigger("hide")}function h(e,n){var i=this;this.addChildLocked||(this.addChildLocked=!0,this.removeChild().then((function(){return i.child=e,n.global&&i.child.$el.addClass("globalSlideout"),n.overlay?(i.$el.css("z-index","2999"),t(i.$el.parents()[0]).append(i.child.$el)):i.$el.children(".pane-child").append(i.child.$el),i.child.render(),i.child.setContent(n.content),i.child.show()})).then((function(){i.addChildLocked=!1})))}var p=e.extend({_ClassFactory:r,ANIMATION_TIMEOUT:500,DISPLAY_LIMIT:3,PAGINATION_WIDTH:36,open:!1,events:{"primaryaction .pane-pagination-control":"pageBack","primaryaction .pin-icon":"_togglePin"},closeEventPattern:"mousedown.slideout touchstart.slideout clicktap.slideout",init:function(e){this.child=null,this.open=!1,this.parent=null,p.inherited("init",this,arguments),t.extend(this,e),this.hideHandler=null,this._showing=null,this.hideOnParentClick=!1!==this.hideOnParentClick,this._root=null===this.parent?this:this.parent._root,this._index=null===this.parent?0:this.parent._index+1,this.__initPinningSettings(),this.__initDisplaySettings(),this.uuid=i.get("slideout"),l.call(this),u.call(this,e),this._childToAdd=[],this._paginationLaunchPoint=null,void 0!==this.label&&null!==this.label||(this.label=n.uniqueId(a.get("defaultSlideoutLabel")))},__initPinningSettings:function(){n.isUndefined(this.pinning)&&(this.pinning={isPinned:!1,float:!0,display:!1}),n.isBoolean(this.pinning.isPinned)||(this.pinning.isPinned=!1),n.isBoolean(this.pinning.float)||(this.pinning.float=!0),n.isBoolean(this.pinning.display)||(!0===this.pinning.isPinned?this.pinning.display=!0:this.pinning.display=!1)},__initDisplaySettings:function(){this._displayIndex=null!==this.parent&&!0===this.overlay?this.parent._displayIndex:this._index,null===this.parent&&(this._root.displayLimit=n.isNumber(this.displayLimit)&&this.displayLimit>0?this.displayLimit:p.prototype.DISPLAY_LIMIT,this._root.collapseRootIndex=n.isNumber(this.collapseRootIndex)&&this.collapseRootIndex>=0?this.collapseRootIndex:0),this._displayInfo={firstDisplayedAfterCollapsed:null}},getRootId:function(){return this.getRootParent().id},isLast:function(){return null===this.child},setContent:function(e){return this.contentView&&(this.contentView.remove(),this.contentView=null),this.content=e,this.isRendered&&n.isObject(this.content)&&this.content.module?this._createContent():Promise.resolve()},setPinned:function(e){this.pinning.isPinned=void 0!==e&&e,this._updatePinCss(),this.trigger("change:pinState",{pinned:this.isPinned()})},getDisplayLimit:function(){return this._root.displayLimit},_handleEscape:function(){this.$el.children(".pane-child").children().length>=1?this.removeChild():this.hide({hideOnly:this.hideOnly,force:!0,isEscape:!0})},render:function(){o.createPerformanceMark({component:"glass",name:"renderSlideout-"+this.id,state:"start"}),this.isRendered=!0,this.$el.attr("role","group"),this.$el.attr("aria-label",this.label),this.parent||(this.$el.addClass("root"),this._windowResizeHandler=this._collapseChildren.bind(this),t(window).on("resize",this._windowResizeHandler),this.$el.on("escapeaction",t.proxy(this._handleEscape,this))),this.fireResizeStart=!0,this.$el.on("resize",this._handleResize.bind(this)),this.$el.addClass("flyoutPane pane-"+this.position);var e=t('<div class="pane-pagination-control" role="button"></div><div class="pane-content"></div><div class="pane-child"></div>');this.setInnerContent(e);var i=this.$el.find(".pane-pagination-control");s.setIcon(i,"common-chevron_left");var r=a.get("paginationControl");if(i.attr("aria-label",r),this.width&&this.setWidth(this.width),this.resizable&&this._setResizable(e),this.isPinDisplayed()){this.$el.find(".pane-content").append('<div class="pin-icon-container"><div class="pin-icon" tabindex="0"><svg class="svgIcon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#common-pin"></use></svg></div></div>');var l=this.$el.find(".pin-icon"),c=void 0;this.isPinned()?(this.$el.find(".pane-content").addClass("pane-pinned"),c=a.get("unpinSlideout")):(l.addClass("transform-pin"),c=a.get("pinSlideout")),l.attr("aria-label",c)}return n.isObject(this.content)&&this.content.module?this._createContent():Promise.resolve()},_onResizeStop:function(e){return function(){this.onResizeStop&&this.onResizeStop(e),this.fireResizeStart=!0}.bind(this)},_handleResize:function(e){e.target===e.currentTarget&&(this.fireResizeStart&&(this.onResizeStart&&this.onResizeStart(e),this.fireResizeStart=!1),this.onResize&&this.onResize(e),clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this._onResizeStop(e),200))},addChild:function(e){var t=n.isObject(e)?e:{};t.overlay=!0===t.overlay,t.overlay&&(n.isUndefined(t.width)||t.width<this.width)&&(t.width=this.width);var i=this._createSlideout({glassContext:this.glassContext,position:this.position,overlay:t.overlay,hideOnParentClick:t.hideOnParentClick,width:t.width,onHide:t.onHide,pinning:t.pinning,launchPoint:t.launchPoint,label:t.label,global:!!t.global,parent:this,enableTabLooping:t.enableTabLooping,resizable:t.resizable});return this.open?h.call(this,i,t):this._childToAdd.push(function(e,t){h.call(this,e,t)}.bind(this,i,t)),i},removeChild:function(e){return null!==this.child?this.child.hide(e):Promise.resolve()},isPinned:function(){return this.pinning.isPinned},isFloat:function(){return this.pinning.float},isPinDisplayed:function(){return this.pinning.display},_initializePinning:function(){this.pinning={isPinned:!1,float:!0,display:!1}},show:function(){return this.open||this.isBeingShown()?this._showing:this._showing=Promise.delay(30).then(function(){return this.trigger("show"),this._show()}.bind(this)).then(this._setFocusOnLast.bind(this))},_setFocusOnLast:function(){if(this.isLast())try{this.contentView&&this._setFocusInContentView()}catch(e){return e}},_show:function(){var e=this;return Promise.resolve().then((function(){e.$el.removeClass("closed")})).then((function(){e.$el.children(".ui-resizable-handle").show(),e.$el.children(".pane-content").removeClass("tabhidden"),e.$el.addClass("active"),e.$el.removeClass("inactive"),e.enterContainerOnlyInTabOrder(),e.open=!0,null!==e.child&&e.child.show();var i=n.last(e._childToAdd);return e._childToAdd=[],n.isFunction(i)&&i(),e.$el.hasClass("root")&&(e._button=t(".toolpane button.currentlySelected"),e._button.addClass("slideoutOpen")),null!==e.hideHandler&&t(document).on(e.closeEventPattern,null,{allowPropagationDefaultAction:!0},e.hideHandler),e._addClassToFinalSlideoutChild(),null!==e.parent&&!0===e.hideOnParentClick&&e.parent.$el.children(".pane-content").on("clicktap.removeChild",function(){this.removeChild()}.bind(e.parent)),e.whenAnimationDone("show").then(e._showHelper.bind(e))}))},_showHelper:function(){null===this.child&&this._collapseChildren(),!this.isPinned()||this.isFloat()||this.$el.hasClass("no-float")||this._updatePinCss(),this.trigger("done:show")},isOpen:function(){return this.open},isBeingShown:function(){return null!==this._showing&&this._showing.isPending()},hasOpenChild:function(){for(var e=this.child,t=!1;null!==e&&!t;)t=e.open,e=e.child;return t},hide:function(e){var i,r,s=function(e){var i=this,r=n.isObject(e)&&!0===e.force,s=n.isObject(e)&&!0===e.hideOnly,o=n.isObject(e)&&n.isNumber(e.depth)&&s?e.depth:-1,a=t.extend({},{force:r,hideOnly:s,depth:o}),l=n.isObject(e)&&!0===e.isEscape;return this._canHide({isEscape:l,depth:o}).then(this._doHide.bind(this,a)).then(function(){this._button&&this===this.getRootParent()&&(this._button.removeClass("slideoutOpen"),this._button.removeClass("currentlySelected"),this._button=null)}.bind(this)).finally((function(){i._hidingPromises.shift(),i._hidingOptions.shift()}))}.bind(this);return this._hidingPromises&&0!==this._hidingPromises.length?(i=this._hidingOptions,r=e||{},i.every((function(e){return["force","hideOnly","depth","isEscape"].some((function(t){return e[t]!==r[t]}))}))&&(this._hidingOptions.push(e||{}),this._hidingPromises.push(n.last(this._hidingPromises).finally((function(){return s(e)}))))):(this._hidingPromises=[],this._hidingOptions=[],this._hidingPromises.push(s(e)),this._hidingOptions.push(e||{})),n.last(this._hidingPromises)},_canHide:function(e){return new Promise(function(t,i){var r=this.isOpen()&&this.contentView&&n.isFunction(this.contentView.canHide),s=function(e){var n=0===e.depth;if(e.depth--,!n&&!this.isLast())return this.child._canHide(e).then(t,i);t()};if(r){var o=!0;try{o=this.contentView.canHide(e)}catch(e){console.error("Error while executing canHide method",e)}Promise.resolve(o).then(function(r){!0===r||n.isUndefined(r)?s.call(this,e).then(t,i):i()}.bind(this)).catch((function(){i()}))}else s.call(this,e)}.bind(this))},_doHide:function(e){return new Promise(function(i){if(this.open){var r=t.contains(this.$el[0],document.activeElement),s=[],o=this._hideOnly(s,e);n.isEmpty(s)?i():Promise.all(s).then(function(t){t.includes(this.id)&&d.call(this),e.hideOnly||o.remove(),r&&this._setFocusToLaunchPoint(),i()}.bind(this))}else{0===e.depth?(d.call(this),i()):(e.depth=e.depth-1,this._hideChild(e).then(function(){d.call(this),e.hideOnly||!e.force&&this.isPinned()||this.remove(),i()}.bind(this)))}}.bind(this))},_hideChild:function(e){if(null===this.child)return Promise.resolve("no child to hide");var t=[];return this._hideOnly(t,e),Promise.all(t)},_hideOnly:function(e,t){for(var i=this,r=void 0,s=0,o=t.force;n.isObject(i)&&(s<=t.depth||t.depth<0);)!o&&i.isPinned()||(n.isUndefined(r)&&(r=i,o=!0),e.push(i._hide(t))),i=i.child,s++;return n.isEmpty(e)||this._collapseChildren(),r},_hide:function(){var e=new Promise(function(e){this.open?(this.open=!1,0===this.$el.closest("html").length?(console.log("The slideout DOM element is already removed"),e("Slideout already removed")):(this.parent&&this.parent.$el.children(".pane-content").off("clicktap.removeChild"),this.whenAnimationDone("_hide").then(function(){this.onHide&&this.onHide(),e(this.id)}.bind(this)))):e("Slideout already hidden")}.bind(this));return e.then(function(){!1===this.open&&(this.$el.children(".pane-content").addClass("tabhidden"),this.removeContainerOnlyFromTabOrder(),this.$el.addClass("closed")),this._addClassToFinalSlideoutChild()}.bind(this)),this.isPinned()&&this.$el.removeClass("no-float"),this.$el.removeClass("collapsed"),this.$el.removeClass("collapseRoot"),this.$el.addClass("notransition"),this.$el[0].offsetHeight,this.$el.removeClass("active"),this.$el.addClass("inactive"),this.$el.removeClass("notransition"),e},remove:function(){this.child&&this.child.remove(),null!==this.parent&&this.parent.child===this&&(this.parent.child=null),this._windowResizeHandler&&(t(window).off("resize",this._windowResizeHandler),this.$el.off("resize",this._handleResize)),this.hideHandler&&(t(document).off(this.closeEventPattern,this.hideHandler),this.hideHandler=null),this.contentView&&this.contentView.remove(),this.$el.off("escapeaction"),this.open&&this.trigger("hide"),this.trigger("remove"),p.inherited("remove",this,arguments)},setWidth:function(e){t.isPlainObject(e)?this.$el.css(e):this.$el.css("width",e)},_createContent:function(){var e=this.content||{};return e.slideout=this,e=this.glassContext.addToOptions(e),this._ClassFactory.instantiate(this.content.module,e).then(function(e){this.contentView=e,this.$el.children(".pane-content").append(this.contentView.$el);var t=function(){o.createPerformanceMark({component:"glass",name:"renderSlideout-"+this.id,state:"end"}),this.isOpen()&&!this.isBeingShown()&&this._setFocusInContentView()},n=this.contentView.render();return Promise.resolve(n).then(function(){t.call(this),this.enableLooping(this.contentView.$el)}.bind(this)).catch(function(e){return this.logger.error("Error While rendering the content view for the slideout",e),Promise.reject(e)}.bind(this))}.bind(this))},_setFocusInContentView:function(){n.isFunction(this.contentView.setFocus)&&this.contentView.setFocus()},getRootParent:function(){return this._root},getLaunchPoint:function(){return null!==this._paginationLaunchPoint?this._paginationLaunchPoint:p.inherited("getLaunchPoint",this)},getWidth:function(){return this.$el.outerWidth()},getChildrenWithSelf:function(){for(var e=[this],t=this;t.child;)e.push(t.child),t=t.child;return e},_collapseChildren:function(){var e=this._findFirstToCollapse();if(this.getRootParent()._displayInfo=e,null!==e.firstToCollapse){var t=e.firstToCollapse;if(e=this._findSlideoutsToCollapse(e),n.each(e.visible,(function(e){e.$el.children(".pane-content").removeClass("tabhidden"),e.enterContainerOnlyInTabOrder()})),n.isEmpty(e.collapsed))t.$el.children(".pane-pagination-control:not(.collapsed .pane-pagination-control)").removeClass("visible"),t.$el.children(".pane-pagination-control:not(.collapsed .pane-pagination-control)").removeAttr("tabindex"),n.each(e.visible,(function(e){e._paginationLaunchPoint=null}));else{t.$el.addClass("collapseRoot"),t.$el.hasClass("collapsed")||(t.$el.addClass("animationPhase"),t.whenAnimationDone("collapseChildren").then(function(){this.$el.children(".collapsed .pane-pagination-control").addClass("visible"),this.$el.children(".collapsed .pane-pagination-control").attr("tabindex","0")}.bind(t))),n.each(e.collapsed,(function(e){e.$el.removeClass("active").addClass("collapsed"),e.$el.children(".pane-content").addClass("tabhidden"),e.$el[0]!==t.$el[0]&&e.removeContainerOnlyFromTabOrder()}));for(var i=1;i<e.visible.length;i++)e.visible[i]._paginationLaunchPoint=null;e.firstDisplayedAfterCollapsed._paginationLaunchPoint=t.$el.children(".collapsed .pane-pagination-control")[0]}}},_getAvailableWidth:function(){return this.getRootParent().$el.parent().innerWidth()},_findFirstToCollapse:function(){for(var e=null,t=this.getRootParent(),i=0,r=[],s=!1;!s;)t.open&&(null===e?t._displayIndex>=this._root.collapseRootIndex?e=t:(n.isEmpty(r)||n.last(r)._displayIndex!==t._displayIndex)&&(i+=t.getWidth(),r.push(t)):t._displayIndex===e._displayIndex?e=t:s=!0),s=null===(t=t.child)||s;return{firstToCollapse:e,visible:r,width:i,firstDisplayedAfterCollapsed:null,collapsed:[]}},_findSlideoutsToCollapse:function(e){var t=null,i=void 0,r=this.getRootParent()._getAvailableWidth(),s=this.getDisplayLimit(),o=[],a=!1;if(null!==e.firstToCollapse){for(i=e.firstToCollapse;null!==i;)t=i,i=i.child;i=t;for(var l=!1,c=!0,u=e.visible.length;!l;)!0===i.open&&(a?e.collapsed.unshift(i):c||e.width+i.getWidth()+p.prototype.PAGINATION_WIDTH<r&&u<s?(c=!1,i.$el.removeClass("collapsed").removeClass("collapseRoot").addClass("active"),(n.isEmpty(o)||i._displayIndex!==n.first(o)._displayIndex)&&(e.width+=i.getWidth(),o.unshift(i),u++)):i._displayIndex===n.first(o)._displayIndex?i.$el.removeClass("collapsed").removeClass("collapseRoot").addClass("active"):(e.firstDisplayedAfterCollapsed=n.first(o),e.collapsed.unshift(i),a=!0)),l=i===e.firstToCollapse,l=null===(i=i.parent)||l}return e.visible=e.visible.concat(o),e},_togglePin:function(){this.setPinned(!this.isPinned())},_updatePinCss:function(){var e=this.$el.find(".pin-icon"),t=void 0;this.isPinned()?(this.$el.find(".pane-content").addClass("pane-pinned"),this.isFloat()||(this.$el.addClass("notransition"),this.$el.addClass("no-float"),this.$el[0].offsetHeight,this.$el.removeClass("notransition")),e.removeClass("transform-pin"),t=a.get("unpinSlideout"),e.attr("aria-label",t)):(this.$el.find(".pane-content").removeClass("pane-pinned"),this.$el.addClass("notransition"),this.$el.removeClass("no-float"),this.$el[0].offsetHeight,this.$el.removeClass("notransition"),e.addClass("transform-pin"),t=a.get("pinSlideout"),e.attr("aria-label",t))},pageBack:function(e){if(!e.isDefaultPrevented()&&null!==this._root._displayInfo.firstDisplayedAfterCollapsed){var t=this._root._displayInfo.firstDisplayedAfterCollapsed,n=null!==t.child?t.child:t;n.hide(),e.preventDefault(),n._setFocusToLaunchPoint()}},whenAnimationDone:function(e){return new Promise(function(e){this.$el.off("transitionend webkitTransitionEnd oTransitionEnd"),this.$el.on("transitionend webkitTransitionEnd oTransitionEnd",(function(){e()}))}.bind(this)).timeout(this.ANIMATION_TIMEOUT).catch(Promise.TimeoutError,(function(){return console.log("failed to detect the end of the slideout animation, force the resolve; operation: "+e),Promise.resolve()}))},_addClassToFinalSlideoutChild:function(){for(var e=this.getRootParent(),t=e;null!==e.child;)e.$el.removeClass("lastSlideout"),(e=e.child).open&&(t=e);t.$el.addClass("lastSlideout")},_createSlideout:function(e){return new p(e)},_setResizable:function(e){var n=this,i="right"===this.position,r=e.filter(".pane-content"),o=t("<div>").addClass("resize-handle ui-resizable-handle ui-resizable-"+(i?"w":"e")),a={handles:[o],minWidth:this.resizable.min||300,maxWidth:this.resizable.max||1e3,direction:i?"left":"right"};i?o.insertBefore(r):o.insertAfter(r),s.setIcon(o,"common-handle"),new Promise((function(e,t){require(["jquery-ui","touch-punch"],e,t)})).then((function(){n.$el.resizable(a)}))}});return p})),define("baglass/common/ui/SlideoutRegistry",["../../core-client/js/core-client/ui/core/Events","jquery","lodash","../../core-client/js/core-client/ui/Slideout"],(e,t,n,i)=>{const r="SlidoutRegistry:openSlideout - One slideout is already open";function s(e,n){n.global&&(e=t("body"),n.$el.addClass("globalSlideout")),"left"===n.position?e.prepend(n.$el):e.append(n.$el)}function o(e){return e.toString=()=>e.msg,e}function a(e){if("right"!==e&&"left"!==e)throw o({msg:"SlidoutRegistry:openSlideout - Invalid Slideout position",position:e})}function l(e){const t=e.position;if(a(t),!n.isUndefined(this._open[t]))throw o({msg:r,open:this._open[t]});return n.isUndefined(this._registered[e.getRootId()])?(e.render(),s(this.$container,e)):e.getRootParent()!==this._registered[e.getRootId()]&&(e=this._registered[e.getRootId()]),e.show(),e}function c(e){const t=e.position;let l;if(this._registered[e.id])l=this._registered[e.id];else{if(a(t),!n.isUndefined(this._open[t]))throw o({msg:r});l=new i(e),l.render(),s(this.$container,l)}return l.show(),l}function u(e){const t=()=>{e.hasOpenChild()||(delete this._open[e.position],this._registered[e.getRootId()]=e,e.off("hide",t))},n=()=>{this._open[e.position]===e&&delete this._open[e.position],delete this._registered[e.getRootId()],e.off("remove",n),e.off("hide",t)};e.on("hide",t),e.on("remove",n)}const d=e.extend({init(e){d.inherited("init",this,arguments),t.extend(this,e),this._open={},this._registered={}},openSlideout(e){let r;if(!t.prototype.isPrototypeOf(this.$container))throw o({msg:"SlidoutRegistry:openSlideout - Undefined or invalid container",container:this.$container});if(i.prototype.isPrototypeOf(e))r=l.call(this,e);else{if(!n.isObject(e))throw o({msg:"SlidoutRegistry:openSlideout - Invalid Slideout parameter",parameter:e});r=c.call(this,e)}return this._open[r.position]=r.getRootParent(),u.call(this,this._open[r.position]),r},getOpenSlideout(e){if("left"!==e&&"right"!==e)throw o({msg:"SlidoutRegistry:getOpenSlideout - Invalid Slideout position",position:e});return this._open[e]},getOpenSlideouts(){const e=[];return n.isUndefined(this._open.left)||e.push(this._open.left),n.isUndefined(this._open.right)||e.push(this._open.right),e},getRegisteredSlideout(e){if(n.isString(e))return this._registered[e]},getContainer(){return this.$container},changeContainer(e){if(!t.prototype.isPrototypeOf(e))throw o({msg:"SlidoutRegistry:changeContainer - Undefined or invalid container",container:this.$container});if(this._open.left||this._open.right)throw o({msg:"SlidoutRegistry:changeContainer - Slideout is open",open:this._open});n.each(this._registered,t=>{s(e,t)}),this.$container=e},_removeSlideout(e){e&&e.remove()},cleanupSlideouts(){n.each(this._open,e=>{e&&e.remove()}),n.each(this._registered,e=>{e&&e.remove()})}});return d}),define("baglass/core-client/js/core-client/ui/Menu",["./AccessibleView","../utils/Utils","../nls/StringResources","../utils/BidiUtil","lodash","jquery"],(function(e,t,n,i,r,s){var o=e.extend({tagName:"nav",events:{"primaryaction .commonMenuItem":"_onSelectItem","primaryaction .moduleMenuItem":"_onSelectModuleItem",escapeaction:"_handleEscape"},init:function(e){r.extend(this,e.spec),this.enableTabLooping=!0,o.inherited("init",this,e.spec),this.$el.attr("role","navigation"),this.$activeItem=void 0,this.closeMenu=this._closeMenu.bind(this)},render:function(){var e=this;try{this.$el.empty(),this.$el.attr("class",""),this.$el.attr("aria-label",this.ariaLabel),this.$el.addClass("commonMenu").addClass("commonMenuActive"),this._itemMap={};var a=s("<ul></ul>",{role:"list",tabIndex:"0"}).addClass("commonMenuItems");a.on("keydown",this.handleKeyUpDown.bind(this));var l=r.filter(this.items,(function(e){return""!==e.icon&&void 0!==e.icon}));return r.each(this.items,(function(o){var c=s("<li></li>",{role:"listitem",tabIndex:"0"}).addClass("commonMenuItem");c.on("mouseover",e.onHover.bind(e,c)),c.on("mouseleave",e.onFinishHover.bind(e)),!0===o.selected&&c.addClass("selected"),o.disabled&&c.addClass("disabled"),o.highlight&&c.addClass("highlight"),c.addClass(o.id);var u=e._buildDomItemId();if(e._itemMap[u]=o,c.attr("id",u),c.attr("walkme-data-id",o.id),o.module)c.append(e._loadModule(c,o.module)),c.removeClass("commonMenuItem"),c.addClass("moduleMenuItem");else if("divider"===o.type)c.addClass(o.type),c.attr("tabIndex","-1");else{var d=s("<a></a>").addClass("commonMenuLink"),h=s("<span></span>"),p=r.isString(o.label)?o.label:"";d.attr("role","link"),c.attr("aria-label",p),h.text(p),h.attr("title",i.enforceTextDirection(p)),h.attr("dir",i.resolveBaseTextDir(p)),l.length&&!1!==o.indent&&h.addClass("hasIcon"),o.badge&&s("<span>").addClass("badge").text(o.badge).appendTo(h),d.append(h),t.setIcon(d,o.icon,o.iconTooltip,null,null,o.iconColor),c.append(d)}if(o.rightIcon){var g=s("<div>").addClass("rightIcon").attr("title",o.rightIcon.title);t.setIcon(g,o.rightIcon.icon),c.append(g)}if(o.removable){var f=o.removeIconLabel||n.get("remove"),m=s("<div></div>",{role:"button","aria-labelledby":u,title:f,tabIndex:"0"}).addClass("removeItemIcon");m.focus((function(e){s(e.target).parent().addClass("hasFocus")})),m.blur((function(e){s(e.target).parent().removeClass("hasFocus")})),t.setIcon(m,"common-close_16"),m.on("primaryaction.bi.commons.ui.menu",e._handleRemoveItem.bind(e,c)),c.append(m)}a.append(c),o&&r.isFunction(o.onRender)&&o.onRender(c)})),a.is(":empty")||(this.$el.append(a),this.enableLooping(a)),o._registerOpenMenu(this),setTimeout(function(){this.setFocus(),this._attachCloseCallbacks()}.bind(this),200),Promise.resolve(this.el)}catch(e){return Promise.reject(e)}},setFocus:function(){this.$el.find(".commonMenuItems").focus()},_handleRemoveItem:function(e,t){var n=this._itemMap[e.attr("id")];if(t.stopPropagation(),n&&r.isFunction(n.onRemove)){var i=n.onRemove();Promise.resolve(i).then(function(t){t&&(this._setNextTabFocus(e),e.remove())}.bind(this)),delete this._itemMap[e.attr("id")]}},_setNextTabFocus:function(e){var t=e.next(".commonMenuItem");0===t.length&&(t=e.prev(".commonMenuItem")),t.focus()},_getFocusableElements:function(){var e=[];this.$el&&document.querySelectorAll(".commonMenuItem").forEach((function(t){0===t.tabIndex&&e.push(s(t))}));return e},_handleEscape:function(e){return this._closeMenu(e,!1),this.getLaunchPoint().focus(),!1},onHover:function(e){this.$activeItem=e,this.$activeItem.blur(),this.$el.find(".commonMenuItems").focus()},onFinishHover:function(){this.$activeItem=void 0,this.$el.find(".commonMenuItems").focus()},handleKeyUpDown:function(e){var t=this._getFocusableElements(),n=e.keyCode||e.which,i=void 0;!this.$activeItem&&t.length>0?(t[0].focus(),this.$activeItem=t[0],this.$activeItem.focus()):38===n?((i=this.$activeItem.prev(".commonMenuItem")).hasClass("divider")&&(i=i.prev(".commonMenuItem")),this.$activeItem=i.length?i:this.$activeItem,this.$activeItem.focus()):40===n&&((i=this.$activeItem.next(".commonMenuItem")).hasClass("divider")&&(i=i.next(".commonMenuItem")),this.$activeItem=i.length?i:this.$activeItem,this.$activeItem.focus())},_onSelectItem:function(e){var t=this._itemMap[e.currentTarget.id];e.stopPropagation(),e.gesture&&e.gesture.preventDefault(),this._closeMenu(e,!1),t&&r.isFunction(t.onSelect)&&t.onSelect()},_onSelectModuleItem:function(e){var t=this._itemMap[e.currentTarget.id];e.stopPropagation(),this._closeMenu(e,!0),t&&r.isFunction(t.onSelect)&&t.onSelect()},_buildDomItemId:function(){return this.viewId+"_"+r.uniqueId("item")},_attachCloseCallbacks:function(){s(document).on("primaryaction.bi.commons.ui.menu",this.closeMenu),s(document).on("contextmenu.bi.commons.ui.menu",this.closeMenu),s(window).on("resize.bi.commons.ui.menu",this.closeMenu)},_closeMenu:function(e,t){return t?Promise.resolve():r.isFunction(this.whenReadyToClose)?this.whenReadyToClose(e).then(this.remove.bind(this),this.remove.bind(this)):(this.remove(),Promise.resolve())},_loadModule:function(e,t){require([t],function(t){return new t({$el:e}).render()}.bind(this))},remove:function(){o._unregisterOpenMenu(this),s(document).off(".bi.commons.ui.menu",this.closeMenu),s(window).off(".bi.commons.ui.menu",this.closeMenu),o.inherited("remove",this,arguments)}});return o._openMenus=[],o._registerOpenMenu=function(e){-1===o._openMenus.indexOf(e)&&(o._openMenus.push(e),s("body").hasClass("openedMenu")||s("body").addClass("openedMenu"))},o._unregisterOpenMenu=function(e){o._openMenus=r.reject(o._openMenus,(function(t){return t===e})),0===o._openMenus.length&&s("body").removeClass("openedMenu")},o.hideOpenMenus=function(){r.each(o._openMenus,(function(e){e.closeMenu()}))},o})),define("baglass/ajax/AjaxErrorFactory",["../core-client/js/core-client/errors/BaseError"],(function(e){return{create:function(t,n,i){var r=e.extend({init:function(e,t){r.inherited("init",this,arguments),this.name="AjaxError",this.jqXHR=t.requestInfo.jqXHR,this.textStatus=t.requestInfo.textStatus,this.errorThrown=t.requestInfo.errorThrown}});return new r(t.statusText,{requestInfo:{jqXHR:t,textStatus:n,errorThrown:i},code:t.status})}}})),define("baglass/services/AjaxService",["jquery","../ajax/AjaxErrorFactory"],(e,t)=>{class n{constructor(e){this._logWarning=e=>{this._logger&&this._logger.warn&&this._logger.warn("AjaxService",e)},this._handleUrlTooLong=(e,t,n,i)=>{let r="Request too long. ".concat(JSON.stringify(e),". Prepared URL length: ").concat(t.preparedReqLen," exceeds max configured length ").concat(t.maxQuerySize,".");this._logWarning(r);let s=i(n);return r="URL reducer invoked and returned reduced params: ".concat(JSON.stringify(s),"."),this._logWarning(r),s.skipUrlReducer=!0,this.ajax(s)},this._issueRequest=(e,t)=>{const n=e.params;return n.urlReducer&&!n.skipUrlReducer?this._checkUrlLength(e).then(i=>i.urlTooLong?this._handleUrlTooLong(e,i,t,n.urlReducer):this.executeProcessedAjax(e.params)):this._sendRequest(e)},this._sendRequest=e=>new Promise((t,n)=>{this._cntr++;var i="xhr"+this._cntr,r=this.ajaxFn(e.params);this._inflightRequests[i]=r,r.then((e,n,i)=>{t({data:e,textStatus:n,jqXHR:i})}).fail((e,i,r)=>{"abort"!==r?n(this._AjaxErrorFactory.create(e,i,r)):t({textStatus:i,jqXHR:e})}).done(()=>{this._inflightRequests[i]&&delete this._inflightRequests[i]})}),this._logger=e&&e.logger||console,this._configService=e&&e.configService,this._errorMessageRenderer=e&&e.errorDialog||void 0,this._requestHandlers=[],this._responseHandlers=[],this._errorHandler=null,this._cntr=0,this._inflightRequests={}}addRequestHandler(e){if(!e||"function"!=typeof e.prepareRequest)throw new Error('Handler must implement function "prepareRequest"');this._requestHandlers.push(e)}addResponseHandler(e){if(!e||"function"!=typeof e.handleResponse)throw new Error('Handler must implement function "handleResponse"');this._responseHandlers.push(e)}setErrorHandler(e){if(!e||"function"!=typeof e.handleError)throw new Error('Handler must implement function "handleError"');this._errorHandler=e}_buildRequestObject(e){return{params:e||{}}}ajax(e){let t=this._buildRequestObject(e);const n=e&&e.urlReducer?_objectSpread({},e):null;return this._prepareRequest(t).then(this._issueRequest.bind(this,t,n)).then(this._handleResponse.bind(this,t),this._handleError.bind(this,t))}executeProcessedAjax(e){let t=this._buildRequestObject(e);return this._executeProcessedAjax(t)}_executeProcessedAjax(e){return this._sendRequest(e).then(this._handleResponse.bind(this,e),this._handleError.bind(this,e))}prepareRequest(e){let t=this._buildRequestObject(e);return this._prepareRequest(t,!0)}_getUrlAndParmsLength(e){const{url:t,data:n,method:i}=e,r=t.length;if("GET"===i){let e="";if("string"==typeof n){e=n.split("&").reduce((e,t)=>{var n=t.split("=");return"".concat(e,"&").concat(n[0],"=").concat(encodeURIComponent(n[1]))},"")}else if(Array.isArray(n))e=n.reduce((e,t)=>"".concat(e,"&").concat(encodeURIComponent(t.name),"=").concat(encodeURIComponent(t.value)),"");else if("object"==typeof n)for(let t in n)e="".concat(e,"&").concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]));return r+e.length}return r}_checkUrlLength(e){return this._configService.getDatasetQuerySize().then(t=>{const n=this._getUrlAndParmsLength(e.params);return{urlTooLong:n>t,maxQuerySize:t,preparedReqLen:n}})}_prepareRequest(e){let t=Promise.resolve();return this._requestHandlers.forEach(n=>{t=t.then(n.prepareRequest.bind(n,e))}),t}cancelAllRequests(){Object.keys(this._inflightRequests).forEach(e=>{try{this._inflightRequests[e].abort()}catch(e){this._logger&&this._logger.error&&this._logger.error("AjaxService.cancelAllRequests",e)}})}showError(e,t){return this._errorMessageRenderer&&"function"==typeof this._errorMessageRenderer.showError?this._errorMessageRenderer.showError(e,t):Promise.reject(new Error("Unable to display error dialog: "+t))}_handleResponse(e,t){var n=Promise.resolve();return this._responseHandlers.forEach(i=>{n=n.then(i.handleResponse.bind(i,e,t))}),n.then(()=>t)}_handleError(e,t){return this._errorHandler?this._errorHandler.handleError(e,t):Promise.reject(t)}}return n.prototype.ajaxFn=e.ajax,n.prototype._AjaxErrorFactory=t,n}),define("baglass/services/ClipboardService",["lodash"],(function(e){return class{constructor(e,t){e&&this.initialize(t)}initialize(e){this.glassContext=e,this._clipboardData="",this._storedType="string"}set(e){return new Promise((t,n)=>{try{this._set(e),t()}catch(e){n(e)}})}get(){return new Promise(e=>{e(this._get())})}clear(){return new Promise(e=>{this._clipboardData="",this._storedType="string",e()})}_set(t){if(e.isFunction(t))throw new Error("Exception: Cannot encode functions for clipboard storage");this._storedType=typeof t,e.isString(t)||(t=JSON.stringify(t)),this._clipboardData=t}_get(){let e=this._clipboardData;return"object"===this._storedType?e=JSON.parse(this._clipboardData):"number"===this._storedType&&(e=Number(this._clipboardData)),e}}})),define("baglass/app/CoachMark",[],(function(){return class{render(){}}})),define("baglass/app/CoachMarkPersistence",[],()=>class{isRead(){return Promise.resolve(!0)}marksAsRead(){}reset(){}}),define("baglass/app/services/CoachMarkService",["../../core-client/js/core-client/ui/core/Events","../CoachMark","../CoachMarkPersistence"],(function(e,t,n){var i=e.extend({init:function(e){i.inherited("init",this,arguments),this.renderer=t,this.glassContext=e,this.persistence=new n({glassContext:e})},setRenderer:function(e){this.renderer=e},setPersistence:function(e){this.persistence=e},getRenderer:function(){return this.renderer},getPersistence:function(){return this.persistence},isCoachMarkEnabled:function(){return"function"==typeof this.persistence.isEnabled?this.persistence.isEnabled().then((function(e){return!0===e})).catch((function(){return!1})):Promise.resolve()},disableCoachMarks:function(){return this.trigger("disable:all",{}),"function"==typeof this.persistence.disable?this.persistence.disable().then((function(){return!0})).catch((function(){return!1})):Promise.resolve()},enableAndRestart:function(){return this.trigger("enable:restart",{}),"function"==typeof this.persistence.restart?this.persistence.restart().then((function(){return!0})).catch((function(){return!1})):Promise.resolve()},enableAndContinue:function(){return this.trigger("enable:continue",{}),"function"==typeof this.persistence.restart?this.persistence.restart().then((function(){return!0})).catch((function(){return!1})):Promise.resolve()}});return i})),define("baglass/app/RestUrls",[],(function(){return{JSON_CONTENT_TYPE:"application/json; charset=utf-8",JSON_DATA_TYPE:"json",INSTALL_ENV:"v1/configuration/keys/Glass/installMode",SSO_URL:"v1/ui/sso"}})),define("baglass/app/services/ConfigService",["jquery","lodash","../RestUrls","../../nls/StringResources"],(e,t,n,i)=>{class r{constructor(t){e.extend(this,t),this.CONTENTLOCALES=r.CONTENTLOCALES,this.PRODUCTLOCALES=r.PRODUCTLOCALES,this.TIMEZONES=r.TIMEZONES,this.LEGACYLAUNCHABLE=r.LEGACYLAUNCHABLE}initialize(e){if(!t.isObject(e))throw new Error("Invalid configuration context");if(t.extend(this,t.pick(e,r.CONTENTLOCALES,r.PRODUCTLOCALES,r.TIMEZONES,r.LEGACYLAUNCHABLE,r.DEFAULTHOME,r.DEFAULTLOGIN,r.PRODUCTVERSION,r.SSOINFO,r.PORTAL_PAGES,r.DATA_SERVICE_QUERY_SIZE,r.INSTRUMENTATION_CONFIG,r.DIGITAL_CONTEXT_ENABLED,r.CLIENT_VALID_DOMAIN_LIST,r.XSS_CHECKING,r.CONF_MAPBOX_TOKEN,r.CONF_MAPBOX_ACCOUNTNAME,r.CONF_MAPBOX_SECRETTOKEN,r.MAINTENANCE_MESSAGE,r.MAINTENANCE_LINK,r.DISABLE_WHATSNEWSERVICE,r.DISABLE_ALERTBANNER,r.DISABLE_GLOBALTOAST,r.DISP_ZIPI_IPA_ENABLED,r.ZIPI_IPA_ENABLED,r.LIBERTY_MODE_ONLY)),this[r.SSOINFO]&&this._processSSOInfo(this[r.SSOINFO]),this[r.CONTENTLOCALES])try{this[r.CONTENTLOCALES]=JSON.parse(this[r.CONTENTLOCALES])}catch(e){this.glassContext.getCoreSvc(".Logger").error("Error parsing supportContentLocales JSON",e),this[r.CONTENTLOCALES]=void 0}if(e.featureRules)try{const t=JSON.parse(e.featureRules);this.glassContext.getCoreSvc(".FeatureChecker").addRules(t)}catch(e){this.glassContext.getCoreSvc(".Logger").error(e)}}setConfigValue(e,n){var i={};return i[e]=t.isObject(n)?JSON.stringify(n):n,this.glassContext.getCoreSvc(".Ajax").ajax({url:r.BASE_URL+r.GLOBAL,type:"PUT",contentType:"application/json",data:JSON.stringify(i)}).then(()=>{this[e]=n}).catch(e=>{const t=new Error(r.ERR_SET_CONFIG_VALUES);throw t.msg=t.message,t.causedBy=e,t})}getProductVersion(){return this.getConfigValue(r.PRODUCTVERSION)}getVersion(){return this.getConfigValueSync(r.PRODUCTVERSION)}getContentLocales(){return this._getConfigList(r.CONTENTLOCALES,!0)}getProductLocales(){return this._getConfigList(r.PRODUCTLOCALES,!0)}getTimeZones(){return this._getConfigList(r.TIMEZONES,!0)}getLegacyLaunchable(){return this._getConfigList(r.LEGACYLAUNCHABLE)}getDefaultHome(){return this._getConfigList(r.DEFAULTHOME)}getDefaultLogin(){return this.getConfigValue(r.DEFAULTLOGIN)}getDatasetQuerySize(){return this.getConfigValue(r.DATA_SERVICE_QUERY_SIZE)}getXSSChecking(){return this[r.XSS_CHECKING]}getConfigValue(e,t){return this._getHelper(e,t,!1)}getConfigValueSync(e){return this._getHelperSync(e)}getAllowedUrlLoginParameters(){return this._getSSOInfo().urlLoginParameters}getSSOLoginURL(){return this[r.SSO_LOGIN]?this[r.SSO_LOGIN]:this._getSSOInfo().login}getSSOLogoutURL(){return this[r.SSO_LOGOUT]?this[r.SSO_LOGOUT]:this._getSSOInfo().logout}getInstrumentationConfig(){return this.getConfigValueSync(r.INSTRUMENTATION_CONFIG)}isDigitalContextEnabled(){return this.getConfigValueSync(r.DIGITAL_CONTEXT_ENABLED)}_getConfigList(e,t){return this._getHelper(e,t,!0)}_getSSOInfo(){return this.getConfigValueSync(r.SSOINFO)||{}}_getHelper(e,n,i){if(t.isUndefined(this[e])){var s=r.BASE_URL+e,o=this.glassContext.getCoreSvc(".UserProfile");return n&&(s+=o.preferences.productLocale),this.glassContext.getCoreSvc(".Ajax").ajax({url:s,type:"GET"}).then(s=>{var a=s.data;try{var l=e;if(n&&(l+=o.preferences.productLocale),i){const e=a[l];a=e===r.MISSING_VALUE?{}:JSON.parse(e)}else a=a[l];t.isUndefined(a)||(this[e]=a)}catch(t){var c='"'+t.message+'" encountered while parsing '+e;this.glassContext.getCoreSvc(".Logger").error(c)}return this[e]}).catchReturn()}return Promise.resolve(this[e])}_getHelperSync(e){return this[e]}_getFormats(){return{HTML:i.get("html"),PDF:i.get("pdf"),CSV:i.get("csv"),spreadsheetML:i.get("spreadsheetML"),xlsxData:i.get("xlsxData")}}_getBaseTextDirections(){return{RTL:i.get("rtl"),LTR:i.get("ltr"),AUTO:i.get("contextual")}}_getShowHints(){return{showAll:i.get("showAll"),hideAll:i.get("hideAll")}}clearConfigs(){this._contentLocales=void 0,this._productLocales=void 0,this._timeZoneIDs=void 0,this._defaultHome=void 0}setSSOURL(){return this[r.SSOINFO]?Promise.try(()=>this._processSSOInfo(this[r.SSOINFO])):this.glassContext.getCoreSvc(".Ajax").ajax({url:n.SSO_URL,type:"GET",contentType:n.JSON_CONTENT_TYPE,dataType:n.JSON_DATA_TYPE}).then(e=>{var t=e.data;return this[r.SSOINFO]=t,this._processSSOInfo(t)}).catch(e=>{throw this.glassContext.getCoreSvc(".Logger").error("Internal error: set SSO URL failed: "+e.jqXHR.responseText),e})}_processSSOInfo(t){t&&(t.login||t.logout)&&e.ajaxSetup({headers:{"X-CA-SSO":this.glassContext.ajaxCodes.SSO}})}}return r.BASE_URL="v1/configuration/keys/",r.CONTENTLOCALES="supportedContentLocales_",r.PRODUCTLOCALES="supportedProductLocales_",r.TIMEZONES="timeZones_",r.LEGACYLAUNCHABLE="Configuration.LegacyLaunchable",r.SSOINFO="ssoInfo",r.DEFAULTHOME="Glass.welcomePage",r.DEFAULTLOGIN="Glass.loginPage",r.PRODUCTVERSION="InstallService.productVersion",r.DIGITAL_CONTEXT_ENABLED="Glass.digitalContextEnabled",r.PORTAL_PAGES="ContentApps/enableMyPortalPages",r.GLOBAL="global",r.ERR_SET_CONFIG_VALUES="setConfigValue failed",r.DATA_SERVICE_QUERY_SIZE="DatasetService/urlQuerySize",r.INSTRUMENTATION_CONFIG="instrumentationConfig",r.CLIENT_VALID_DOMAIN_LIST="ClientValidDomainList",r.XSS_CHECKING="CAF.caf_tpXSSCheckingUsed",r.CONF_MAPBOX_TOKEN="Mapbox.token",r.CONF_MAPBOX_SECRETTOKEN="Mapbox.secretToken",r.CONF_MAPBOX_ACCOUNTNAME="Mapbox.accountName",r.MAINTENANCE_MESSAGE="Glass.maintenanceMessage",r.MAINTENANCE_LINK="Glass.maintenanceLink",r.DISABLE_WHATSNEWSERVICE="Glass.disableWhatsNewAlerts",r.DISABLE_ALERTBANNER="Glass.disableAlertBanner",r.DISABLE_GLOBALTOAST="Glass.disableGlobalToast",r.SSO_LOGIN="Glass.sso_login",r.SSO_LOGOUT="Glass.sso_logout",r.DISP_ZIPI_IPA_ENABLED="DISP.zipi.IPAEnabled",r.ZIPI_IPA_ENABLED="zipi.IPAEnabled",r.LIBERTY_MODE_ONLY="LibertyModeOnly",r.MISSING_VALUE="myDefault",r}),define("baglass/services/ContextService",[],(function(){var e=function(e){this.glassContext=e.glassContext};return e.prototype.get=function(e){return this.glassContext.getCoreSvc(".UserProfile")[e]},e})),define("baglass/services/EventsService",["../core-client/js/core-client/ui/core/Events"],(function(e){"use strict";return e.extend({})})),define("baglass/services/FeatureChecker",[],(function(){"use strict";var e=function(e){return"object"==typeof e&&!Array.isArray(e)},t=function(e){this._rules=e||{}};return t.prototype.setRules=function(e){this._rules=e},t.prototype.addRules=function(t){e(t)&&Object.keys(t).forEach(function(n){e(t[n])&&(this._rules[n]?Object.keys(t[n]).forEach(function(e){this._rules[n][e]=t[n][e]}.bind(this)):this._rules[n]=t[n])}.bind(this))},t.prototype.checkValue=function(e,t,n){var i=!1;return e&&t&&this._rules[e]&&void 0!==this._rules[e][t]&&(i=this._rules[e][t]===n),i},t.prototype.getFeatureFlag=function(e,t){var n=null;return e&&t&&this._rules[e]&&(n=this._rules[e][t]),n},t.prototype.getFeatureFlags=function(e){return e?this._rules[e]:null},t.prototype.toJSON=function(){return JSON.stringify(this._rules)},t})),define("baglass/app/FeatureRules",[],(function(){return{"ba-glass":{stringOnlyQS:"enabled"}}})),define("baglass/app/services/FetchService",["jquery","../../core-client/js/core-client/ui/core/Class","../../ajax/AjaxErrorFactory"],(function(e,t,n){return t.extend({init:function(t){e.extend(this,t)},sendBaseRequest:function(t,i){return i=e.extend(!0,{},i,{url:t}),this.glassContext.getCoreSvc(".Ajax").ajax(i).then((function(e){return{data:e.data,code:e.jqXHR.status}})).catch((function(e){var t=e.jqXHR;throw n.create(t,t.statusText,e)}))},send:function(e,t){return this.sendBaseRequest(e,t)},post:function(t,n){var i=e.extend(!0,{},n,{type:"POST"});return this.send(t,i)},put:function(t,n){var i=e.extend(!0,{},n,{type:"PUT"});return this.send(t,i)},delete:function(t,n){var i=e.extend(!0,{},n,{type:"DELETE"});return this.send(t,i)},get:function(t,n){var i=e.extend(!0,{},n,{type:"GET"});return this.send(t,i)}})})),define("baglass/app/services/AjaxService",["jquery","../../core-client/js/core-client/ui/core/Class"],(function(e,t){var n=t.extend({init:function(t){e.extend(this,t),e.each(["get","put","post","delete"],(function(t,i){n.prototype[i]=function(t,n){var r=e.extend({},n);return r.type=i,r.url=t,this.ajax(r)}}))},ajax:function(t){var n=e.Deferred();return this.glassContext.getCoreSvc(".Ajax").ajax(t).then((function(e){n.resolve(e.data,e.textStatus,e.jqXHR)})).catch((function(e){n.reject(n,e.jqXHR,e.textStatus,e.errorThrown)})),n.promise()}});return n})),define("baglass/services/LogService",[],(function(){var e=function(){this.logLevelEnum={debug:50,info:40,warn:30,error:20},this._level=this.logLevelEnum.error,this._active=!0,this.localStorageKeys={isActive:"com.ibm.ba.config.logging.isActive",level:"com.ibm.ba.config.logging.level"};var e=this._getLocalStorage(this.localStorageKeys.isActive);null!==e&&("function"==typeof e.toLowerCase&&"true"===e.toLowerCase()?this._active=!0:this._active=!1);var t=this._getLocalStorage(this.localStorageKeys.level);null!==t&&(this._level=t)};return e.prototype.turnOnLogging=function(){this._active=!0},e.prototype.turnOffLogging=function(){this._active=!1},e.prototype.isActive=function(){return this._active},e.prototype.getLevel=function(){return parseInt(this._level)},e.prototype.setLevelError=function(){this._level=this.logLevelEnum.error},e.prototype.setLevelWarn=function(){this._level=this.logLevelEnum.warn},e.prototype.setLevelInfo=function(){this._level=this.logLevelEnum.info},e.prototype.setLevelDebug=function(){this._level=this.logLevelEnum.debug},e.prototype.error=function(){this._active&&this._level>=this.logLevelEnum.error&&console.error.apply(console,this._addStack(arguments))},e.prototype.warn=function(){this._active&&this._level>=this.logLevelEnum.warn&&console.warn.apply(console,arguments)},e.prototype.info=function(){this._active&&this._level>=this.logLevelEnum.info&&console.info.apply(console,arguments)},e.prototype.debug=function(){this._active&&this._level>=this.logLevelEnum.debug&&console.debug.apply(console,arguments)},e.prototype.log=function(){this._active&&console.log.apply(console,arguments)},e.prototype.saveConfig=function(e,t){void 0!==e&&(this._level=e),void 0!==t&&(this._active=t),this._setLocalStorage(this.localStorageKeys.isActive,this._active?"true":"false"),this._setLocalStorage(this.localStorageKeys.level,this._level)},e.prototype._setLocalStorage=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){console.error(e)}},e.prototype._getLocalStorage=function(e){var t=null;try{t=window.localStorage.getItem(e)||null}catch(e){console.error(e)}return t},e.prototype._addStack=function(){var e=Array.prototype.slice.call(arguments),t=(new Error).stack||"";if(""===t)try{y.name}catch(e){t=e.stack}var n=(t=t.split("\n").map((function(e){return e.trim()}))).splice("Error"===t[0]?2:1);return e.push({stack:n}),e},e})),define("baglass/utils/RequestIdleCallback",[],()=>{const e={requestIdleCallback:(e,t={})=>setTimeout(()=>{e()},Math.floor(Math.random()*(t.timeout||50)))};return window.requestIdleCallback||(window.requestIdleCallback=e.requestIdleCallback),e}),define("baglass/services/PrefetchService",["lodash","../utils/RequestIdleCallback"],e=>class{constructor(e){this._FETCHED={},this.glassContext=e}prefetchResources(t){let n=Promise.resolve();return e.isArray(t)?t.forEach(t=>{e.isString(t)?this._FETCHED[t]||(n=n.then(this._requireResource.bind(this,t))):this.glassContext.getCoreSvc(".Logger").warn("Resource ".concat(JSON.stringify(t)," is not a string..."))}):this.glassContext.getCoreSvc(".Logger").warn("Parameter ".concat(JSON.stringify(t)," is not an array...")),n}_requireResource(e){return this._FETCHED[e]=!0,new Promise(t=>{window.requestIdleCallback(()=>{require([e],t,n=>{this.glassContext.getCoreSvc(".Logger").warn("Failed to prefetch resource at path: ".concat(e),n),t()})},{timeout:50})})}}),define("baglass/services/ServiceRegistry",[],()=>class{constructor(e){this.services=e.services||{},this.deprecated={},this._waitList={},this._declared={}}getSvc(e,t){return new Promise((n,i)=>{try{this._get(e,n,i,t)}catch(e){i(e)}})}getSvcSync(e){if(this.services[e])return this.services[e];throw new Error('Service "'+e+'" has not been registered')}get(e,t,n,i){this._get(e,t,n,i)}exists(e){return!(!e||!this.services[e])}deregister(e){this._declared[e]&&delete this._declared[e],this.exists(e)&&("function"==typeof this.services[e].destroy&&this.services[e].destroy(),delete this.services[e],this._cleanupWaitList(e))}declare(e,t,n){if(!e)throw new Error("Illegal service declaration: name missing");if(!t)throw new Error("Illegal service declaration: modulePath missing");if(!this.exists(e)){if(this._declared[e]&&this._declared[e].modulePath!==t)throw new Error("Illegal service declaration. Attempted to re-declare a service with a different module path");this._declared[e]={modulePath:t,initializeWith:n},this._waitList[e]&&this._loadDeclaredService(e)}}declared(e){return!!this._declared[e]}_get(e,t,n,i){var r=n=>{this.deprecated[e]&&(console.warn("The service '"+e+"' has been deprecated."),this.deprecated[e]._replacedBy&&console.info("The service '"+e+"' has been replaced by '"+n.replacedBy+"'.")),t&&t(n)};this.services[e]?r(this.services[e]):"."===e[0]||i?this._declared[e]?this._loadDeclaredService(e).then(r):this._waitForRegister(e,r,n,i||3e4):this._loadServiceByModuleName(e,r,n)}_loadServiceByModuleName(e,t,n){require([e],n=>{this.services[e]||this.register(e,new n),t(this.services[e])},t=>{var i="Service module: '"+e+"' not found.";if(n){var r=new Error(i);r.causedBy=t,n(r)}else console.error(i)})}_loadDeclaredService(e){var t=this._declared[e].modulePath,n=this._declared[e].initializeWith;return delete this._declared[e],new Promise((i,r)=>{require([t],t=>{try{if(this.services[e])i(this.services[e]);else{var s=new t;Promise.resolve().then(()=>{if("function"==typeof s.initialize)return s.initialize(n)}).then(()=>{this.register(e,s),i(s)})}}catch(e){r(e)}},r)})}_waitForRegister(e,t,n,i){var r=this._waitList[e]||[],s=setTimeout(this._signalRegisterFailure.bind(this,e,t,n),i);r.push({cb:t,errcb:n,timer:s}),this._waitList[e]=r}_signalRegisterFailure(e,t,n){for(var i=this._waitList[e]||[],r=i.length-1;r>=0;r--)i[r].cb===t&&i.splice(r,1);this._waitList[e]=i;var s=new Error("Service: '"+e+"' not found.");n?n(s):console.error(s)}register(e,t,n){if(e&&t){var i=t;i._registry=this,n&&n.deprecated&&(this.deprecated[e]={}),n&&n.replacedBy&&(this.deprecated[e]._replacedBy=n.replacedBy),this._declared[e]&&delete this._declared[e],"function"==typeof i.__initialize?Promise.resolve(i.__initialize()).then(()=>{this.services[e]=t,this._notifyWaitingConsumers(e,t)}):(this.services[e]=t,this._notifyWaitingConsumers(e,t))}}_notifyWaitingConsumers(e,t){for(var n=this._waitList[e]||[],i=0;i<n.length;i++){var r=n[i].cb;n[i].timer&&clearTimeout(n[i].timer),r(t)}this._waitList[e]=[]}_cleanupWaitList(e){for(var t=this._waitList[e]||[],n=t.length-1;n>=0;n--)t[n].timer&&clearTimeout(t[n].timer);this._waitList[e]=[]}destroy(){Object.keys(this.services).forEach(this.deregister.bind(this))}}),define("baglass/app/services/UserProfileService",["../../core-client/js/core-client/ui/core/Class","lodash"],(function(e,t){return e.extend({init:function(e){this.preferences={},t.extend(this,e)},updateContext:function(e){return t.extend(this,e),Promise.resolve()},getHomePagePref:function(){return null!=typeof this.preferences&&this.preferences.hasOwnProperty("homePage")?this.preferences.homePage:null}})})),define("baglass/services/WindowProxyService",["baglass/nls/StringResources"],(function(e){function t(t,n,i){if(t.config&&t.config.dialog){const n=e=>{"ok"===e.btn&&t.context.close().then(()=>{t.window.location.assign(t.context.gateway||t.window.location.pathname,i)})};t.context.appController.showMessage(e.get("invalidUrl"),e.get("cannotOpenLocation"),"error",["ok","cancel"],"small",n,!0,"LocationDialog")}throw new Error("Invalid redirect detected: "+n)}function n(e,t,n){const i=["url: ".concat(t),"isRemote: ".concat(n)];e.context.getCoreSvc(".Logger").debug("validating url:",...i);const r=e.window.location;if(t)try{const s=/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%\-._~:/?#[\]@!$&'()*+,;= ]/,o=/javascript:|data:/,a=t.toString().toLowerCase().trim(),l=null!==s.exec(a),c=null!==o.exec(a),u=a.startsWith("//"),d=document.createElement("a");d.href=a;let h=d.protocol&&d.protocol.startsWith("http")&&!l&&!c&&!u;if(h&&!0!==n&&(h=d.protocol===r.protocol&&d.hostname===r.hostname&&d.port===r.port),h)return e.context.getCoreSvc(".Logger").debug("Url validation success:",...i),!0}catch(t){e.context.getCoreSvc(".Logger").error("Url validation error:",...i,t)}return e.context.getCoreSvc(".Logger").error("Url validation failed:",...i),!1}function i(e,i){if(this.context.getCoreSvc(".Logger").info("Navigating to:","url: ".concat(e),"isRemote: ".concat(i)),n(this,e,i))return this.window.location.assign(e);t(this,e,i)}function r(e,i){if(this.context.getCoreSvc(".Logger").info("Navigating to:","url: ".concat(e),"isRemote: ".concat(i)),n(this,e,i))return this.window.location.replace(e);t(this,e,i)}function s(){return this.context.getCoreSvc(".Logger").debug("reloading page..."),this.window.location.reload()}return class{constructor(e={},t=window,n={dialog:!1}){this.context=e,this.config=n,this.window=t,this.context.gateway=t.location.pathname.substr(0,t.location.pathname.lastIndexOf("/")),t.Proxy?(this.proxyWindow=this.proxy(t),this.context.window=this.proxyWindow):this.context.getCoreSvc(".Logger").debug("Unable to initialize WindowProxyService. Unsupported browser.")}proxy(e){this.context.getCoreSvc(".Logger").debug("Creating a new Window Proxy service for",e);const o=Object.fromEntries(Object.entries(e.location));o.assign=i.bind(this),o.reload=s.bind(this),o.replace=r.bind(this),o.toString=e.location.toString.bind(e.location);const a=new Proxy(o,{set:(i,r,s)=>{if(this.context.getCoreSvc(".Logger").info("Setting window.location object '".concat(r,"' to ").concat(s,"...")),["href","protocol","host","hostname","port","pathname","search","hash","origin"].includes(r)){const o=new URL(i.href);try{if(o[r]=s,!n(this,o.href))throw new Error;e.location[r]=s}catch(e){this.context.getCoreSvc(".Logger").error("Error setting window.location object '".concat(r,"' to ").concat(s,".")),t(this,i.href)}}else e.location[r]=s;return!0}});return new Proxy(e,{set:(i,r,s)=>(this.context.getCoreSvc(".Logger").info("Setting window object '".concat(r,"' to ").concat(s,"...")),"location"===r?n(this,s)?e.location=s:t(this,s):i[r]=s,!0),get:(t,n,i)=>"location"===n?a:e[n]instanceof Function?e[n].bind(e):e[n]})}}})),define("baglass/common/ui/SlideoutController",["../../core-client/js/core-client/ui/core/Events","jquery","lodash","../../core-client/js/core-client/ui/Slideout"],(function(e,t,n,i){const r=function(e){let t=this.registry.application.getOpenSlideout(e);return t||(t=this.registry.appView.getOpenSlideout(e)),t},s=function(e,t){let n,r=e;n=i.prototype.isPrototypeOf(t)?t:new i(t);let s=this.registry.application.getRegisteredSlideout(n.getRootId());return s?r="application":(s=this.registry.appView.getRegisteredSlideout(n.getRootId()),s&&(r="appView")),s&&s!==n.getRootParent()&&(n=s),{slideout:n,scope:r}};let o=0,a=0;const l=(e,n)=>{const i=t("body"),r=n.uuid;r&&i.addClass("openSlideout-".concat(r)),"application"===e?(o++,i.addClass("openedSlideout"),document.getElementById("com.ibm.bi.glass.appbar")&&i.addClass("appbarSlideout")):"appView"===e&&(a++,i.addClass("openedAppViewSlideout"))},c=function(e,n){const i=t("body"),r=n.uuid;if(r){if(!i.hasClass("openSlideout-".concat(r)))return;i.removeClass("openSlideout-".concat(r))}"application"===e?o=Math.max(0,o-1):"appView"===e&&(a=Math.max(0,a-1)),0===o&&(i.removeClass("openedSlideout"),i.removeClass("appbarSlideout")),0===a&&i.removeClass("openedAppViewSlideout")},u=e.extend({init:function(e){u.inherited("init",this,arguments),t.extend(this,e),a=0},openSlideout:function(e,t){const n=this._checkForSlideoutInstanceReuse(e,t);if(n)return n;const i=s.call(this,e,t),o=r.call(this,i.slideout.position);return o?o.hide({hideOnly:o.hideOnly,force:!0}).then(()=>{l(e,i.slideout),this.registry[i.scope].openSlideout(i.slideout),this._checkNavBarButtons(i)}):(l(e,i.slideout),this.registry[i.scope].openSlideout(i.slideout),this._checkNavBarButtons(i)),t.reuseSlideout||(i.slideout.off("hide",null,"slideoutHideHandler"),i.slideout.on("hide",c.bind(this,e,i.slideout),"slideoutHideHandler")),i.slideout},_checkForSlideoutInstanceReuse:function(e,t){const n=t.id,i=this.registry.appView.getOpenSlideout(t.position);if(i&&"appView"===e&&n===i.id&&t.reuseSlideout){i.trigger("hide"),i.off(),i.setContent(t.content),this.registry[e].openSlideout(i);let n=t.resizable&&t.resizable.min;return n||(n=parseInt(t.width,10)),n&&n>i.getWidth()&&i.setWidth(n),this._checkNavBarButtons({scope:e,slideout:i}),i}return null},_checkNavBarButtons:function(e){if(e.slideout.content){let t=null;if(-1!==e.slideout.content.module.indexOf("bi/content_apps/MyContent")?t="com.ibm.bi.contentApps.myContentFoldersSlideout":-1!==e.slideout.content.module.indexOf("bi/content_apps/TeamFolders")&&(t="com.ibm.bi.contentApps.teamFoldersSlideout"),t&&e.slideout.glassContext){const n=e.slideout.glassContext.findPlugin(t);n.setPressed(),e.slideout.on("hide",n.setUnpressed.bind(n))}}},updateRegistryContainer:function(e){this.registry.application.changeContainer(e),this.registry.appView.getContainer()||this.registry.appView.changeContainer(e)},cleanupSlideoutRegistry:function(){this.registry.application.cleanupSlideouts(),this.registry.appView.cleanupSlideouts()},closeAllOpenedSlideouts:function(e=!0){const t=[];let n=this.registry.application.getOpenSlideouts();return e||(n=n.concat(this.registry.appView.getOpenSlideouts())),n.forEach(e=>{t.push(e.hide({force:!0,hideOnly:e.hideOnly}))}),Promise.all(t).then(()=>!0)}});return u})),define("baglass/app/AppEvents",[],()=>{const e=e=>e?"appView"+e:"appview";return Object.freeze({APPVIEW:e(),APPVIEW_LOADED:e(":loaded")})}),define("baglass/app/plugins/GlassPlugin",["../../core-client/js/core-client/ui/core/Class","../../core-client/js/core-client/utils/Utils","../../core-client/js/core-client/utils/ClassFactory","jquery","lodash","../../utils/Utils","../AppEvents"],(function(e,t,n,i,r,s,o){return e.extend({init:function(e){i.extend(!0,this,e),this.itemSpec=this.itemSpec||{},this.$el=i("<div>"),s.errorProtect(this,["render","show","hide","changeLabel"])},getRootElement:function(){return this.$el},render:function(){return this.$el.text(r.unescape(this.itemSpec.label)),this._addClass(this.$el,this.itemSpec.class),this._setIcon(this.$el),this.registerOneTimeCallback(o.APPVIEW_LOADED),Promise.resolve(this.$el.get()[0])},remove:function(){this.$el.remove()},attachActionControllerCallbacks:function(){console.debug("attachActionControllerCallbacks not implemented")},enable:function(){this._getContainer().removeClass("disabled"),this._getContainer().find(":focusable").attr("tabindex","0")},disable:function(){this._getContainer().addClass("disabled"),this._getContainer().find(":focusable").attr("tabindex","-1")},show:function(){this._getContainer().show()},hide:function(){this._getContainer().hide()},getController:function(){return this._loadingController||(this.itemSpec.actionController?r.isString(this.itemSpec.actionController)?this._loadingController=n.instantiate(this.itemSpec.actionController.trim()).then(e=>{if(this._controller=e,r.isFunction(this._controller.initialize))return this._controller.initialize({glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id}})}).then(()=>this._controller):this._loadingController=Promise.reject(new Error("actionController is not a string")):this._loadingController=Promise.resolve(this._controller)),this._loadingController},showCoachMark:function(){return Promise.resolve(!0)},_getContainer:function(){return this.$container},changeLabel:function(e){console.info("GlassPlugin.changeLabel no implemented - passed label is: "+e)},changeIcon:function(e,n,i){e?(this.$el.find("svg.svgIcon, img, span.webfont").first().remove(),t.setIcon(this.$el,e,n,i)):console.warn("Invalid plugin icon. Icon unchanged.")},registerOneTimeCallback:function(e){let t=this.glassContext.getCoreSvc(".Events").on(e,(e,n)=>{let i=r.isFunction(this.onEventListener)?this.onEventListener:()=>{};try{i.call(this,e,n)}catch(t){this.glassContext.getCoreSvc(".Logger").error("GlassPlugin event callbak failure",e,n,t)}finally{t.remove()}},this)},onEventListener:function(e,t){let n=this.glassContext.getCoreSvc(".Logger");return this.getController().then(i=>{if(i)switch(t){case o.APPVIEW_LOADED:this.appView&&this.appView===e.appView?this._onAppViewLoaded(i,n,e,t):n.info(o.APPVIEW_LOADED+" is ignored due to mismatched appView",this.appView,e.appView);break;default:n.warn("unhandled event in plugin",this,e,t)}}).catch(e=>{n.error("error on event callback",this,e)})},_onAppViewLoaded:function(e,t){r.isFunction(e.onRender)&&e.onRender({glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id}}),this.showCoachMark().catch(e=>{t.error("failed to show coachmark",e)})},_setAttr:function(e,t,n){n&&e.attr(t,n)},_addClass:function(e,t){t&&e.addClass(t)},_setIcon:function(e){var n=this.itemSpec.icon;t.setIcon(e,n)}})})),define("baglass/core-client/js/core-client/utils/Deferred",[],(function(){"use strict";return function(){var e=void 0,t=void 0,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return{resolve:e,reject:t,promise:n}}})),define("baglass/app/plugins/MenuActionInterface",["../../core-client/js/core-client/ui/core/Class"],(function(e){return e.extend({onSelectItem:function(){},onRenderItem:function(){},isItemVisible:function(){return!0},isItemSelected:function(){return!1},onRender:function(){},onOpen:function(){},getCoachMarkSpec:function(){},getLabel:function(){}})})),define("baglass/app/plugins/MenuActionControllerDispatcher",["lodash","jquery","./MenuActionInterface","../../api/Context"],(function(e,t,n,i){return n.extend({init:function(t){this._oControllerMap={},this._oItemMap={},e.extend(this._oControllerMap,t)},getControllerMap:function(){return this._oControllerMap},onSelectItem:function(t){var n=t.target.itemId,r=this._findController(n);if(r&&e.isFunction(r.onSelectItem))r.onSelectItem.call(r,t);else if(r&&e.isFunction(r.execute)){var s=new i(t.glassContext),o=this._getOptions(t);r.execute.call(r,s,o)}},onRender:function(n){e.each(this._oControllerMap,i=>{i&&e.isFunction(i.onRender)&&i.onRender.call(i,t.extend(!0,{},n))})},onOpen:function(n){var i=e.values(this._oControllerMap).map((function(i){if(i&&e.isFunction(i.onOpen))return new Promise((function(e){e(i.onOpen(t.extend(!0,{},n)))})).catch((function(e){n.glassContext.getCoreSvc(".Logger").warn(e)}))}));return Promise.all(i)},onRemoveItem:function(n){var i=n.target.itemId,r=this._findController(i);if(r&&e.isFunction(r.onRemoveItem))return r.onRemoveItem.call(r,t.extend(!0,{},n))},onRenderItem:function(n){var i=n.target.itemId,r=this._findController(i);r&&e.isFunction(r.onRenderItem)&&r.onRenderItem.call(r,t.extend(!0,{},n))},_getOptions:function(e){return{options:e.options?this._combineOptions(e):e.target.plugin.itemSpec.items[e.target.specItemIndex].options}},_combineOptions:function(e){let t;const n=this._checkValidityPluginOptions(e)?e.target.plugin.itemSpec.items[e.target.specItemIndex].options:{};if(t=Object.assign({},e.options),n)for(const e in n)e in t||(t[e]=n[e]);return t},_checkValidityPluginOptions:function(e){const t=e&&e.target&&e.target.plugin&&e.target.plugin.itemSpec&&e.target.plugin.itemSpec.items&&Array.isArray(e.target.plugin.itemSpec.items),n=t&&void 0!==e.target.specItemIndex&&null!==e.target.specItemIndex&&e.target.specItemIndex>=0&&e.target.specItemIndex<e.target.plugin.itemSpec.items.length;return t&&n&&e.target.plugin.itemSpec.items[e.target.specItemIndex].options&&"object"==typeof e.target.plugin.itemSpec.items[e.target.specItemIndex].options},_invokeControllerIsItemVisible:function(t){var n=t.target.itemId,r=this._findController(n),s=!e.isUndefined(r);if(s&&e.isFunction(r.isItemVisible))s=r.isItemVisible.call(r,t);else if(s&&e.isFunction(r.isVisible)){var o=new i(t.glassContext),a=this._getOptions(t);s=r.isVisible.call(r,o,a)}return s=!!e.isBoolean(s)&&s},isItemDisabled(t){const n=t.target.itemId,i=this._findController(n);return!(!i||!e.isFunction(i.isItemDisabled))&&i.isItemDisabled.call(i,t)},isItemVisible:function(t){var n=t.glassContext.getCurrentContentView();return n&&e.isFunction(n.isMenuItemVisible)?!0===n.isMenuItemVisible(t)&&this._invokeControllerIsItemVisible(t):this._invokeControllerIsItemVisible(t)},isItemSelected:function(t){var n=t.target.itemId,i=!1,r=this._findController(n);return r&&e.isFunction(r.isItemSelected)&&(i=r.isItemSelected.call(r,t),i=!!e.isBoolean(i)&&i),i},getLabel:function(n){var i=n.target.itemId,r=this._findController(i);if(r&&e.isFunction(r.getLabel))return r.getLabel.call(r,t.extend(!0,{},n))},buildItemMap:function(t){e.reduce(t,(function(e,t){return t.id&&(e[t.id]=t),e}),this._oItemMap)},getItemMap:function(){return this._oItemMap},setGlassMenu:function(e){this._glassMenu=e},_findController:function(e){var t,n=this._oItemMap[e];return n&&(t=this._oControllerMap[n.featureId]),t}})})),define("baglass/app/plugins/GlassContextMenu",["./GlassPlugin","jquery","lodash","../../core-client/js/core-client/utils/ClassFactory","../../core-client/js/core-client/utils/Deferred","./MenuActionControllerDispatcher","../../core-client/js/core-client/ui/Menu","../../utils/Utils"],(function(e,t,n,i,r,s,o,a){var l=e.extend({_ClassFactory:i,init:function(e){t.extend(!0,this,e)},getRootElement:function(){return this.glassContext.getCoreSvc(".Logger").warn("GlassContextMenu::getRootElement() is being deprecated!"),this.$el},getMenu:function(){return this.glassContext.getCoreSvc(".Logger").warn("GlassContextMenu::getMenu() is being deprecated!"),this._menu},render:function(){var e=new r,i=[],s=[],c={};return n.each(this.itemSpec.actionControllers,(e,t)=>{i.push(this._createController(e,t)),s.push(t)}),a.waitForAllOrSomePromises(i).done(function(){try{o.hideOpenMenus(),n.each(i,(e,t)=>{e.isFulfilled()&&(c[s[t]]=e.responseModule)}),this._oControllerDispatcher=this._createControllerDispatcher(c);var r=[];this._oControllerDispatcher.buildItemMap(this.itemSpec.items),this._menu=this._createUIMenu(r),n.each(this.itemSpec.items,(e,i)=>{var s={glassContext:this.glassContext,target:{plugin:this,itemId:e.id,activeObject:this.activeObject,specItemIndex:i},options:this.options};if(this._oControllerDispatcher.isItemVisible(s)){var o={};t.extend(!0,o,e),o.name=e.id,o.onSelect=this._oControllerDispatcher.onSelectItem.bind(this._oControllerDispatcher,s),o.disabled=this._oControllerDispatcher.isItemDisabled(s);var a=this._oControllerDispatcher.getLabel(s);n.isUndefined(a)||(o.label=a),this._oControllerDispatcher.isItemSelected(s)&&(o.selected=!0),this.showIcons||delete o.icon,("divider"!==o.type||r.length&&"divider"!==r[r.length-1].type)&&r.push(o)}}),this._menu.render().then(function(n){this.$el=t(n);var i={glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id,activeObject:this.activeObject}};this._oControllerDispatcher.onRender(i),e.resolve(n)}.bind(this),(function(t){e.reject({msg:l.errors.FAILURE_RENDERING_MENU,causedBy:t})}))}catch(t){e.reject({msg:l.errors.FAILURE_RENDERING_MENU,causedBy:t})}}.bind(this)).fail((function(t){e.reject({msg:l.errors.FAILURE_RENDERING_MENU,causedBy:t})})),e.promise},_createControllerDispatcher:function(e){return new s(e)},_createUIMenu:function(e){return new o({spec:{items:e}})},_createController:function(e,t){var i,r={glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id},controllerConfig:this.itemSpec.controllerConfig&&this.itemSpec.controllerConfig[t]};return this._ClassFactory.instantiate(e).then((function(e){if(i=e,n.isFunction(i.initialize))return i.initialize(r)})).then((function(){if(n.isFunction(i.onOpen))return i.onOpen(r)})).then((function(){return i}))}});return l.errors={FAILURE_RENDERING_MENU:"Failure when rendering the contextual menu",FAILURE_CREATING_CONTROLLER:"Failure creating one of the menu controllers"},l})),define("baglass/utils/WorkArounds",["../core-client/js/core-client/utils/Utils"],(function(e){return{apply:function(){this._locationOrigin()},_locationOrigin:function(){var t=e.getCurrentWindow();t.location.origin||(t.location.origin=t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:""))}}})),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("prop-types"),require("lodash"),require("mobx-state-tree"),require("ca-ui-carbon-toolkit"),require("jquery"),require("baglass/nls/StringResources"),require("mobx-react"),require("baglass/core-client/js/core-client/utils/ClassFactory"),require("mobx"),require("ca-ui-carbon"),require("baglass/utils/Utils"),require("baglass/core-client/js/core-client/errors/BaseError"),require("react-dom"),require("baglass/api/Context"),require("baglass/core-client/js/core-client/utils/PerfUtils"),require("baglass/api/Url"),require("baglass/core-client/js/core-client/ui/KeyCodes"),require("baglass/app/utils/CloseViewUtils"),require("baglass/common/ui/SlideoutRegistry"),require("baglass/core-client/js/core-client/ui/Menu"),require("baglass/services/AjaxService"),require("baglass/services/ClipboardService"),require("baglass/app/services/CoachMarkService"),require("baglass/app/services/ConfigService"),require("baglass/services/ContextService"),require("baglass/services/EventsService"),require("baglass/services/FeatureChecker"),require("baglass/app/FeatureRules"),require("baglass/app/services/FetchService"),require("baglass/app/services/AjaxService"),require("baglass/services/LogService"),require("baglass/services/PrefetchService"),require("baglass/services/ServiceRegistry"),require("baglass/app/services/UserProfileService"),require("baglass/services/WindowProxyService"),require("baglass/core-client/js/core-client/ui/Slideout"),require("baglass/common/ui/SlideoutController"),require("baglass/app/plugins/GlassContextMenu"),require("baglass/app/plugins/MenuActionControllerDispatcher"),require("baglass/utils/WorkArounds"));else if("function"==typeof define&&define.amd)define("baglass/glass.webpack.bundle",["react","prop-types","lodash","mobx-state-tree","ca-ui-carbon-toolkit","jquery","baglass/nls/StringResources","mobx-react","baglass/core-client/js/core-client/utils/ClassFactory","mobx","ca-ui-carbon","baglass/utils/Utils","baglass/core-client/js/core-client/errors/BaseError","react-dom","baglass/api/Context","baglass/core-client/js/core-client/utils/PerfUtils","baglass/api/Url","baglass/core-client/js/core-client/ui/KeyCodes","baglass/app/utils/CloseViewUtils","baglass/common/ui/SlideoutRegistry","baglass/core-client/js/core-client/ui/Menu","baglass/services/AjaxService","baglass/services/ClipboardService","baglass/app/services/CoachMarkService","baglass/app/services/ConfigService","baglass/services/ContextService","baglass/services/EventsService","baglass/services/FeatureChecker","baglass/app/FeatureRules","baglass/app/services/FetchService","baglass/app/services/AjaxService","baglass/services/LogService","baglass/services/PrefetchService","baglass/services/ServiceRegistry","baglass/app/services/UserProfileService","baglass/services/WindowProxyService","baglass/core-client/js/core-client/ui/Slideout","baglass/common/ui/SlideoutController","baglass/app/plugins/GlassContextMenu","baglass/app/plugins/MenuActionControllerDispatcher","baglass/utils/WorkArounds"],t);else{var n="object"==typeof exports?t(require("react"),require("prop-types"),require("lodash"),require("mobx-state-tree"),require("ca-ui-carbon-toolkit"),require("jquery"),require("baglass/nls/StringResources"),require("mobx-react"),require("baglass/core-client/js/core-client/utils/ClassFactory"),require("mobx"),require("ca-ui-carbon"),require("baglass/utils/Utils"),require("baglass/core-client/js/core-client/errors/BaseError"),require("react-dom"),require("baglass/api/Context"),require("baglass/core-client/js/core-client/utils/PerfUtils"),require("baglass/api/Url"),require("baglass/core-client/js/core-client/ui/KeyCodes"),require("baglass/app/utils/CloseViewUtils"),require("baglass/common/ui/SlideoutRegistry"),require("baglass/core-client/js/core-client/ui/Menu"),require("baglass/services/AjaxService"),require("baglass/services/ClipboardService"),require("baglass/app/services/CoachMarkService"),require("baglass/app/services/ConfigService"),require("baglass/services/ContextService"),require("baglass/services/EventsService"),require("baglass/services/FeatureChecker"),require("baglass/app/FeatureRules"),require("baglass/app/services/FetchService"),require("baglass/app/services/AjaxService"),require("baglass/services/LogService"),require("baglass/services/PrefetchService"),require("baglass/services/ServiceRegistry"),require("baglass/app/services/UserProfileService"),require("baglass/services/WindowProxyService"),require("baglass/core-client/js/core-client/ui/Slideout"),require("baglass/common/ui/SlideoutController"),require("baglass/app/plugins/GlassContextMenu"),require("baglass/app/plugins/MenuActionControllerDispatcher"),require("baglass/utils/WorkArounds")):t(e.react,e["prop-types"],e.lodash,e["mobx-state-tree"],e["ca-ui-carbon-toolkit"],e.jquery,e["baglass/nls/StringResources"],e["mobx-react"],e["baglass/core-client/js/core-client/utils/ClassFactory"],e.mobx,e["ca-ui-carbon"],e["baglass/utils/Utils"],e["baglass/core-client/js/core-client/errors/BaseError"],e["react-dom"],e["baglass/api/Context"],e["baglass/core-client/js/core-client/utils/PerfUtils"],e["baglass/api/Url"],e["baglass/core-client/js/core-client/ui/KeyCodes"],e["baglass/app/utils/CloseViewUtils"],e["baglass/common/ui/SlideoutRegistry"],e["baglass/core-client/js/core-client/ui/Menu"],e["baglass/services/AjaxService"],e["baglass/services/ClipboardService"],e["baglass/app/services/CoachMarkService"],e["baglass/app/services/ConfigService"],e["baglass/services/ContextService"],e["baglass/services/EventsService"],e["baglass/services/FeatureChecker"],e["baglass/app/FeatureRules"],e["baglass/app/services/FetchService"],e["baglass/app/services/AjaxService"],e["baglass/services/LogService"],e["baglass/services/PrefetchService"],e["baglass/services/ServiceRegistry"],e["baglass/app/services/UserProfileService"],e["baglass/services/WindowProxyService"],e["baglass/core-client/js/core-client/ui/Slideout"],e["baglass/common/ui/SlideoutController"],e["baglass/app/plugins/GlassContextMenu"],e["baglass/app/plugins/MenuActionControllerDispatcher"],e["baglass/utils/WorkArounds"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,(function(e,t,n,i,r,s,o,a,l,c,u,d,h,p,g,f,m,v,b,y,C,_,w,S,P,M,x,E,I,O,A,D,T,L,R,N,j,k,U,V,F){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bi/js/glass/baglass/js/baglass/app/",n(n.s=66)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));class i{}i.POSITION="position",i.PLACEMENT="placement",i.CENTER="center",i.LEADING="leading",i.LOOPS="loops",i.PANE="pane",i.TOOL_ITEMS="toolItems",i.TRAILING="trailing",i.TOP="top",i.BOTTOM="bottom",i.LEFT="left",i.RIGHT="right",i.INVERSE_DIRECTION_MAP={left:"right",right:"left",top:"bottom",bottom:"top"}},function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t,n){"use strict";n.r(t);var i=Object.freeze({APPVIEW:"appview",APPVIEW_LOADED:"appView:loaded"}),r=n(3),s=n.n(r),o=n(11),a=n.n(o);t.default=class{constructor(e){Object.assign(this,e),this.registerOneTimeCallback(i.APPVIEW_LOADED)}getRootElement(){this.glassContext.getCoreSvc(".Logger").debug("getRootElement not implemented")}render(){this.glassContext.getCoreSvc(".Logger").debug("render not implemented")}remove(){this.store.setVisible(!1)}disable(){this.store.setDisabled(!0)}enable(){this.store.setDisabled(!1)}isVisible(){return this.store.visible}show(){this.store.setVisible(!0),this.showContainer()}hide(){this.store.setVisible(!1),this.hideContainer()}changeLabel(e){this.store.setLabel(e)}changeIcon(e){this.store.setIconId(e)}showContainer(){const e=this.getContainer();e&&e.show&&e.show()}hideContainer(){const e=this.getContainer();e&&e.hide&&e.hide()}getActionController(){const e=this.glassContext.getCoreSvc(".Logger");if(!this.controllerDispatcher)if(this.itemSpec.actionController)"string"!=typeof this.itemSpec.actionController?this.controllerDispatcher=Promise.reject(new Error("actionController is not a string")):this.controllerDispatcher=a.a.instantiate(this.itemSpec.actionController.trim()).then(e=>(this.actionController=e,s.a.isFunction(e.initialize)?this.actionController.initialize({glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id}}):Promise.resolve())).then(()=>this.actionController).catch(t=>{e.error("failed to retrieve the actionController or invoke its method",t)});else{if(!this.actionController)return Promise.resolve();this.controllerDispatcher=Promise.resolve(this.actionController)}return Promise.resolve(this.controllerDispatcher)}getContainer(){return this.$container}static showCoachMark(){return Promise.resolve(!0)}registerOneTimeCallback(e){const t=this.glassContext.getCoreSvc(".Events").on(e,(e,n)=>{const i=s.a.isFunction(this.onEventListener)?this.onEventListener:()=>{};try{i.call(this,e,n)}catch(t){this.glassContext.getCoreSvc(".Logger").error("GlassPlugin event callback failure",e,n,t)}finally{t.remove()}},this)}onEventListener(e,t){const n=this.glassContext.getCoreSvc(".Logger");return this.getActionController().then(r=>{if(r)switch(t){case i.APPVIEW_LOADED:this.appView&&this.appView===e.appView?this.onAppViewLoaded(r,n,e,t):n.info("".concat(i.APPVIEW_LOADED," is ignored due to mismatched appView"),this.appView,e.appView);break;default:n.warn("unhandled event in plugin",this,e,t)}}).catch(e=>{n.error("error on event callback",this,e)})}onAppViewLoaded(e){s.a.isFunction(e.onRender)&&e.onRender({glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.Glass=e,this.eventService=e.getCoreSvc(".Events"),this.logger=e.getCoreSvc(".Logger")}}},function(e,t){e.exports=l},function(e,t){e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=i.types.model({visible:i.types.optional(i.types.boolean,!0),disabled:i.types.optional(i.types.boolean,!1),iconId:i.types.optional(i.types.union(i.types.string,i.types.undefined),void 0),label:i.types.optional(i.types.union(i.types.string,i.types.undefined),void 0)}).actions(e=>({setVisible(t){e.visible=t},setDisabled(t){e.disabled=t},setLabel(t){e.label=t},setIconId(t){e.iconId=t}}));t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var i=n(2),r=n(3),s=n.n(r);class o{static generatePositionMap(e){const t={};return e.forEach(e=>{const n=e[i.default.POSITION];if(n){t[n]||(t[n]=[]),e.attr={},e.id&&(e.attr.id=e.id),s.a.isString(e.role)&&(e.attr.role=e.role),e["aria-label"]&&(e.attr["aria-label"]=e["aria-label"]);const r=i.default.INVERSE_DIRECTION_MAP[n]||"right";e.toolItemGroups&&e.toolItemGroups.forEach(e=>{e.toolItems&&e.toolItems.forEach(e=>{e.ddMenuPlacement=e[i.default.PLACEMENT]||r})}),t[n].push(e)}}),t}static isContentPane(e){return s.a.isEmpty(e)}static convertToolBarsToLayoutObject(e=[]){Array.isArray(e)&&e.sort((e,t)=>(e.weight||0)-(t.weight||0));let t={};return e&&e.length>0?t=this.generatePositionMap(e):t[i.default.LOOPS]=[],(t[i.default.TOP]||t[i.default.BOTTOM])&&(t.class="paneColumn",t[i.default.LOOPS]=[i.default.TOP,i.default.BOTTOM],t[i.default.PANE]={}),(t[i.default.LEFT]||t[i.default.RIGHT])&&(t[i.default.PANE]?(t[i.default.LEFT]&&(t[i.default.PANE][i.default.LEFT]=t[i.default.LEFT],delete t[i.default.LEFT]),t[i.default.RIGHT]&&(t[i.default.PANE][i.default.RIGHT]=t[i.default.RIGHT],delete t[i.default.RIGHT]),t[i.default.PANE].class="paneRow",t[i.default.PANE][i.default.LOOPS]=[i.default.LEFT,i.default.RIGHT],t[i.default.PANE][i.default.PANE]={}):(t.class="paneRow",t[i.default.LOOPS]=[i.default.LEFT,i.default.RIGHT],t[i.default.PANE]={})),t}}},function(e,t){e.exports=u},function(e,t){e.exports=d},function(e,t){e.exports=h},function(e,t,n){"use strict";var i,r=n(0),s=n.n(r),o=n(6),a=n.n(o),l=n(3),c=n.n(l),u=n(1),d=n.n(u),h=n(5),p=n(8);const g={top:!0,bottom:!0,left:!0,right:!0},f={start:!0,center:!0,end:!0};let m=Object(p.observer)(i=class extends r.Component{constructor(...e){super(...e),this.setButtonRef=e=>{const{store:t}=this.props;t.setButtonRef(e)}}componentDidMount(){const{onMount:e}=this.props;e&&e()}render(){const{kind:e,id:t,title:n,className:i,variant:r,onClick:o,store:a,push:l,toolbarPlacement:c,options:u}=this.props,{pushed:d,disabled:p,iconId:m,label:v,visible:b,tooltipAlignment:y,tooltipPosition:C}=a,_=function(e){return e?-1!==e.search(/\.jpeg$|\.jpg$|\.png$|\.gif$|\.svg$/)?function(e){return s.a.createElement("img",{src:e,alt:"Button Icon"})}(e):function(e){return s.a.createElement(h.SVGIcon,{className:"svgIcon",iconId:e,verticalAlign:"middle"})}(e):null}(m),w="left"!==c&&"right"!==c;let S=i;w&&v&&(i?S+=" labelled":S="labelled");const P={};n||v||(P.overflow="hidden");const M=!0===Boolean(l)?h.PushButton:h.Button,x=function(e,t){switch(e){case"top":return g[t]?t:"bottom";case"bottom":return g[t]?t:"top";case"left":return g[t]?t:"right";case"right":return g[t]?t:"left";default:return g[t]?t:"bottom"}}(c,C),E=function(e){return f[e]?e:"center"}(y);return u&&u.productLabel?b&&s.a.createElement(M,{kind:e,id:t,className:S,variant:_&&r,onClick:o,icon:_,checked:d,disabled:p,intent:"primary",tooltipPosition:x,tooltipAlignment:E,ref:this.setButtonRef,style:P},v):b&&s.a.createElement(M,{kind:e,id:t,title:n||v,label:w?v:void 0,className:S,variant:_&&r,onClick:o,icon:_,checked:d,disabled:p,intent:"primary",tooltipPosition:x,tooltipAlignment:E,ref:this.setButtonRef,style:P})}})||i;m.propTypes={kind:d.a.string,id:d.a.string,title:d.a.string,push:d.a.string,className:d.a.string,variant:d.a.string,toolbarPlacement:d.a.string,onClick:d.a.func,onMount:d.a.func,options:d.a.object,store:d.a.object.isRequired};var v=m,b=n(4),y=n(13),C=n.n(y);const _=b.types.model({pushed:b.types.optional(b.types.boolean,!1),tooltipPlacement:b.types.optional(b.types.string,""),tooltipAlignment:b.types.optional(b.types.string,"")}).volatile(()=>({buttonNode:null})).actions(e=>({setButtonRef(t){e.buttonNode=t},setPushed(t){e.pushed=t},setTooltipPlacement(t){e.tooltipPlacement=t},setTooltipAlignment(t){e.tooltipAlignment=t}}));var w=b.types.compose(_,C.a).named("ButtonStore"),S=n(9),P=n(22),M=n.n(P);class x extends S.default{constructor(e){super(e),this.onClick=()=>{const e=this.glassContext.getCoreSvc(".Logger");return this.getActionController().then(()=>{this.triggerOnPress()}).catch(t=>{e.error("failed to retrieve the actionController or invoke its method",t)})},this.onMount=()=>{this.$el=a()(this.getRootElement()),this.$el.on("primaryAction",this.onClick.bind(this))},this.render=()=>{const{kind:e,id:t,title:n,label:i,push:r,options:o}=this.itemSpec;return Promise.resolve(s.a.createElement(v,{kind:e,id:t,title:n,label:i,className:this.itemSpec.class,variant:"icon",onClick:this.onClick,store:this.store,onMount:this.onMount,push:r,toolbarPlacement:this.toolbarPlacement,options:o||{}}))},this.store=w.create(),this.store.setIconId(this.itemSpec.icon),this.store.setLabel(this.itemSpec.label),this.itemSpec.tooltipPlacement&&this.store.setTooltipPlacement(this.itemSpec.tooltipPlacement),this.itemSpec.tooltipAlignment&&this.store.setTooltipAlignment(this.itemSpec.tooltipAlignment),this.getActionController().catch(e=>{this.glassContext.getCoreSvc(".Logger").error("failed to retrieve the actionController or invoke its method",e)})}setPressed(){this.store.setPushed(!0)}getRootElement(){const e=this.store.buttonNode&&this.store.buttonNode._node&&this.store.buttonNode._node,t=this.store.buttonNode&&this.store.buttonNode._button&&this.store.buttonNode._button._node;return e||t}setUnpressed(){this.store.setPushed(!1)}getBaseButton(){return this}togglePressed(){const e=this.store.pushed;return this.store.setPushed(!e),!e}setSelected(){this.setPressed()}isPressed(){return this.store.pushed}isEnabled(){return!this.store.disabled}triggerOnPress(){const e={glassContext:this.glassContext,target:{plugin:this}},t=this.actionController;if(this.itemSpec.push&&(e.pushState=this.togglePressed()),c.a.isFunction(t.onPress))t.onPress(e);else if(c.a.isFunction(t.execute)){const n=new M.a(e.glassContext),i={options:this.itemSpec.options};t.execute(n,i)}}}t.a=x},function(e,t,n){"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.r(t),n.d(t,"defaultAttributes",(function(){return c})),n.d(t,"formatAttributes",(function(){return h})),n.d(t,"getAttributes",(function(){return u})),n.d(t,"toSVG",(function(){return p})),n.d(t,"toString",(function(){return d}));var a=["width","height","viewBox"],l=["tabindex"],c={focusable:"false",preserveAspectRatio:"xMidYMid meet"};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height,i=e.viewBox,s=void 0===i?"0 0 ".concat(t," ").concat(n):i,u=o(e,a),d=u.tabindex,h=o(u,l),p=r(r(r({},c),h),{},{width:t,height:n,viewBox:s});return p["aria-label"]||p["aria-labelledby"]||p.title?(p.role="img",null!=d&&(p.focusable="true",p.tabindex=d)):p["aria-hidden"]=!0,p}function d(e){var t=e.elem,n=void 0===t?"svg":t,i=e.attrs,r=void 0===i?{}:i,s=e.content,o=(void 0===s?[]:s).map(d).join("");return"svg"!==n?"<".concat(n," ").concat(h(r),">").concat(o,"</").concat(n,">"):"<".concat(n," ").concat(h(u(r)),">").concat(o,"</").concat(n,">")}function h(e){return Object.keys(e).reduce((function(t,n,i){var r="".concat(n,'="').concat(e[n],'"');return 0===i?r:t+" "+r}),"")}function p(e){var t=e.elem,n=void 0===t?"svg":t,i=e.attrs,r=void 0===i?{}:i,s=e.content,o=void 0===s?[]:s,a=document.createElementNS("http://www.w3.org/2000/svg",n),l="svg"!==n?r:u(r);Object.keys(l).forEach((function(e){a.setAttribute(e,r[e])}));for(var c=0;c<o.length;c++)a.appendChild(p(o[c]));return a}},function(e,t){e.exports=p},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(0)),s=i(n(13)),o=i(n(9)),a=i(n(115));class l extends o.default{constructor(e){super(e),this.render=()=>Promise.resolve(r.default.createElement(a.default,{store:this.store,className:this.itemSpec.class})),this.store=s.default.create(),this.store.setIconId(this.itemSpec.icon),this.store.setLabel(this.itemSpec.label)}}t.default=l},function(e,t){e.exports=g},function(e,t){e.exports=f},function(e,t,n){"use strict";var i=n(19),r=n(1),s=n(0);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(r),l=o(s);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g=["className","children","tabIndex"],f=["tabindex"],m=l.default.forwardRef((function(e,t){var n=e.className,r=e.children,s=e.tabIndex,o=p(e,g),a=i.getAttributes(u(u({},o),{},{tabindex:s})),c=a.tabindex,d=p(a,f);return n&&(d.className=n),null!=c&&(d.tabIndex=c),t&&(d.ref=t),l.default.createElement("svg",d,r)}));m.displayName="Icon",m.propTypes={"aria-hidden":a.default.string,"aria-label":a.default.string,"aria-labelledby":a.default.string,children:a.default.node,className:a.default.string,height:a.default.oneOfType([a.default.number,a.default.string]),preserveAspectRatio:a.default.string,tabIndex:a.default.string,viewBox:a.default.string,width:a.default.oneOfType([a.default.number,a.default.string]),xmlns:a.default.string},m.defaultProps={xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet"},t.Icon=m,t._extends=h,t._objectWithoutProperties=p},function(e,t,n){"use strict";var i,r=n(0),s=n.n(r),o=n(1),a=n.n(o),l=n(8),c=n(12),u=n(5),d=n(29),h=n.n(d),p=n(61),g=n.n(p),f=n(7),m=n.n(f),v=n(64),b=n.n(v),y=n(63),C=n.n(y),_=n(62),w=n.n(_);let S=Object(l.observer)(i=class extends r.Component{constructor(e){super(e),this.state={counter:0}}alertNav(e){if(e>1){const{counter:t}=this.state,n=t+1,i=m.a.get("whatIsNewAlert",{currentIndex:n,totalCount:e}),r=n<e,o=n>1;return s.a.createElement("div",{className:"glass-what-is-new-nav",style:{display:"flex",alignItems:"center"}},s.a.createElement(u.Label,{className:"what-is-new-nav-label",label:i}),s.a.createElement(u.Button,{disabled:!o,variant:"icon",kind:"secondary",className:"what-is-new-nav-button","aria-label":m.a.get("whatIsNewPrevious"),title:m.a.get("whatIsNewPrevious"),icon:s.a.createElement(g.a,null),onClick:()=>{const e=t-1;this.setState({counter:e})}}),s.a.createElement(u.Button,{disabled:!r,variant:"icon",kind:"secondary",className:"what-is-new-nav-button","aria-label":m.a.get("whatIsNewNext"),title:m.a.get("whatIsNewNext"),icon:s.a.createElement(h.a,null),onClick:()=>{const e=t+1;this.setState({counter:e})}}))}return null}alertIcon(e){return"error"===e.type?s.a.createElement(w.a,null):"warning"===e.type?s.a.createElement(C.a,null):s.a.createElement(b.a,null)}alertAction(e){let t;if(e&&e.action&&e.action.actionId&&e.action.actionContext){const{action:n}=e,{onGoToAction:i}=this.props;t=s.a.createElement(u.Button,{className:"what-is-new-action",label:n.label,title:n.title,iconRight:s.a.createElement(h.a,null),onClick:()=>{const{url:e}=n;e&&window.open(e,"_blank"),i&&i(n)}})}else if(e&&e.action&&e.action.url){const{action:n}=e;t=s.a.createElement(u.Button,{className:"what-is-new-action",label:n.label,title:n.title,iconRight:s.a.createElement(h.a,null),onClick:()=>{const{url:e}=n;window.open(e,"_blank")}})}else t=null;return t}dismissButton(){const e=m.a.get("whatIsNewDismiss"),{onDismiss:t}=this.props,{counter:n}=this.state;return s.a.createElement(u.Button,{kind:"ghost",className:"what-is-new-dismiss","aria-label":e,label:e,onClick:()=>{t(n),n>0&&this.setState({counter:n-1})}},e)}render(){const{store:e,perspective:t}=this.props,{counter:n}=this.state,i=e.getAlertsForPerspective(t),r=Object(c.toJS)(i),o=r[n];if(o){const e=this.alertNav(r.length),t=this.dismissButton(),n=this.alertAction(o),i=this.alertIcon(o),a=m.a.get("alertTitle",{alertTitle:o.title}),l=m.a.get("alertBannerTooltipMessage",{alertTitle:o.title,alertMessage:o.message});return s.a.createElement("div",{className:"glass-what-is-new",style:{display:"flex",alignItems:"center",justifyContent:"flex-start"}},e,s.a.createElement("div",{className:"glass-what-is-new-message-container"},s.a.createElement("div",{className:"glass-what-is-new-message-".concat(o.type)},i),s.a.createElement("div",{className:"glass-what-is-new-message-text"},s.a.createElement("p",{className:"glass-what-is-new-title"},a),s.a.createElement("div",{className:"glass-what-is-new-text"},s.a.createElement(u.TruncatedText,{value:o.message,title:l})))),t,n)}return null}})||i;S.propTypes={store:a.a.object.isRequired,onDismiss:a.a.func,perspective:a.a.string,onGoToAction:a.a.func};var P=n(9);class M extends P.default{constructor(...e){super(...e),this.onDismiss=e=>this.glassContext.getCoreSvc(".Message").removeAlert(e),this.onGoToAction=e=>{const{actionId:t,actionContext:n}=e;if(t){const e={glassContext:this.glassContext,actionContext:n};this.glassContext.performAction(t,e)}}}render(){return Promise.resolve(s.a.createElement(S,{store:this.glassContext.getCoreSvc(".Message").getStore(),onDismiss:this.onDismiss,perspective:this.glassContext.getCurrentPerspective(),onGoToAction:this.onGoToAction}))}}t.a=M},function(e,t){e.exports=m},function(e,t,n){"use strict";var i=n(18);class r extends i.a{constructor(...e){super(...e),this.onClick=()=>{try{this.isActionControllerLoaded(),this.triggerOnPress()}catch(e){this.glassContext.getCoreSvc(".Logger").error(e)}}}isActionControllerLoaded(){if(!this.actionController)throw new Error("Controller has not been registered")}}t.a=r},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=r(n(114)),a=s.default.createElement(s.default.Fragment,null);class l extends s.default.Component{constructor(e){super(e),this.state={element:a},this.updateElement()}componentDidUpdate(e){const{render:t}=this.props;e.render!==t&&this.updateElement()}updateElement(){const{failRenderCallback:e}=this.props;this.renderPromise=this.doRender().then(e=>{this.setState({element:e})},t=>(t=t||"unknown plugin render method exception",e&&e(t),Promise.resolve()))}doRender(){return i(this,void 0,void 0,(function*(){const{render:e}=this.props;return e?this.callRender():a}))}callRender(){return i(this,void 0,void 0,(function*(){const{render:e,renderScope:t,options:n,postRenderCallback:i,containerRef:r}=this.props;let l=yield e.call(t,n);return i&&i(),l?(s.default.isValidElement(l)||(l=s.default.createElement(o.default,{htmlElement:l,containerRef:r})),l):a}))}render(){const{element:e}=this.state;return s.default.createElement(s.default.Fragment,null,e)}}t.default=l},function(e,t,n){"use strict";var i=n(24),r=n(0);n(19),n(1);var s,o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),a=["children"],l=o.default.forwardRef((function(e,t){var n=e.children,r=i._objectWithoutProperties(e,a);return o.default.createElement(i.Icon,i._extends({width:32,height:32,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:t},r),s||(s=o.default.createElement("path",{d:"M18 6L16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6z"})),n)}));e.exports=l},function(e,t){e.exports=v},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(77)),o=r(n(42)),a=r(n(32));class l{constructor(e){this.glassContext=e,this.store=s.default.create(),this.notifier=new o.default}createDialog(e){const t=(0,a.default)("dialog");(e=Object.assign(Object.assign({},e),{id:t})).callback&&"object"==typeof e.callback&&Object.keys(e.callback).length>0&&Object.values(e.callback).filter(e=>e&&"function"==typeof e).length>0&&(this.registerCallbackForButton(e,"close",t),e.buttons&&Array.isArray(e.buttons)&&["ok","cancel"].forEach(n=>{(e.buttons.includes(n)||e.buttons.filter(e=>e.defaultId===n).length>0)&&this.registerCallbackForButton(e,n,t)})),this.store.addDialog(e)}registerCallbackForButton(e,t,n){this.notifier.register(`${n}-dialog-callback-${t}`,()=>{e.callback.general&&l.invokeGeneralCallback(e,t),e.callback[t]&&e.callback[t]()})}static invokeGeneralCallback(e,t){e.callbackScope&&null!==e.callbackScope[t]&&void 0!==e.callbackScope[t]?e.callback.general.call(e.callbackScope[t],{btn:t}):e.callback.general({btn:t})}removeDialog(e="close"){return i(this,void 0,void 0,(function*(){const t=this.store.dialogsInPlain,n=t&&t.length>0?t[t.length-1]:null;if(n)try{n.hasCallback&&["ok","cancel","close"].includes(e)&&(yield this.notifier.notify(`${n.key}-dialog-callback-${e}`))}catch(e){this.glassContext.getCoreSvc(".Logger").error("Failed to execute callback function when a dialog is closed",e)}finally{this.store.removeDialog(),n.hasCallback&&["close","ok","cancel"].forEach(e=>{this.notifier.remove(`${n.key}-dialog-callback-${e}`)})}}))}getDialogs(){return this.store.dialogsInPlain}getStore(){return this.store}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return`${String(e)+t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(26)),o=r(n(6)),a=r(n(3)),l=r(n(34));t.default=class{constructor(e){this.PERSPECTIVE_MODEL_PATH="v1/perspectives/",this.copyObject=e=>(0,l.default)(e),this.glassContext=e,this.url=new s.default,this.modelCache={}}getModel(e,t){const n=this.getPerspectiveUrl(e,t);return this.getPerspectiveModel(n,e)}getModelFromCache(e){if(this.modelCache[e]&&JSON.stringify(this.modelCache[e])!==JSON.stringify({}))return this.copyObject(this.modelCache[e])}addModel(e,t,n){this.modelCache[this.getPerspectiveUrl(e,n)]=this.copyObject(t)}getPerspectiveUrl(e,t){let n=this.PERSPECTIVE_MODEL_PATH+e;if(t&&t.content){const e=a.default.map(this.url.URL_UI_API,e=>e.key),i=a.default.pick(t.content,e);a.default.keys(i).length>0&&(n+="?"+o.default.param(i))}return n}getPerspectiveModel(e,t){return i(this,void 0,void 0,(function*(){const n=this.getModelFromCache(e);if(void 0!==n)return n;const i=yield this.glassContext.getCoreSvc(".Ajax").ajax({url:e,type:"GET",perspective:t});return this.modelCache[e]=this.copyObject(i.data),i.data}))}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(6));t.default=function(e){return r.default.extend(!0,{},e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.glassContext=e,this.qsValueEncoders=[]}encodeQSValue(e){for(let t=0;t<this.qsValueEncoders.length;t+=1)e=this.qsValueEncoders[t](e);return e}registerQSValueEncoder(e){this.qsValueEncoders.push(e)}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.BASE_URL="v1",this.TAXONOMY_URL=this.BASE_URL+'"/metadata/modules/taxonomy"',this.glassContext=e}initialize(e){this.taxonomy=e}getTaxonomy(){return i(this,void 0,void 0,(function*(){return this.taxonomy||(this.taxonomy=yield this.loadTaxonomy()),this.taxonomy}))}loadTaxonomy(){return i(this,void 0,void 0,(function*(){try{const e=yield this.glassContext.getCoreSvc(".Ajax").ajax({url:r.TAXONOMY_URL,type:"GET"});if(e.data&&e.data.data&&e.data.data.taxonomy)return e.data.data.taxonomy;this.glassContext.getCoreSvc(".Logger").error("Unable to parse the returned result when updating the taxonomy data")}catch(e){this.glassContext.getCoreSvc(".Logger").error("Error retrieving the taxonomy data",e)}}))}}t.default=r},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(38)),o=r(n(42)),a=r(n(32));t.default=class{constructor(e){this.Glass=e,this.store=s.default.create({disabled:this.isDisabled()}),this.notifier=new o.default}isDisabled(){const e=this.Glass.getCoreSvc(".Config");return!(!e||!e.getConfigValueSync("Glass.disableGlobalToast"))}getDisabled(){return this.store.disabled}addToast(e,t){const n={message:e,options:t};this.addToasts([n])}addToasts(e){Array.isArray(e)||(e=[e]);const t=[];for(let n=0;n<e.length;n+=1){const i=(0,a.default)("toast");e[n]=Object.assign(Object.assign({message:e[n].message},e[n].options),{id:i}),e[n].onHidden&&!this.getDisabled()&&this.notifier.register(i+"-toast-onhidden",e[n].onHidden),e[n].callback&&!this.getDisabled()&&this.notifier.register(i+"-toast-callback",e[n].callback),e[n].onShown&&!this.getDisabled()&&(this.notifier.register(i+"-toast-onshown",e[n].onShown),t.push(this.notifier.notify(i+"-toast-onshown")))}this.store.addToasts(e),Promise.all(t).then(()=>{}).catch(e=>{this.Glass.getCoreSvc(".Logger").error("Failed to execute onShown function when a toast is added",e)})}removeToastById(e,t=!1){return i(this,void 0,void 0,(function*(){const n=this.store.getToastInPlainById(e);if(null!==n){const i=()=>{this.store.removeToastById(e)};try{t&&n.hasCallback&&(yield this.notifier.notify(e+"-toast-callback")),n.hasOnHidden&&(yield this.notifier.notify(e+"-toast-onhidden"))}catch(e){this.Glass.getCoreSvc(".Logger").error("Failed to execute onHidden/callback function when a toast is removed",e)}finally{i(),this.notifier.remove(e)}}}))}removeAllToasts(){this.store.removeAllToasts()}getToastById(e){return this.store.getToastInPlainById(e)}getToasts(){return this.store.toastsInPlain}getStore(){return this.store}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.containerID=t.globalKeyword=void 0;const r=n(12),s=n(4),o=i(n(7));t.globalKeyword="__global__",t.containerID="toolkit-toastContainer-glassGlobal";const a=s.types.model("ToastModel",{key:s.types.optional(s.types.string,""),stackable:s.types.optional(s.types.boolean,!0),statusType:s.types.union(s.types.literal("info"),s.types.literal("success"),s.types.literal("warning"),s.types.literal("error")),contentString:s.types.optional(s.types.string,""),closeText:s.types.optional(s.types.string,o.default.get("close")),btnLabel:s.types.optional(s.types.string,""),scope:s.types.optional(s.types.string,t.globalKeyword),hasOnHidden:s.types.optional(s.types.boolean,!1),hasOnShown:s.types.optional(s.types.boolean,!1),hasCallback:s.types.optional(s.types.boolean,!1),timedDismiss:s.types.optional(s.types.boolean,!1),milliseconds:s.types.optional(s.types.number,3e3)});function l(e){const n={key:e.id,stackable:!0,statusType:e.type||"success",contentString:e.message,btnLabel:e.btnLabel,scope:e.scope?e.scope:t.globalKeyword,hasOnHidden:!!e.onHidden,hasOnShown:!!e.onShown,hasCallback:!!e.callback,timedDismiss:"success"===e.type||"info"===e.type||!e.type,milliseconds:e.timeBeforeDismiss};return a.create(n)}const c=s.types.model("ToastStore",{disabled:s.types.optional(s.types.boolean,!1),toastQueue:s.types.optional(s.types.array(a),[]),containerID:s.types.optional(s.types.string,t.containerID)}).views(e=>({get toasts(){return e.disabled?[]:(0,r.observable)(e.toastQueue.slice(0,5))},get toastsInPlain(){return e.disabled?[]:(0,r.toJS)(this.toasts)},getToastById(t){if(e.disabled)return null;const n=e.toastQueue.filter(e=>e.key===t);return n.length>0?n[0]:null},getToastInPlainById:t=>e.disabled?null:(0,r.toJS)(e.getToastById(t)),getToastsForPerspective:n=>e.toastQueue.filter(e=>e.scope===t.globalKeyword||e.scope===n).sort((e,n)=>e.scope===n.scope?0:e.scope===t.globalKeyword?1:-1),getToastsInPlainForPerspective:t=>(0,r.toJS)(e.getToastsForPerspective(t))})).actions(e=>({addToasts(t){Array.isArray(t)||(t=[t]);for(let n=0;n<t.length;n+=1)e.toastQueue=(0,r.observable)(e.toastQueue.concat(l(t[n])))},removeToastById(t){const n=e.toastQueue.filter(e=>e.key!==t);e.toastQueue=(0,r.observable)(n)},removeAllToasts(){e.toastQueue=(0,r.observable)([])}}));t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=document.createElement("div");e.id="svgIcons",e.style.display="none",document.body.appendChild(e)}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(67)),o=r(n(71)),a=r(n(72)),l=r(n(73)),c=r(n(75)),u=r(n(76)),d=r(n(93)),h=r(n(125)),p=r(n(126)),g=r(n(127)),f=r(n(128)),m=r(n(39)),v=n(41),b=n(46),y=r(n(23)),C=r(n(52)),_=r(n(16)),w=r(n(129)),S=r(n(130));class P extends u.default{constructor(e,t){super(e),this.glassMode="mode",this.glassBookmarkMode="bookmark",this.initialize=()=>{this.accessibilityController=new s.default(this),this.actionsController=new o.default(this),this.appHomePage=new a.default(this),this.dialogsController=new l.default(this),this.eventsRouter=new c.default(this),this.perspectiveLifeCycle=new d.default(this),this.searchPerspectiveDOM=new h.default(this),this.slideoutController=new g.default(this),this.themeResources=new f.default(this),this.toastsController=new S.default(this),this.externalMenuHelper=new p.default(this)},this.canExecuteAction=(e,t)=>i(this,void 0,void 0,(function*(){return yield this.actionsController.canExecuteAction(e,t)})),this.performAction=(e,t)=>this.actionsController.performAction(e,t),this.detectAccessibilityChange=e=>this.accessibilityController.detectAccessibilityChange(e),this.isHighContrastOn=()=>(0,v.isApplicationInHighContrast)(),this.getHomePageObject=e=>this.appHomePage.getHomePageObject(e),this.resetHome=e=>this.appHomePage.resetAppHomePage(e),this.setDefaultHomePerspective=e=>{this.appHomePage.defaultHomePerspective=e},this.setDefaultThemePath=e=>{this.themeResources.defaultThemePath=e},this.showContextMenu=e=>{this.currentAppView&&this.currentAppView.showContextMenu(e)},this.showEmbedDialog=e=>this.dialogsController.showEmbedDialog(e),this.showErrorMessage=(e,t,n,i)=>this.dialogsController.showErrorMessage(e,t,n,i),this.showMessage=(e,t,n,i,r,s,o,a)=>this.dialogsController.showMessage(e,t,n,i,r,s,o,a),this.showResetHomeDialog=e=>this.dialogsController.showResetHomeDialog(e),this.showShareDialog=e=>this.dialogsController.showShareDialog(e),this.emit=(e,t)=>this.eventsRouter.emit(e,t),this.off=(e,t,n)=>this.eventsRouter.off(e,t,n),this.on=(e,t,n)=>this.eventsRouter.on(e,t,n),this.trigger=(e,t)=>this.eventsRouter.trigger(e,t),this.closeOpenWidgets=()=>this.perspectiveLifeCycle.closeOpenWidgets(),this.updateCurrentCachedAppView=()=>this.perspectiveLifeCycle.updateCurrentPerspectiveCache(),this.isLoginViewShown=()=>this.perspectiveLifeCycle.isLoginViewShown,this.isOpeningAView=()=>this.perspectiveLifeCycle.isOpeningAPerspective(),this.openAppView=(e,t)=>{const n="openAppView-"+(e||"default");return y.default.createPerformanceMark({component:"glass",name:n,state:"start"}),this.perspectiveLifeCycle.openPerspective(e,t).then(e=>(y.default.createPerformanceMark({component:"glass",name:n,state:"end"}),e)).catch(e=>{throw y.default.createPerformanceMark({component:"glass",name:n,state:"end"}),e})},this.openLoginView=e=>this.perspectiveLifeCycle.openLoginPerspective(e),this.openPreviousAppView=()=>this.perspectiveLifeCycle.openPreviousPerspective(),this.close=(e,t)=>this.perspectiveLifeCycle.closeAllPerspectives(e,t),this.closeAppView=(e,t,n,i)=>this.perspectiveLifeCycle.closePerspective(e,t,n,i),this.findCollection=e=>this.searchPerspectiveDOM.findCollection(e),this.findToolbarItems=e=>this.searchPerspectiveDOM.findToolbarItems(e),this.queryPerspective=(e,t)=>this.searchPerspectiveDOM.queryPerspective(e,t),this.findToolbarGroupItems=e=>this.searchPerspectiveDOM.findToolbarGroupItems(e),this.findContextMenuItems=e=>this.searchPerspectiveDOM.findContextMenuItems(e),this.isCollectionContainerAvailable=e=>this.searchPerspectiveDOM.isCollectionContainerAvailable(e),this.findElement=e=>this.searchPerspectiveDOM.findElement(e),this.findPlugin=e=>this.searchPerspectiveDOM.findPlugin(e),this.hideSlideOut=e=>this.slideoutController.hideSlideOut(e),this.showSlideOut=e=>this.slideoutController.showSlideOut(e),this.reloadTheme=()=>this.themeResources.reloadTheme(),this.clearToastContainer=()=>{this.toastsController.clearToastContainer()},this.removeAllToastMessage=()=>{this.toastsController.removeAllToastMessages()},this.showToast=(e,t)=>{this.toastsController.showToast(e,t)},this.getUrl=e=>this.perspectiveLifeCycle.url.getUrl(e,this),this.lockGlass=()=>{const e=document.getElementsByClassName("appview");if(e.length>0){const t=e[0].getElementsByClassName("navbar");t.length>0&&t[0].classList.add("disabled");const n=e[0].getElementsByClassName("appbar");n.length>0&&n[0].classList.add("disabled")}},this.unlockGlass=()=>{const e=document.getElementsByClassName("appview");if(e.length>0){const t=e[0].getElementsByClassName("navbar");t.length>0&&t[0].classList.remove("disabled");const n=e[0].getElementsByClassName("appbar");n.length>0&&n[0].classList.remove("disabled")}},this._closeReactMenus=()=>{document.dispatchEvent(new Event("click")),this.rootPane&&this.rootPane.length>0&&this.rootPane[0].dispatchEvent(new Event("click"))},this.hideOpenMenus=()=>{C.default.hideOpenMenus(),this._closeReactMenus()},this.rootPane=t.$rootPane,(0,b.loadPerspectiveModels)(t.perspectives,this.getCoreSvc(".Perspective"),this.getCoreSvc(".Logger")),(0,m.default)(),w.default.apply()}get currentAppView(){return this.currentPerspective}set currentAppView(e){this.currentPerspective=e,this.appController.currentAppView=e}get mode(){return this.glassMode}set mode(e){this.glassMode=e}get bookmarkMode(){return this.glassBookmarkMode}set bookmarkMode(e){this.glassBookmarkMode=e}get cachedPerspectives(){return this.perspectiveLifeCycle.cachedPerspectives}get externalMenuSupport(){return this.externalMenuHelper}get noCloseOnLastPerspective(){return"true"===_.default.getObjectProperty(["context","content","closeWindowOnLastView"],this.currentAppView)}get previousAppView(){return this.previousPerspective}set previousAppView(e){this.previousPerspective=e,this.appController.previousAppView=e}get perspectiveSwitcherRegistry(){return this.perspectiveLifeCycle.perspectiveSwitcherRegistry}get slideoutRegistry(){return this.slideoutController.slideoutRegistry}get windowPoppingState(){return this.perspectiveLifeCycle.windowPoppingState}set windowPoppingState(e){this.perspectiveLifeCycle.windowPoppingState=e}getCurrentContentView(){return this.currentPerspective?this.currentPerspective.getCurrentContentView():null}getCurrentPerspective(){return this.currentPerspective?this.currentPerspective.getCurrentPerspective():null}}t.default=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isApplicationStyledForHighContrast=t.styleApplicationForHighContrast=t.isApplicationInHighContrast=void 0,t.isApplicationInHighContrast=function(){let e=!1;const t=document.createElement("div");return t.classList.add("hcDetect"),document.body.appendChild(t),getComputedStyle(t).getPropertyValue("border-top-color")===getComputedStyle(t).getPropertyValue("border-left-color")&&""!==getComputedStyle(t).getPropertyValue("border-left-color")&&(e=!0),document.body.removeChild(t),e},t.styleApplicationForHighContrast=function(){document.body.classList.add("highcontrast")},t.isApplicationStyledForHighContrast=function(){return document.body.classList.contains("highcontrast")}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.cache={}}register(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{this.cache[e]=t})}notify(e){return i(this,void 0,void 0,(function*(){let t;if(Object.prototype.hasOwnProperty.call(this.cache,e)){try{t=this.cache[e](e)}finally{t=t||Promise.resolve(),yield t}return this.remove(e)}throw new Error(`Notifier::notify '${e}' not found`)}))}remove(e){delete this.cache[e]}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10));class o extends s.default{constructor(e,t,n,i,r){super(e),this.pendingOpenPerspectivePromise=null,this.perspectiveSwitcherRegistry=t,this.perspectiveViewsCache=n,this.glassStore=i,this.perspectivesRegistry=r}attemptToOpenPreviousPerspective(e,t,n){if(e>=this.perspectiveSwitcherRegistry.size()&&(e=this.perspectiveSwitcherRegistry.size()-1),!n){let n;const i=this.Glass.previousAppView&&this.perspectiveViewsCache.getCachedView(this.Glass.previousAppView.cacheKey);return n=i&&i.perspective&&i!==t&&"login"!==i.perspective?i:this.perspectiveSwitcherRegistry.getPerspectiveByIndex(e),n?this.Glass.openAppView(n.perspective,n.context):this.Glass.openAppView()}return Promise.resolve()}closeOpenWidgets(e){return i(this,void 0,void 0,(function*(){yield this.Glass.hideSlideOut(e),this.Glass.clearToastContainer()}))}setHomeFlag(e,t){!0===t&&this.perspectiveSwitcherRegistry.clearAllPerspectiveHomeFlags(),e.setHomeFlag(t)}prefetchResources(){const e=this.Glass.getRequireJs(),t=e&&e.s&&e.s.contexts&&e.s.contexts._&&e.s.contexts._.config&&e.s.contexts._.config.bundles;t&&this.Glass.getCoreSvc(".Prefetch").prefetchResources(Object.keys(t))}}t.default=o},function(e,t){e.exports=b},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),s=i(n(14)),o=r.types.model({id:r.types.identifier,perspectiveName:r.types.string}).volatile(()=>({context:{},spec:{}})).actions(e=>({setContext(t){e.context=t},setSpec(t){e.spec=t}})).views(e=>({get requirejs(){return e.spec.config?e.spec.config.requirejs:void 0},get configStyles(){return e.spec.config?e.spec.config.styles:void 0},get configScripts(){return e.spec.config?e.spec.config.scripts:void 0},get cssStyles(){return e.spec.cssStyles},get svgImages(){return e.spec.svgImages},get contextMenuSettings(){return e.spec.contextMenus},get actions(){return e.spec.actions},get services(){return e.spec.services},get toolBars(){return e.spec.toolBars},get layout(){return s.default.convertToolBarsToLayoutObject(this.toolBars)},get modelId(){return e.context.content&&e.context.content.id?e.context.content.id:e.context.id?e.context.id:e.spec.id?e.spec.id:""},get cacheKey(){return this.modelId?`${e.perspectiveName}|${this.modelId}`:e.perspectiveName},get contentModule(){return e.spec.content?e.spec.content.module:void 0},get disableGlassPrefetch(){return!(!e.spec.content||!e.spec.content.options)&&!0===e.spec.content.options.disableGlassPrefetch}}));t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arePerspectivesEqual=t.isPerspectiveValid=t.loadPerspectiveModels=void 0,t.loadPerspectiveModels=function(e,t,n){try{Array.isArray(e)&&e.forEach(e=>{const{name:n,model:i,context:r}=e;t.addModel(n,i,r)})}catch(e){n.error("Error while loading perspective models",e)}},t.isPerspectiveValid=function(e){return e&&!e.includes("/")&&!e.includes(".")&&!e.includes("%2F")&&!e.includes("%2f")},t.arePerspectivesEqual=function(e,t){return!(!e||!t||e!==t)}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadPerspectiveServices=t.loadPerspectiveScripts=t.preRenderSetup=t.unloadIcons=t.loadStylesAndIcons=void 0;const s=n(97),o=r(n(99)),a=n(48),l=n(49),c=r(n(50)),u=r(n(101)),d=r(n(23));t.loadStylesAndIcons=function(e,t,n){return i(this,void 0,void 0,(function*(){n&&d.default.createPerformanceMark({component:"glass",name:"loadStylesAndIcons",state:"start"}),o.default.loadSVGIcons(e.svgImages,t);let i=[];Array.isArray(e.cssStyles)&&(i=i.concat(e.cssStyles)),Array.isArray(e.configStyles)&&(i=i.concat(e.configStyles)),yield(0,s.loadStyles)(i,t),n&&d.default.createPerformanceMark({component:"glass",name:"loadStylesAndIcons",state:"end"})}))},t.unloadIcons=function(e,t){o.default.unloadSVGIcons(e.svgImages,t)},t.preRenderSetup=function(e,t){(0,a.configureRequire)(e.requirejs,t.getRequireJs()),(0,l.loadContentViewModule)(e.contentModule)},t.loadPerspectiveScripts=function(e){return i(this,void 0,void 0,(function*(){d.default.createPerformanceMark({component:"glass",name:"loadPerspectiveScripts",state:"start"}),yield(0,u.default)(e.configScripts),d.default.createPerformanceMark({component:"glass",name:"loadPerspectiveScripts",state:"end"})}))},t.loadPerspectiveServices=function(e,t){return i(this,void 0,void 0,(function*(){d.default.createPerformanceMark({component:"glass",name:"loadPerspectiveServices",state:"start"}),yield(0,c.default)(t,e.services),d.default.createPerformanceMark({component:"glass",name:"loadPerspectiveServices",state:"end"})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlArgs=t.configureRequire=void 0,t.configureRequire=function(e,t){e&&e.forEach(e=>{t.config(e)})},t.getUrlArgs=function(e){let t;try{"function"==typeof e.s.contexts._.config.urlArgs?(t=e.s.contexts._.config.urlArgs("",""),0===t.indexOf("?")&&(t=t.split("?")[1])):t=e.s.contexts._.config.urlArgs}catch(e){}return t?"?"+t:""}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createContentView=t.loadContentViewModule=void 0;const r=i(n(11)),s=i(n(34));function o(e){return r.default.loadModule(e)}t.loadContentViewModule=o,t.createContentView=function(e,t,n){const i=(0,s.default)(e.content),r=(0,s.default)(e);return i.glassContext=t,o(i.module).then(e=>new e(i,n,r))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(100)),o=r(n(11)),a=r(n(23)),l=r(n(3));function c(e,t,n){return i(this,void 0,void 0,(function*(){try{const r=yield o.default.instantiate(n);yield function(e,t,n){return i(this,void 0,void 0,(function*(){if(e.services.register(t,n),l.default.isFunction(n.initialize))return yield n.initialize(e)}))}(e,t,r)}catch(t){throw e.getCoreSvc(".Logger").error("Failed to load the service module",t),t}}))}function u(e,t,n){e.services.declare(t,n,e)}function d(e,t,n){return i(this,void 0,void 0,(function*(){return l.default.isString(n)?function(e,t,n){e.services.exists(t)||u(e,t,n)}(e,t,n):l.default.isObject(n)&&n.module?yield function(e,t,n){return i(this,void 0,void 0,(function*(){if(!e.services.exists(t))switch(u(e,t,n.module),n.priority){case s.default.Immediate:a.default.createPerformanceMark({component:"glass",name:"loadService-"+t,state:"start"}),yield c(e,t,n.module),a.default.createPerformanceMark({component:"glass",name:"loadService-"+t,state:"end"});break;case s.default.Defer:!function(e,t,n){setTimeout(()=>{c(e,t,n).catch(n=>{e.getCoreSvc(".Logger").error(`Error loading service ${t}: ${JSON.stringify(n)}`)})},2e3)}(e,t,n.module);break;case s.default.Declare:}}))}(e,t,n):void e.getCoreSvc(".Logger").warn(`Invalid definition for service ${t}: ${JSON.stringify(n)}`)}))}t.default=function(e,t){return i(this,void 0,void 0,(function*(){if(!e||!t)return;const n=Object.keys(t).map(n=>d(e,n,t[n]));yield Promise.all(n)}))}},function(e,t){e.exports=y},function(e,t){e.exports=C},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PLUGINS_RENDER_IN_PROGRESS="PLUGINS_RENDER_IN_PROGRESS",e.PLUGINS_RENDER_SUCCESS="PLUGINS_RENDER_SUCCESS",e.CONTENT_VIEW_LOAD_IN_PROGRESS="CONTENT_VIEW_LOAD_IN_PROGRESS",e.CONTENT_VIEW_LOAD_SUCCESS="CONTENT_VIEW_LOAD_SUCCESS",e.CONTENT_VIEW_LOAD_FAILURE="CONTENT_VIEW_LOAD_FAILURE",e.CONTENT_VIEW_RENDER_SUCCESS="CONTENT_VIEW_RENDER_SUCCESS",e.CONTENT_VIEW_RENDER_FAILURE="CONTENT_VIEW_RENDER_FAILURE"}(i||(i={})),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=i.types.model({x:i.types.number,y:i.types.number}),s=i.types.model({isVisible:i.types.optional(i.types.boolean,!1),position:i.types.optional(r,{x:0,y:0})}).volatile(()=>({shownItems:[],selectedItem:{}})).views(e=>({get menuItemsSplitByDivider(){const t=[],n=e.shownItems.reduce((e,n)=>("divider"===n.type?(e.length>0&&t.push(e),t.push([]),e=[]):e.push(n),e),[]);return n.length>0&&t.push(n),t}})).actions(e=>({updateItems(t){e.shownItems=t},updatePosition(t){e.position=t},showMenu(){e.isVisible||(e.isVisible=!0)},closeMenu(){e.isVisible&&(e.isVisible=!1)},onSelect(t){e.selectedItem=t}}));t.default=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(3)),o=r(n(11)),a=r(n(120));t.default=function(e,t,n){return i(this,void 0,void 0,(function*(){const r=Object.keys(e),l=r.map(r=>function(e,t,n,r){return i(this,void 0,void 0,(function*(){const i=yield o.default.instantiate(e);if(s.default.isFunction(i.initialize)){const e=r;e.controllerConfig=n&&n[t],yield i.initialize.apply(i,[e])}return i}))}(e[r],r,t,n));return function(e){return new a.default(e)}((yield Promise.all(l)).reduce((e,t,n)=>(e[r[n]]=t,e),{}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalKeyword=void 0;const i=n(12),r=n(4);t.globalKeyword="__global__";const s=r.types.model("ActionModel",{id:r.types.optional(r.types.string,""),label:r.types.string,url:r.types.optional(r.types.string,""),actionId:r.types.maybe(r.types.string),actionContext:r.types.frozen(null)}),o=r.types.model("AlertModel",{id:r.types.string,type:r.types.optional(r.types.string,"info"),title:r.types.optional(r.types.string,""),message:r.types.optional(r.types.string,""),scope:r.types.optional(r.types.string,t.globalKeyword),action:r.types.optional(s,{label:""})}),a=r.types.model("AlertStore",{disabled:r.types.optional(r.types.boolean,!1),alertList:r.types.optional(r.types.array(o),[])}).views(e=>({getAlerts:()=>e.disabled?[]:e.alertList,getAlertAt:t=>e.getAlerts()[t],getAlertsForPerspective:n=>e.getAlerts().filter(e=>e.scope===t.globalKeyword||e.scope===n).sort((e,n)=>e.scope===n.scope?0:e.scope===t.globalKeyword?1:-1)})).actions(e=>({addAlerts(t){Array.isArray(t)||(t=[t]),t=function(e){return e.map(e=>((e=Object.assign({},e)).action&&(e.action=s.create(e.action)),o.create(e)))}(t),e.alertList=(0,i.observable)(e.alertList.concat(t))},removeAlert(t){const n=e.alertList.slice();n.splice(t,1),e.alertList=(0,i.observable)(n)}}));t.default=a},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(0));class s extends r.default.Component{constructor(e){super(e),this.menuListRef=r.default.createRef(),this.focusFirstElement=()=>{const e=this.state.focusableElements;e.length>0&&setTimeout(()=>{e[0].focus()},0)},this.handleArrowDownEvent=()=>{const e=this.state.focusableElements;let t=this.state.currentFocusedEl;e.length>0&&t<e.length-1?(t+=1,e[t].focus()):e.length>0&&t===e.length-1&&(t=0,e[t].focus()),this.setState({currentFocusedEl:t})},this.handleArrowUpEvent=()=>{const e=this.state.focusableElements;let t=this.state.currentFocusedEl;e.length&&(t>0?(t-=1,e[t].focus()):(t=e.length-1,e[t].focus()),this.setState({currentFocusedEl:t}))},this.handleTabEvent=e=>{const t=this.state.focusableElements;let n=this.state.currentFocusedEl;t.length>0&&(e.shiftKey?n=t.length-1:n>=0&&n<t.length-1?n++:n=0,t[n].focus(),e.preventDefault()),this.setState({currentFocusedEl:n})},this.setFocusableElements=()=>{const e=[];this.menuListRef.current&&(this.menuListRef.current.querySelectorAll("li").forEach(t=>{0===t.tabIndex&&e.push(t)}),this.setState({focusableElements:e},()=>{this.focusFirstElement()}))},this.onKeyDown=e=>{let t=this.state.focusableListItem[this.state.currentFocusedEl];38===e.keyCode?this.handleArrowUpEvent():40===e.keyCode?this.handleArrowDownEvent():9===e.keyCode?this.handleTabEvent(e):27===e.keyCode?this.props.setMenuVisible(!1):13!==e.keyCode&&32!==e.keyCode||t.hasSubMenu||(this.menuListRef.current&&this.menuListRef.current.blur(),this.props.handleMenuItemClickEvent(t))},this.state={focusableElements:[],focusableListItem:[],currentFocusedEl:0},this.onKeyDown=this.onKeyDown.bind(this)}componentDidMount(){this.setState({focusableListItem:this.props.listItems&&this.props.listItems.filter(e=>"divider"!=e.type)}),this.setFocusableElements()}render(){return r.default.createElement("div",{onKeyDown:e=>this.onKeyDown(e),ref:this.menuListRef},this.props.children)}}t.default=s},function(e,t,n){"use strict";function i(e){return!("object"!=typeof e||null==e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){if(!i(t))return t||n||{};if(!i(n))return t;for(const i in n){const r=n[i];r&&"[object Object]"===Object.prototype.toString.call(r)?(t[i]=t[i]||{},e(t[i],r)):void 0!==r&&(t[i]=r)}return t}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(0)),s=n(5);t.default=function(e){return e?-1!==e.search(/\.jpeg$|\.jpg$|\.png$|\.gif$|\.svg$/)?function(e){return r.default.createElement("img",{src:e,alt:"Button Icon"})}(e):function(e){return r.default.createElement(s.SVGIcon,{className:"svgIcon",iconId:e,verticalAlign:"middle"})}(e):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTooltipAlignment=t.getTooltipPosition=void 0;const i={top:!0,bottom:!0,left:!0,right:!0},r={start:!0,center:!0,end:!0};t.getTooltipPosition=function(e,t){switch(e){case"top":return i[t]?t:"bottom";case"bottom":return i[t]?t:"top";case"left":return i[t]?t:"right";case"right":return i[t]?t:"left";default:return i[t]?t:"bottom"}},t.getTooltipAlignment=function(e){return r[e]?e:"center"}},function(e,t,n){"use strict";var i=n(24),r=n(0);n(19),n(1);var s,o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),a=["children"],l=o.default.forwardRef((function(e,t){var n=e.children,r=i._objectWithoutProperties(e,a);return o.default.createElement(i.Icon,i._extends({width:32,height:32,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:t},r),s||(s=o.default.createElement("path",{d:"M14 26L15.41 24.59 7.83 17 28 17 28 15 7.83 15 15.41 7.41 14 6 4 16 14 26z"})),n)}));e.exports=l},function(e,t,n){"use strict";var i=n(24),r=n(0);n(19),n(1);var s,o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),a=["children"],l=o.default.forwardRef((function(e,t){var n=e.children,r=i._objectWithoutProperties(e,a);return o.default.createElement(i.Icon,i._extends({width:20,height:20,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:t},r),s||(s=o.default.createElement("path",{d:"M2,16H2A14,14,0,1,0,16,2,14,14,0,0,0,2,16Zm23.15,7.75L8.25,6.85a12,12,0,0,1,16.9,16.9ZM8.24,25.16A12,12,0,0,1,6.84,8.27L23.73,25.16a12,12,0,0,1-15.49,0Z"})),n)}));e.exports=l},function(e,t,n){"use strict";var i=n(24),r=n(0);n(19),n(1);var s,o,a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),l=["children"],c=a.default.forwardRef((function(e,t){var n=e.children,r=i._objectWithoutProperties(e,l);return a.default.createElement(i.Icon,i._extends({width:20,height:20,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:t},r),s||(s=a.default.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"})),o||(o=a.default.createElement("path",{d:"M15 8H17V19H15zM16 22a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 22z"})),n)}));e.exports=c},function(e,t,n){"use strict";var i=n(24),r=n(0);n(19),n(1);var s,o,a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),l=["children"],c=a.default.forwardRef((function(e,t){var n=e.children,r=i._objectWithoutProperties(e,l);return a.default.createElement(i.Icon,i._extends({width:20,height:20,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:t},r),s||(s=a.default.createElement("path",{d:"M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"})),o||(o=a.default.createElement("path",{d:"M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"})),n)}));e.exports=c},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=r(n(6)),a=r(n(9)),l=r(n(116)),c=r(n(118)),u=r(n(3)),d=n(119),h=n(121);function p(e,t){return void 0===e?!t:e}class g extends a.default{constructor(e){super(e),this.updateCachedControllerDispatcher=e=>{this.controllerDispatcher=e},this.createMenu=e=>{const{id:t,ddMenuPlacement:n}=this.itemSpec;return this.items=JSON.parse(JSON.stringify([...this.itemSpec.items])),s.default.createElement(l.default,{className:this.itemSpec.class,handleMenuButtonClick:this.handleMenuButtonClick,handleMenuItemClick:this.handleMenuItemClick,handleMenuButtonClickDefault:e&&this.handleMenuButtonClickDefault,id:t,menuPlacement:n,store:this.store,menuItems:this.store.menuItems,groupId:this.itemSpec.groupId,title:this.itemSpec.title,isPositionFlipped:this.itemSpec.isPositionFlipped,backgroundClass:this.itemSpec.backgroundClass||"",tooltipAlignment:this.itemSpec.tooltipAlignment,setButtonRef:this.setButtonRef,menuItemsUpdated:this.store.menuItemsUpdated})},this.setPushButton=e=>{switch(e){case"primaryPushButton":this.store.setPrimaryMenuButtonPushed(!0);break;case"secondaryPushButton":this.store.setSecondaryMenuButtonPushed(!0)}},this.handleMenuButtonClickDefault=e=>{(0,h.defaultMenuButtonClick)(this.itemSpec,this.store,this.glassContext,this)},this.handleMenuButtonClick=e=>i(this,void 0,void 0,(function*(){const e=new CustomEvent("click",{detail:"Click Event to close open Menu"});document.dispatchEvent(e),yield this.updateMenuItemsList()})),this.handleMenuItemClick=e=>{(0,h.menuItemClick)(e,this.store,this.glassContext)},this.closeGlassMenu=()=>{this.store.setMenuVisible(!1)},this.changeMenuButtonTitle=e=>{this.store.updateMenuButtonTitle(e)},this.changeMenuButtonIcon=e=>{this.store.setIconId(e)},this.changeMenuButtonRightIcon=e=>{this.store.setMenuButtonRightIcon(e)},this.setButtonRef=e=>{this.buttonRef=(0,o.default)(e.current),this.controllerDispatcher&&this.callActionControllerOnRender()},this.getButtonElement=()=>this.buttonRef,this.callActionControllerOnRender=()=>{const{id:e}=this.itemSpec,t={glassContext:this.glassContext,target:{plugin:this,items:this.itemSpec.items,itemId:e,store:this.store}};u.default.isFunction(this.controllerDispatcher.onRender)&&this.controllerDispatcher.onRender(t)},this.updateMenuItemsList=()=>i(this,void 0,void 0,(function*(){const{actionControllers:e,controllerConfig:t,id:n}=this.itemSpec,i={glassContext:this.glassContext,target:{plugin:this,items:this.items,itemId:n,menuItems:this.store.menuItems,store:this.store}};try{const n=yield(0,d.getMenuItemsToDisplay)(i,e,t,this.controllerDispatcher,this.updateCachedControllerDispatcher);n&&n.length>0&&this.store.setMenuItems(n),this.store.setMenuItemsUpdated(!0)}catch(e){throw new Error(e)}}));const{icon:t,label:n,labelOnly:r,title:a}=e.itemSpec;this.store=c.default.create({label:n,iconId:t,labelOnly:p(r,t),menuButtonTitle:a})}render(){return i(this,void 0,void 0,(function*(){const e=(0,d.getDefaultMenuActionItem)(this.itemSpec);try{return e?this.store.setDefaultMenuActionItem(e):yield this.updateMenuItemsList(),this.createMenu(e)}catch(e){throw this.glassContext.getCoreSvc(".Logger").error("Failed to load menu: "+this.itemSpec.id,e),new Error(e)}}))}}t.default=g},function(e,t,n){e.exports=n(133)},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.idBypassBlockButtonMountpoint=void 0;const r=i(n(10)),s=i(n(0)),o=i(n(20)),a=i(n(30)),l=n(41),c=i(n(68)),u=i(n(69));t.idBypassBlockButtonMountpoint="glass-bypassBlockButton-mountpoint";class d extends r.default{constructor(e){super(e),this.setFocusToMainContent=()=>{void 0!==this.Glass.currentAppView&&null!==this.Glass.currentAppView&&"function"==typeof this.Glass.currentAppView.setFocus&&(document.activeElement.blur(),setTimeout(()=>{this.Glass.currentAppView.setFocus()},100))},this.Glass.isHighContrastOn()&&(0,l.styleApplicationForHighContrast)(),this.mountBypassBlockButton(),this.keyPressedSet=new Set}mountBypassBlockButton(){const e=document.createElement("div");e.setAttribute("id",t.idBypassBlockButtonMountpoint),e.setAttribute("class","appbar toolpane"),e.setAttribute("role","contentinfo"),e.setAttribute("aria-label",t.idBypassBlockButtonMountpoint);const n=document.body;n&&n.childNodes instanceof NodeList&&n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e),o.default.render(s.default.createElement(c.default,{callback:this.setFocusToMainContent}),e)}setFocusToAppbar(){if(this.Glass.currentAppView){const e=document.querySelector(".appview.paneColumn:not(.hidden)");if(e){const t=e.querySelector(".appbar");this.focusOnForemostNode(t)}}}focusOnForemostNode(e){if(!e)return;const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length>0&&t[0].id&&this.Glass.findElement(t[0].id.replace(/\./g,"\\.")).focus()}shortcutListener(e,t){"up"===e?(u.default.isModifierKey(t)||this.removeKeyFromSet(t.which),u.default.isMetaKey(t)&&this.clearKeyInSet()):"down"===e&&(u.default.isModifierKey(t)||this.addKeyIntoSet(t.which),this.processShortcutAction(t))}addKeyIntoSet(e){this.keyPressedSet.add(e)}removeKeyFromSet(e){this.keyPressedSet.delete(e)}clearKeyInSet(){this.keyPressedSet.clear()}processShortcutAction(e){const t={shortcutFocusToAppbar:{enabled:u.default.isShortcutTriggered("focusToAppbar",this.keyPressedSet,e),callback:()=>this.setFocusToAppbar()},shortcutFocusToMainContent:{enabled:u.default.isShortcutTriggered("focusToMainContent",this.keyPressedSet,e),callback:()=>this.setFocusToMainContent()}};Object.keys(t).forEach(n=>{const i=t[n];i.enabled&&"function"==typeof i.callback&&(u.default.metaKeyEnabled(e)&&this.clearKeyInSet(),i.callback())})}detectAccessibilityChange(e){if(e){document.body.classList.add("accessibilityMode");const e=()=>{document.body.onmousedown=null,this.detectAccessibilityChange(!1)},t=e=>{this.shortcutListener("down",e)},n=e=>{this.shortcutListener("up",e)};document.body.onmousedown=e.bind(this),document.body.onkeydown=t.bind(this),document.body.onkeyup=n.bind(this)}else{const e=e=>{e.which===a.default.TAB&&(document.body.onkeydown=null,this.detectAccessibilityChange(!0)),this.shortcutListener("down",e)},t=e=>{this.shortcutListener("up",e)};document.body.classList.remove("accessibilityMode"),document.body.onkeydown=e.bind(this),document.body.onkeyup=t.bind(this)}}}t.default=d},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(0)),s=n(5),o=i(n(7));class a extends r.default.Component{constructor(){super(...arguments),this.onclickCallback=e=>{const{callback:t}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),t()}}render(){return r.default.createElement(s.Button,{label:o.default.get("bypassBlockButtonTitle"),variant:"solid",intent:"primary",onClick:this.onclickCallback,autofocus:!0})}}t.default=a},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(30)),s=i(n(70));class o{static isShortcutTriggered(e,t,n){const i=o.shortcutMap[e];return null!=i&&o.verifyKeyset(i,t,n)}static verifyKeyset(e,t,n){return Object.keys(e).every(i=>{if("others"===i){if(e.others.filter(e=>t.has(e)).length!==e.others.length)return!1}else if("ctrlKey"===i&&n){if(!s.default.isDeviceMac()&&!n.ctrlKey||s.default.isDeviceMac()&&!n.metaKey)return!1}else if(n&&!n[i])return!1;return!0})}static isModifierKey(e){return e&&e.key&&["control","shift","alt","meta"].includes(e.key.toLowerCase())}static isMetaKey(e){return e&&e.key&&"meta"===e.key.toLowerCase()}static metaKeyEnabled(e){return e&&e.metaKey}}t.default=o,o.shortcutMap={focusToAppbar:{ctrlKey:!0,shiftKey:!0,others:[r.default.NUM1]},focusToMainContent:{ctrlKey:!0,shiftKey:!0,others:[r.default.NUM2]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{}t.default=i,i.list={mac:["MacIntel","Macintosh"],windows:["Windows","Win32"]},i.isDeviceMac=()=>navigator&&i.list.mac&&i.list.mac.includes(navigator.platform),i.isDeviceWindows=()=>navigator&&i.list.windows&&i.list.windows.includes(navigator.platform)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10));class o extends s.default{canExecuteAction(e,t){return i(this,void 0,void 0,(function*(){if(this.Glass.currentAppView)return null!==e&&(yield this.Glass.currentAppView.canExecuteAction(e,t));throw new Error("Internal error: No appview loaded.")}))}performAction(e,t){if(this.Glass.currentAppView)return Promise.resolve(this.Glass.currentAppView.performAction(e,t));const n=new Error("Internal error: unable to find an appView");throw this.logger.error(n),n}}t.default=o},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10)),o=r(n(16)),a=r(n(7)),l=r(n(6));var c;!function(e){e.DEFAULT_HOME_PERSPECTIVE="home"}(c||(c={}));class u extends s.default{constructor(e){super(e),this.initializeHomePageObjects()}set defaultHomePerspective(e){this.homePerspectiveDefault=e}getHomePageObject(e){return i(this,void 0,void 0,(function*(){const t="number"==typeof e?e:0,{homePageObjs:n}=this;if(t<n.length)try{let e=yield n[t]();if(!e||e&&0===Object.keys(e).length)return this.getHomePageObject(t+1);const i={content:{isHomepage:!0}};return e=l.default.extend(!0,i,e),e}catch(e){this.logger.error("unable to get home page object",e)}throw new Error("Unsupported home page index:"+t)}))}resetAppHomePage(e){return i(this,void 0,void 0,(function*(){yield this.Glass.getCoreSvc(".UserProfile").resetHome(),this.Glass.perspectiveSwitcherRegistry.clearAllPerspectiveHomeFlags(),this.Glass.showToast(a.default.get("resetHomeSuccess"),{type:"success"}),e&&this.Glass.openAppView()}))}initializeHomePageObjects(){this.homePageObjs=[this.getFactoryHomeObj.bind(this)],o.default.isFactoryMode()||this.homePageObjs.unshift(this.getUserHomePageObject.bind(this),this.getSystemHomeObject.bind(this))}getFactoryHomeObj(){return{perspective:this.homePerspectiveDefault||c.DEFAULT_HOME_PERSPECTIVE}}getSystemHomeObject(){const e=this.Glass.getCoreSvc(".UserProfile");if(e.userProfileSettings&&e.userProfileSettings.ui_homePage){const t=e.userProfileSettings.ui_homePage;return t&&t.content&&"run"===t.content.action&&delete t.content.action,t}return{}}getUserHomePageObject(){return i(this,void 0,void 0,(function*(){const e=this.Glass.getCoreSvc(".UserProfile");try{let t;if(e.preferences&&e.preferences.homePage||(yield e.updateContext()),e.preferences&&(t=e.preferences.homePage),!t)return{};try{return JSON.parse(t)}catch(e){throw this.logger.error("Not valid JSON format. Invalid home page specification.",e),new Error("Not valid JSON format. Invalid home page specification.")}}catch(e){return this.logger.error("Unable to get user home object",e),{}}}))}}t.default=u},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10)),o=r(n(0)),a=r(n(20)),l=r(n(74)),c=r(n(7));class u extends s.default{constructor(e){super(e),this.mountComponent()}mountComponent(){const e=document.createElement("div");e.setAttribute("id","glass-dialog-mountpoint"),a.default.render(o.default.createElement(l.default,{store:this.Glass.getCoreSvc(".Dialog").getStore(),Glass:this.Glass}),document.body.appendChild(e))}showErrorMessage(e,t,n,r){return i(this,void 0,void 0,(function*(){return yield this.showMessage(e,t,"error",["ok"],void 0,n,r)}))}showMessage(e,t,n,r,s,o,a,l){return i(this,void 0,void 0,(function*(){return new Promise(i=>{try{const c={message:e,title:t,type:n,buttons:r,width:s,callback:{general:o},htmlContent:a,className:l,callbackScope:{ok:this}};this.Glass.getCoreSvc(".Dialog").createDialog(c),i()}catch(e){throw this.logger.error(e),e}})}))}showResetHomeDialog(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{try{const n={message:e,title:c.default.get("invalidHomePageTitle"),type:"warning",buttons:["ok","cancel"],htmlContent:!1,callback:{ok:()=>this.Glass.resetHome(!0)}};this.Glass.getCoreSvc(".Dialog").createDialog(n),t()}catch(e){throw this.logger.error(e),e}})}))}showShareDialog(e){return i(this,void 0,void 0,(function*(){const t={urlMap:e,isEmbed:!1},n=this.Glass.getUrl(t),i={title:c.default.get("shareDialogTitle"),type:"share",width:"500px",buttons:["copy","cancel"],htmlContent:!1,payload:{url:n}};return yield this.showNewModalDialog(i)}))}showEmbedDialog(e){return i(this,void 0,void 0,(function*(){const t={urlMap:e,isEmbed:!0},n=this.Glass.getUrl(t),i={title:c.default.get("embedDialogTitle"),type:"embed",width:"500px",buttons:["copy","cancel"],htmlContent:!1,payload:{url:n}};return yield this.showNewModalDialog(i)}))}showNewModalDialog(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{try{this.Glass.getCoreSvc(".Dialog").createDialog(e),t()}catch(e){throw this.logger.error("Modal Error: Failed to load modal",e),e}})}))}}t.default=u},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=n(5),a=n(8),l=n(12),c=r(n(7));let u=class extends s.default.Component{constructor(e){super(e),this.state={embedWidth:500,embedHeight:400},this.isIOSdevice=/iPad/i.test(navigator.userAgent),this.buttonLabelMap={copy:"copyText",ok:"ok",cancel:"cancel",close:"close"}}bindOnClose(e){const{Glass:t}=this.props;for(let n=0;n<e.length;n+=1)e[n].onClose=()=>t.getCoreSvc(".Dialog").removeDialog();return e}copyToClipboard(){this.targetTextarea.select(),document.execCommand("copy")}buttonsEmbedShareDialog(e){const{Glass:t}=this.props;return s.default.createElement(o.Dialog.Footer,null,e.buttons.map(n=>s.default.createElement(o.Dialog.Button,{id:"copy"===n?"copy_button":n,className:"button dialogButton "+("copy"===n?"primary":"secondary"),key:`${e.key}${n}`,label:c.default.get(this.buttonLabelMap[n]),primary:"copy"===n,onClick:()=>{"cancel"===n?t.getCoreSvc(".Dialog").removeDialog(n):"copy"===n&&this.copyToClipboard()}})))}urlGenerator(e){if("embed"===e.type){const{embedWidth:t,embedHeight:n}=this.state;return`<iframe src="${e.payload&&e.payload.url?e.payload.url.replace(/&/g,"&amp;"):""}" width="${t}" height="${n}"></iframe>`}return e.payload&&e.payload.url?e.payload.url:""}urlDisplay(e){return s.default.createElement("textarea",{className:"displayedURLOrCode","aria-label":c.default.get("share"===e.type?"shareDialogCodeLabel":"embedDialogCodeLabel"),tabIndex:0,readOnly:!this.isIOSdevice,style:{width:"100%",height:"96px"},ref:e=>{this.targetTextarea=e},value:this.urlGenerator(e)})}nodeEmbedDialog(e){const{embedWidth:t,embedHeight:n}=this.state;return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Dialog.Body,null,s.default.createElement("div",{className:"embedDialogText",style:{marginBottom:"24px"},"aria-label":c.default.get("embedDialogText")},c.default.get("embedDialogText")),s.default.createElement("div",{className:"embedDialogSizeAdjustor",style:{marginBottom:"16px"}},s.default.createElement("div",{style:{width:"50%",display:"inline-block"}},s.default.createElement("div",null,c.default.get("embedURLWidthLabel")),s.default.createElement(o.NumberInput,{id:"GlassMessageDialog_embedWidth",value:t,scale:1,max:1e5,onValueAccept:(e,t)=>Number(e)===Number(t)&&this.setState({embedWidth:e})})),s.default.createElement("div",{style:{width:"50%",display:"inline-block"}},s.default.createElement("div",null,c.default.get("embedURLHeightLabel")),s.default.createElement(o.NumberInput,{id:"GlassMessageDialog_embedHeight",value:n,scale:1,max:1e5,onValueAccept:(e,t)=>Number(e)===Number(t)&&this.setState({embedHeight:e})}))),this.urlDisplay(e)),this.buttonsEmbedShareDialog(e))}nodeShareDialog(e){return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Dialog.Body,null,s.default.createElement("div",{className:"shareDialogText",style:{marginBottom:"16px"},"aria-label":c.default.get("shareDialogText")},c.default.get("shareDialogText")),this.urlDisplay(e)),this.buttonsEmbedShareDialog(e))}nodeGeneralDialog(e){const{Glass:t}=this.props;return s.default.createElement(s.default.Fragment,null,e.isHTMLContent?s.default.createElement(o.Dialog.Body,{dangerouslySetInnerHTML:{__html:e.message}}):s.default.createElement(o.Dialog.Body,null,s.default.createElement("div",{className:"messageBox "+e.type},e.message)),s.default.createElement(o.Dialog.Footer,null,e.buttons.map(n=>{const i="object"==typeof n&&n.text?n.text:c.default.get(this.buttonLabelMap["string"==typeof n?n:"ok"]),r="object"==typeof n&&n.defaultId?n.defaultId:n,a="ok"===n||"object"==typeof n&&"ok"===n.defaultId;return s.default.createElement(o.Dialog.Button,{key:`${e.key}${i}`,id:r,className:"button dialogButton "+(a?"primary":"secondary"),label:i,primary:a,onClick:()=>t.getCoreSvc(".Dialog").removeDialog(r)})})))}renderBodyFooter(e){let t;switch(e.type){case"info":case"error":case"warning":t=this.nodeGeneralDialog(e);break;case"share":t=this.nodeShareDialog(e);break;case"embed":t=this.nodeEmbedDialog(e);break;default:t=this.nodeGeneralDialog(e)}return t}render(){const{store:e}=this.props,t=this.bindOnClose((0,l.toJS)(e?e.dialogs:[]));return t&&t.map(e=>s.default.createElement(o.Dialog,{size:e.size,width:e.width,className:e.className,startingFocusIndex:-1,onClose:e.onClose,style:{zIndex:9999999}},s.default.createElement(o.Dialog.SubHeader,null,e.subTitle),s.default.createElement(o.Dialog.Header,null,e.title),this.renderBodyFooter(e)))}};u=i([a.observer],u),t.default=u},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10));class o extends s.default{constructor(e){super(e),this.attachApplicationEventListeners(),this.attachUnhandledRejectionListenerToWindow(),this.attachPopStateListenerToWindow()}off(e,t,n){this.eventService.off(e,t,n)}on(e,t,n){this.eventService.on(e,t,n)}emit(e,t){this.eventService.trigger(e,t)}trigger(e,t){this.eventService.trigger(e,t)}attachApplicationEventListeners(){this.on("appView:titleChange",e=>{this.trigger("change:title",e),e.value&&(document.title=e.value)})}attachPopStateListenerToWindow(){this.Glass.trackHistory&&(window.onpopstate=e=>i(this,void 0,void 0,(function*(){const{state:t}=e;t&&(this.Glass.windowPoppingState=!0,yield this.Glass.openAppView(t.perspective,t),this.Glass.windowPoppingState=!1)})))}attachUnhandledRejectionListenerToWindow(){window.addEventListener("unhandledrejection",e=>{e.preventDefault(),e&&e.detail&&e.detail.reason&&this.logger.error(e.detail.reason)})}}t.default=o},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(31)),s=i(n(33)),o=i(n(35)),a=i(n(36)),l=i(n(37)),c=i(n(78)),u=i(n(79)),d=i(n(80)),h=i(n(81)),p=i(n(82)),g=i(n(83)),f=i(n(84)),m=i(n(85)),v=i(n(86)),b=i(n(16)),y=i(n(87)),C=i(n(88)),_=i(n(89)),w=i(n(90)),S=i(n(91)),P=i(n(92));t.default=class{constructor(e){this.appController=e.appController,this.authInfo=e.authInfo,this.cacheAppViews=e.cacheAppViews,this.installInfo=e.installInfo,this.versionInfo=e.versionInfo,this.trackHistory=e.trackHistory,this.requirejs=e.requirejs,this.coreServices={},this.services=new w.default({}),this.registerAllCoreServices(),this.registerLegacyServices(),this.profile=this.profile||{},this.ajaxCodes={SSO:441,UNAUTHORIZED:441,AUTH_DENIED:401};const t=b.default.getQueryDataParameterMap(this);this.isAppEmbedded=t&&"embedded"===t.shareMode,this.isPrefetchSvcDisabled=t&&"disabled"===t.prefetchsvc}getSvc(e,t){return this.services.getSvc(e,t)}getSvcSync(e){let t=null;try{t=this.services.getSvcSync(e)}catch(e){return t}return t}getCoreSvc(e){if(!this.coreServices[e])try{throw new Error(`Service "${e}" is not a core service and may not be available synchronously...`)}catch(e){this.getCoreSvc(".Logger").warn(e)}return this.services.getSvcSync(e)}registerCoreService(e,t){this.coreServices[e]=!0,this.services.register(e,t)}addToOptions(e){const t=e||{};return t.glassContext=this,t.Glass=this,t}isDevInstall(){let e=!1;return"string"==typeof this.installInfo&&(e="development"===this.installInfo.toLowerCase()),e}hasCapability(e){const{capabilities:t}=this.getCoreSvc(".UserProfile");return!!t&&t.includes(e)}isEmbedded(){return!!this.isAppEmbedded}isPrefetchDisabled(){return!!this.isPrefetchSvcDisabled}getRequireJs(){return this.requirejs}registerAllCoreServices(){const e=new h.default(this.addToOptions());this.registerCoreService(".Logger",new C.default),this.registerCoreService(".WindowProxy",new P.default(this,window,{dialog:!0})),this.registerCoreService(".Ajax",new c.default({configService:e})),this.registerCoreService(".Context",new p.default(this.addToOptions())),this.registerCoreService(".CoachMarkService",new d.default(this)),this.registerCoreService(".FeatureChecker",new f.default(m.default)),this.registerCoreService(".Events",new g.default),this.registerCoreService(".Perspective",new s.default(this)),this.registerCoreService(".UserProfile",new S.default(this.addToOptions())),this.registerCoreService(".Config",e),this.registerCoreService(".Clipboard",new u.default(this)),this.registerCoreService(".Prefetch",new _.default(this)),this.registerCoreService(".Taxonomy",new a.default(this)),this.registerCoreService(".URLEncoder",new o.default(this)),this.registerCoreService(".Toast",new l.default(this)),this.registerCoreService(".Dialog",new r.default(this))}registerLegacyServices(){const e={ajax:new y.default(this.addToOptions()),fetch:new v.default(this.addToOptions()),userProfile:this.getCoreSvc(".UserProfile"),config:this.getCoreSvc(".Config"),logger:this.getCoreSvc(".Logger")};Object.keys(e).forEach(t=>{this.services.register(t,e[t]),this.services[t]=e[t]})}getSSOLoginURL(){return this.getCoreSvc(".Logger").info('Glass.getSSOLoginURL has been deprecated... use getCoreSvc(".Config").getSSOLoginURL() instead.'),this.getCoreSvc(".Config").getSSOLoginURL()}getSSOLogoutURL(){return this.getCoreSvc(".Logger").info('Glass.getSSOLogoutURL has been deprecated... use getCoreSvc(".Config").getSSOLogoutURL() instead.'),this.getCoreSvc(".Config").getSSOLogoutURL()}getAllowedUrlLoginParameters(){return this.getCoreSvc(".Logger").info('Glass.getAllowedUrlLoginParameters has been deprecated... use getCoreSvc(".Config").getAllowedUrlLoginParameters() instead.'),this.getCoreSvc(".Config").getAllowedUrlLoginParameters()}setSSOURL(){return this.getCoreSvc(".Logger").info('Glass.setSSOURL has been deprecated... use getCoreSvc(".Config").setSSOURL() instead.'),this.getCoreSvc(".Config").setSSOURL()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),r=n(4),s=r.types.model({url:r.types.optional(r.types.string,"")}),o=r.types.model({defaultId:r.types.string,text:r.types.string}),a=r.types.model("DialogModel",{key:r.types.optional(r.types.string,""),message:r.types.optional(r.types.string,""),title:r.types.string,subTitle:r.types.optional(r.types.string,""),type:r.types.enumeration("dialogType",["info","error","share","embed","warning"]),buttons:r.types.optional(r.types.array(r.types.union(r.types.string,o)),[]),width:r.types.optional(r.types.string,""),hasCallback:r.types.optional(r.types.boolean,!1),isHTMLContent:r.types.optional(r.types.union(r.types.boolean,r.types.null),!1),className:r.types.optional(r.types.string,""),size:r.types.enumeration("dialogSize",["default","small","large"]),payload:r.types.optional(s,{})}),l=r.types.model("DialogStore",{dialogStack:r.types.optional(r.types.array(a),[])}).views(e=>({get dialogs(){return e.dialogStack},get dialogsInPlain(){return(0,i.toJS)(e.dialogStack)}})).actions(e=>({addDialog(t){e.dialogStack=(0,i.observable)(e.dialogStack.concat(function(e){const t=["default","small","large"];e.width&&e.width.match(/\d/g)?e.size=e.size&&t.includes(e.size)?e.size:"large":(e.size=t.includes(e.width)?e.width:"large",e.width="");const n={message:e.message,title:e.title,subTitle:e.subTitle,type:e.type,buttons:e.buttons&&Array.isArray(e.buttons)?e.buttons:[],width:e.width,hasCallback:e.callback&&"object"==typeof e.callback&&Object.keys(e.callback).length>0&&Object.values(e.callback).filter(e=>e&&"function"==typeof e).length>0,isHTMLContent:e.htmlContent,className:e.className,size:e.size,key:e.id,payload:e.payload};return a.create(n)}(t)))},removeDialog(){e.dialogStack=(0,i.observable)(e.dialogStack.slice(0,e.dialogStack.length-1))},removeAllDialogs(){e.dialogStack=(0,i.observable)([])}}));t.default=l},function(e,t){e.exports=_},function(e,t){e.exports=w},function(e,t){e.exports=S},function(e,t){e.exports=P},function(e,t){e.exports=M},function(e,t){e.exports=x},function(e,t){e.exports=E},function(e,t){e.exports=I},function(e,t){e.exports=O},function(e,t){e.exports=A},function(e,t){e.exports=D},function(e,t){e.exports=T},function(e,t){e.exports=L},function(e,t){e.exports=R},function(e,t){e.exports=N},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(10)),s=i(n(0)),o=i(n(20)),a=i(n(94)),l=i(n(95)),c=i(n(96)),u=i(n(102)),d=i(n(104)),h=i(n(122)),p=i(n(123)),g=i(n(124)),f=i(n(26));class m extends r.default{constructor(e){super(e),this.closeOpenWidgets=()=>this.openPerspectiveController.closeOpenWidgets(),this.updateCurrentPerspectiveCache=()=>this.perspectiveViewsCache.updateCache(this.Glass.currentAppView),this.isOpeningAPerspective=()=>this.openPerspectiveController.isOpeningAPerspective(),this.openLoginPerspective=e=>this.openPerspectiveController.openLoginPerspective(e),this.openPerspective=(e,t)=>this.openPerspectiveController.openPerspective(e,t),this.openPreviousPerspective=()=>this.openPerspectiveController.openPreviousPerspective(),this.closeAllPerspectives=(e,t)=>this.closePerspectiveController.closeAllPerspectives(e,t),this.closePerspective=(e,t,n,i)=>this.closePerspectiveController.closePerspective(e,t,n,i),this.perspectiveSwitcherRegistry=new g.default(this.Glass),this.perspectiveViewsCache=new p.default(this.Glass),this.urlHelper=new f.default,this.initializeGlassUIRender(),this.openPerspectiveController=new c.default(this.Glass,this.perspectiveSwitcherRegistry,this.perspectiveViewsCache,this.glassStore,this.perspectivesRegistry,this.perspectivesFactory,this.urlHelper),this.closePerspectiveController=new a.default(this.Glass,this.perspectiveSwitcherRegistry,this.perspectiveViewsCache,this.glassStore,this.perspectivesRegistry)}get cachedPerspectives(){return this.perspectiveViewsCache.getCachedPerspectives()}get isLoginViewShown(){return!!this.openPerspectiveController.loginView}get url(){return this.urlHelper}getMountPointForGlassUI(){return this.Glass.rootPane.length>0&&this.Glass.rootPane[0]?this.Glass.rootPane[0]:document.getElementById("main")}initializeGlassUIRender(){this.glassStore=l.default.create(),this.perspectivesRegistry=new h.default(this.glassStore),this.perspectivesFactory=new d.default(this.perspectivesRegistry,this.Glass);try{o.default.render(s.default.createElement(u.default,{perspectiveRegistry:this.perspectivesRegistry,glassStore:this.glassStore}),this.getMountPointForGlassUI())}catch(e){this.logger.error("Mount point is not correctly set for Glass UI",e,this.Glass.rootPane)}}}t.default=m},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(43)),o=r(n(44)),a=r(n(7));class l extends s.default{closeAllPerspectives(e,t){const n=this.perspectiveViewsCache.getDirtyCachedViews();if(!e&&!0===t&&0===n.length)return;if(!e&&n.length>0)return t?function(e){let t=a.default.get("unsavedViewsMsg")+"\n\r";return e.forEach(e=>{t+=e.getTitle(!0)+"\r"}),t}(n):this.closeAllPerspectivesWithConfirmation();const i=this.closeAllPerspectiveViews(t,!0);return t?void 0:new Promise((e,t)=>{i.then(e,t)})}closePerspective(e,t,n,r){return i(this,void 0,void 0,(function*(){const i={perspective:e};t&&(i.content={id:t});const s=this.perspectiveViewsCache.getCachedViewByPerspectiveNameAndContext(e,i);return this.closePerspectiveView(s,!!r||null,null,n)}))}closeAllPerspectivesWithConfirmation(){return i(this,void 0,void 0,(function*(){yield o.default.waitForCloseConfirmation(this.Glass),this.closeAllPerspectiveViews(!1,!0)}))}closeAllPerspectiveViews(e,t){return i(this,void 0,void 0,(function*(){e&&this.Glass.currentAppView.updateRenderState(!0),this.Glass.previousAppView=void 0;const n=[];return this.perspectiveViewsCache.getCachedPerspectives().forEach(e=>{e.cleanupSlideoutController();const i=this.closePerspectiveView.bind(this,e,!0,t);n.push(i())}),this.perspectiveViewsCache.clearCache(),Promise.all(n)}))}closePerspectiveView(e,t,n,r){return i(this,void 0,void 0,(function*(){return e&&(e.shouldShowCloseConfirmationDialog()&&!t&&(yield o.default.waitForCloseConfirmation(this.Glass,r)),e===this.Glass.currentAppView&&(yield this.closeOpenWidgets()),yield this.removePerspective(e,r),this.removePerspectiveEvents(e),yield this.cleanSwitcherRegistry(e,n),this.Glass.previousAppView===e&&(this.Glass.previousAppView=void 0),this.perspectiveViewsCache.removeCachedView(e.cacheKey),null==n&&this.postPerspectiveClose()),!0}))}cleanSwitcherRegistry(e,t){return i(this,void 0,void 0,(function*(){let n=this.perspectiveSwitcherRegistry.getIndexOfPerspective(e);return this.Glass.perspectiveSwitcherRegistry.removePerspective(e),e!==this.Glass.currentAppView||(-1===n&&(n=0),this.Glass.appController.isOpeningAView())?Promise.resolve():this.attemptToOpenPreviousPerspective(n,e,t)}))}postPerspectiveClose(){const e=this.Glass.noCloseOnLastPerspective;0===this.perspectiveSwitcherRegistry.size()&&e&&window.close(),this.pendingOpenPerspectivePromise=null}removePerspective(e,t){return i(this,void 0,void 0,(function*(){return this.perspectivesRegistry.remove(e.perspectiveModel.id),this.glassStore.removePerspectiveModel(e.perspectiveModel.id),yield e.remove(!0,t)}))}removePerspectiveEvents(e){const{viewId:t}=e;t&&this.Glass.off("change:title",void 0,t)}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(12),s=i.types.model({perspectiveModels:i.types.optional(i.types.array(i.types.string),[]),registeredPerspectives:i.types.optional(i.types.array(i.types.string),[]),currentPerspective:i.types.optional(i.types.string,"")}).actions(e=>({addPerspectiveModel(t){e.perspectiveModels.push(t.id)},removePerspectiveModel(t){const n=e.perspectiveModels.filter(e=>e!==t);e.perspectiveModels=(0,r.observable)(n)},registerPerspective(t){e.registeredPerspectives.push(t)},deregisterPerspective(t){e.registeredPerspectives.remove(t)},setCurrentPerspective(t){e.currentPerspective=t}}));t.default=s},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(43)),c=s(n(12)),u=a(n(32)),d=a(n(23)),h=a(n(45)),p=n(46),g=n(47),f=a(n(17)),m=a(n(16)),v=a(n(7)),b=a(n(26)),y=a(n(6));class C extends l.default{constructor(e,t,n,i,r,s,o){super(e,t,n,i,r),this.perspectivesFactory=s,this.urlHelper=o}isOpeningAPerspective(){return void 0!==this.pendingOpenPerspectivePromise&&null!==this.pendingOpenPerspectivePromise}openLoginPerspective(e){return o(this,void 0,void 0,(function*(){e=void 0===e?{}:e,this.isOpeningAPerspective()&&(e&&e.content&&e.content.origin&&e.content.origin.relogin?this.pendingOpenPerspectivePromise=null:yield this.openPendingPerspective());try{yield this.closeOpenWidgets();const t=yield this.renderPerspective("login",e,this.Glass.currentAppView);return this.loginView=t,t}catch(e){throw this.handleOpenLoginViewError(),e}finally{this.Glass.reloadTheme()}}))}openPerspective(e,t){return o(this,void 0,void 0,(function*(){yield this.openPendingPerspective();try{if("login"===e)return this.pendingOpenPerspectivePromise=this.openLoginPerspective(t),this.pendingOpenPerspectivePromise;yield this.closeOpenWidgets();const n=yield this.buildPerspectiveContext(e,t);return this.pendingOpenPerspectivePromise=this.showPerspective(n.perspectiveName,n.context),this.pendingOpenPerspectivePromise.then(()=>{this.pendingOpenPerspectivePromise=null}),yield this.pendingOpenPerspectivePromise}catch(e){return this.pendingOpenPerspectivePromise=this.handleOpenPerspectiveError(e),this.pendingOpenPerspectivePromise}}))}openPreviousPerspective(){return this.Glass.previousAppView&&this.perspectiveViewsCache.getCachedView(this.Glass.previousAppView.cacheKey)?this.openPerspective(this.Glass.previousAppView.perspective,this.Glass.previousAppView.context):this.isOpeningAPerspective()?this.openPerspective():null}displayPerspective(e,t){return e&&"function"==typeof e.hasHomeFlag&&this.setHomeFlag(e,e.hasHomeFlag()),t&&"function"==typeof t.hide&&(t.hide(),this.perspectiveSwitcherRegistry.size()>0&&this.perspectiveViewsCache.updateCache(t)),"login"!==e.perspective&&this.loginView&&(this.removeLoginView(),this.Glass.reloadTheme()),e.show(),this.Glass.trigger("appView:loaded",{perspective:e.perspective,context:e.context,appView:e}),e.setFocus(),e&&!e.isTransient()&&this.perspectiveSwitcherRegistry.addPerspective(e),this.Glass.unlockGlass(),this.Glass.isEmbedded()||this.Glass.isPrefetchDisabled()||e.isPrefetchDisabled()||this.prefetchResources(),e}deactivateCurrentPerspective(){return o(this,void 0,void 0,(function*(){this.Glass.currentAppView&&(yield this.Glass.currentAppView.deactivate(),"login"!==this.Glass.currentAppView.perspective&&(this.Glass.previousAppView=this.Glass.currentAppView))}))}getPerspectiveModel(e,t){return o(this,void 0,void 0,(function*(){const n=this.Glass.getCoreSvc(".Perspective"),i=yield n.getModel(e,t),r=y.default.extend(!0,{},i,t),s=h.default.create({id:"login"===e?"login":(0,u.default)("id"),perspectiveName:e||r.perspective});return s.setSpec(r),s.setContext(t),s}))}openHomePerspective(e){return o(this,void 0,void 0,(function*(){const t="number"==typeof e?e:0,n=yield this.Glass.getHomePageObject(t);try{if("login"===n.perspective)return this.openLoginPerspective(n);yield this.closeOpenWidgets();const e=yield this.buildPerspectiveContext(n.perspective,n);return this.showPerspective(e.perspectiveName,e.context)}catch(e){return this.logger.warn("Failed to open home page:",t,n.perspective),this.openHomePerspective(t+1)}}))}renderPerspective(e,t,n){return o(this,void 0,void 0,(function*(){if((0,p.isPerspectiveValid)(e)){const i=yield this.getPerspectiveModel(e,t);"login"!==e&&this.updateUserProfileContext(i),yield this.deactivateCurrentPerspective(),(0,g.preRenderSetup)(i,this.Glass),yield(0,g.loadPerspectiveScripts)(i),yield(0,g.loadPerspectiveServices)(i,this.Glass);const[r]=yield Promise.all([this.renderPerspectiveView(i),(0,g.loadStylesAndIcons)(i,this.Glass.getRequireJs(),!0)]);this.perspectiveViewsCache.cacheView(e,i.spec,r);const s=function(e,t,n,i){const r=JSON.parse(JSON.stringify(e));return r.content=i.content,r.perspective=n||t.perspectiveName,!r.id&&t.modelId&&(r.id=t.modelId),r}(t,i,e,r);return r.context=s,this.displayPerspective(r,n)}throw new f.default(v.default.get("invalidPerspectiveErrorMessage"))}))}renderPerspectiveView(e){d.default.createPerformanceMark({component:"glass",name:"renderPerspectiveView",state:"start"}),this.glassStore.addPerspectiveModel(e),this.perspectivesFactory.create(e),this.glassStore.setCurrentPerspective(e.id);const t=this.perspectivesRegistry.getPerspectiveById(e.id),n=t.getPerspectiveController();this.Glass.currentAppView=n;const i=t.getPerspectiveStore();return new Promise((e,t)=>{c.when(()=>i.contentViewRendered,()=>{d.default.createPerformanceMark({component:"glass",name:"renderPerspectiveView",state:"end"}),e(n)}),c.when(()=>i.contentViewRenderFailed,()=>{this.logger.error(new Error("AppView Error: Error creating the AppView")),t()})})}showCachedPerspective(e,t,n){return o(this,void 0,void 0,(function*(){if(e&&n)return e!==this.Glass.currentAppView?(yield this.Glass.currentAppView.deactivate(),this.showContentView(e,t,n)):this.showContentView(e,t,n);throw new Error("Cached appview and/or its context can not be null.")}))}showNonCachedPerspective(e,t,n){return o(this,void 0,void 0,(function*(){try{if(!function(e){return e.isHomepage||e.content&&e.content.isHomepage}(t)){const i=yield this.Glass.getHomePageObject();return function(e,t,n){return t&&t.perspective===n&&e.content&&t.content&&e.content.pathRef===t.content.pathRef}(t,i,e)?t.isHomepage=!0:t.isHomepage=!1,this.renderPerspective(e,t,n)}return t.isHomepage=!0,t.content&&delete t.content.isHomepage,this.renderPerspective(e,t,n)}catch(e){this.handleShowNonCachedPerspectiveError(e,t)}return null}))}showContentView(e,t,n){return o(this,void 0,void 0,(function*(){return this.Glass.previousAppView=this.Glass.currentAppView,this.Glass.currentAppView=e,this.glassStore.setCurrentPerspective(e.perspectiveModel.id),yield e.showContentView(n),t&&(n.perspective=t),e}))}showPerspective(e,t){return o(this,void 0,void 0,(function*(){const n=this.perspectiveViewsCache.getCachedViewByPerspectiveNameAndContext(e,t),i=this.Glass.currentAppView;if((0,p.arePerspectivesEqual)(n,i))return i.updatePerspectiveContext(t),i;if(n){yield this.showCachedPerspective(n,e,t);const r=n.hasHomeFlag()||t&&t.isHomepage;return this.setHomeFlag(n,r),this.displayPerspective(n,i)}return yield this.showNonCachedPerspective(e,t,i)}))}buildPerspectiveContext(e,t){return o(this,void 0,void 0,(function*(){const n=this.buildNewPerspectiveContext(e,t);if(void 0!==e&&void 0===n.content.pathRef)return{context:n,perspectiveName:e};const i=yield this.getDefaultActionUrlMap(n.content);return{context:function(e,t,n){const i=t;return void 0===e&&(i.isDefaultAction=!0),i.isHomepage=t.isHomepage||n&&n.isHomepage,i.content=n,i}(e,n,i),perspectiveName:void 0===e?i.perspective:e}}))}buildNewPerspectiveContext(e,t){let n=t||{};return n.content=n.content||{},n.content.perspective=e,this.Glass.currentAppView&&this.Glass.currentAppView.context&&this.Glass.currentAppView.context.content&&(n=this.urlHelper.updateContextWithCurrentUIFilters(this.Glass.currentAppView.context.content,n)),n}getDefaultActionUrlMap(e){return o(this,void 0,void 0,(function*(){if(e&&(e.pathRef||e.objRef)){const t=yield this.urlHelper.getObjInfoFromContent(this.Glass,e);if(y.default.extend(!0,t,e),void 0===t.id&&(t.id=t.objRef),t.perspective)return t;const n=yield m.default.getSharedResourceActionController(this.Glass,t.type),i={urlMap:t,mode:b.default.MODES.DEFAULT_ACTION,Glass:this.Glass,glassContext:this.Glass};return this.urlHelper.getUrlMap(n,this.Glass,i)}if(!e||!e.perspective){const t=yield this.Glass.getHomePageObject(),n={perspective:t.perspective};return y.default.extend(!0,n,e,t.content),n.pathRef?this.getDefaultActionUrlMap(n):n}return null}))}handleOpenLoginViewError(){const e=v.default.get("customLoginPerspectiveNotFound"),t=v.default.get("defaultToIBMLoginPage");this.Glass.showErrorMessage(t,e,()=>{const e=window.location.href;e.includes("/",e.length-1)?window.location.href=e+"?factoryMode=true":window.location.href=e+"&factoryMode=true"})}handleOpenPerspectiveError(e){return o(this,void 0,void 0,(function*(){this.logger.error("openAppView",e);const t=e=>{const t=!0===e?"errLoadingViewShowHome":"errLoadingView";this.Glass.showToast(v.default.get(t),{type:"error",preventDuplicates:!1})},n=()=>{const e=v.default.get("errLoadingView"),t=v.default.get("errorLabel");return this.Glass.showErrorMessage(e,t),this.Glass.currentAppView};if(0===this.perspectiveSwitcherRegistry.size()){this.pendingOpenPerspectivePromise=null;try{const e=yield this.openHomePerspective();return t(!0),e}catch(e){n()}}return t(),null}))}handleShowNonCachedPerspectiveError(e,t){let n=e.message,i="Error";throw e.ajaxOptions&&e.ajaxOptions.url?(n="Glass Perspective Service : "+e.ajaxOptions.url,i=v.default.get("error404NotFound")):"BaseError"===e.name?i="Error: "+v.default.get("invalidPerspectiveErrorTitle"):404===e.code&&(i=v.default.get("perspective404ErrorTitle"),n=v.default.get("perspective404ErrorMessage"),t.isHomepage&&(n=v.default.get("perspective404HomeErrorMessage"))),this.logger.error("Perspective Error: Failed to load the requested perspective"),this.Glass.showErrorMessage(n,i),e}openPendingPerspective(){try{return this.pendingOpenPerspectivePromise=Promise.resolve(this.pendingOpenPerspectivePromise).finally(()=>{this.pendingOpenPerspectivePromise=null}),this.pendingOpenPerspectivePromise}catch(e){return this.logger.error("openAppView - previous attempt failed",e),Promise.resolve()}}removeLoginView(){this.perspectivesRegistry.remove("login"),this.loginView.getContentPane().remove(),this.loginView.remove(!0),this.loginView=void 0}updateUserProfileContext(e){return o(this,void 0,void 0,(function*(){try{yield this.Glass.getCoreSvc(".UserProfile").updateContext(e.context)}catch(e){this.logger.error("Perspective Error: Could not get the account info",e),this.Glass.showErrorMessage(v.default.get("unableGetAccountInfo"),v.default.get("accountInfoTitle"))}}))}}t.default=C},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyles=t.disableStylesFromInactivePerspectives=void 0;const s=n(48),o=n(98),a=r(n(6));function l(e){return i(this,void 0,void 0,(function*(){const t=function(e){return e.includes("?")&&(e=e.substring(0,e.indexOf("?"))),e}(e),n=function(e){return document.querySelector(`head style[data-styleid="${e}"], head link[data-styleid="${e}"]`)}(t);n?"all"!==n.getAttribute("media")&&n.setAttribute("media","all"):yield(0,o.loadStylesheet)(a.default.ajax,e,[{name:"data-styleid",type:t},{name:"data-loader",type:"ba-glass"},{name:"type",type:"text/css"},{name:"media",type:"all"}])}))}function c(e,t){const n=t.querySelectorAll('head link[rel="stylesheet"], head style[data-loader="ba-glass"]');for(let t of n){const n=t.getAttribute("data-styleid");n&&!e.includes(n)&&t.setAttribute("media","none")}}t.disableStylesFromInactivePerspectives=c,t.loadStyles=function(e,t){return i(this,void 0,void 0,(function*(){if(e){const n=(0,s.getUrlArgs)(t),i=e.map(e=>(n&&(e+=n),l(e))),r=yield Promise.all(i);return c(e,document),r}return[]}))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadStylesheet=t.updateRelativeUrlsInCssFile=void 0;const r=["data:","//",'url("/',"url('/","url(/"],s=['url("./','url("',"url('./","url('","url(./","url("];function o(e,t){if(!t||!t.includes("/"))return e;try{const n=t.split("/");n.pop();const i=n.join("/"),o=e.match(/url\([^)]+\)/g);o&&o.length>0&&o.filter(e=>{for(let t=0;t<r.length;t+=1)if(e.includes(r[t]))return!1;return!0}).forEach(t=>{for(let n=0;n<s.length;n+=1){const r=s[n];if(t.includes(r)){const n=t.replace(r,`${r.replace("./","")}${i}/`);e=e.replace(t,n);break}}})}catch(e){console.error(e)}return e}t.updateRelativeUrlsInCssFile=o,t.loadStylesheet=function(e,t,n=[]){return i(this,void 0,void 0,(function*(){const i=new Promise((i,r)=>{e(t).then(e=>{const r=o(e,t),s=document.createElement("style");s.innerHTML=r,n.forEach(e=>s.setAttribute(e.name,e.type)),document.getElementsByTagName("head")[0].appendChild(s),i(s)}).catch(r)}),r=new Promise((e,t)=>{setTimeout(t,12e4)});return yield Promise.race([i,r])}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var i=n(11),r=n.n(i),s=n(39),o=n.n(s);class a{static loadSVGIcons(e){e&&e.forEach(e=>{this.setSVGIcons(e)})}static unloadSVGIcons(e){e&&e.forEach(e=>{this.unsetSVGIcons(e)})}static setSVGIcons(e){const t=this.getSVGId(e);document.getElementById(t)||this.loadSVGModule(e).then(e=>{const n=document.createElement("div");n.setAttribute("id",t),n.innerHTML=e;const i=document.getElementById("svgIcons");i||o()(),i.appendChild(n)}).catch(()=>{throw new Error("failed to load svg icon: ".concat(e))})}static unsetSVGIcons(e){const t=this.getSVGId(e),n=document.getElementById(t);n&&n.parentNode&&n.parentNode.removeChild(n)}static loadSVGModule(e){return r.a.loadModule("text!".concat(e,"!strip"))}static getSVGId(e){return e.replace(/[^\w]/g,"_")}}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Immediate="immediate",e.Defer="defer",e.Declare="declare"}(i||(i={})),t.default=i},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(11));t.default=function(e){return i(this,void 0,void 0,(function*(){if(e){const t=e.map(e=>s.default.loadModule(e));yield Promise.all(t)}}))}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=n(8),a=r(n(103));let l=class extends s.default.Component{getPerspectiveView(e){const{glassStore:t,perspectiveRegistry:n}=this.props,i=n.getPerspectiveById(e);return s.default.createElement(a.default,{key:e,perspectiveStore:i.getPerspectiveStore(),glassStore:t},i.getPerspectiveView())}render(){const{glassStore:e}=this.props;return s.default.createElement(s.default.Fragment,null,e.registeredPerspectives.map(e=>this.getPerspectiveView(e)))}};l=i([o.observer],l),t.default=l},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=n(8),a=r(n(2));let l=class extends s.default.Component{getClassNames(){const{perspectiveStore:e,glassStore:t}=this.props;let n="appview";e.perspectiveModel.id!==t.currentPerspective&&(n+=" hidden");const{layout:i}=e.perspectiveModel;return i[a.default.LOOPS]&&i.class&&(n+=" "+i.class),n}render(){const{children:e}=this.props;return s.default.createElement("div",{className:this.getClassNames()},e)}};l=i([o.observer],l),t.default=l},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(105));t.default=class{constructor(e,t){this.glassContext=t,this.perspectivesRegistry=e}create(e){e?(Array.isArray(e)||(e=[e]),e.forEach(e=>{this.perspectivesRegistry.add(e.id,new r.default(e,this.glassContext))})):this.glassContext.getCoreSvc(".Logger").error("Error creating the perspective, perspectiveModels is undefined")}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(0)),s=i(n(106)),o=i(n(113)),a=i(n(132)),l=i(n(54));t.default=class{constructor(e,t){this.perspectiveStore=function(e){return o.default.create({perspectiveModel:e,contextMenuStore:l.default.create()})}(e),this.perspectiveController=function(e,t){return new s.default(e,t)}(this.perspectiveStore,t),this.perspectiveView=function(e,t,n){return r.default.createElement(a.default,{appView:e,glassContext:n,perspectiveStore:t,toolBars:t.perspectiveModel.toolBars,addPluginRenderToQueue:e.addPluginRenderToQueue,onPerspectiveViewMounted:e.renderAllPlugins,onContentContainerMounted:e.setContentContainerMounted,onNoContentViewFound:e.resolveViewRenderPromise,successContentViewRenderCallback:e.successContentViewRenderCallback,failureContentViewRenderCallback:e.failureContentViewRenderCallback,getContentView:e.getCurrentContentView})}(this.perspectiveController,this.perspectiveStore,t),this.registeredPlugins={}}registerPlugin(e,t){this.registeredPlugins[e]=t}getRegisteredPlugin(e){return this.registeredPlugins[e]?this.registeredPlugins[e]:null}getPerspectiveController(){return this.perspectiveController}getPerspectiveStore(){return this.perspectiveStore}getPerspectiveView(){return this.perspectiveView}}},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(6)),c=a(n(3)),u=s(n(12)),d=a(n(17)),h=a(n(44)),p=a(n(23)),g=a(n(107)),f=a(n(108)),m=a(n(51)),v=a(n(7)),b=a(n(26)),y=a(n(16)),C=a(n(109)),_=n(47),w=a(n(111)),S=a(n(53)),P=a(n(112)),M=n(49);t.default=class{constructor(e,t){this.onContentViewReadyToLoad=()=>{try{this.loadContentView()}catch(e){this.glassContext.getCoreSvc(".Logger").error("Error loading Content View",e)}},this.loadContentView=()=>{const{CONTENT_VIEW_LOAD_IN_PROGRESS:e}=S.default;this.perspectiveStore.updateRenderState(e);const t=this._getContextForContentView();return(0,M.createContentView)(t,this.glassContext,this).then(e=>this.postContentViewCreation(t,e)).catch(e=>{const{CONTENT_VIEW_LOAD_FAILURE:t}=S.default;this.perspectiveStore.updateRenderState(t),this.glassContext.getCoreSvc(".Logger").error("Failure showing the content view",e)})},this.addPluginRenderToQueue=e=>{this.pluginsRenderQueue.push(e)},this.renderAllPlugins=()=>(p.default.createPerformanceMark({component:"glass",name:"renderAllPlugins",state:"start"}),Promise.all(this.pluginsRenderQueue).then(e=>{e.forEach(e=>{if(e&&e.pluginId){const{pluginId:t,plugin:n}=e;this.registerPlugin(t,n)}});const{PLUGINS_RENDER_SUCCESS:t}=S.default;this.perspectiveStore.updateRenderState(t),p.default.createPerformanceMark({component:"glass",name:"renderAllPlugins",state:"end"})})),this.setContentContainerMounted=e=>{this.perspectiveStore.setContainerMounted(!0),this.setContentPane(e)},this.successContentViewRenderCallback=()=>{const e=this.getCurrentContentView();e&&(c.default.isFunction(e.on)?(e.on("change:title",this._triggerTitleChange),e.on("change:dirty",this._triggerStateChange),e.on("change:state",this._triggerStateChange)):(e.triggerTitleChange=this._triggerTitleChange,e.triggerStateChange=this._triggerStateChange)),this._triggerTitleChange({value:this.getTitle()}),p.default.createPerformanceMark({component:"glass",name:"renderContentView",state:"end"}),this.perspectiveStore.updateRenderState(S.default.CONTENT_VIEW_RENDER_SUCCESS)},this.failureContentViewRenderCallback=e=>{this.glassContext.getCoreSvc(".Logger").error("ContentView Error","Failed loading content view",e),e&&e.message&&""!==e.message&&this.glassContext.showErrorMessage(e.message,"Error",null,null),this.perspectiveStore.updateRenderState(S.default.CONTENT_VIEW_RENDER_FAILURE)},this.resolveViewRenderPromise=()=>{this.perspectiveStore.updateRenderState(S.default.CONTENT_VIEW_RENDER_SUCCESS)},this.setContextMenuItemsAndPosition=(e,t)=>{const{contextMenuStore:n}=this.perspectiveStore;n&&(n.updatePosition(t),n.updateItems(e),n.showMenu())},this._getContextForContentView=()=>{const e=Object.assign({},this.perspectiveModel.spec)||{};e.content||(e.content=this.defaultContent);const{content:t}=e;return t&&!t.module&&(e.module=this.defaultContent.module),e},this._triggerStateChange=()=>{this.updateRenderState(!0)},this._triggerTitleChange=e=>{this.glassContext.trigger("appView:titleChange",{value:e.value,appView:this})},this.getCurrentContentView=()=>this.currentContentView,this.perspectiveStore=e,this.perspectiveModel=this.perspectiveStore.perspectiveModel,this.perspective=this.perspectiveModel.perspectiveName,this.glassContext=t,this.defaultContent=this.perspectiveModel.spec.content,this._isTransient=!this.defaultContent||!0===this.defaultContent.isTransient,this.pluginsRenderQueue=[],this.registeredPlugins={},this._slideoutController=new f.default({registry:{application:t.slideoutRegistry,appView:new m.default}}),this._url=new b.default,this.isHomepage=!1,u.when(()=>this.perspectiveStore.viewReadyToLoadContentView,this.onContentViewReadyToLoad),this.glassContext.getCoreSvc(".Events").on("deleteAction:done",this._onAssetDeleted,this)}postContentViewCreation(e,t){return this.prependContentView(t),this._updateSlideoutContainer().then(()=>{this._setCurrentContentView(t,e),p.default.createPerformanceMark({component:"glass",name:"renderContentView",state:"start"});const{CONTENT_VIEW_LOAD_SUCCESS:n}=S.default;this.perspectiveStore.updateRenderState(n)})}prependContentView(e){this.$contentViewDomContainer=this.getContentPane(),this.$contentViewDomContainer.prepend(e.$el)}showContextMenu(e){return o(this,void 0,void 0,(function*(){const{contextMenuSettings:t}=this.perspectiveModel;return t?yield(0,C.default)(t,e,this.glassContext):null}))}show(){(0,_.loadStylesAndIcons)(this.perspectiveModel,this.glassContext,!1)}hide(){(0,_.unloadIcons)(this.perspectiveModel,this.glassContext)}deactivate(){return this.glassContext.getCoreSvc(".Events").trigger("deactivate"),this.currentContentView&&this.currentContentView.deactivate&&!this.currentContentView.deactivated?Promise.resolve(this.currentContentView.deactivate()).then(()=>{this.currentContentView.deactivated=!0}):Promise.resolve()}remove(e,t){return!e&&this.shouldShowCloseConfirmationDialog()?h.default.waitForCloseConfirmation(this.glassContext,t).then(()=>this._remove()):this._remove()}_remove(){if(this.deactivate(),this===this.glassContext.currentAppView&&this.glassContext.perspectiveSwitcherRegistry.size()>1){const e=this.glassContext.perspectiveSwitcherRegistry.getPerspectiveByIndex(0),t=e.getContentPane();t&&e._slideoutController.updateRegistryContainer(t)}return Promise.resolve().then(()=>(this.contentViewRemoved=!0,this.currentContentView&&c.default.isFunction(this.currentContentView.remove)?this.currentContentView.remove():Promise.resolve())).catch(e=>{this.glassContext.getCoreSvc(".Logger").error("An error occurred while removing the content view",e)}).then(this._postRemove.bind(this))}_postRemove(){this.setContentPane(void 0),this.glassContext.getCoreSvc(".Events").off("deleteAction:done",this._onAssetDeleted,this)}isDirty(){return this.currentContentView&&c.default.isFunction(this.currentContentView.isDirty)&&this.currentContentView.isDirty()}shouldShowCloseConfirmationDialog(){return!!this.isDirty()&&(!this.currentContentView||!c.default.isFunction(this.currentContentView.shouldShowCloseConfirmationDialog)||this.currentContentView.shouldShowCloseConfirmationDialog())}getTitle(e){let t=this.currentContentView&&c.default.isFunction(this.currentContentView.getTitle)?this.currentContentView.getTitle():this.perspectiveModel.perspectiveName;return void 0===t&&(t=v.default.get("unavailable")),!e&&this.isDirty()&&(t="* "+t),t}getIcon(){return this.currentContentView&&c.default.isFunction(this.currentContentView.getIcon)&&this.currentContentView.getIcon()}getIconTooltip(){return this.currentContentView&&c.default.isFunction(this.currentContentView.getIconTooltip)&&this.currentContentView.getIconTooltip()}getIconColor(){let e;try{e=this.currentContentView&&c.default.isFunction(this.currentContentView.getIconColor)&&this.currentContentView.getIconColor()}catch(e){this.glassContext.getCoreSvc(".Logger").warn("issue getting icon color from current content view",e)}return e}getContentPane(){return this.$contentPane}setContentPane(e){this.$contentPane=e}_updateSlideoutContainer(){return new Promise(e=>{const t=this.getContentPane();if(t)try{this._slideoutController.updateRegistryContainer(t),e()}catch(n){this.glassContext.getCoreSvc(".Logger").warn("Failed to update slideout container. Slideouts stuck open in previous view. Closing and trying again...",n),this.glassContext.closeOpenWidgets().then(()=>{this._slideoutController.updateRegistryContainer(t),e()}).catch(()=>{this._slideoutController.updateRegistryContainer(t),e()})}else e()})}showContentView(e){return this._updateSlideoutContainer().then(()=>{(e=e||{}).content||(e.content=this.defaultContent);const{content:t}=e;return t&&!t.module&&(t.module=this.defaultContent.module),this.currentContentView?this._setContentView(e):Promise.resolve()})}_setContentView(e){return this.currentContentView.activate&&this.currentContentView.deactivated?this.currentContentView.activate(e.content).then(()=>this._setContentViewHelper(e)):Promise.resolve(this._setContentViewHelper(e))}_setContentViewHelper(e){return this._setCurrentContentView(this.currentContentView,e),this.currentContentView}onViewRendered(){return new Promise((e,t)=>{u.when(()=>this.perspectiveStore.contentViewRendered,()=>e(this)),u.when(()=>this.perspectiveStore.contentViewRenderFailed,()=>t())})}registerPlugin(e,t){c.default.isString(e)&&(this.registeredPlugins[e]=t)}performAction(e,t){const n=this.perspectiveModel.actions;return n?Promise.resolve(w.default.performAction(e,t,n)):Promise.reject(new d.default("Internal error: unable to find action for "+e))}canExecuteAction(e,t){const n=this.perspectiveModel.actions;return n?w.default.canExecuteAction(e,t,n):Promise.reject(new d.default("Internal error: unable to find action for "+e))}openSlideout(e){return this.glassContext.addToOptions(e),this._openSlideout("appView",e)}getOpenSlideouts(e){let t=this.glassContext.slideoutRegistry.getOpenSlideouts();return e||(t=t.concat(this._slideoutController.registry.appView.getOpenSlideouts())),t}closeAllOpenedSlideouts(e){return this._slideoutController.closeAllOpenedSlideouts(e)}_openSlideout(e,t){let n;return n=t.parent&&!Object.prototype.isPrototypeOf.call(g.default,t)?t.parent.addChild(t):this._slideoutController.openSlideout(e,t),n}_setCurrentContentView(e,t){this.context=t,this.content=t.content,this.currentContentView=e,this.updateRenderState(!1),this.currentContentView.deactivated=!1,e.show()}setAsHome(e){return Promise.resolve().then(()=>{const t=this.getType();return c.default.isUndefined(t)?this._setAsHome({perspective:this.perspectiveModel.perspectiveName,id:this.context&&this.context.id}):y.default.getSharedResourceActionController(this.glassContext,t).then(n=>{const i={urlMap:{objRef:this.content?this.content.objRef:void 0,type:t},mode:b.default.MODES.CURRENT};return this.content.mode&&(i.urlMap.mode=this.content.mode),c.default.extend(i,e),this._url.getUrlMap(n,this.glassContext,i).then(this._setAsHome.bind(this))})})}setHomeFlag(e){this.context.isHomepage=!0===e}hasHomeFlag(){return!0===this.context.isHomepage}_setAsHome(e){const t=this._url.getContextFromUrlMap(e),n={homePage:JSON.stringify(t)};return this.glassContext.getCoreSvc(".UserProfile").savePreferences(n).then(this.setHomeFlag.bind(this,!0))}getType(){const e=this.currentContentView;let t;return t=!c.default.isUndefined(e)&&c.default.isFunction(e.getType)?e.getType():P.default[this.perspective],t}getContent(e){let t;const n=this.currentContentView;return!c.default.isUndefined(n)&&c.default.isFunction(n.getContent)&&(t=n.getContent(e)),t}_updateHistory(e,t,n,i){if(!this.context.content.options||!this.context.content.options.ignoreInWindowHistory){e.name=e.perspective;try{!0===i||this===this.glassContext.previousAppView?window.history.replaceState(e,t,n):window.history.pushState(e,t,n)}catch(e){}}}updateRenderState(e){const t=this._getContext(),n=this.getTitle();if(this.glassContext.trackHistory&&!this.glassContext.windowPoppingState&&"login"!==this.perspective&&t.content){const i={mode:"bookmark"},r=this._getContext(i),s=c.default.omit(r,"content");Object.assign(s,this.content);const o=Object.assign(this._url.getPublicMap({urlMap:s}),r.content);delete o.module;const a=this._url.getUrl({urlMap:o},this.glassContext);this.glassContext.previousAppView&&"login"!==this.glassContext.previousAppView.perspective?this._updateHistory(t,n,a,e):this._updateHistory(t,n,a,!0)}this._triggerTitleChange({value:n})}_getContext(e){const t={perspective:this.perspective};if(this.viewId=this.perspectiveModel.modelId,this.viewId&&(t.id=this.viewId),this.currentContentView){const n=this.getContent(e)||this.content;n&&(t.content=n)}return t}cleanupSlideoutController(){this._slideoutController.cleanupSlideoutRegistry()}getCurrentPerspective(){return this.perspective}setFocus(){!c.default.isUndefined(this.currentContentView)&&c.default.isFunction(this.currentContentView.setFocus)&&this.currentContentView.setFocus()}updatePerspectiveContext(e){!c.default.isUndefined(this.currentContentView)&&c.default.isFunction(this.currentContentView.updatePerspectiveContext)&&this.currentContentView.updatePerspectiveContext(e)}$(e){return(0,l.default)(".appview:not(.hidden)").find(e)}isTransient(){return this._isTransient}isPrefetchDisabled(){let e=!1;return this.perspectiveModel&&(e=this.perspectiveModel.disableGlassPrefetch),e}_onAssetDeleted(e){const t=e.find(({id:e})=>e===this.context.id||!(!this.context.content||this.context.content.id!==e));if(t){this.glassContext.getCoreSvc(".Logger").info("Closing perspective associated with deleted asset: "+t.id);const e=!0;this.glassContext.closeAppView(this.perspective,t.id,null,e)}}}},function(e,t){e.exports=j},function(e,t){e.exports=k},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuErrors=void 0;const s=r(n(110)),o=r(n(52)),a=r(n(3)),l=r(n(6));var c;function u(e,t,n){return{msg:e,menuId:t,menuSpecs:n}}function d(e,t,n,r){return i(this,void 0,void 0,(function*(){try{const n=yield e.render(),i=(0,l.default)(n);(0,l.default)("body").append(i),function(e,t){const n=e.pageX,i=e.pageY,r=t.outerWidth()+3,s=t.outerHeight()+3,o=window.innerWidth,a=window.innerHeight;o-n<r?t.css("left",o-r):t.css("left",n),a-i<s?t.css("top",a-s):t.css("top",i)}(t,i)}catch(e){const t=u(c.FAILURE_RENDERING_MENU,n,r);throw t.causedBy=e,t}}))}!function(e){e.INVALID_MENU_ID="Menu id is not a valid string",e.NOT_FOUND_MENU_ID="The menu was not found with the provided id",e.FAILURE_RENDERING_MENU="The menu failed to render"}(c=t.ContextMenuErrors||(t.ContextMenuErrors={})),t.default=function(e,t,n){return i(this,void 0,void 0,(function*(){o.default.hideOpenMenus(),function(e,t){if(!e||!a.default.isString(e.menuId))throw u(c.INVALID_MENU_ID,e&&e.menuId,t);if(!a.default.isArray(t))throw u(c.NOT_FOUND_MENU_ID,e.menuId,t)}(t,e);const i=function(e,t){const n=e.reduce((e,t)=>(t.id&&(e[t.id]=t),e),{});if(!n[t])throw u(c.NOT_FOUND_MENU_ID,t,e);return n}(e,t.menuId),r=new s.default({itemSpec:i[t.menuId],activeObject:t.activeObject,showIcons:t.showIcons,glassContext:n,options:t.options});yield d(r,t.position,t.menuId,e)}))}},function(e,t){e.exports=U},function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),s=n(17),o=n.n(s),a=n(11),l=n.n(a);const c={};function u(e,t,n,i,r){const s=n+1;return s>=e.length?"canExecute"!==r||!0!==i&&!1!==i?Promise.reject(i):Promise.resolve(i):h(e,t,s,r)}function d(e,t,n,i,s){return"defaultAction"===s?function(e,t,n,i){if(r.a.isFunction(e.doAction))return Promise.resolve(e.doAction(n)).catch(e=>u(t,n,i,e,"defaultAction"));const s=new o.a("doAction is not defined on the controller");return u(t,n,i,s,"defaultAction")}(e,t,n,i):"canExecute"===s?Promise.resolve(!0):Promise.resolve()}function h(e,t,n,i){return function(e,t){const n=e[t].controller;return c[n]?Promise.resolve(c[n]):function(e){return l.a.instantiate(e)}(n).then(e=>(c[n]=e,e))}(e,n).then(s=>{if(r.a.isFunction(s.canExecute)){if(!0===s.canExecute(t))return d(s,e,t,n,i);let r;return"defaultAction"===i?r=new o.a("Action controller can not execute this object."):"canExecute"===i&&(r=!1),u(e,t,n,r,i)}return d(s,e,t,n,i)}).catch(r=>u(e,t,n,r,i))}function p(e,t,n,i){return i?function(e,t,n,i){const r=i.find(t=>t.id===e);return r?function(e,t,n,i){return e&&e.length>0?h(e,t,0,i):Promise.reject(new o.a("Internal error: no controller defined for ".concat(n)))}(r.items,t,e,n):Promise.reject(new o.a("Internal error: unable to find action for ".concat(e)))}(e,t,n,i):Promise.reject(new o.a("No action controllers defined."))}const g={performAction:function(e,t,n){return p(e,t,"defaultAction",n)},canExecuteAction:function(e,t,n){return p(e,t,"canExecute",n)}};t.default=g},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.dashboard="exploration",e.authoring="report",e.classicviewer="interactiveReport",e.datasets="dataSet2",e.modeller="module",e.savedoutput="output"}(i||(i={})),t.default=i},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),s=i(n(3)),o=i(n(53)),a=i(n(45)),l=i(n(54)),{PLUGINS_RENDER_IN_PROGRESS:c,PLUGINS_RENDER_SUCCESS:u,CONTENT_VIEW_LOAD_SUCCESS:d,CONTENT_VIEW_LOAD_FAILURE:h,CONTENT_VIEW_RENDER_SUCCESS:p,CONTENT_VIEW_RENDER_FAILURE:g}=o.default,f=r.types.model({containerMounted:r.types.optional(r.types.boolean,!1),perspectiveModel:a.default,renderState:r.types.optional(r.types.enumeration("RenderState",s.default.values(o.default)),c),visible:r.types.optional(r.types.boolean,!1),contextMenuStore:l.default}).views(e=>({get viewReadyToLoadContentView(){return e.renderState===u&&e.containerMounted},get contentViewLoadedSuccessfully(){return e.renderState===d||e.renderState===p},get contentViewLoadFailed(){return e.renderState===h},get contentViewRendered(){return e.renderState===p},get contentViewRenderFailed(){return e.renderState===g},get loaded(){return e.renderState===p||e.renderState===h||e.renderState===g}})).actions(e=>({setVisibility(t){e.visible=t},updateRenderState(t){e.renderState=t},setContainerMounted(t){e.containerMounted=t}}));t.default=f},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var i=n(0),r=n(1),s=n.n(r);class o extends i.Component{componentDidMount(){const{htmlElement:e,containerRef:t}=this.props;t&&e&&e.parentNode!==t&&t.appendChild(e)}render(){return null}}o.propTypes={htmlElement:s.a.object.isRequired,containerRef:s.a.instanceOf(Element).isRequired}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=n(5),a=n(8),l=r(n(3));let c=class extends s.default.Component{render(){const{store:e,className:t}=this.props,{disabled:n,iconId:i,label:r,visible:a}=e,c=t+(n?" disabled":" enabled");return a&&s.default.createElement("div",{className:c},i&&s.default.createElement(o.SVGIcon,{className:"svgIcon",iconId:i,size:"normal",verticalAlign:"middle"}),l.default.unescape(r))}};c=i([a.observer],c),t.default=c},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(3)),o=r(n(0)),a=n(8),l=n(5),c=n(117),u=n(15),d=r(n(7));let h=class extends o.default.Component{constructor(e){super(e),this.handleMenuOpen=()=>{const e=document.querySelector("ul.popover");e&&e.addEventListener("click",e=>{null===e.target.getAttribute("walkme-data-id")&&this.closeMenuOnMenuContainerClick()})},this.closeMenuOnMenuContainerClick=()=>{document.dispatchEvent(new Event("click"))},this.onMenuClose=()=>{this.buttonRef.current.blur()},this.handleMenuItemClickEvent=e=>{this.props.handleMenuItemClick(e)},this.createMenuButton=(e,t,n,i,r,s)=>o.default.createElement(o.default.Fragment,null,r&&o.default.createElement(l.TruncatedText,{value:r,location:"end",alwaysShowTooltip:!1,style:{pointerEvents:"none"}}),(0,c.createPrimaryButtonIcon)(e,t,n,i,s),!this.props.store.hasSecondaryMenu&&o.default.createElement("span",{className:"bx--assistive-text"}," ",i)),this.renderOverflowMenuItem=(e,t)=>"divider"!=e.type&&o.default.createElement(u.OverflowMenuItem,{className:0===t?"defaultFocusMenuItem "+e.id:"menuItem "+e.id,"walkme-data-id":e.id,closeMenu:this.closeMenuOnMenuContainerClick,"data-item":e.id,onClick:()=>{this.handleMenuItemClickEvent(e)},wrapperClassName:"divider"===e.type?`commonMenuItem ${e.id} ${e.type}`:"commonMenuItem "+e.id,hasDivider:t>0&&"divider"===this.state.contentWithIcons[t-1].type,itemText:o.default.createElement("a",{title:e.label,"data-item":e.id,"walkme-data-id":e.id,className:"commonMenuLink",role:"link",ref:t=>{t&&t.parentNode&&s.default.isFunction(e.onRender)&&e.onRender($(t.parentNode))}},e.icon&&(0,c.createIcon)(e.icon.id,"small","",e.label),o.default.createElement("span",{title:e.label,"walkme-data-id":e.id,"data-item":e.id},e.label))}),this.renderEmptyMenu=()=>{const e={id:"emptyItem",className:"emptyItem",label:d.default.get("getEmptyMenuItemLabel")};return o.default.createElement(u.OverflowMenuItem,{className:e.className,"walkme-data-id":"emptyMenuItem.id",closeMenu:this.closeMenuOnMenuContainerClick,"data-item":e.id,wrapperClassName:"commonMenuItem",itemText:o.default.createElement("a",{title:e.label,"walkme-data-id":e.id,"data-item":e.id,className:"commonMenuLink "+e.className,role:"link"},o.default.createElement("span",{title:e.label,"walkme-data-id":e.id,"data-item":e.id},e.label))})},this.renderOverflowMenu=()=>this.state.contentWithIcons&&this.state.contentWithIcons.length>0?this.state.contentWithIcons.map((e,t)=>this.renderOverflowMenuItem(e,t)):this.props.menuItemsUpdated&&this.renderEmptyMenu(),this.state={contentWithIcons:this.props.menuItems,menuButtonText:this.props.store.menuButtonTitle||this.props.store.label},this.handleMenuOpen=this.handleMenuOpen.bind(this),this.closeMenuOnMenuContainerClick=this.closeMenuOnMenuContainerClick.bind(this),this.buttonRef=o.default.createRef()}componentDidMount(){this.props.setButtonRef(this.buttonRef)}componentDidUpdate(){this.props.setButtonRef(this.buttonRef)}render(){const{className:e,id:t,handleMenuButtonClickDefault:n,handleMenuButtonClick:i,store:r,groupId:a,tooltipAlignment:l,backgroundClass:d}=this.props,{label:h,iconId:p,hasSecondaryMenu:g,defaultMenuActionItem:f,secondaryMenuButtonPushed:m,disabled:v}=r,b="bx--tooltip__trigger bx--tooltip--a11y bx--tooltip--bottom bx--tooltip--align-".concat(l),y=this.createMenuButton(p,null,"small",this.state.menuButtonText,h,d),C=o.default.createElement(o.default.Fragment,null,(0,c.createSecondaryButtonIcon)(p,null,this.state.menuButtonText),o.default.createElement("span",{className:"bx--assistive-text"},this.state.menuButtonText)),_=g?C:y;return o.default.createElement(o.default.Fragment,null,g&&o.default.createElement(u.Button,{className:`${null!=e?e:""} menu defaultButton ${v&&"is-disabled"}`,renderIcon:()=>y,id:t+".default",hasIconOnly:!0,onClick:n,iconDescription:f.title||f.label,checked:m,key:s.default.uniqueId("secondary_"+e),disabled:v,variant:"icon",type:"secondaryPushButton"}),o.default.createElement(u.OverflowMenu,Object.assign({className:` ${b} secondaryMenuPushButton ${e||"button menu comboBox"} ${v&&"is-disabled"}`,onOpen:this.handleMenuOpen,onClose:this.onMenuClose,onClick:i,ariaLabel:this.state.menuButtonText,selectorPrimaryFocus:".defaultFocusMenuItem",flipped:this.props.isPositionFlipped,disabled:v,menuOptionsClass:`popover glass-menu ${a} ${g?"button menu comboBox":e} reactMenu commonMenuItems`},{ref:this.buttonRef,id:g?t+".menu":t,iconDescription:this.state.menuButtonText,hasIconOnly:!0,renderIcon:()=>_}),this.renderOverflowMenu()))}};h=i([a.observer],h),t.default=h},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createSecondaryButtonIcon=t.createPrimaryButtonIcon=t.createIcon=void 0;const r=i(n(0)),s=n(5);function o(e,t,n,i){return function(e){return-1!==e.search(/\.(jpeg|jpg|png|gif|svg)$/)}(e)?r.default.createElement("img",{alt:"menuIcon",className:n||"menuPluginItemIcon",src:e}):r.default.createElement(s.SVGIcon,{className:n||"svgIcon",iconId:e||"",size:t,alt:i,verticalAlign:"middle",style:{pointerEvents:"none"}})}t.createIcon=o,t.createPrimaryButtonIcon=function(e,t,n,i,s){return e?s?r.default.createElement("div",{className:s},o(e,n,t,i)):o(e,n,t,i):null},t.createSecondaryButtonIcon=function(e,t,n){return e?o("common-dropdown","small",t,n):null}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),s=i(n(13)),o=r.types.model({defaultMenuActionItem:r.types.frozen({}),labelOnly:r.types.optional(r.types.boolean,!1),menuItems:r.types.optional(r.types.array(r.types.frozen()),[]),menuVisible:r.types.optional(r.types.boolean,!1),menuItemsUpdated:r.types.optional(r.types.boolean,!1),menuButtonTitle:r.types.maybe(r.types.string),menuButtonRightIcon:r.types.maybe(r.types.string),primaryMenuButtonPushed:r.types.optional(r.types.boolean,!1),secondaryMenuButtonPushed:r.types.optional(r.types.boolean,!1)}).views(e=>({menuItemById:t=>e.menuItems.find(e=>e.id===t),get hasSecondaryMenu(){return Object.keys(e.defaultMenuActionItem).length>0}})).actions(e=>({addMenuItem(t){e.menuItems.push(t)},setMenuItems(t){e.menuItems.replace(t)},setDefaultMenuActionItem(t){e.defaultMenuActionItem=t},setMenuVisible(t){t||(e.primaryMenuButtonPushed=!1,e.secondaryMenuButtonPushed=!1),e.menuVisible=t},setMenuItemsUpdated(t){e.menuItemsUpdated=t},toggleMenuVisibility(){e.menuVisible&&(e.primaryMenuButtonPushed=!1,e.secondaryMenuButtonPushed=!1),e.menuVisible=!e.menuVisible},updateMenuButtonTitle(t){e.menuButtonTitle=t},setMenuButtonRightIcon(t){e.menuButtonRightIcon=t},setPrimaryMenuButtonPushed(t){t&&e.secondaryMenuButtonPushed&&(e.secondaryMenuButtonPushed=!1),e.primaryMenuButtonPushed=t},setSecondaryMenuButtonPushed(t){t&&e.primaryMenuButtonPushed&&(e.primaryMenuButtonPushed=!1),e.secondaryMenuButtonPushed=t}})),a=r.types.compose(o,s.default);t.default=a},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuItemsToDisplay=t.formatMenuItems=t.getDefaultMenuActionItem=void 0;const s=r(n(3)),o=r(n(55));function a(e){return e.map(e=>e.value?e:Object.assign(Object.assign({},e),{icon:e.icon?{id:e.icon}:null,value:e.id}))}t.getDefaultMenuActionItem=function(e){if(s.default.isString(e.defaultAction)){const n=function(e){return e.items&&e.items.find(t=>t.id===e.defaultAction)}(e),i=e.items&&(t=n,e.items.findIndex(e=>e===t));return n&&Object.assign(Object.assign({},n),{index:i})}var t;return null},t.formatMenuItems=a,t.getMenuItemsToDisplay=function(e,t,n,r,l){return i(this,void 0,void 0,(function*(){const i=r||(yield(0,o.default)(t,n,e));l(i),yield i.onOpen(e),s.default.isFunction(i.onRender)&&(yield i.onRender(e));const c=e.target.plugin.itemSpec.items;i.buildItemMap(c),e.target.plugin.itemSpec.items&&e.target.plugin.itemSpec.items.map(e=>{e.options&&(e.options=JSON.parse(JSON.stringify(e.options)))});const u=function(e,t,n){let i=0;return e.reduce((e,r,o)=>{let a={glassContext:t.glassContext,itemSpec:t.target.plugin.itemSpec,target:{plugin:t.target.plugin,items:t.target.items,storeMenuItems:t.target.menuItems,itemId:r.id,specItemIndex:o,index:0}};if(n.isItemVisible(a)){a.target.index=i++;const t=function(e,t,n){let i=t.target.storeMenuItems&&t.target.storeMenuItems.length>0&&t.target.storeMenuItems.find(t=>t.id===e.id);if(i)return i;const r=Object.assign(Object.assign({},e),{name:e.id,onSelect:e=>{t.target.activeObject=e,n.onSelectItem.call(n,t)},onRemove:e=>(t.target.activeObject=e,n.onRemoveItem.call(n,t)),onRender:e=>{t.target.activeObject=e,n.onRenderItem.call(n,t)}}),o=n.getLabel(t);return s.default.isUndefined(o)||(r.label=o),n.isItemSelected(t)&&(r.selected=!0),r}(r,a,n);t&&e.push(t)}return e},[])}(c,e,i);return u.length>0?a(u):u}))}},function(e,t){e.exports=V},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultMenuButtonClick=t.menuButtonClick=t.menuItemClick=void 0;const s=r(n(3)),o=r(n(55));function a(e,t,n){e.getCoreSvc(".Logger").error(t,n)}t.menuItemClick=function(e,t,n){try{!function(e){e&&s.default.isFunction(e.onSelect)&&e.onSelect()}(e)}catch(e){a(n,"Failed to execute menu item on select callback",e)}},t.menuButtonClick=function(e,t){return i(this,void 0,void 0,(function*(){yield e(),t.toggleMenuVisibility()}))},t.defaultMenuButtonClick=function(e,t,n,r){return i(this,void 0,void 0,(function*(){const{actionControllers:i,controllerConfig:l,id:c}=e,u={glassContext:n,target:{plugin:r,itemId:c}};try{!function(e,t,n,i){const r=function(e,t){const{featureId:n}=t.defaultMenuActionItem;return e.getControllerMap()[n]}(e,t);if(r&&s.default.isFunction(r.onSelectItem)){const{id:e,index:s}=t.defaultMenuActionItem,o={glassContext:n,target:{plugin:i,itemId:e,specItemIndex:s,index:0}};r.onSelectItem.call(r,o)}}(yield(0,o.default)(i,l,u),t,n,r)}catch(e){a(n,"Failed to execute menu button on select callback",e)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.perspectives={},this.glassStore=e}add(e,t){this.perspectives[e]=t,this.glassStore.registerPerspective(e)}remove(e){this.glassStore.deregisterPerspective(e),delete this.perspectives[e]}getPerspectiveById(e){return this.perspectives[e]}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(10));function s(e,t){let n=e||"";return t&&t.content&&t.content.id?n+="|"+t.content.id:t&&t.id&&(n+="|"+t.id),n}class o extends r.default{constructor(e){super(e),this.cache={}}get perspectiveViewsCache(){return this.cache}cacheView(e,t,n){if(this.Glass.cacheAppViews&&"login"!==e){const i=s(e,t);n.cacheKey=i,this.cache[i]=n}}clearCache(){this.cache={}}getCacheKeys(){return Object.keys(this.cache)}getCachedPerspectives(){return Object.values(this.cache)}getCachedView(e){let t=this.cache[e];if(e&&!t&&0===e.split("|",1)[0].length){const n=e.slice(e.indexOf("|")+1);if(n.length>0){const e=this.getCacheKeys().filter(e=>e.endsWith("|"+n));1===e.length?t=this.cache[e[0]]:e.length>1&&this.logger.warn("Unable to retrieve cached view by id. Duplicate perspectives found for id: "+n)}}return t}getCachedViewByPerspectiveNameAndContext(e,t){return this.getCachedView(s(e,t))}getDirtyCachedViews(){const e=[];return this.getCacheKeys().forEach(t=>{const n=this.getCachedView(t);n.shouldShowCloseConfirmationDialog()&&e.push(n)}),e}removeCachedView(e){this.getCachedView(e)&&delete this.cache[e]}updateCache(e){const t=s(e.perspective,e.context);if(e.context){const n=e.context.id,i=e.context?e.context.id:void 0,r=i||n;let s,o,a={};e.contentViewRemoved||(s=e.getContent(e.context.content),s&&(o=s.id?s.id:i,e.context.content=s,e.content=s,o!==r&&(e.id=o),delete this.cache[t],a={id:o},this.cacheView(e.perspective,a,e)))}}}t.default=o},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(10));class s extends r.default{constructor(e){super(e),this.registry=[]}addPerspective(e){e&&"login"!==e.perspective&&!this.registry.includes(e)&&this.registry.push(e)}clearAllPerspectiveHomeFlags(){this.registry.forEach(e=>{e.setHomeFlag(!1)})}containsPerspective(e){return this.registry.includes(e)}getIndexOfPerspective(e){return this.registry.indexOf(e)}getPerspectiveByIndex(e){return this.registry[e]}removePerspectiveAtIndex(e){this.registry.splice(e,1)}removePerspective(e){let t=this.getIndexOfPerspective(e);-1===t?t=0:this.registry.splice(t,1)}size(){return this.registry.length}}t.default=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10)),o=r(n(50)),a=r(n(34));class l extends s.default{findCollection(e){return i(this,void 0,void 0,(function*(){const t=yield this.getPerspectiveModel(),{collectionContainers:n}=t;if(n){const t=n.find(t=>t.id===e);if(t)return t.items?t.items:t.toolItems?t.toolItems:t.items}return null}))}findToolbarItems(e){return i(this,void 0,void 0,(function*(){const t=yield this.getPerspectiveModel(),{toolBars:n}=t,i=n.find(t=>t.id===e);if(i){const e=[];return i.toolItemGroups.forEach(t=>{t.toolItems.forEach(t=>e.push(t))}),e}return null}))}findToolbarGroupItems(e){return i(this,void 0,void 0,(function*(){const t=yield this.getPerspectiveModel(),{toolBars:n}=t;let i=null;return n.forEach(t=>{t.toolItemGroups.forEach(t=>{t.id===e&&(i=t.toolItems)})}),i}))}findContextMenuItems(e){return i(this,void 0,void 0,(function*(){const t=yield this.getPerspectiveModel(),{contextMenus:n}=t;return n.find(t=>t.id===e)||null}))}queryPerspective(e,t){return i(this,void 0,void 0,(function*(){const n=(yield this.getPerspectiveModel())[e];return Array.isArray(n)&&t?n.filter(e=>Object.keys(t).every(n=>e[n]===t[n])).map(e=>(0,a.default)(e)):n||[]}))}isCollectionContainerAvailable(e){if(this.Glass.currentAppView){const t=this.Glass.currentAppView.perspectiveModel.spec;if(t.collectionContainers&&t.collectionContainers.find(t=>t.id===e))return!0}return!1}findElement(e){if("string"==typeof e&&this.Glass.currentAppView){const t=document.querySelector(".appview.paneColumn:not(.hidden)");if(t)return t.querySelector("#"+e)}return null}findPlugin(e){return"string"==typeof e&&this.Glass.currentAppView?this.Glass.currentAppView.registeredPlugins[e]:null}declarePerspectiveServices(e){return i(this,void 0,void 0,(function*(){if(e&&e.services)try{yield(0,o.default)(this.Glass,e.services)}catch(e){this.logger.error("Failed to load perspective services",e)}}))}getPerspectiveModel(){return i(this,void 0,void 0,(function*(){if(this.Glass.currentAppView&&"login"!==this.Glass.currentAppView.perspective)return this.Glass.currentAppView.perspectiveModel.spec;const e=this.Glass.getCoreSvc(".Perspective"),t=yield e.getModel("generic_iframe");return yield this.declarePerspectiveServices(t),t}))}}t.default=l},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(11)),o=()=>s.default.loadModule("baglass/app/plugins/GlassMenu");t.default=class{constructor(e){this.glassContext=e}handleMenuAction(e,t,n,r){return i(this,void 0,void 0,(function*(){const i=new(yield o())({itemSpec:n,glassContext:this.glassContext}),s=(yield i.getController()).getControllerMap()[e];if(s&&s.onSelectItem){const e=n.items.findIndex(e=>e.id===t);s.onSelectItem.call(s,{glassContext:this.glassContext,target:{plugin:i,itemId:t,specItemIndex:e,activeObject:r,index:0}})}}))}getVisibleItems(e,t){return i(this,void 0,void 0,(function*(){const n=new(yield o())({itemSpec:e,glassContext:this.glassContext}),i=yield n.getController();i.buildItemMap(e.items);const r=[];return e.items.forEach((e,n)=>{i.isItemVisible({glassContext:this.glassContext,target:{plugin:this,itemId:e.id,specItemIndex:n,activeObject:t}})&&r.push(e)}),r}))}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(10)),o=r(n(51));class a extends s.default{constructor(e){super(e),this.slideoutRegistry=new o.default}showSlideOut(e){let t;return this.Glass.addToOptions(e),this.Glass.currentAppView&&(t=this.Glass.currentAppView._openSlideout("application",e)),t}hideSlideOut(e){return i(this,void 0,void 0,(function*(){return this.Glass.currentAppView?yield this.Glass.currentAppView.closeAllOpenedSlideouts(e):null}))}}t.default=a},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(10)),s=i(n(16));var o;!function(e){e.THEME_PATH="v1/plugins/themes/current/css/palette.css",e.BASE_URL="http://ibm.com/"}(o||(o={}));class a extends r.default{set defaultThemePath(e){this.themePath=e}reloadTheme(){const e=(new Date).getTime();!function(e){const t=document.querySelector("head").getElementsByClassName("themeressource");Array.from(t).forEach(t=>{const n=new URL(t.href);n.searchParams.set("v",String(e)),t.href=n.href})}(String(e)),this.reloadPalette(String(e))}reloadPalette(e){this.theme&&this.theme.remove();const t=document.createElement("link");t.type="text/css",t.rel="stylesheet";const n=new URL(this.themePath||o.THEME_PATH,o.BASE_URL);n.searchParams.set("v",String(e)),s.default.isFactoryMode()&&n.searchParams.set("factoryMode","true");const i=n.href.split(o.BASE_URL)[1];t.href=i,document.head.appendChild(t)}}t.default=a},function(e,t){e.exports=F},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.idToastContainerMountpoint=void 0;const r=i(n(10)),s=i(n(0)),o=i(n(20)),a=i(n(131));t.idToastContainerMountpoint="glass-toastContainer-mountpoint";class l extends r.default{constructor(e){super(e),this.mountComponent()}mountComponent(){const e=document.createElement("div");e.setAttribute("id",t.idToastContainerMountpoint),o.default.render(s.default.createElement(a.default,{store:this.Glass.getCoreSvc(".Toast").getStore(),glassContext:this.Glass}),document.body.appendChild(e))}showToast(e,t){this.Glass.getCoreSvc(".Toast").addToast(e,t)}removeAllToastMessages(){this.Glass.getCoreSvc(".Toast").removeAllToasts()}clearToastContainer(){const e=document.getElementsByClassName("ba-common-globaltoastcontainer");for(let t=0;t<e.length;t+=1)if(e[t].children.length>0){this.removeAllToastMessages();break}}}t.default=l},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(0)),o=n(5),a=n(15),l=n(8),c=n(12),u=r(n(30)),d=r(n(6));let h=class extends s.default.Component{constructor(){super(...arguments),this.addOptions=e=>{for(let t=0;e&&t<e.length;t+=1){const n=e[t];n.btnLabel&&"string"==typeof n.btnLabel&&n.btnLabel.length>0?(n.children=this.bindNodes(n),n.onClose=this.bindOnClose(n.key),delete n.contentString):n.onClose=this.bindOnClose(n.key)}return e},this.customButtonHandler=e=>t=>this.bindOnClickCustomButton(t,e),this.bindOnClickCustomButton=(e,t)=>{const{glassContext:n}=this.props;e&&"keydown"===e.type&&(e.keyCode||e.which)!==u.default.ENTER||n.getCoreSvc(".Toast").removeToastById(t,!0)}}componentDidMount(){(0,d.default)(".glass-global-toast-container").on("click",e=>{e.preventDefault()})}componentWillUnmount(){(0,d.default)(".glass-global-toast-container").off("click")}bindOnClose(e){const{glassContext:t}=this.props;return()=>{t.getCoreSvc(".Toast").removeToastById(e)}}bindNodes(e){return s.default.createElement("div",{className:"ba-glass-custom-toast"},s.default.createElement("div",{className:"ba-glass-custom-toast-message"},e.contentString),s.default.createElement("div",{className:"ba-glass-custom-toast-buttons"},s.default.createElement("div",{className:"spacer"}),s.default.createElement(a.Button,{className:"ba-glass-custom-toast-button",label:e.btnLabel,title:e.btnLabel,"aria-label":e.btnLabel,tabIndex:0,variant:"solid",intent:"primary",onClick:this.customButtonHandler(e.key),onKeyDown:this.customButtonHandler(e.key)},e.btnLabel)))}render(){const{store:e}=this.props;return s.default.createElement(o.GlobalToastContainer,{className:"glass-global-toast-container",position:"upperRight",toasts:this.addOptions((0,c.toJS)(e?e.toasts:[])),xOffset:8,yOffset:96})}};h=i([l.observer],h),t.default=h},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=n(8),l=n(20),c=n.n(l),u=n(5),d=n(3),h=n.n(d),p=n(28),g=n.n(p);class f extends i.Component{constructor(...e){super(...e),this.wrappedRender=()=>{const{contentView:e}=this.props,t=e.renderTimeout||20,n=new Promise((e,n)=>setTimeout(n,1e3*t)),i=e.render().then(t=>{if(t&&h.a.isElement(t)||r.a.isValidElement(t))return t;const n=e.el||e.$el&&e.$el[0];if(!n)throw new Error("contentview does not contain el property");if(!h.a.isElement(n))throw new Error("el property should be an html element");return n}).catch(e=>Promise.reject(e));return Promise.race([n,i])}}getContentViewContainer(){const{containerRef:e}=this.props;return e&&e.current?e.current:null}render(){const{contentView:e,failRenderCallback:t,postRenderCallback:n}=this.props;return r.a.createElement(g.a,{render:e&&this.wrappedRender,failRenderCallback:t,postRenderCallback:n,containerRef:this.getContentViewContainer()})}}f.propTypes={contentView:o.a.object,failRenderCallback:o.a.func,postRenderCallback:o.a.func,containerRef:o.a.object};class m extends i.PureComponent{render(){const{containerRef:e,successContentViewRenderCallback:t,failureContentViewRenderCallback:n,getContentView:i,perspectiveStore:s}=this.props,o=s.contentViewLoadedSuccessfully?i():null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{contentView:o,containerRef:e,postRenderCallback:t,failRenderCallback:n}),!s.loaded&&function(){const e=r.a.createElement("div",{className:"loadingIndicatorContainer"},r.a.createElement("div",{className:"loading_indicator"},r.a.createElement(u.ProgressIndicator,{size:"large"})));return c.a.createPortal(e,document.body)}())}}m.propTypes={containerRef:o.a.object,getContentView:o.a.func,successContentViewRenderCallback:o.a.func,failureContentViewRenderCallback:o.a.func,perspectiveStore:o.a.object};var v,b=Object(a.observer)(m),y=n(14),C=n(2),_=n(6),w=n.n(_),S=n(11),P=n.n(S),M=n(21),x=n.n(M),E=n(18),I=n(15);let O=Object(a.observer)(v=class extends i.Component{constructor(...e){super(...e),this.setHeaderNameRef=e=>{const{store:t}=this.props;t.setHeaderNameRef(e)}}componentDidMount(){const{onMount:e}=this.props;e&&e()}render(){const{onClick:e,store:t,className:n}=this.props,{disabled:i,product:s,prefix:o,visible:a,id:l}=t;return a&&r.a.createElement(I.HeaderName,{id:l,prefix:o,onClick:e,disabled:i,className:n,ref:this.setHeaderNameRef},s)}})||v;O.propTypes={id:o.a.string,className:o.a.string,onClick:o.a.func,onMount:o.a.func,store:o.a.object.isRequired};var A=O,D=n(4),T=n(13),L=n.n(T);function R(e){const[t,...n]=e&&e.split(" ")||"";return{prefix:"IBM"===t?t:"",product:"IBM"===t?n.join(" "):e}}const N=D.types.model({}).volatile(()=>({headerNameNode:null})).actions(e=>({setHeaderNameRef(t){e.headerNameNode=t}})).views(e=>({get prefix(){return R(e.label).prefix},get product(){return R(e.label).product}}));var j=D.types.compose(N,L.a).named("UIShellHeaderNameStore"),k=n(9),U=n(22),V=n.n(U);class F extends k.default{constructor(e){super(e),this.onClick=()=>{const e=this.glassContext.getCoreSvc(".Logger");return this.getActionController().then(this.triggerOnPress.bind(this)).catch(t=>{e.error("failed to retrieve the actionController or invoke its method",t)})},this.onMount=()=>{this.$el=w()(this.getRootElement()),this.$el.on("primaryAction",this.onClick.bind(this))},this.render=()=>{const{id:e,label:t,options:n}=this.itemSpec;return Promise.resolve(r.a.createElement(A,{id:e,label:t,className:this.itemSpec.class,onClick:this.onClick,store:this.store,onMount:this.onMount,options:n||{}}))},this.store=j.create(),this.store.setLabel(h.a.unescape(this.itemSpec.label)),this.getActionController().catch(e=>{this.glassContext.getCoreSvc(".Logger").error("failed to retrieve the actionController or invoke its method",e)})}getRootElement(){return this.store.headerNameNode&&this.store.headerNameNode._node&&this.store.headerNameNode._node}getBaseButton(){return this}triggerOnPress(){const e={glassContext:this.glassContext,target:{plugin:this}},t=this.actionController;if(h.a.isFunction(t.onPress))t.onPress(e);else if(h.a.isFunction(t.execute)){const n=new V.a(e.glassContext),i={options:this.itemSpec.options};t.execute(n,i)}}}var B,G=F,H=n(59),Y=n.n(H),$=n(60);let q=Object(a.observer)(B=class extends i.Component{constructor(...e){super(...e),this.setHeaderGlobalActionRef=e=>{const{store:t}=this.props;t.setHeaderGlobalActionNode(e)}}componentDidMount(){const{onMount:e}=this.props;e&&e()}render(){const{onClick:e,store:t,className:n}=this.props,{disabled:i,label:s,visible:o,id:a,iconId:l,tooltipAlignment:c}=t,u=Y()(l),d=Object($.getTooltipAlignment)(c);return o&&r.a.createElement(I.HeaderGlobalAction,{id:a,"aria-label":s,onClick:e,className:n,disabled:i,tooltipAlignment:d,ref:this.setHeaderGlobalActionRef},u)}})||B;q.propTypes={id:o.a.string,className:o.a.string,onClick:o.a.func,onMount:o.a.func,store:o.a.object.isRequired};var W=q;const z=D.types.model({pushed:D.types.optional(D.types.boolean,!1),tooltipAlignment:D.types.optional(D.types.string,"")}).volatile(()=>({headerGlobalActionNode:null})).actions(e=>({setPushed(t){e.pushed=t},setHeaderGlobalActionNode(t){e.headerGlobalActionNode=t},setTooltipAlignment(t){e.tooltipAlignment=t}}));var J=D.types.compose(z,L.a).named("UIShellHeaderGlobalActionStore");class K extends k.default{constructor(e){super(e),this.onClick=()=>{const e=this.glassContext.getCoreSvc(".Logger");return this.getActionController().then(this.triggerOnPress.bind(this)).catch(t=>{e.error("failed to retrieve the actionController or invoke its method",t)})},this.onMount=()=>{this.$el=w()(this.getRootElement()),this.$el.on("primaryAction",this.onClick.bind(this))},this.render=()=>{const{id:e,label:t,options:n}=this.itemSpec;return Promise.resolve(r.a.createElement(W,{id:e,label:t,className:this.itemSpec.class,onClick:this.onClick,store:this.store,onMount:this.onMount,options:n||{}}))},this.store=J.create(),this.store.setIconId(this.itemSpec.icon),this.store.setLabel(this.itemSpec.label),this.itemSpec.tooltipAlignment&&this.store.setTooltipAlignment(this.itemSpec.tooltipAlignment),this.getActionController().catch(e=>{this.glassContext.getCoreSvc(".Logger").error("failed to retrieve the actionController or invoke its method",e)})}getRootElement(){return this.store.headerGlobalActionNode&&this.store.headerGlobalActionNode._node&&this.store.headerGlobalActionNode._node}getBaseButton(){return this}togglePressed(){const e=this.store.pushed;return this.store.setPushed(!e),!e}setUnpressed(){this.store.setPushed(!1)}triggerOnPress(){const e={glassContext:this.glassContext,target:{plugin:this}},t=this.actionController;if(this.itemSpec.push&&(e.pushState=this.togglePressed()),h.a.isFunction(t.onPress))t.onPress(e);else if(h.a.isFunction(t.execute)){const n=new V.a(e.glassContext),i={options:this.itemSpec.options};t.execute(n,i)}}}var X,Q=K,Z=n(27),ee=n(25);let te=Object(a.observer)(X=class extends i.Component{constructor(...e){super(...e),this.setSearchRef=e=>{const{store:t}=this.props;t.setSearchRef(e)}}componentDidMount(){const{onMount:e}=this.props;e&&e()}render(){const{store:e,doSearch:t,onSelectionChange:n,onFocus:i,onChange:s}=this.props;return r.a.createElement(u.AutoCompleteInput,{placeHolderText:e.placeHolderText,value:e.value,grouped:!0,values:e.values,onSubmit:t,onSelectionChange:n,onFocus:e=>{"INPUT"===e.target.tagName&&i(e)},onChange:s,ref:this.setSearchRef,className:"ba-autoComplete-searchBar"})}})||X;te.propTypes={store:o.a.object.isRequired,onMount:o.a.func,onSelectionChange:o.a.func,onFocus:o.a.func,onChange:o.a.func,doSearch:o.a.func};var ne=te;const ie=D.types.model({group:D.types.string,label:D.types.string,value:D.types.string,icon:D.types.optional(D.types.string,"")}).volatile(()=>({onIconClick:null})).actions(e=>({setIconClickAction(t){e.onIconClick=t}})),re=D.types.model({placeHolderText:D.types.optional(D.types.string,""),value:D.types.optional(D.types.string,""),values:D.types.optional(D.types.array(ie),[])}).volatile(()=>({searchNode:null})).actions(e=>({setPlaceholderText(t){e.placeHolderText=t},setSearchRef(t){e.searchNode=t},setValue(t){e.value=t},setValues(t){e.values=t&&t.length>0?t.map(e=>{const t=ie.create({group:e.group,label:e.label,value:e.value,icon:e.icon});return e.onIconClick&&t.setIconClickAction(e.onIconClick),t}):[]}}));var se=D.types.compose(re,L.a).named("SearchStore"),oe=n(7),ae=n.n(oe);class le extends k.default{constructor(e){super(e),this.doSearch=e=>this.invokeAction("doSearch",e),this.onFocus=e=>this.invokeAction("onFocus",e),this.onChange=e=>this.invokeAction("onChange",e),this.onSelectionChange=e=>this.store.setValue(e.value),this.onMount=()=>{this.$el=w()(this.getRootElement())},this.render=()=>Promise.resolve(r.a.createElement(ne,{store:this.store,onMount:this.onMount,onSelectionChange:this.onSelectionChange,doSearch:this.doSearch,onFocus:this.onFocus,onChange:this.onChange})),this.store=se.create(),this._setSearchPlaceholderText(),this.getActionController().then(e=>{this._actionController=e}).catch(e=>{this.glassContext.getCoreSvc(".Logger").error("failed to retrieve the actionController or invoke its method",e)})}_setSearchPlaceholderText(){let e=this.itemSpec.placeholderText;"searchText"===e&&(e=ae.a.get("searchText")),this.store.setPlaceholderText(e)}getRootElement(){return this.store.searchNode&&this.store.searchNode._search&&this.store.searchNode._search._node}setValue(e){this.store.setValue(e)}setValues(e){this.store.setValues(e),this.store.searchNode&&this.store.searchNode.setState({open:e&&e.length>0,filteredValues:e})}getValue(){return this.store.value}isEnabled(){return!this.store.disabled}invokeAction(e,t){const n=this.glassContext.getCoreSvc(".Logger"),i=i=>{if(i[e])return i[e]({glassContext:this.glassContext,target:{plugin:this},evt:t});n.info("actionController does not implement method ".concat(e))};return this._actionController?i(this._actionController):(n.debug("Unable to invoke search action synchronously; Loading actionController now"),this.getActionController().then(e=>{this._actionController=e,i(e)}).catch(e=>{n.error("failed to retrieve the actionController or invoke its method",e)}))}}var ce=le,ue=n(65),de=n.n(ue),he=r.a.createContext();const pe={Label:x.a,GlassPlugin:x.a,Button:E.a,SynchronousButton:Z.a,PersistentBanner:ee.a,Search:ce,HeaderName:G,Menu:de.a,HeaderGlobalAction:Q,CarbonButton:E.a,"glass/app/plugins/GlassPlugin":x.a,"baglass/app/plugins-react/PersistentBannerController":ee.a};class ge extends i.Component{constructor(e,t){super(e,t),this.failRenderCallback=e=>{if(e){const{itemSpec:t}=this.props,{glassContext:n}=this.context;n.getCoreSvc(".Logger").error("Plugin Error","Failed to render plugin ".concat(t.id),e)}this.pluginRenderPromise.resolve()},this.postRenderCallback=()=>{const{itemSpec:e}=this.props,{plugin:t}=this.state;if(h.a.isFunction(t.attachActionControllerCallbacks))try{t.attachActionControllerCallbacks()}catch(e){}const n={pluginId:e.id,plugin:t};this.pluginRenderPromise.resolve(n)},this.createPluginContainerRef=e=>{this.pluginContainer=e};const{addPluginRenderToQueue:n}=t;n(new Promise((e,t)=>{this.pluginRenderPromise={resolve:e,reject:t}}))}componentDidMount(){const{itemSpec:e}=this.props;this.createPluginPromise=this.instantiatePlugin(e).catch(t=>{const{glassContext:n}=this.context;n.getCoreSvc(".Logger").error(t,"Failed to instantiate plugin, ".concat(e.id)),this.pluginRenderPromise.resolve(t)})}getPluginOptions(){const{appView:e,itemSpec:t,toolbarPlacement:n}=this.props,{glassContext:i}=this.context,r=w()(this.pluginContainer),{groupId:s}=this.props;return t.groupId=s,{glassContext:i,$container:r,appView:e,itemSpec:t,groupId:s,toolbarPlacement:n}}getBuiltInPlugin(e){const t=this.getPluginOptions(),n=new(0,pe[e])(t);return Promise.resolve(n)}instantiatePlugin(e){return this.createPluginInstance(e.pluginController||e[this.keywords.type]).then(e=>h.a.isEmpty(e)||!e.render?Promise.reject(new Error("Invalid Plugin, may be missing render method")):h.a.isFunction(e.initialize)?e.initialize().then(()=>e):Promise.resolve(e)).then(e=>(this.setState({plugin:e}),Promise.resolve()))}createPluginInstance(e){return function(e){return void 0!==pe[e]}(e)?this.getBuiltInPlugin(e):this.dynamicallyLoadPlugin(e)}dynamicallyLoadPlugin(e){const t=this.getPluginOptions(),n=this.keywords.pluginID[e]||e;return P.a.instantiate(n,t)}render(){const{itemSpec:e,toolbarPlacement:t}=this.props,{plugin:n}=this.state||{};return r.a.createElement("div",{className:"pluginContainer",id:"".concat(e.id,"PluginContainer"),ref:this.createPluginContainerRef,"walkme-data-id":e.id},r.a.createElement(g.a,{render:n&&n.render,renderScope:n,options:this.getPluginOptions(),postRenderCallback:this.postRenderCallback,failRenderCallback:this.failRenderCallback,containerRef:this.pluginContainer,toolbarPlacement:t}))}}ge.contextType=he,ge.prototype.keywords={type:"type",pluginID:{Menu:"baglass/app/plugins/GlassMenu"}},ge.propTypes={appView:o.a.object,itemSpec:o.a.object,groupId:o.a.string,toolbarPlacement:o.a.string},ge.contextTypes={addPluginRenderToQueue:o.a.func,glassContext:o.a.object};var fe=n(16),me=n.n(fe);class ve extends i.Component{constructor(e){super(e),this.createDOMReference=e=>{this.itemContainer=e},this.itemContainer=r.a.createRef(),me.a.errorProtect(this,["render"])}render(){const{toolbarPlacement:e,position:t,id:n,plugins:i,appView:s}=this.props;return r.a.createElement("div",{className:t,id:n,ref:this.createDOMReference},i&&i.map(t=>r.a.createElement(ge,{key:h.a.uniqueId("GlassPluginContainer_"),itemSpec:t,appView:s,groupId:n,toolbarPlacement:e})))}}ve.propTypes={appView:o.a.object,id:o.a.string,position:o.a.string,toolbarPlacement:o.a.string,plugins:o.a.oneOfType([o.a.array,o.a.object])};class be extends i.Component{render(){const{toolItemGroups:e,appView:t,toolbarPlacement:n}=this.props;return e.map(e=>r.a.createElement(ve,{key:h.a.uniqueId("ToolItemGroup_"),appView:t,plugins:e[C.default.TOOL_ITEMS],toolbarPlacement:n,position:e.position,id:e.id}))}}be.propTypes={toolItemGroups:o.a.array,appView:o.a.object,toolbarPlacement:o.a.string};class ye extends i.Component{getPositionMap(){const{toolBarSpec:e}=this.props,t=y.default.generatePositionMap(e.toolItemGroups);return t[C.default.CENTER]||(t[C.default.CENTER]=[],t[C.default.CENTER].push({id:"".concat(e.attr.id,"_").concat(C.default.CENTER),position:C.default.CENTER})),t}getToolPaneClassNames(){const{toolBarSpec:e,placement:t}=this.props,n=t.charAt(0).toUpperCase()+t.slice(1),i=this.isNavBarCollapsed()?"collapsed":"",r="toolpane toolpane".concat(n," ").concat(i);return e.class?"".concat(e.class," ").concat(r):r}isNavBarCollapsed(){const{toolBarSpec:e}=this.props,t=e&&e.toolItemGroups||[];return!(e.toolItemGroups&&h.a.find(t,e=>e.toolItems&&e.toolItems.length>0))}render(){const{toolBarSpec:e,appView:t}=this.props,n=e.toolItemGroups?this.getPositionMap():null,i=[C.default.LEADING,C.default.CENTER,C.default.TRAILING],s=e.position;return r.a.createElement("div",{key:"toolPaneKey".concat(e.id),id:e.id,className:this.getToolPaneClassNames(),"aria-label":e.attr?e.attr["aria-label"]:void 0},n&&i.map(e=>n[e]&&r.a.createElement(be,{key:h.a.uniqueId("ToolItemGroupLayout_"),toolItemGroups:n[e],appView:t,toolbarPlacement:s})))}}function Ce(e,t){const{placement:n,id:i,toolItems:s}=e[0];return s&&0!==s.length?s.map(e=>r.a.createElement(ge,{key:h.a.uniqueId("GlassPluginContainer_"),itemSpec:e,appView:t,groupId:i,toolbarPlacement:n})):[]}ye.propTypes={toolBarSpec:o.a.object,placement:o.a.string,appView:o.a.object};class _e extends i.Component{getPositionMap(){const{toolBarSpec:e}=this.props;return y.default.generatePositionMap(e.toolItemGroups)}getToolPaneClassNames(){const{toolBarSpec:e,placement:t}=this.props,n=t.charAt(0).toUpperCase()+t.slice(1),i="toolpane toolpane".concat(n);return e.class?"".concat(e.class," ").concat(i):i}render(){const{toolBarSpec:e,appView:t}=this.props,n=e.toolItemGroups?this.getPositionMap():null,i=Ce(n[C.default.LEADING],t),s=[...Ce(n[C.default.CENTER]||[],t),...Ce(n[C.default.TRAILING]||[],t)];return r.a.createElement(I.Header,{key:"toolPaneKey".concat(e.id),id:e.id,className:this.getToolPaneClassNames(),role:e.attr?e.attr.role:"","aria-label":e.attr?e.attr["aria-label"]:void 0},i,s.length>0&&r.a.createElement(I.HeaderGlobalBar,null,s))}}_e.propTypes={toolBarSpec:o.a.object,placement:o.a.string,appView:o.a.object};class we extends i.Component{render(){const{toolBars:e,placement:t,appView:n}=this.props;return e?e.map(e=>"UIShellHeader"===e.type?r.a.createElement(_e,{key:h.a.uniqueId("AppBar_"),toolBarSpec:e,placement:t,appView:n}):r.a.createElement(ye,{key:h.a.uniqueId("ToolBar_"),toolBarSpec:e,placement:t,appView:n})):null}}we.propTypes={toolBars:o.a.array,placement:o.a.string,appView:o.a.object};class Se extends i.Component{getClassNames(){const{classNames:e}=this.props;return e?"".concat("pane paneContent"," ").concat(e):"pane paneContent"}render(){const{containerRef:e,role:t,onScroll:n,children:i}=this.props;return r.a.createElement("div",{key:h.a.uniqueId("paneContent_"),className:this.getClassNames(),ref:e,role:t||"contentinfo","aria-label":this.getClassNames(),onScroll:n},i)}}Se.propTypes={classNames:o.a.string,containerRef:o.a.object,role:o.a.string,onScroll:o.a.func,children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node])};class Pe extends i.Component{constructor(e){super(e),this.onContentScroll=()=>{this.contentPaneContainerRef.current&&(this.contentPaneContainerRef.current.scrollLeft=0)},this.contentPaneContainerRef=r.a.createRef()}componentDidMount(){const{onContentContainerMounted:e}=this.props;e(w()(this.contentPaneContainerRef.current))}render(){const{classNames:e,children:t}=this.props;return r.a.createElement(Se,{classNames:e,role:"main",containerRef:this.contentPaneContainerRef,onScroll:this.onContentScroll},t&&r.a.cloneElement(t,{containerRef:this.contentPaneContainerRef}))}}Pe.propTypes={classNames:o.a.string,children:o.a.element,onContentContainerMounted:o.a.func};class Me extends i.Component{getLayoutPaneContainerClassName(){const{paneData:e}=this.props;return e&&e[C.default.PANE]&&e[C.default.PANE].class?e[C.default.PANE].class:""}getContentPaneContainerClassNames(){const e=this.getLayoutPaneContainerClassName();let t="contentViewPane";return e&&(t+=" ".concat(e)),t}render(){const{children:e,paneData:t,appView:n,onContentContainerMounted:i}=this.props,s=t&&y.default.isContentPane(t[C.default.PANE]);return r.a.createElement(r.a.Fragment,null,t&&t[C.default.LOOPS]&&t[C.default.LOOPS].map(e=>r.a.createElement(we,{key:h.a.uniqueId("ToolBarLayout_"),toolBars:t[e],placement:e,appView:n})),s?r.a.createElement(Pe,{classNames:this.getContentPaneContainerClassNames(),onContentContainerMounted:i},e):r.a.createElement(Se,{className:this.getLayoutPaneContainerClassName()},e))}}Me.propTypes={appView:o.a.object,children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),paneData:o.a.object,onContentContainerMounted:o.a.func},n.d(t,"default",(function(){return xe}));class xe extends i.Component{constructor(e){super(e),this.hasContentView=!1}componentDidMount(){const{onNoContentViewFound:e,onPerspectiveViewMounted:t}=this.props;this.hasContentView||e(),t()}getViewContext(){const{addPluginRenderToQueue:e,glassContext:t}=this.props;return{addPluginRenderToQueue:e,glassContext:t}}createContentPane(){const{successContentViewRenderCallback:e,failureContentViewRenderCallback:t,perspectiveStore:n,getContentView:i}=this.props;return r.a.createElement(b,{successContentViewRenderCallback:e,failureContentViewRenderCallback:t,perspectiveStore:n,getContentView:i})}constructNextLayoutPane(e){const{appView:t,onContentContainerMounted:n}=this.props;return y.default.isContentPane(e)?(this.hasContentView=!0,this.createContentPane()):r.a.createElement(Me,{appView:t,onContentContainerMounted:n,layoutsRenderPromise:this.layoutRenderComplete,paneData:e},this.constructNextLayoutPane(e[C.default.PANE]))}render(){const{toolBars:e,appView:t,onContentContainerMounted:n}=this.props,i=y.default.convertToolBarsToLayoutObject(e),s=this.getViewContext();return r.a.createElement(he.Provider,{value:s},r.a.createElement(Me,{appView:t,onContentContainerMounted:n,layoutsRenderPromise:this.layoutRenderComplete,paneData:i},this.constructNextLayoutPane(i[C.default.PANE])))}}xe.propTypes={appView:o.a.object,glassContext:o.a.object,toolBars:o.a.array,perspectiveStore:o.a.object,addPluginRenderToQueue:o.a.func,onPerspectiveViewMounted:o.a.func,onContentContainerMounted:o.a.func,successContentViewRenderCallback:o.a.func,failureContentViewRenderCallback:o.a.func,getContentView:o.a.func,onNoContentViewFound:o.a.func}},function(e,t,n){"use strict";n.r(t);var i=n(40),r=n.n(i),s=n(56),o=n.n(s),a=n(38),l=n.n(a),c=n(9),u=n(21),d=n.n(u),h=n(18),p=n(27),g=n(25),f=n(57),m=n.n(f),v=n(36),b=n.n(v),y=n(35),C=n.n(y),_=n(37),w=n.n(_),S=n(31),P=n.n(S),M=n(33),x=n.n(M),E=n(58),I=n.n(E);n.d(t,"Glass",(function(){return r.a})),n.d(t,"AlertStore",(function(){return o.a})),n.d(t,"ToastStore",(function(){return l.a})),n.d(t,"GlassPluginController",(function(){return c.default})),n.d(t,"IconLabelPluginController",(function(){return d.a})),n.d(t,"ButtonPluginController",(function(){return h.a})),n.d(t,"SyncButtonPluginController",(function(){return p.a})),n.d(t,"PersistentBannerPluginController",(function(){return g.a})),n.d(t,"ListKeyboardNavigation",(function(){return m.a})),n.d(t,"TaxonomyService",(function(){return b.a})),n.d(t,"URLEncoderService",(function(){return C.a})),n.d(t,"ToastService",(function(){return w.a})),n.d(t,"MessageDialogService",(function(){return P.a})),n.d(t,"PerspectiveLoader",(function(){return x.a})),n.d(t,"ExtendObject",(function(){return I.a}))}])})),define("baglass/core-client/js/core-client/utils/JQueryAria",["jquery"],(function(e){e.fn.ariaButton=function(t){return this.each((function(n,i){var r=e(i);r.attr("type","button"),r.attr("role","button"),t&&(!0===t.haspopup&&r.attr("aria-haspopup","true"),r.text(t.label),r.attr("title",t.title?t.title:t.label),r.attr("id",t.id))}))}})),define("baglass/core-client/js/core-client/utils/JQueryExt",["jquery","../ui/KeyCodes","./EventHelper","./JQueryAria","./JQueryTabbable"],(function(e,t){return e.event.special.clicktap={add:function(t){var n=!1;e(this).on("click.clicktap_"+t.guid,t.selector,(function(e){return n?!(!t.data||!t.data.allowPropagationDefaultAction)||(e.stopPropagation(),n=!1,!1):t.handler.apply(this,arguments)})).on("tap.clicktap_"+t.guid,t.selector,(function(e){return e.pageX=e.gesture.center.pageX,e.pageY=e.gesture.center.pageY,n=!0,t.handler.apply(this,arguments)}))},remove:function(t){e(this).off(".clicktap_"+t.guid)}},e.event.special.primaryaction={add:function(n){var i=!1,r=t.ENTER,s=t.SPACE,o=!1;e(this).on("click.primaryaction_"+n.guid,n.selector,(function(e){return o=!1,i?!(!n.data||!n.data.allowPropagationDefaultAction)||(e.stopPropagation(),i=!1,!1):n.handler.apply(this,arguments)})).on("tap.primaryaction_"+n.guid,n.selector,(function(e){return i=!0,e.pageX=e.gesture.center.pageX,e.pageY=e.gesture.center.pageY,n.handler.apply(this,arguments)})).on("keydown.primaryaction_"+n.guid,n.selector,(function(t){var n=t.which||t.keyCode;o=(n===r||n===s)&&!e(t.target).is("button")})).on("keyup.primaryaction_"+n.guid,n.selector,(function(t){var i=t.which||t.keyCode;if(!(i!==r&&i!==s||e(t.target).is("button")||!0!==o))return o=!1,n.handler.apply(this,arguments);o=!1}))},remove:function(t){e(this).off(".primaryaction_"+t.guid)}},e.event.special.escapeaction={add:function(n){var i=t.ESCAPE,r=t.OPEN_BRACKET,s=!1;e(this).on("keydown.escapeaction_"+n.guid,n.selector,(function(e){var t=e.which||e.keyCode;s=t===r&&e.ctrlKey})).on("keyup.escapeaction_"+n.guid,n.selector,(function(e){var t=e.which||e.keyCode;return t===i||e.ctrlKey&&s?(s=!1,n.handler.apply(this,arguments)):void(s=!1)}))},remove:function(t){e(this).off(".escapeaction_"+t.guid)}},e.event.special.deleteaction={add:function(n){var i=!1;e(this).on("keydown.deleteaction_"+n.guid,n.selector,(function(e){var n=e.which||e.keyCode;i=n===t.SECOND&&e.ctrlKey})).on("keyup.deleteaction_"+n.guid,n.selector,(function(e){var r=e.which||e.keyCode;return r===t.DELETE||e.ctrlKey&&i?(i=!1,n.handler.apply(this,arguments)):void(i=!1)}))},remove:function(t){e(this).off(".deleteaction_"+t.guid)}},e})),define("baglass/app/AppController",["../core-client/js/core-client/ui/core/Class","baglass/glass.webpack.bundle","../core-client/js/core-client/utils/ClassFactory","../core-client/js/core-client/utils/JQueryExt"],(function(e,t,n){const{Glass:i,ExtendObject:r}=t;var s=e.extend({_ClassFactory:n,init:function(e){s.inherited("init",this,arguments),r(this,e);const t={appController:this,trackHistory:!1!==e.trackHistory&&"false"!==e.trackHistory,cacheAppViews:!1!==e.cacheAppViews&&"false"!==e.cacheAppViews,installInfo:e.installInfo,versionInfo:e.versionInfo,authInfo:e.authInfo,requirejs:requirejs};this.Glass=new i(t,e),this.glassContext=this.Glass,this.Glass.initialize()},getCurrentContentView:function(){return this.Glass.getCurrentContentView()},canExecuteAction:function(e,t){return this.Glass.canExecuteAction(e,t)},performAction:function(e,t){return this.Glass.performAction(e,t)},isHighContrastOn:function(){return this.Glass.isApplicationStyledForHighContrast()},detectAccessibilityChange:function(e){return this.Glass.detectAccessibilityChange(e)},showContextMenu:function(e){return this.Glass.showContextMenu(e)},showErrorMessage:function(e,t,n,i){return this.Glass.showErrorMessage(e,t,n,i)},showMessage:function(e,t,n,i,r,s,o,a){return this.Glass.showMessage(e,t,n,i,r,s,o,a)},showEmbedDialog:function(e){return this.Glass.showEmbedDialog(e)},showResetHomeDialog:function(e){return this.Glass.showResetHomeDialog(e)},showShareDialog:function(e){return this.Glass.showShareDialog(e)},emit:function(e,t){return this.Glass.trigger(e,t)},on:function(e,t,n){return this.Glass.on(e,t,n)},off:function(e,t,n){return this.Glass.off(e,t,n)},trigger:function(e,t){return this.Glass.trigger(e,t)},setDefaultHomePerspective:function(e){return this.Glass.setDefaultHomePerspective(e)},resetHome:function(e){return this.Glass.resetHome(e)},closeAppView:function(e,t,n){return this.Glass.closeAppView(e,t,n)},close:function(e,t){return this.Glass.close(e,t)},getCurrentPerspective:function(){return this.Glass.getCurrentPerspective()},isOpeningAView:function(){return this.Glass.isOpeningAView()},isLoginViewShown:function(){return this.Glass.isLoginViewShown()},openAppView:function(e,t){return this.Glass.openAppView(e,t)},openLoginView:function(e){return this.Glass.openLoginView(e)},openPreviousAppView:function(){return this.Glass.openPreviousAppView()},findCollection:function(e){return this.Glass.findCollection(e)},findElement:function(e){return this.Glass.findElement(e)},findPlugin:function(e){return this.Glass.findPlugin(e)},hideSlideOut:function(e){return this.Glass.hideSlideOut(e)},showSlideOut:function(e){return this.Glass.showSlideOut(e)},showToast:function(e,t){return this.Glass.showToast(e,t)},reloadTheme:function(){return this.Glass.reloadTheme()},getUrl:function(e){return this.Glass.getUrl(e)},updateCurrentCachedAppView:function(){return this.Glass.updateCurrentCachedAppView()},lockGlass:function(){return this.Glass.lockGlass()},unlockGlass:function(){return this.Glass.unlockGlass()}});return s})),define("baglass/core-client/js/core-client/ui/Button",["./core/View","jquery","lodash","../utils/Utils","../utils/JQueryExt"],(function(e,t,n,i){var r=e.extend({tagName:"button",events:{primaryaction:"_onSelect"},init:function(e){r.inherited("init",this,e.buttonSpec),n.extend(this,e.buttonSpec)},render:function(){return this.$el.ariaButton(this),i.addClass(this.$el,"button"),i.addClass(this.$el,this.class),i.setIcon(this.$el,this.icon,this.title),this._initializePressState(),Promise.resolve(this.el)},setPressed:function(){this.$el.addClass("pushed"),this.$el.attr("aria-pressed","true"),this.$el.attr("aria-checked","true")},setUnpressed:function(){this.$el.removeClass("pushed"),this.$el.blur(),this.$el.attr("aria-pressed","false"),this.$el.attr("aria-checked","false")},togglePressed:function(){return!0===this.isPressed()?this.setUnpressed():this.setPressed(),this.isPressed()},setSelected:function(){var e=t(".currentlySelected");e[0]&&e.removeClass("currentlySelected"),this.push||this.$el.addClass("currentlySelected")},isPressed:function(){return this.$el.hasClass("pushed")},disable:function(){this.$el.addClass("disabled"),this.$el.attr("aria-disabled","true"),this.$el.attr("tabindex","-1")},enable:function(){this.$el.removeClass("disabled"),this.$el.attr("aria-disabled","false"),this.$el.attr("tabindex","0")},isEnabled:function(){return!this.$el.hasClass("disabled")},_onSelect:function(e){!0===this.isEnabled()&&(this.push&&this.togglePressed(),n.isFunction(this.onSelect)&&this.onSelect(e))},_initializePressState:function(){this.push&&this.setUnpressed()},remove:function(){r.inherited("remove",this,arguments)}});return r})),define("baglass/app/plugins/Button",["./GlassPlugin","jquery","lodash","../../core-client/js/core-client/ui/Button","../../api/Context","../AppEvents"],(function(e,t,n,i,r,s){var o=e.extend({init:function(){o.inherited("init",this,arguments)},render:function(){var e=this._updateButtonSpec();return this._createCommonButton(e),this.registerOneTimeCallback(s.APPVIEW_LOADED),this.button.render()},attachActionControllerCallbacks:function(){let e=this.glassContext.addToOptions({target:{plugin:this}}),t=this.glassContext.getCoreSvc(".Logger"),i=this;this.getBaseButton().onSelect=function(){return i.getController().then(t=>{if(this.setSelected(),this.push&&(e.pushState=this.isPressed()),n.isFunction(t.onPress))t.onPress(e);else if(n.isFunction(t.execute)){var i=new r(e.glassContext),s={options:e.target.plugin.itemSpec.options};t.execute(i,s)}}).catch(e=>{t.error("failed to retrieved the actionController or invoke its method",e)})}},changeLabel:function(e){n.isString(e)&&(this.$el.contents().last()[0].nodeValue=e)},setPressed:function(){this.getBaseButton()&&this.getBaseButton().setPressed()},setUnpressed:function(){this.getBaseButton()&&this.getBaseButton().setUnpressed()},getBaseButton:function(){return this.button},_updateButtonSpec:function(){var e={buttonSpec:{id:this.itemSpec.id,class:this.itemSpec.class,label:this.itemSpec.label,title:this.itemSpec.title,icon:this.itemSpec.icon,push:this.itemSpec.push}};return this.itemSpec.label&&(e.buttonSpec.class?e.buttonSpec.class=e.buttonSpec.class+" labelled":e.buttonSpec.class="labelled"),e},_createCommonButton:function(e){this.button=new i(e),this.$el=this.button.$el}});return o})),define("baglass/app/plugins/ButtonActionInterface",["../../core-client/js/core-client/ui/core/Class"],(function(e){return e.extend({onPress:function(e){console.info("I am pressed",e.target.itemId)},onRender:function(){},getCoachMarkSpec:function(){}})})),define("baglass/core-client/js/core-client/utils/StringMeasurementUtils",["jquery","lodash"],(function(e,t){"use strict";var n=document.createElement("canvas").getContext("2d"),i={},r=function(){};return r.prototype.getNodeFont=function(e){var n=e.css(["font-variant","font-weight","font-size","font-family"]);return t.values(n).join(" ")},r.prototype.charWidth=function(e,t){void 0===i[t]&&(i[t]={});var r=i[t][e];if(void 0===r){n.font=t;r=n.measureText(Array(11).join(e)).width/10,i[t][e]=r}return r},r.prototype.getTextWidth=function(e,t,i){if(i)return n.font=t,n.measureText(e).width;for(var r=e.length,s=0;r--;)s+=this.charWidth(e[r],t);return s},r.prototype.charsInWidth=function(e,t,n,r,s){for(var o=0,a=0;a<r;a++){var l,c=e[s?a:e.length-1-a];if(void 0!==i[t]&&void 0===(l=i[t][c])&&(l=this.charWidth(c,t)),(o+=l)>=n-1&&o<n){var u=s?e.substring(0,a+1):e.substring(e.length-a-1);if(this.getTextWidth(u,t,!0)>=n)return a}if(o>=n)return a}return r},r.prototype.isZoomTextOnly=function(){var t=e("<div>").css("font-size",14),n=14!==parseInt(t.css("font-size"));return t.remove(),n},r.prototype.getIntCSSProp=function(e,t){return parseInt(e.css(t))},r.prototype.getLineCount=function(e,t){void 0===t&&(t=this.isZoomTextOnly());var n=1,i=this.getIntCSSProp(e,"line-height"),r=this.getIntCSSProp(e,"max-height");return i>0&&r>0&&"nowrap"!==e.css("white-space")&&!t&&(n=Math.max(1,parseInt(r/i))),n},r.prototype.getAvailableWidth=function(e,t){void 0===t&&(t=this.getLineCount(e));var n=e[0].getBoundingClientRect(),i=e.outerWidth()-e.width(),r=(Math.floor(n.width)-i)*t;return r-=e.children().length?e.children().width():0},r.prototype.getStringWidth=function(e,t,n){var i,r=this.isZoomTextOnly();void 0===n&&(n=this.getAvailableWidth(e)),void 0===t&&(t=this.getLineCount(e,r));var s=this.getIntCSSProp(e,"max-height");if(t>1||e.is("INPUT")||r&&s>0){var o=e.val()||e.text(),a=this.getNodeFont(e);i=this.getTextWidth(o,a,!0)}else i=n+e[0].scrollWidth-e[0].offsetWidth;return i},new r})),define("baglass/core-client/js/core-client/utils/ContentFormatter",["jquery","lodash","./StringMeasurementUtils"],(function(e,t,n){"use strict";var i=function(){};function r(e,t,i,r,s){if(0===e.length)return"";var o=n.charsInWidth(e,t,Math.floor(i),r,s);if(s)return e.substring(0,o).trim();var a=e.length-o;if(-1===e.substring(a-1,a+1).indexOf(" ")){var l=e.indexOf(" ",a);-1!==l&&(a=l)}return e.substring(a).trim()}return i.prototype.updateEllipsesBasedOnWidth=function(i,s,o,a,l){var c,u,d=a>1&&i.scrollHeight-2-i.offsetHeight>0,h=e(i),p=null,g=h.is("INPUT");g?(c=null,u=h.val()):u=(c=function(e){return t.find(e.childNodes,(function(e){return e.nodeType===Node.TEXT_NODE&&e.nodeValue.length>0}))}(i))?c.nodeValue:"",-1===u.indexOf("…")&&(g||h.attr("aria-label",u),l||h.attr("title",u));var f=u.replace(/([a-z])([a-z])([A-Z])([a-z])/g,"$1$2​$3$4").trim();if(s>0&&(s<o-1||d)){var m=n.getNodeFont(h),v=n.getTextWidth(" ",m),b=n.getTextWidth("…",m);if(s>b){var y,C,_=s/2;if(a>1)y=r(f,m,_-b-v,f.length,!0),C=r(f,m,_-v,f.length-y.length,!1);else C=r(f,m,_-v,f.length,!1),y=r(f,m,s-n.getTextWidth(C,m)-b-2*v,f.length-C.length,!0);y.length+C.length<f.length?(y.length>0&&(y+=" "),C.length>0&&(C=(a>1?"​":" ")+C),p=y+"…"+C):p=y.length>0&&C.length>0?y+"​"+C:y+C}else p=""}else f!==u&&(p=f);null!==p&&(g?h.val(p):c&&(c.nodeValue=p))},i.prototype.middleShortenString=function(t,i){var r=e(t),s=n.getLineCount(r),o=n.getAvailableWidth(r,s),a=n.getStringWidth(r,s,o);this.updateEllipsesBasedOnWidth(r[0],o,a,s,i)},i.prototype.resizeInput=function(t){var i=e(t);if(i.is("INPUT")){var r=n.getAvailableWidth(i)+1,s=n.getStringWidth(i);s<r?i.css("width",s+10+"px"):i.css("width",r+10+"px")}},new i})),define("baglass/core-client/js/core-client/utils/IsBootstrap3",["jquery","bootstrap"],(function(e){return"3.4.1"===e.fn.popover.Constructor.VERSION})),define("baglass/core-client/js/core-client/ui/DropDownMenu",["./core/View","jquery","lodash","./Button","./Menu","../utils/ContentFormatter","../utils/BidiUtil","../utils/IsBootstrap3","bootstrap"],(function(e,t,n,i,r,s,o,a){var l=e.extend({init:function(e){l.inherited("init",this,e.dropDownMenuSpec),n.extend(this,e.dropDownMenuSpec)},render:function(){var e="menu ";this.class&&(e+=this.class);var t={kind:"dropDown",id:this.id,title:o.enforceTextDirection(this.title),label:o.enforceTextDirection(this.label),class:e,icon:this.icon,haspopup:!0,Btn:this.btn,tooltipAlignment:this.tooltipAlignment,glassContext:this.glassContext},n=this._createMenuButton(t);return n.onSelect=this._onMenuSelect.bind(this),n.render().then(function(e){var t=this;return this.$el=n.$el,this._setTitle(),this.menuButton=n,this.menuButtonDom=e,setTimeout((function(){t.$el=n.$el}),1),e}.bind(this))},getButton:function(){return this.menuButton},setMenuItems:function(e,t,n){return this.items=e,t?this._onMenuSelect(n):Promise.resolve()},_setTitle:function(){this.$el&&this.$el.length&&(this.title?t(this.$el).attr("title",this.title):this.label&&t(this.$el).attr("title",this.label))},_onMenuSelect:function(){if(r.hideOpenMenus(),this.$ddPopover)return Promise.resolve();var e=t(".currentlySelected");return e[0]&&e.removeClass("currentlySelected"),this.$el.addClass("currentlySelected"),this.contentMenu=this._createMenu(this.items),this.contentMenu.render().then(function(e){this.contentMenu.whenReadyToClose=this._closePopover.bind(this);var n="popover glass-menu "+this.groupId+" ";this.class&&(n+=this.class);var i=void 0;i=a?{placement:this.ddMenuPlacement,trigger:"manual",container:"body",content:function(){return t(e)},template:'<div class="'+n+'" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',html:!0}:{placement:this.ddMenuPlacement,trigger:"manual",container:"body",boundary:"window",content:function(){return t(e)},template:'<div class="'+n+'" role="tooltip"><div class="arrow"></div><div class="popover-body"></div></div>',html:!0,popperConfig:{placement:"bottom-start"}},this._showPopover(i)}.bind(this))},_createMenuButton:function(e){var t=this;if(e.Btn){var n={actionController:{onPress:function(e){t.menuButton.onSelect(e)}},Btn:e.Btn,glassContext:e.glassContext,itemSpec:e};return new n.Btn(n)}return new i({buttonSpec:e})},_createMenu:function(e){return new r({spec:{items:e,ariaLabel:this.title||this.label}})},_showPopover:function(e){this.$el.attr("data-selector","true"),this.$el.attr("groupId",e.groupId),this.$ddPopover=this.$el.popover(e),this.$ddPopover.popover("show"),this.popupId=this.$ddPopover.attr("aria-describedby"),this._updatePopupover()},_updatePopupover:function(){var e=t("#"+this.popupId),i=e.offset()||{left:0},r=e.position()||{left:0},o=Math.round(t(".glass").width()),a=o-Math.round(r.left+e.width()),l=0;if(a<=0)l=a;else{var c=this.$el.offset();c&&(l=c.left-i.left)}var u=r.left+l+e.width()-o;u>0&&(l-=u),e.css("left",i.left+l+"px");var d=e.find(".commonMenuItem");n.each(d,(function(e){var n=t(e).find("a"),i=n.find("svg"),r=t(e).find("span"),o=n.width(),a=r.innerWidth()-r.width(),l=o-i.outerWidth(!0)-a;r.length&&s.updateEllipsesBasedOnWidth(r[0],l,r.width())}))},_closePopover:function(){return new Promise(function(e,t){this.$ddPopover?(this.$ddPopover.on("hidden.bs.popover",function(){this._removePopover(),e()}.bind(this)),setTimeout(function(){this._removePopover(),e()}.bind(this),250),this.$el.removeClass("currentlySelected"),this.$el.blur(),a&&this.$ddPopover.popover("hide")):t(new Error("Failed to close popover"))}.bind(this))},_removePopover:function(){this.$ddPopover&&(this.$ddPopover.off("hidden.bs.popover"),a?this.$ddPopover.popover("destroy"):this.$ddPopover.popover("dispose"),this.$ddPopover=null,t("#"+this.popupId).remove())},remove:function(){this._removePopover(),l.inherited("remove",this,arguments)},closeDropDownMenu:function(e){if(this.contentMenu){var t=this.contentMenu;return this.contentMenu=null,t.closeMenu(e,!1)}return this._closePopover(e)}});return l})),define("baglass/app/plugins/GlassMenu",["./GlassPlugin","jquery","lodash","../../core-client/js/core-client/utils/ClassFactory","./MenuActionControllerDispatcher","../../core-client/js/core-client/ui/DropDownMenu","../../core-client/js/core-client/ui/Button","baglass/glass.webpack.bundle","../AppEvents"],(e,t,n,i,r,s,o,a,l)=>{const c=e.extend({_ClassFactory:i,init(e){t.extend(!0,this,e);const n=this.itemSpec;void 0===n.labelOnly&&(n.icon?n.label&&(n.labelOnly="false"):n.labelOnly="true"),c.inherited("init",this,[n])},changeLabel(e){if(n.isString(e))try{this.$el[0].props.store.setLabel(e)}catch(t){this.$el.contents().last()[0].nodeValue=e}},getButtonElement(){return this.activeObject=this.ddMenu&&this.ddMenu.$el,this.activeObject},getDropdownMenu(){return this.ddMenu},getDefaultActionButton(){return this.defaultButton},render(){return this.registerOneTimeCallback(l.APPVIEW_LOADED),this._createMenu(),this.ddMenu.render().then(e=>(this.$el=t(e),this.activeObject=this.ddMenu.$el,this.defaultButton?(this.$el=t('<div id = "'+this.id+'" >'),this.defaultButton.render().then(()=>(this.$el.append(this.defaultButton.$el),this.$el.append(this.ddMenu.menuButton.$el),this.$el.addClass("inlineFlex"),this.$el[0]))):this.$el[0]))},attachActionControllerCallbacks(){this.ddMenu.menuButton.onSelect=this._handleMenuClick.bind(this),this.defaultButton&&(this.defaultButton.onSelect=this._handleDefaultAction.bind(this))},getController(){let e=[],t=[],i={};return this._loadingController||(this._loadingController=new Promise(r=>{n.each(this.itemSpec.actionControllers,(n,i)=>{e.push(this._loadController(n,i)),t.push(i)}),r(Promise.all(e).then(e=>(n.each(e,(e,n)=>{i[t[n]]=e}),this._controller=this._createControllerDispatcher(i),this._controller)))})),this._loadingController},_loadController(e,t){return this._ClassFactory.instantiate(e).then(e=>{if(n.isFunction(e.initialize)){const n={glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id},controllerConfig:this.itemSpec.controllerConfig&&this.itemSpec.controllerConfig[t]};return Promise.resolve(e.initialize.apply(e,[n])).then(()=>e)}return e})},_createMenu(){let e;const t=this._findDefaultActionItem();if(t){let i;e={dropDownMenuSpec:{id:this.id+".menu",groupId:this.groupId,title:this.title,icon:"common-dropdown",class:"button menu comboBox",ddMenuPlacement:this.ddMenuPlacement,tooltipAlignment:this.tooltipAligment,items:[]}};const r=n.isUndefined(t.title)?t.label:t.title;i={id:this.id+".default",title:r,icon:this.icon,class:this.class+" menu defaultButton",item:t},this.defaultButton=new o({buttonSpec:i})}else{this.label&&(n.isUndefined(this.class)?this.class="dropDownImage":this.class+=" dropDownImage");const{ButtonPluginController:t}=a;e={dropDownMenuSpec:{id:this.id,groupId:this.groupId,label:this.label,title:this.title,icon:this.icon,class:this.class,ddMenuPlacement:this.ddMenuPlacement,items:[],btn:t,tooltipAlignment:this.tooltipAlignment}}}this.ddMenu=this._createDropDownMenu(e)},_handleMenuClick(e){const t=this.glassContext.getCoreSvc(".Logger");return this._updateMenuItemsList().then(t=>{this.ddMenu.setMenuItems(t,!0,e)}).catch(e=>{t.error("failure in the onSelect callback",e)})},_createControllerDispatcher:e=>new r(e),_createDropDownMenu(e){return e.dropDownMenuSpec.glassContext=this.glassContext,new s(e)},_handleDefaultAction(){const e=this.glassContext.getCoreSvc(".Logger");return this.getController().then(e=>{const t=e.getControllerMap()[this.defaultButton.item.featureId],i={glassContext:this.glassContext,target:{plugin:this,itemId:this.defaultButton.item.id,specItemIndex:this.defaultButton.item.index,index:0}};t&&n.isFunction(t.onSelectItem)&&t.onSelectItem.call(t,i)}).catch(t=>{e.error("failed to call the default action",t)})},_findDefaultActionItem(){let e,t;return n.isString(this.defaultAction)&&(e=n.find(this.itemSpec.items,(e,n)=>(t=n,e.id===this.defaultAction))),e&&(e.index=t),e},_updateMenuItemsList(){const e={glassContext:this.glassContext,target:{plugin:this,itemId:this.itemSpec.id}};return this.getController().then(i=>i.onOpen(e).then(()=>{const e=[];i.buildItemMap(this.itemSpec.items);let r=0;return n.each(this.itemSpec.items,(s,o)=>{const a={glassContext:this.glassContext,target:{plugin:this,itemId:s.id,specItemIndex:o}};if(i.isItemVisible(a)){a.target.index=r++;const o={};t.extend(!0,o,s),o.name=s.id,o.onSelect=e=>{a.target.activeObject=e,i.onSelectItem.call(i,a)},o.onRemove=e=>(a.target.activeObject=e,i.onRemoveItem.call(i,a)),o.onRender=e=>{a.target.activeObject=e,i.onRenderItem.call(i,a)};const l=i.getLabel(a);n.isUndefined(l)||(o.label=l);i.isItemSelected(a)&&(o.selected=!0),e.push(o)}}),e}))},closeGlassMenu(){return new Promise((e,t)=>{this.ddMenu.closeDropDownMenu({}).then(e,t)})}});return c.errors={FAILURE_CREATING_CONTROLLER:"Failure creating one of the menu controllers"},c}),define("baglass/app/plugins/SynchronousButton",["lodash","./Button","../../api/Context"],(e,t,n)=>t.extend({initialize:function(){return this.getController()},getControllerSync:function(){if(this._controller)return this._controller;throw new Error("Controller has not been registered")},attachActionControllerCallbacks:function(){const t=this.glassContext.addToOptions({target:{plugin:this}});let i=this.glassContext.getCoreSvc(".Logger"),r=this;this.getBaseButton().onSelect=function(){try{let a;const l=r.getControllerSync();if(this.setSelected(),this.push&&(t.pushState=this.isPressed()),e.isFunction(l.onPress))a=l.onPress(t);else if(e.isFunction(l.execute)){var s=new n(t.glassContext),o={options:t.target.plugin.itemSpec.options};a=l.execute(s,o)}return Promise.resolve(a).catch(e=>{i.error(e)})}catch(e){return i.error(e),Promise.resolve()}}}})),define("baglass/app/plugins/all",["./Button","./ButtonActionInterface","./GlassMenu","./SynchronousButton"],(function(){})),define("baglass/app/NavbarButtonSlideoutController",["../core-client/js/core-client/ui/core/Class","jquery","lodash"],(function(e,t,n){"use strict";return e.extend({init:function(e){t.extend(!0,this,e)},_slideout:null,onPress:function(e){!0===e.pushState?this._onPush(e):this._onUnpush(e)},_onPush:function(e){var t=this._pushHandler(e);this.onShowCallback(e,t)},_pushHandler:function(e){var t=this.getCustomSpec(e),i=this._openSlideout(e,t.options);return i.on("show",function(e){n.isFunction(e.setPressed)&&e.setPressed()}.bind(this,e.target.plugin)),i.on("hide",function(e){n.isFunction(e.setUnpressed)&&e.setUnpressed()}.bind(this,e.target.plugin)),i.setLaunchPoint(e.target.plugin.getRootElement()),this._slideout=i,i},_openSlideout:function(e,t){return this._sendInstrumentationEvt(e,t),this.isAppviewScope?e.glassContext.currentAppView.openSlideout(t):e.glassContext.showSlideOut(t)},_onUnpush:function(e){this.onHideCallback(e)},getSlideout:function(){return this._slideout},_setSlideout:function(e){this._slideout=e},getCustomSpec:function(e){var t=e.target.plugin.itemSpec;return t.options&&t.options.content&&(t.options.id=t.id+"."+t.options.content.module+".global"),t},_sendInstrumentationEvt:function(e,t){var n=e.glassContext.getCoreSvc(".Instrumentation");n.enabled&&t&&t.instrumentation&&t.instrumentation.enabled&&n.track(_objectSpread({type:t.instrumentation.type,objectType:t.instrumentation.objectType,action:t.instrumentation.action,uiElement:t.instrumentation.uiElement,milestoneName:t.instrumentation.action+"_"+t.instrumentation.objectType+"_"+t.instrumentation.uiElement},t.instrumentation.CTA&&{CTA:t.instrumentation.CTA}))},onShowCallback:function(){},onHideCallback:function(){}})})),define("baglass/app/NavMenuSlideoutController",["jquery","lodash","./plugins/MenuActionInterface"],(function(e,t,n){"use strict";return class extends n{constructor(t){super(),e.extend(!0,this,t)}onSelectItem(e){const t=this.getCustomSpec(e),n=this._openSlideout(e,t.options);return n.setLaunchPoint(e.target.plugin.getRootElement()),this._slideout=n,n}_openSlideout(e,t){return this._sendInstrumentationEvt(e,t),e.glassContext.showSlideOut(t)}getCustomSpec(e){const t=e.target.plugin.items[e.target.specItemIndex];return t.options&&t.options.content&&(t.options.id=t.id+"."+t.options.content.module+".global"),t}_sendInstrumentationEvt(e,t){const n=e.glassContext.getCoreSvc(".Instrumentation");n.enabled&&t&&t.instrumentation&&t.instrumentation.enabled&&n.track(_objectSpread({type:t.instrumentation.type,objectType:t.instrumentation.objectType,action:t.instrumentation.action,uiElement:t.instrumentation.uiElement,milestoneName:t.instrumentation.action+"_"+t.instrumentation.objectType+"_"+t.instrumentation.uiElement},t.instrumentation.CTA&&{CTA:t.instrumentation.CTA}))}}})),define("baglass/core-client/js/core-client/ui/dialogs/BaseDialog",["../AccessibleView","jquery","lodash","../../nls/StringResources","../Button","../../utils/Utils"],(function(e,t,n,i,r,s){"use strict";var o=e.extend({_buttons:["ok","cancel"],_showCloseX:!0,_width:null,init:function(e){this._dialogId=n.uniqueId("modalDialog_"),this._queryId="#"+this._dialogId,this._footerButtons=[],this._showHeader=!0,this.setDialogOptions(e),this.enableTabLooping=!0,this.id||(this.id="com-ibm-ca-dialogDefaultId"),o.inherited("init",this,arguments)},setDialogOptions:function(e){e&&(e.width&&(this._width=e.width),!1===e.showCloseX&&(this._showCloseX=e.showCloseX),e.buttons&&(this._buttons=e.buttons),this.titleAriaLabel=e.titleAriaLabel,this._showHeader=void 0===e.showHeader||e.showHeader)},destroy:function(){t(this._queryId).remove(),t("body").removeClass("openedDialog")},remove:function(){this.destroy()},hide:function(){this._setFocusToLaunchPoint(),t(this._queryId).removeClass("show"),this.destroy()},open:function(){this.showBlocker(),this.show()},showBlocker:function(){var e=t(this._queryId);if(!e.length){e=t("<div>",{id:this._dialogId,class:"dialogBlocker show"}),this.blockerClass&&e.addClass(this.blockerClass),this.className&&e.addClass(this.className),e.height(t(document).height());var n=t("<div>",{id:this._dialogId+"Container",class:"dialogBlockerCell"});t("body").append(e.append(n.text(i.get("loading")))),e.on("keydown",this.onKey.bind(this))}this._container().parent().on("primaryaction",null,{allowPropagationDefaultAction:!0},(function(e){s.setEventProperty(e,s.EVENT_DIALOG,!0)}))},show:function(){var e=this._container();if(this._width&&e.css("max-width",this._width),e.length){e.empty();var n=t("<div>",{class:"modalDialog",role:"dialog","aria-labelledby":this.getId(),"aria-describedby":this.getContentId()});if(!0===this._showHeader){var i;i=t("<div>",{class:"dialogHeader"});var r=this.renderTitle(t("<header>",{class:"dialogTitle","aria-label":this.titleAriaLabel||this.title,role:"banner",id:this.getId()})),s=this.renderCloseX();i.append(r,s),n.append(i)}var o=this.renderContent(t("<div>",{class:"dialogContent",id:this.getContentId()})),a=this.renderFooter(t("<footer>"));n.append(o,a),e.append(n),this.enableLooping(n),this.setFocus(),t("body").addClass("openedDialog")}},getContentId:function(){return this.contentId},getId:function(){return this.id},setFocus:function(){var e=this._container().find("footer").find(".dialogButton")[0];e&&e.focus()},renderContent:function(e){return e.text("Dialog Content"),e},renderTitle:function(e){return e.text("Dialog Title"),e},verticalAlignDialog:function(){this._container().addClass("dialogVerticalAlign")},renderCloseX:function(){if(!this._showCloseX)return null;var e=t("<div>",{class:"dialogCloseX",title:i.get("close"),"aria-label":i.get("close"),role:"button",tabIndex:"0"});return s.setIcon(e,"dismiss_16"),e.on("primaryaction",this.cancel.bind(this)),e},findFooterButton:function(e){return n.find(this._footerButtons,(function(t){return t.id===e}))},renderFooter:function(e){for(var n=t("<div>",{class:"footerContainer"}),i=0,s=this._buttons.length;i<s;i++){var o=this._getButtonDef(this._buttons[i]),a=new r({buttonSpec:{class:"dialogButton "+o.type,label:o.text,onSelect:o.handler.bind(this),id:o.defaultId}});"string"==typeof o.style&&""!==o.style&&(a.$el[0].style.cssText=o.style),this._footerButtons.push(a),a.render(),n.append(a.$el)}return e.append(n),e},_getButtonDef:function(e){var t={ok:{text:i.get("ok"),handler:this.ok,type:"primary",defaultId:"ok"},cancel:{text:i.get("cancel"),handler:this.cancel,type:"secondary",defaultId:"cancel"},close:{text:i.get("close"),handler:this.cancel,type:"primary",defaultId:"close"}};return"object"===(void 0===e?"undefined":_typeof(e))?(e.defaultId&&(e.text||(e.text=t[e.defaultId].text),e.handler||(e.handler=t[e.defaultId].handler),e.type||(e.type=t[e.defaultId].type)),e):t[e]},onKey:function(e){return 27!==e.keyCode||(this.cancel(),!1)},ok:function(){this.hide()},cancel:function(){this.hide()},enableOk:function(e){var n=t(".dialogButton",this._container()).eq(0);n.toggleClass("disabled",!1===e),!1===e?n.attr("disabled","disabled"):n.removeAttr("disabled")},disableOk:function(){this.enableOk(!1)},_container:function(){return t(this._queryId+"Container")}});return o})),define("baglass/core-client/js/core-client/ui/dialogs/GenericViewDialog",["./BaseDialog","lodash"],(function(e,t){var n=e.extend({_buttons:["ok","cancel"],_okCallback:null,_cancelCallback:null,init:function(e){this.id=e.id||this.id,this.title=e.title,this.view=new e.viewClass(e.viewOptions),this._okCallback=e.okCallback,this._cancelCallback=e.cancelCallback,n.inherited("init",this,arguments)},destroy:function(){this.view&&this.view.remove(),n.inherited("destroy",this,arguments)},renderContent:function(e){var n=this.view.render();return t.isFunction(this.view.setFocus)&&(this.setFocus=function(){n&&n.done?n.done(function(){this.view.setFocus()}.bind(this)):this.view.setFocus()}.bind(this,n)),e.append(this.view.$el),e},renderTitle:function(e){return e.text(this.title),e},ok:function(){if(n.inherited("ok",this,arguments),this._okCallback)return this._okCallback()},cancel:function(e){if(e&&e.gesture&&e.gesture.preventDefault(),n.inherited("cancel",this,arguments),this._cancelCallback)return this._cancelCallback()},open:function(){n.inherited("open",this,arguments),this.view.onOpen&&this.view.onOpen()},hide:function(){n.inherited("hide",this,arguments),t.isFunction(this.view.onHide)&&this.view.onHide()}});return n})),define("baglass/common/views/PreviewView",["../../core-client/js/core-client/ui/View","jquery"],(function(e,t){var n=e.extend({events:{},init:function(e){n.inherited("init",this,arguments),t.extend(this,e)},render:function(){return new Promise(function(e,n){try{var i=t.extend({ui_preview:!0,factoryMode:null},this.urlMap);"login"===i.perspective&&(i.perspective="IBMlogin");var r=this.glassContext.getUrl({urlMap:i}),s=t("<iframe>",{frameBorder:0,src:r,tabindex:"-1"}).css({width:"100%",flex:"1 1 auto"}),o=t("<div>").addClass("previewDialogOverlay");this.$el=s.add(o),s.on("load",function(){t(document.activeElement).on("blur",(function(e){setTimeout((function(){document.activeElement===s[0]&&t(e.target).focus()}),0)})),e(this.el)}.bind(this))}catch(e){n(e)}}.bind(this))}});return n})),define("baglass/common/ui/PreviewDialog",["../../core-client/js/core-client/ui/dialogs/GenericViewDialog","../../nls/StringResources","../views/PreviewView"],(function(e,t,n){"use strict";var i=e.extend({init:function(e){this.options=e;var r={buttons:["close"],viewClass:n,title:t.get("previewDialogTitle"),className:"previewDialog",viewOptions:{glassContext:e.glassContext,urlMap:e.urlMap}};i.inherited("init",this,[r])}});return i})),define("baglass/common/ui/SlideoutView",["../../core-client/js/core-client/ui/View"],(function(e){return e.extend({init:function(){e.inherited("init",this,arguments)},render:function(){return Promise.resolve(this.el)},setFocus:function(){this.$el.focus()},canHide:function(){return!0}})})),function(){var e,t,n=function(e){var t='<div class="inputRow flex property_'+e.id+'">\n\t';return e.label&&(t+='\n\t<div class="propertyName singleLine hide l_'+e.name+'" id="row_'+e.id+'">'+e.label+"</div>\n\t"),t+='\n</div>\n<div class="inputRow flex property_'+e.id+'">\n\t\t<input type="'+(e.inputType||"password")+'" aria-labelledby="row_'+e.id+' com-ibm-ca-confirmPassword" placeholder="',e.placeholder&&(t+=" "+e.placeholder+" "),t+='"\n\t\t\tclass="propertyValue toggleEdit'+e.id+" ",!0===e.editable&&(t+="editable"+e.id),t+=" handleReturnKey v_"+e.name+'" />\n</div>\n'};e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define?define("baglass/common/ui/properties/templates/DoubleLineWithInput",[],(function(){return n})):(window.__templates=window.__templates||{},window.__templates.DoubleLineWithInput=n)}(),define("baglass/common/ui/properties/DoubleLineWithInput",["../../../core-client/js/core-client/ui/View","./templates/DoubleLineWithInput","jquery"],(function(e,t,n){"use strict";const i=e.extend({ellipses:!0,init:function(e){(e.editable||e.editCallback)&&(this.events||(this.events={}),this.events["keyup .editable"+e.id]="_handleEditKeyup",this.events["clicktap .toggleEdit"+e.id]="_handleEditClick"),i.inherited("init",this,arguments),n.extend(this,e)},render:function(){const e=t({label:this.label,editable:!(!this.editCallback&&!this.editable),inputType:this.inputType,placeholder:this.placeholder,value:this.value,id:this.id,name:this.name});this.$el.append(e)},_handleEditClick:function(){this.editClick&&this.editClick(this.name)},_handleEditKeyup:function(){this.editCallback&&this.editCallback(this.name)},setFocus:function(){this.$el.find("input").first().focus()}});return i})),define("baglass/common/ui/SubmitPasswordDialog",["../../core-client/js/core-client/ui/dialogs/GenericViewDialog","../../nls/StringResources","../../core-client/js/core-client/utils/ClassFactory","../ui/properties/DoubleLineWithInput","jquery"],(function(e,t,n,i,r){"use strict";return e.extend({_ClassFactory:n,init:function(){},openSubmitPasswordDialog:function(e){this.oldPasswordName="oldPassword",this.newPasswordName="newPassword",this.confirmPasswordName="confirmNewPassword";var t=r.Deferred();return this._ClassFactory.loadModule("../ui/properties/PropertyUIControl").done(function(n){var i;e.id="submitPasswordDialogTitle",e.viewClass=n,e.viewOptions.displayPrompts?(e.viewOptions.items=this._getCreateCredentialItems(e.viewOptions.displayPrompts),i=e.viewOptions.displayPrompts[0].name):(e.viewOptions.items=this._getUpdatePasswordItems(),i=this.oldPasswordName),this._ClassFactory.instantiate("../ui/dialogs/GenericViewDialog",e).then(function(e){this.dialog=e,this.dialog.view.setFocus=function(){n.prototype.setFocus.call(this,i)}.bind(this.dialog.view),this.dialog.view.$el.addClass("submitPasswordDialog"),this.dialog.open(),r(".dialogButton.primary").addClass("disabled"),r(".dialogBlockerCell").addClass("inputDialog")}.bind(this),t.reject),t.resolve(this)}.bind(this),t.reject),t.promise()},_showPassword:function(e,t){t?this.dialog.view.$el.find("input:password").each((function(e,t){r(t).attr("type","text")})):r('input[class*="'+this.oldPasswordName+'"],input[class*="'+this.newPasswordName+'"],input[class*="'+this.confirmPasswordName+'"]').each((function(e,t){r(t).attr("type","password")}))},_addSelectedClassAndLabel:function(e){var t=r(".editing");t[0]&&t.removeClass("editing");var n=r('div[class*="'+e+'"]');n.addClass("editing");var i=n.parent().nextAll(".separator:first");i[0]&&i.addClass("editing")},_enableOk:function(e){var t=r(".dialogButton").eq(0);t.toggleClass("disabled",!1===e),!1===e?t.attr("disabled","disabled"):t.removeAttr("disabled")},_checkPasswordMatch:function(){var e,n=r('input[class*="'+this.confirmPasswordName+'"]'),i=r('input[class*="'+this.newPasswordName+'"]').val(),s=n.val(),o=n.parent().next(".separator");i!==s?(this._enableOk(!1),(e=r(".confirm"))[0]?(e.removeClass("confirm"),e.addClass("warning"),e.html(t.get("passwordNotMatch"))):0===r(".warning").length&&(e=r('<div class="inputRow"><div id="com-ibm-ca-confirmPassword" class="warning" aria-live="assertive">'+t.get("passwordNotMatch")+"</div></div>")).insertAfter(o)):i&&s&&i===s?(this._enableOk(!0),(e=r(".warning"))[0]&&(e.removeClass("warning"),e.addClass("confirm"),e.html(t.get("passwordMatch")))):(this._enableOk(!1),r(".warning").parent().remove(),r(".confirm").parent().remove())},_getCreateCredentialItems:function(e){var n=[],s=[];return r.each(e,function(e,r){"text"===r.type?n.push({module:i,name:r.name,placeholder:r.caption+" "+(r.value||""),inputType:"text"},{type:"Separator"}):"textnoecho"===r.type&&(this.newPasswordName=r.name,s.push({module:i,name:this.newPasswordName,label:t.get("password"),placeholder:t.get("password"),editClick:this._addSelectedClassAndLabel.bind(this),editCallback:this._checkPasswordMatch.bind(this)},{type:"Separator"},{module:i,name:this.confirmPasswordName,editCallback:this._checkPasswordMatch.bind(this),label:t.get("confirmPassword"),placeholder:t.get("confirmPassword"),editClick:this._addSelectedClassAndLabel.bind(this)},{type:"Separator"},{type:"CheckBox",name:"showPassword",label:t.get("showPassword"),controlOnLeft:!0,checked:!1,onChange:this._showPassword.bind(this)}))}.bind(this)),n.concat(s)},_getUpdatePasswordItems:function(){return[{module:i,name:this.oldPasswordName,editable:!0,label:t.get(this.oldPasswordName),placeholder:t.get(this.oldPasswordName),editClick:this._addSelectedClassAndLabel.bind(this)},{type:"Separator"},{module:i,name:this.newPasswordName,label:t.get(this.newPasswordName),placeholder:t.get(this.newPasswordName),editCallback:this._checkPasswordMatch.bind(this),editClick:this._addSelectedClassAndLabel.bind(this)},{type:"Separator"},{module:i,name:this.confirmPasswordName,editCallback:this._checkPasswordMatch.bind(this),label:t.get(this.confirmPasswordName),placeholder:t.get(this.confirmPasswordName),editClick:this._addSelectedClassAndLabel.bind(this)},{type:"Separator"},{type:"CheckBox",name:"showPassword",label:t.get("showPassword"),controlOnLeft:!0,checked:!1,onChange:this._showPassword.bind(this)}]}})})),define("baglass/common/ui/all",["./PreviewDialog","./SlideoutView","./SubmitPasswordDialog"],(function(){})),define("baglass/common/views/all",["./PreviewView"],(function(){})),define("baglass/utils/ThemeUtils",[],(function(){return{DEFAULT_BRAND_TEXT:"IBM Cognos Analytics with Watson",DEFAULT_BRAND_TEXT_SMALL:"IBM Cognos Analytics with Watson",DEFAULT_BRAND_ICON:"common-CA_Avatar_Colour_64",DEFAULT_BRAND_ICON_SMALL:"common-CA_Avatar_Black_24",THEME_URL:"v1/plugins/themes/current/spec.json",getCurrentThemeValues:function(e){return e.getCoreSvc(".Ajax").ajax({url:this.THEME_URL,type:"GET"}).then((function(e){const t=e.data;return t.brandText=_.unescape(e.data.brandText),t.brandTextSmall=_.unescape(e.data.brandTextSmall),t})).catch(function(){return{brandText:this.DEFAULT_BRAND_TEXT,brandTextSmall:this.DEFAULT_BRAND_TEXT_SMALL,images:{brandIcon:this.DEFAULT_BRAND_ICON,brandIconSmall:this.DEFAULT_BRAND_ICON_SMALL}}}.bind(this))}}})),define("baglass/core-client/js/core-client/utils/UrlUtils",[],(function(){var e=function(){};return e.prototype.base64Encode=function(e){return e?btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):null},e.prototype.base64Decode=function(e){if(!e)return null;var t=e.replace(/-/g,"+").replace(/_/g,"/"),n=t.length%4;return 2===n?t+="==":3===n&&(t+="="),atob(t)},new e})),define("caglass/ajax/CAAuthentication",["lodash","jquery","baglass/utils/Utils","baglass/core-client/js/core-client/utils/Utils","baglass/core-client/js/core-client/utils/BrowserUtils","baglass/core-client/js/core-client/utils/Deferred","baglass/core-client/js/core-client/utils/UrlUtils","baglass/nls/StringResources","baglass/core-client/js/core-client/errors/BaseError"],(function(e,t,n,i,r,s,o,a,l){var c=function(){};return c.prototype.login=function(t,n){var i=n||{initialLogin:!0};return e.isUndefined(i.initialLogin)&&(i.initialLogin=!0),Promise.resolve().then(function(){if(!0===i.skipCALogin){var e=new Error;return e.redirectUrl=i.redirectUrl,e.state={skipCALogin:!0},this._promptForExternalLogin(t,e,{relogin:!0})}return this._isLoggedIn(t,i).catch(e=>this._promptForLogin(t,e,i))}.bind(this)).then((function(e){return t.getCoreSvc(".Events").trigger("login:success"),e}))},c.prototype._isLoggedIn=function(e,t){return new Promise((n,i)=>{this._getAuthInfo(e,t).then(i=>{this._processSuccessfulLogin(e,i,t).then(()=>{n(i)})},n=>{i(this._processAuthenticationError(e,n.jqXHR,t))})})},c.prototype._getAuthInfo=function(e,t){var n=c.LOGIN_URL;return t&&!0===t.relogin&&!0!==e.authInfo.isAnonymous?n+="?h_CAM_action=logonAs":t&&!0===t.initialLogin&&t.queryString&&(n=this._buildURLWithQueryString(n,t.queryString,e)),e.getCoreSvc(".Ajax").ajax({type:t.requestMethod,url:n,contentType:"application/json; charset=utf-8",dataType:"json",skipErrorHandling:!0}).then((function(e){return e.data}))},c.prototype._buildURLWithQueryString=function(t,i,r){const s=i.CAMNamespace;e.isString(s)||e.isUndefined(s)||r.getCoreSvc(".Logger").info("There can only be 1 namespace in the queryString. Ignoring.");const o=n.getFilteredLoginParameters(r,i).map(e=>{const t=encodeURIComponent(e.name),n=encodeURIComponent(e.value);return"".concat(t,"=").concat(n)}).join("&");return o&&(t+="?".concat(o)),t},c.prototype.legacyLogin=function(e,t){return this.submitCredentials(e,{}).catch(function(n){return this._promptForLogin(e,n,t)}.bind(this))},c.prototype.secondaryLogin=function(e,t){const n={secondaryLogin:!0,newWindow:!0};return t&&(n.authError=t),this.submitCredentials(e,{}).then((function(e){return i.getCurrentWindow().location.reload(),e})).catch(function(t){return this._promptForLogin(e,t,n)}.bind(this))},c.prototype.externalLogin=function(e,t,n){var r=n||{};return r.redirectUrl||(r.redirectUrl=i.getCurrentWindow().location.href),this._promptForLogin(e,t,r)},c.prototype._promptForLogin=function(e,t,i){var r=e.getSSOLoginURL();return r&&!n.isFactoryMode()?this._promptWithSSOLoginUrl(r):!0===t.isExternalLogin?this._promptForExternalLogin(e,t,i):this._promptForInternalLogin(e,t,i)},c.prototype._promptWithSSOLoginUrl=function(e){var t=i.getCurrentWindow();if(!t.__ca_ssologin_in_progress__){var r=n.buildRedirectURL(e,t.location.href);t.location.assign(r),t.__ca_ssologin_in_progress__=new Promise((function(){}))}return t.__ca_ssologin_in_progress__},c.prototype._promptForInternalLogin=function(n,r,o){var a=i.getCurrentWindow();if(!a.__ca_login_in_progress__){a.__ca_login_in_progress__=new s;var l=e.extend(o)||{};l.authInfo=n.authInfo,t(a).one("ca.loginSuccessful",this._onLoginSuccessful.bind(this,n,l)),t(a).on("popstate.ca_login",this._onPopStateFromLogin.bind(this,n,l));var c={content:{origin:l}};n.appController.openLoginView(c)}return a.__ca_login_in_progress__.promise},c.prototype._onPopStateFromLogin=function(e,t){if(i.getCurrentWindow().__ca_login_in_progress__){var n={content:{origin:t}};if(t.secondaryLogin){var r=new l("Login was cancelled by the user.");i.getCurrentWindow().__ca_login_in_progress__.reject(r),i.getCurrentWindow().__ca_login_in_progress__=void 0}else t.initialLogin&&e.appController.openLoginView(n)}},c.prototype._onLoginSuccessful=function(e,n,r,s){var o=-1!=navigator.userAgent.indexOf("CAMOBILE"),a=e.getSvcSync(".MobileCompleteAuthentication");o&&a?a.onSuccess():(i.getCurrentWindow().__ca_login_in_progress__.resolve(s),i.getCurrentWindow().__ca_login_in_progress__=void 0,t(i.getCurrentWindow()).off("popstate.ca_login"),s&&!0===s.stayAnonymous?e.appController.openPreviousAppView():!0===n.relogin&&!0!==e.authInfo.differentAccountLogin?e.appController.isOpeningAView()||e.appController.openPreviousAppView():!0!==n.legacyLogin&&!0!==n.initialLogin&&!0!==n.secondaryLogin&&this._reloadPage(e))},c.prototype._promptForExternalLogin=function(t,n,a){var l=t.window||i.getCurrentWindow(),c=n.redirectUrl,u=n.state||{};if(u.isMobile=-1!=navigator.userAgent.indexOf("CAMOBILE"),!l.__ca_external_login_in_progress__)if(l.__ca_external_login_in_progress__=new s,i.isInIframe(l)||a&&(!0===a.relogin||!0===a.authtc)){if(!0===u.skipCALogin&&!0!==a.authtc?c+="?state="+o.base64Encode(JSON.stringify(u)):((u=e.extend(u,e.omit(a,"authInfo"))).newWindow=!0,c+="&state="+o.base64Encode(JSON.stringify(u))),r.isIE()&&i.isInIframe(l))try{l.localStorage.removeItem("externalLoginResult");l.addEventListener("storage",(function e(t){var n;if(t.key&&"externalLoginResult"===t.key&&(n=t.newValue),n){l.removeEventListener("storage",e);var i=JSON.parse(n);l.localStorage.removeItem("externalLoginResult"),l.postMessage(i,l.location.origin)}}))}catch(e){t.getCoreSvc(".Logger").error(e)}l.addEventListener("message",this._onExternalLoginComplete.bind(this,t),{once:!0}),this._externalWindow=l.open(c,"")}else a&&a.redirectUrl?(u=e.extend(e.clone(u),e.omit(a,["authInfo","authError"]))).redirectUrl=a.redirectUrl:u.redirectUrl=l.location.href,c+="&state="+o.base64Encode(JSON.stringify(u)),l.location.assign(c,!0);return l.__ca_external_login_in_progress__.promise},c.prototype._onExternalLoginComplete=function(e,t){i.getCurrentWindow().__ca_external_login_in_progress__.resolve(t.data),delete i.getCurrentWindow().__ca_external_login_in_progress__,t.data||i.getCurrentWindow().location.assign(t.origin),this._externalWindow&&(this._externalWindow.close(),this._externalWindow=null)},c.prototype.submitCredentials=function(e,t,n){return new Promise((i,r)=>{var s={type:"POST",url:c.LOGIN_URL,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",skipErrorHandling:!0};e.getCoreSvc(".Ajax").ajax(s).then(t=>{var r=t.data;this._processSuccessfulLogin(e,r,n).then(()=>{i(r)})},t=>{r(this._processAuthenticationError(e,t.jqXHR,n))})})},c.prototype.submitLoginTokens=function(e,t){var n={type:"GET",url:c.LOGIN_URL,data:t,skipErrorHandling:!0};return e.getCoreSvc(".Ajax").ajax(n).catch(n=>this.recoverFromCamError(e,n,t))},c.prototype.recoverFromCamError=function(t,n,i){const r=this._processAuthenticationError(t,n.jqXHR);if(r.displayObjects&&r.displayObjects.length>0){var s=e.extend(i)||{};return s.authError=r,this._promptForLogin(t,r,s)}return Promise.reject(n)},c.prototype._reloadPage=function(e){var t=i.getCurrentWindow();if(t.external&&t.external.HasOnClose)return t.external.OnClose(0);const n=e&&e.gateway||t.location.pathname;t.location=n},c.prototype._isDifferentPrimaryUser=function(e,t){return e&&t&&t.id!==e},c.prototype._processSuccessfulLogin=function(e,t,n){if(e.authInfo&&!0===e.authInfo.isAnonymous)return Promise.try(function(){if(n&&!0===n.relogin)return t;this._reloadPage(e)}.bind(this));var i=e&&e.profile&&e.profile.account&&e.profile.account.id,r=e.getCoreSvc(".UserProfile");return Promise.try((function(){return r.getAccountInfo(t)})).then(function(t){this._isDifferentPrimaryUser(i,t)&&this._reloadPage(e)}.bind(this)).catch((function(t){e.getCoreSvc(".Logger").error("Failed to get user account",t)})).then((function(){if(e.authInfo=t,e.appController.reloadTheme(),r.updatePreferences)return r.updatePreferences(!i)}))},c.prototype.storeCredentials=function(e){var t={data:{h_CAM_action:"generateTC"},type:"GET",url:c.LOGIN_URL,contentType:"application/json; charset=utf-8",dataType:"json",skipErrorHandling:!0};return e.getCoreSvc(".Ajax").ajax(t).fail(t=>{var n=this._processAuthenticationError(e,t.jqXHR);if(!0===n.isExternalLogin){var i={redirectUrl:n.redirectUrl,authtc:!0};return this.externalLogin(e,n,i).fail(t=>{throw e.appController.showToast(t,{type:"error"}),t})}throw n})},c.prototype.processAuthenticationError=function(e,t,n){return this._processAuthenticationError(e,t,n)},c.prototype._processAuthenticationError=function(e,t,n){var i=new Error;i.httpCode=t.status,i.jqXHR=t;try{this._processAuthDisplayObjects(i,t),this._processAuthErrorCodeAndMessage(e,i,t),this._processLoginParameters(e,i,n)}catch(e){i.code=c.LOGIN_FATAL,i.message=a.get("invalidLoginResponse")}return i},c.prototype._processAuthDisplayObjects=function(e,t){if(e.displayObjects=[],t.responseJSON.promptInfo&&t.responseJSON.promptInfo.displayObjects){e.displayObjects=t.responseJSON.promptInfo.displayObjects;for(var n={},i=e.displayObjects,r=0;r<i.length;r++)if(i[r].name===c.CAM_REDIRECT_URL_NAME)e.isExternalLogin=!0,e.redirectUrl=i[r].value;else{let e=i[r].name;Object.keys(n).indexOf(e)>-1&&(e+="_DUP",i[r].name=e),n[e]=i[r].value}!0===e.isExternalLogin&&(e.state=n)}},c.prototype._processAuthErrorCodeAndMessage=function(e,t,n){this._processAuthErrorCode(t,n),this._processAuthErrorMessage(e,t,n),t.code===c.LOGIN_UNKNOWN_LOGIN_ERROR&&""===t.message&&(t.message=a.get("credentialSubmitError"))},c.prototype._processAuthErrorCode=function(e,t){var n=t.responseJSON.errorCodeString;e.code="camAuthUserRecoverable"===n?c.LOGIN_INVALID_CREDENTIALS:"camAuthUnrecoverable"===n?c.LOGIN_DEADEND:c.LOGIN_UNKNOWN_LOGIN_ERROR},c.prototype._processAuthErrorMessage=function(e,t,n){if(n.responseJSON.messages.length>0){var i=n.responseJSON.messages,r=i.length;if(n.status!==e.ajaxCodes.UNAUTHORIZED)t.message=i[0].messageString?i[0].messageString:i[0];else{var s=i[r-1].messageString?i[r-1].messageString:i[r-1];-1!==s.search("CAM-AAA-0036")||-1!==s.search("CAM-AAA-0125")?t.message=a.get("invalidLogin"):t.message=s}}else t.message=""},c.prototype._processLoginParameters=function(e,t,i){var r="";if(i){r=i.queryString;var s=n.getFilteredLoginParameters(e,r);if(t.state)for(var o=0;o<s.length;o++)t.state[s[o].name]=s[o].value;this._appendLoginParams(t,s)}},c.prototype._appendLoginParams=function(t,n){var i=[];t.displayObjects&&(e.each(t.displayObjects,(function(e){-1==i.indexOf(e.name)&&i.push(e.name)})),e.each(n,(function(e){var n=i.indexOf(e.name);-1==n?(e.type="hidden",t.displayObjects.push(e)):null==t.displayObjects[n].type&&(t.displayObjects[n].type="hidden")})))},c.LOGIN_URL=(c.BASE_URL="v1")+"/login",c.CAM_REDIRECT_URL_NAME="camRedirectURL",c.LOGIN_FATAL="LOGIN_FATAL",c.LOGIN_DEADEND="LOGIN_DEADEND",c.LOGIN_UNKNOWN_LOGIN_ERROR="LOGIN_UNKNOWN_LOGIN_ERROR",c.LOGIN_INVALID_CREDENTIALS="LOGIN_INVALID_CREDENTIALS",c})),define("caglass/ajax/CASimpleAuthentication",["./CAAuthentication"],(function(e){var t=function(){};return(t.prototype=Object.create(new e))._processSuccessfulLogin=function(e,t,n){return e.authInfo=t,Promise.resolve(t).then(()=>{if(n){if(n.relogin&&!n.newWindow)return t.updatedco?e.getCoreSvc(".DigitalContext").initialize().then(()=>this._reloadIfDifferentUserLogin(e,t)):this._reloadIfDifferentUserLogin(e,t)}else this._reloadPage(e)})},t.prototype._reloadIfDifferentUserLogin=function(e,t){var n=e&&e.profile&&e.profile.account&&e.profile.account.id,i=e.getCoreSvc(".UserProfile");return Promise.try((function(){return i.getAccountInfo(t)})).then(e=>{if(this._isDifferentPrimaryUser(n,e))return this._reloadPage(),t.differentAccountLogin=!0,t}).catch((function(t){e.getCoreSvc(".Logger").error("Failed to get user account",t)}))},t})),define("caglass/nls/GlassResources",{root:!0,cs:!0,da:!0,de:!0,es:!0,fi:!0,fr:!0,hr:!0,hu:!0,it:!0,ja:!0,kk:!0,ko:!0,no:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-br":!0,ro:!0,ru:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-cn":!0,"zh-tw":!0}),define("caglass/nls/root/GlassResources",{credentialCreate:"Create",communicationErrorMessage:"A network error has occurred. Http code: %{code}",maintenanceLink:"More info",credentialChange:"Renew",maintenanceTitle:"Maintenance",credentialRenewed:"Your credentials were renewed with your current user ID and password.",extWarningMessage:"Some or all features of extension %{extName} may be disabled due to a failed check on property %{specAttr}.",communicationErrorTitle:"Communication Error",ok:"OK",credentialCreateSuccess:"You have successfully created your credentials",secondaryLoginRefresh:"Refresh the page now?",secondaryLoginSuccess:"Successfully logged into an additional Namespace. The page must be refreshed to use your new capabilities.",errLoadingView:"The specified view is no longer available. The default home view is being displayed instead.",extWarningTitle:"Extension warning",wrongPassword:"Unable to authenticate",error404NotFound:"Error 404 resource not found"}),define("caglass/nls/StringResources",["i18n!caglass/nls/GlassResources","baglass/core-client/js/core-client/utils/Lexicon"],(function(e,t){"use strict";var n=new t({data:e,allowMissing:!0,verbose:!1});return{get:function(e,i){var r=n.translate(e,i);return r!==e?r:t.NOT_TRANSLATED+"("+e+")"}}})),define("caglass/ajax/CAErrorHandler",["./CAAuthentication","jquery","caglass/nls/StringResources"],(function(e,t,n){return class{constructor(e){this.CAM_LOCATION="X-CAM-Location",this.isOpeningLoginView=!1,t.extend(this,e)}handleError(e,t,n){const i=e.jqXHR.status;return Promise.resolve().then(()=>{if(i===n.ajaxCodes.UNAUTHORIZED)return this._getCAAuthentication().login(n,{relogin:!0}).then(()=>({retry:!0}));if(i===n.ajaxCodes.AUTH_DENIED){const t=JSON.parse(e.jqXHR.responseText);if("siteminder"===t.origin&&t.redirectUrl)return this._getCAAuthentication().login(n,{relogin:!0,skipCALogin:!0,redirectUrl:t.redirectUrl}).then(()=>({retry:!0}))}return 503===i&&this._showError(i,n),{retry:!1}})}_getCAAuthentication(){return new e}_showError(e,t){t.appController.showErrorMessage(n.get("communicationErrorMessage",{code:e}),n.get("communicationErrorTitle"))}}})),define("caglass/ajax/HandleError",["./CAErrorHandler"],(function(e){return class{constructor(t){this.glassContext=t,this.caErrorHandler=new e}handleError(e,t){let{params:n}=e;return!0===n.skipErrorHandling?Promise.reject(t):this._getErrorHandler().handleError(t,{},this.glassContext).then(e=>!0===e.retry?n.onReissueRequest?n.onReissueRequest(n).then(e=>this.glassContext.getCoreSvc(".Ajax").ajax(e)):this.glassContext.getCoreSvc(".Ajax").ajax(n):Promise.reject(t),e=>(this.glassContext.getCoreSvc(".Logger").error("error while processing the initial error",t),Promise.reject(e)))}_getErrorHandler(){return this.caErrorHandler}}})),define("caglass/ajax/HandleResponse",[],(function(){var e=function(e){this.glassContext=e};return e.prototype.handleResponse=function(e){return Promise.try(function(){this.glassContext.services.exists(".Notification")&&this.glassContext.getSvc(".Notification").then((function(t){t.pollForNewNotifications(e.params)}))}.bind(this)).catch((function(){}))},e})),define("caglass/ajax/PrepareRequest",["baglass/utils/Utils"],(function(e){var t=function(e){this.glassContext=e};return t.prototype.prepareRequest=function(e){this._addDefaultHeaders(e),this._isServiceUrl(e.params.url)&&(e.params.url=this._screenUrl(e.params.url))},t.prototype._addDefaultHeaders=function(t){var n=t.params;return n.headers=n.headers||{},n.headers["X-XSRF-TOKEN"]=e.getCookieValue("XSRF-TOKEN"),e.isFactoryMode()&&(n.headers.X_BI_UI_FACTORYMODE="true"),this._shouldAddOverrideHeader(t.params.type||t.params.method)&&this._addOverrideHeader(t,t.params.type||t.params.method),Promise.resolve()},t.prototype._shouldAddOverrideHeader=function(e){const t=this.glassContext.getCoreSvc(".Config").getXSSChecking();return!!(this.MASKED_METHODS.indexOf(e)>=0&&t)},t.prototype._addOverrideHeader=function(e,t){e.params.headers["X-Http-Method-Override"]=t,e.params.type="POST",e.params.method="POST"},t.prototype._screenUrl=function(e){var t=e.split("?");return t[0]=t[0].replace("/.","/_dot_"),t[0]=t[0].replace(/~/g,"_tilde_"),e=t.join("?")},t.prototype._isServiceUrl=function(e){return e&&e.indexOf("v1/")>=0},t.prototype.MASKED_METHODS=["PUT","DELETE"],t})),define("caglass/ajax/PrepareRequestURL",["lodash","baglass/utils/Utils"],(function(e,t){class n{constructor(e){this.glassContext=e}prepareRequest(e){!0===this.glassContext.getCoreSvc(".Config").getXSSChecking()&&(this._isGET(e)?this._CAFEncode(e):this._CAFEncodePostPutQueryString(e))}_CAFEncode(i){const r=this.glassContext.getCoreSvc(".CAFEncoding");let s=this._getDataObject(i.params.data);if(i.params.url){const n=this._getQueryString(i.params.url),r=t.deparam(n,!1);e.extend(s,r),i.params.url=i.params.url.replace("?"+n,"")}this._encodeObject(s,r),i.params.data=s,i.params.headers[n.XSS_ENCODING_HEADER]=!0}_CAFEncodePostPutQueryString(e){if(e.params.url){const n=this.glassContext.getCoreSvc(".CAFEncoding"),i=this._getQueryString(e.params.url);if(i&&i.length>0){const r=t.deparam(i,!1),s=Object.keys(r).map(e=>"".concat(e,"=").concat(n.cafEncodeQSValue(r[e]))).join("&");e.params.url=e.params.url.replace("?".concat(i),"?".concat(s))}}}_isGET(e){return e.params.method&&"GET"===e.params.method.toUpperCase()||e.params.type&&"GET"===e.params.type.toUpperCase()||void 0===e.params.method&&void 0===e.params.type}_encodeObject(t,n){for(let i in t)e.isObject(t[i])?this._encodeObject(t[i],n):e.isString(t[i])&&(t[i]=n.encode(t[i]))}_getQueryString(e){return-1!==e.indexOf("?")?e.substring(e.indexOf("?")+1):""}_getDataObject(t){let n={};return e.isUndefined(t)||(e.isString(t)?e.extend(n,this._parseDataString(t)):e.isObject(t)&&e.extend(n,t)),n}_parseDataString(e){try{return JSON.parse(e)}catch(n){return t.deparam(e,!1)}}}return n.XSS_ENCODING_HEADER="X-CA-XSSEncoded",n})),define("caglass/ajax/all",["./CASimpleAuthentication","./CAErrorHandler","./HandleError","./HandleResponse","./PrepareRequest","./PrepareRequestURL"],(function(){})),define("baglass/api/BaseOpener",["../core-client/js/core-client/ui/core/Class","../nls/StringResources","../core-client/js/core-client/errors/BaseError"],(function(e,t,n){"use strict";return e.extend({_context:null,onSelectItem:function(e){this.getCustomSpec=this._getMenuItemCustomSpec,this.onPress(e)},onPress:function(e){return this._context=e,this._sendRequest().then(function(e){return this._openObject(e)}.bind(this))},getCustomSpec:function(){return this._context.target.plugin.itemSpec},_getMenuItemCustomSpec:function(){return this._context.target.plugin.itemSpec.items[this._context.target.specItemIndex]},getRequestParameters:function(){return"ancestors,owner,modificationTime,permissions,defaultName"},_openObject:function(e){return Promise.resolve(this.getActionId(e)).then(function(t){if(!t)throw new n("Undefined actionId");return this._context.glassContext.performAction(t,this._buildPayload(e,t))}.bind(this)).then(function(){return this._context.glassContext.getSvc(".Content")}.bind(this)).then((function(t){return t.addToMRU(e)})).catch(function(t){throw this._showToastOnLaunchError(e),t}.bind(this))},_sendRequest:function(){return this._buildRequestURL().then(function(e){return this._context.glassContext.getCoreSvc(".Ajax").ajax({url:e,type:"GET",dataType:"json",data:{fields:this.getRequestParameters()}})}.bind(this)).then((function(e){return e.data.data[0]})).catch(function(e){var n=e.requestInfo.jqXHR,i="",r=n.responseJSON;if(r){if(r.messages)i=n.responseJSON.messages.join("\n");else if(r.cause)try{i=JSON.parse(r.cause).messages.join("\n")}catch(e){i=r.cause}}else""===(i=n.responseText)&&404===e.code&&(i=t.get("error404NotFound"));this._context.glassContext.showErrorMessage(i,"Error")}.bind(this))},_buildRequestURL:function(){var e=this.getCustomSpec();return this._context.glassContext.getSvc(".Content").then(function(t){return e.options.id?t.getBaseObjectsURL()+"/"+encodeURIComponent(e.options.id):t.getPathUrl(e.options.path)}.bind(this))},_buildPayload:function(e,t){return{glassContext:this._context.glassContext,target:{activeObject:{aSelectedContext:[e]},itemId:t}}},_showToastOnLaunchError:function(e){var n=e.defaultName;this._context.glassContext.showToast(t.get("openPerspectiveFailed",{name:n}),{type:"error"})},getActionId:function(e){return"com.ibm.bi.contentApps.defaultAction."+e.type}})})),define("caglass/api/DashboardOpener",["baglass/api/BaseOpener"],(function(e){"use strict";return e.extend({})})),define("caglass/api/ExtensionViewAdaptor",["baglass/api/ExtensionViewAdaptor","jquery","../ajax/CAAuthentication","baglass/utils/Utils","baglass/core-client/js/core-client/utils/Utils","baglass/core-client/js/core-client/utils/ClassFactory","lodash"],(function(e,t,n,i,r){return e.extend({signin:function(e){return this._getCAAuthentication().submitCredentials(this.glassContext,{parameters:e}).then((function(e){t(r.getCurrentWindow()).trigger("ca.loginSuccessful",e)}))},render:function(){if(this.origin&&this.origin.queryString&&this.origin.queryString.CAMUsername&&this.origin.queryString.CAMPassword){let e=this.origin.queryString,t=i.getFilteredLoginParameters(this.glassContext,e);return this.signin(t).then((function(){return Promise.resolve()})).catch(()=>this._openLoginView())}return this._openLoginView()},_openLoginView:function(){return this.doRender()},_getCAAuthentication:function(){return new n}})})),define("caglass/api/FolderOpener",["lodash","baglass/api/BaseOpener"],(e,t)=>{"use strict";return class extends t{_getItemSpec(t){let n;return n=e.isNumber(t.target.specItemIndex)&&e.isArray(t.target.plugin.itemSpec.items)?t.target.plugin.itemSpec.items[t.target.specItemIndex]:t.target.plugin.itemSpec,n}_getContent(e){const t=this._getItemSpec(e),n={};return t&&t.options&&(n.folder=t.options.id||t.options.path,t.options.tab&&(n.tab=t.options.tab)),n}openFolder(e){const{glassContext:t}=e;t.openAppView("content",{content:this._getContent(e)})}onSelectItem(e){this.onPress(e)}onPress(e){this.openFolder(e)}}}),define("caglass/api/ReportOpener",["baglass/api/BaseOpener"],(function(e){"use strict";return e.extend({getRequestParameters:function(){return"ancestors,owner,modificationTime,permissions,defaultName,runInAdvancedViewer"}})})),define("caglass/api/all",["./DashboardOpener","./ExtensionViewAdaptor","./FolderOpener","./ReportOpener"],(function(){})),define("baglass/common/ui/OfflineOnlineDialog",["ca-ui-carbon-toolkit","react","react-dom","prop-types","../../nls/StringResources"],(e,t,n,i,r)=>{const{Dialog:s,ProgressIndicator:o}=e;function a(e){const n=()=>{window.location.reload()},i=r.get("offlineErrorTitle"),a=r.get("offlineErrorMessage"),l=r.get("refreshButton"),c={size:"default",minWidth:"400px",maxWidth:"500px",clickaway:!1,startingFocusIndex:-1,className:"OfflineOnlineDialog"},u={tabIndex:-1,variant:"bar",size:"normal",determinate:!1};return e.online?null:t.createElement("div",null,t.createElement(s,c,t.createElement(s.Header,null,i),t.createElement(s.Body,null,t.createElement("div",null,a," "),t.createElement("div",{className:"OfflineOnlineDialogBody"},t.createElement(o,u))),t.createElement(s.Footer,null,t.createElement(s.Button,{className:"cancelButton"}),t.createElement(s.Button,{label:l,primary:!0,onClick:n}))))}return a.propTypes={online:i.bool},a}),define("baglass/services/OfflineOnlineService",["react","react-dom","../common/ui/OfflineOnlineDialog"],(e,t,n)=>class{constructor(){window.addEventListener("offline",()=>{this.renderDialog(!1)}),window.addEventListener("online",()=>{this.renderDialog(!0)});const e=document.createElement("div");e.id="offlineOnlineDialogContainer",document.getElementById("main").appendChild(e)}renderDialog(i){const r=document.getElementById("offlineOnlineDialogContainer");t.render(e.createElement(n,{online:i}),r)}}),define("caglass/app/services/CAUserProfileService",["baglass/app/services/UserProfileService","lodash","baglass/core-client/js/core-client/errors/BaseError","baglass/core-client/js/core-client/utils/BidiUtil","jquery","baglass/utils/Utils"],(function(e,t,n,i,r,s){const o=e.extend({initialize(e){if(t.isObject(e)){if(e.authInfo&&e.capabilities&&e.userAccount){if(t.extend(this,t.pick(e,"userAccount","tenants","credentials","userProfileSettings","capabilities","authInfo","preferences")),this.preferences){const e=this.preferences.biDirectionalFeaturesEnabled||!1,t=this.preferences.baseTextDirection||"";this._setBidiPrefs(t,e.toString(),this.preferences.contentLocale||"en")}return this.glassContext.getCoreSvc(".Config").getLegacyLaunchable().then(e=>this._updateContextWithAccountInfo(this.userAccount,this.capabilities,e,this.authInfo)).then(e=>(this.userAccount&&(this.userAccount.isSystemAdmin||this.userAccount.isTenantAdmin)&&(this._setUserTenantName(e,this.tenants),this._bindToAdminEvent()),e))}return Promise.reject(new Error("Context must contain authInfo, capabilities and userAccount properties"))}return Promise.reject(new Error("Invalid context"))},logout(){return this._clearCache(),this.glassContext.profile={},this.glassContext.getCoreSvc(".Ajax").ajax({url:o.LOGIN_URL,type:"DELETE"})},updatePreferences(e){return this._catchLogReturn(this._getPreferences(e),{}).then(this._setPreferences.bind(this))},_clearCache(){o.inherited("updateContext",this,[{userProfileSettings:null,capabilities:null,preferences:null,tenants:null,userAccount:null,credentials:null,authInfo:null}]),this.glassContext.getCoreSvc(".Config").clearConfigs()},disableLoggingSession(){return this.glassContext.getCoreSvc(".Ajax").ajax({type:"DELETE",url:o.SESSIONLOGGING_URL})},getUserAccount(e){return t.isEmpty(this.userAccount)||!0!==e?this.glassContext.getCoreSvc(".Ajax").ajax({url:o.USER_ACCOUNT_URL,type:"GET"}).then(e=>(this.userAccount=e.data,this.userAccount)).catch(e=>{const t=new n("Internal error retrieving user account:"+e.message,e);throw this.glassContext.getCoreSvc(".Logger").warn(t),t}):Promise.resolve(this.userAccount)},getPortalPages(){return this.glassContext.getCoreSvc(".Ajax").ajax({url:o.USER_PORTALPAGES_URL,type:"GET"}).then(e=>e.data)},addPortalPage(e){return this.glassContext.getCoreSvc(".Ajax").ajax({headers:{Accept:"application/json","Content-Type":"application/json"},url:o.USER_PORTALPAGES_URL,type:"POST",data:JSON.stringify({target:e})})},deletePortalPage(e){return this.glassContext.getCoreSvc(".Ajax").ajax({url:o.USER_PORTALPAGES_URL+"/"+encodeURIComponent(e),type:"DELETE"})},resetHome(){return this.savePreferences({homePage:""})},savePreferences(e){return this._saveEmail({email:e.email}).then(this._savePreferences.bind(this,e)).then(this._setPreferences.bind(this,e))},_savePreferences(e){if(e&&!r.isEmptyObject(e)){const n=JSON.stringify(t.omit(e,"email"));return this.glassContext.getCoreSvc(".Ajax").ajax({url:o.PREFERENCES_URL,type:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},data:n})}},_saveEmail(e){return Promise.try(()=>{if(void 0!==e.email&&this.glassContext.profile.account._meta&&this.glassContext.profile.account._meta.schemaInfo.email.modifiable)return this.glassContext.getCoreSvc(".Ajax").ajax({url:"v1/users_ex/"+this.glassContext.getCoreSvc(".UserProfile").preferences.id,type:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({email:e.email})}).then(t=>{1===t.data.errorCode?this.glassContext.getCoreSvc(".Logger").error("Update email failed"):(this.glassContext.profile.account.email=e.email,this.userAccount.email=e.email)})})},saveDataSourceCredential(e){return this.glassContext.getCoreSvc(".Ajax").ajax({url:o.DATASOURCE_CREDENTIAL_PATH,type:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(e)}).then(e=>e.data)},_saveCredentials(){return this.glassContext.getCoreSvc(".Ajax").ajax({url:o.CREDENTIALS_URL,type:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:"{}",skipErrorHandling:!0}).then(e=>e&&e.data).catch(e=>{throw e.jqXHR})},resetCredentials(){return this._saveCredentials()},getAccountInfo(e){return Promise.try(this._getAccountInfo.bind(this,e))},_getAccountInfo(e){const t=this.glassContext.getCoreSvc(".Config"),n=this.getUserAccount(),i=this._getCredentials().catchReturn(),r=this._catchLogReturn(t.getDefaultHome(),{}),s=this._catchLogReturn(this._getUserProfileSettings(),{}),o=this._catchLogReturn(this.getCapabilities(),{}),a=this._catchLogReturn(t.getLegacyLaunchable(),{});return Promise.all([n,i,s,o,a,r]).spread((t,n,i,r,s)=>this._updateContextWithAccountInfo(t,r,s,e)).then(e=>this.userAccount&&(this.userAccount.isSystemAdmin||this.userAccount.isTenantAdmin)?this.fetchTenants().then(t=>(this.tenants=t,this._setUserTenantName(e,t),this._bindToAdminEvent(),e)).catch(t=>(this.glassContext.getCoreSvc(".Logger").warn(t),this.tenants=void 0,e)):e)},updateIdentity(e){return this.glassContext.getCoreSvc(".Logger").warn("The `updateIdentity` method of CAUserProfileService has been deprecated, to update the isSystemAdmin or isTenantAdmin data please use `getUserAccount` method instead."),this.getUserAccount(e)},_setUserTenantName(e,n){if(e.tenantID){const i=t.find(n,{tenantID:e.tenantID});i&&i.defaultName?e.tenantName=i.defaultName:(this.glassContext.getCoreSvc(".Logger").error("tenant name not set for "+e.tenantID+", the id is used to set the tenant name"),e.tenantName=e.tenantID)}else this.glassContext.getCoreSvc(".Logger").debug("user is not part of a tenant: no tenant name is set in the account object")},_getPreferences(e){return t.isEmpty(this.preferences)||!0!==e?this.glassContext.getCoreSvc(".Ajax").ajax({url:o.PREFERENCES_URL,type:"GET"}).then(e=>(this.preferences=e.data,this.preferences)):Promise.resolve(this.preferences)},_getCredentials(e){return t.isEmpty(this.credentials)||!0!==e?this.glassContext.getCoreSvc(".Ajax").ajax({url:o.CREDENTIALS_URL,type:"GET"}).then(e=>(this.credentials=e.data,this.credentials)):Promise.resolve(this.credentials)},getUserProfileSetting(e){return this._getUserProfileSettings().then(t=>{if(t)return t[e]})},_getUserProfileSettings(){return this.userProfileSettings?Promise.resolve(this.userProfileSettings):this.glassContext.getCoreSvc(".Ajax").ajax({url:o.USER_PROFILE_SETTINGS,type:"GET",dataType:"json"}).then(e=>(this.userProfileSettings=e.data,this.userProfileSettings)).catch(e=>(this.glassContext.getCoreSvc(".Logger").error("Internal error retrieving user profile settings:"+e.message),this.userProfileSettings=o.defaultUserSettings,this.userProfileSettings))},getCapabilities(){return this.capabilities?Promise.resolve(this.capabilities):this.glassContext.getCoreSvc(".Ajax").ajax({url:o.CAPABILITIES_PATH,type:"GET"}).then(e=>(this.capabilities=e.data.userCapabilities,this.capabilities)).catch(e=>{throw new n("Internal error retrieving capabilities:"+e.textStatus,e)})},_updateContextWithAccountInfo(e,n,i,r){this.hasCredentials=!!this.credentials,this.glassContext.primaryUserChanged=!1,this.glassContext.profile.account=e;const s={displayName:e.defaultName,isAnonymous:r?r.isAnonymous:void 0,showLogIn:r?r.canCallLogon:void 0};return t.extend(this.glassContext.profile.account,s),this.glassContext.legacyLaunchable=1===i,r&&(this.glassContext.cafContextId=r.cafContextId),e},_setPreferences(e){this.preferences||(this.preferences={}),r.extend(!0,this.preferences,e);const t=e&&e.biDirectionalFeaturesEnabled||!1;this._setBidiPrefs(e&&e.baseTextDirection||"",t.toString(),e&&e.contentLocale||"en")},_setBidiPrefs(e,t,n){i.setUserPreferredTextDir(e,t),i.setUserPreferredContentLocale(n)},fetchTenants(e){return t.isEmpty(this.tenants)||!0!==e?this.glassContext.getCoreSvc(".Ajax").ajax({url:o.TENANTS_PATH,type:"GET"}).then(e=>(this.tenants=e.data.data,this.tenants)).catch(e=>{throw new n("Internal error retrieving tenants:"+e.message,e)}):Promise.resolve(this.tenants)},updateTenants(){return this.fetchTenants().then(e=>(this.tenants=e,e)).catch(e=>{this.glassContext.getCoreSvc(".Logger").warn(e)})},isSysAdmin(){return this.getUserAccount(!0).then(e=>e.isSystemAdmin)},isTenantAdmin(){return this.getUserAccount(!0).then(e=>e.isTenantAdmin)},getHomePage(){const e=this._getMutableHomePage();return this._buildHomePageObject(e)},getFactoryHomePage(){return this._buildHomePageObject(o.defaultUserSettings.ui_homePage)},_getMutableHomePage(){if(s.isFactoryMode())return o.defaultUserSettings.ui_homePage;if(this.preferences&&!t.isEmpty(this.preferences.homePage))try{return JSON.parse(this.preferences.homePage)}catch(e){return this.glassContext.getCoreSvc(".Logger").error("error parsing home page",e),o.defaultUserSettings.ui_homePage}if(this.userProfileSettings&&this.userProfileSettings.ui_homePage){const e=this.userProfileSettings.ui_homePage;return e&&e.content&&"run"===e.content.action&&delete e.content.action,e}return o.defaultUserSettings.ui_homePage},_buildHomePageObject:e=>r.extend(!0,{content:{isHomePage:!0}},e),getProductLocale(){return this.preferences&&this.preferences.productLocale},getAccountID(){return this.userAccount&&this.userAccount.id},_bindToAdminEvent(){r(document).on("com.ibm.cognos.bi.admin.updatetenantlist",this.updateTenants.bind(this))},_catchLogReturn(e,t){return Promise.resolve(e).catch(e=>(this.glassContext.getCoreSvc(".Logger").error(e.message||e),t))}});return o.BASE_URL="v1",o.LOGIN_URL=o.BASE_URL+"/login",o.PREFERENCES_URL=o.BASE_URL+"/users/~/preferences",o.USER_ACCOUNT_URL=o.BASE_URL+"/users/~/account",o.USER_PORTALPAGES_URL=o.BASE_URL+"/users/~/my_portalPages",o.CREDENTIALS_URL=o.BASE_URL+"/users/~/credentials",o.CAPABILITIES_PATH=o.BASE_URL+"/users/~/capabilities",o.TENANTS_PATH=o.BASE_URL+"/tenants",o.DATASOURCE_CREDENTIAL_PATH=o.BASE_URL+"/users/~/credentials/datasources",o.USER_PROFILE_SETTINGS=o.BASE_URL+"/users/~/user_profile_settings",o.SESSIONLOGGING_URL=o.BASE_URL+"/glug/sessions/current",o.defaultUserSettings={ui_excludedFeatures:{},ui_homePage:{perspective:"home"},ui_theme:"IBM"},o})),define("caglass/app/services/LogoutService",["baglass/core-client/js/core-client/utils/Utils","lodash"],(function(e,t){var n=function(){this._preLogoutActions=[],this._postLogoutActions=[]};return n.prototype.logOut=function(e){return this._preLogout(e.glassContext).finally(function(){var t=function(){var t=e.glassContext.getSSOLogoutURL();t?this._redirectBrowser(t):this._redirectBrowser(window.location.pathname)}.bind(this);return this.registerPostLogout(t),e.glassContext.services.userProfile.logout()}.bind(this)).then(this._postLogout.bind(this,e.glassContext))},n.prototype.registerPreLogout=function(e){if(!t.isFunction(e))throw new Error(e+" is not a function");this._preLogoutActions.push(e)},n.prototype.registerPostLogout=function(e){if(!t.isFunction(e))throw new Error(e+" is not a function");this._postLogoutActions.push(e)},n.prototype._redirectBrowser=function(t){e.getCurrentWindow().location=t},n.prototype._preLogout=function(e){return this._invokeActions(e,this._preLogoutActions,"preLogout")},n.prototype._postLogout=function(e){return this._invokeActions(e,this._postLogoutActions,"postLogout")},n.prototype._invokeActions=function(e,t,n){return t.reduce((function(t,i){return t.then((function(){return i(e)})).catch((function(t){e.getCoreSvc(".Logger").error("failure while executing an action of type "+n,t)}))}),Promise.resolve())},n})),define("caglass/utils/CAUtils",["jquery"],(function(e){var t=function(){};return t.prototype.removeCAMNamespaceHref=function(e){var t=/([?&])(CAMNamespace=\w*[^#&]*&?)/g,n=e.substring(0,e.indexOf("#"));return n.length>0?n.replace(t,"$1").concat(e.substring(e.indexOf("#"))):e.replace(t,"$1")},t.prototype.addUpdateDcoToQuerystring=function(e,t){var n=/([?])(.*)/,i=e.substring(0,e.indexOf("#"));return i.length>0?i.replace(n,"?updatedco=".concat(t,"&$2")).concat(e.substring(e.indexOf("#"))):n.test(e)?e.replace(n,"?updatedco=".concat(t,"&$2")):/updatedco=\w+/.test(e)?e:e.concat("?updatedco=".concat(t))},t.prototype.removeLoadingSpinner=function(t){e("#ba-splash-styles").remove(),e(".ba-splash").remove(),t.getCoreSvc(".Events").off("appView:loaded",void 0,"removeLoadingSpinnerFunction")},t.prototype.preventWritesToObject=function(e){const t=Object.getOwnPropertyNames(e);for(let n of t){let t=e[n];e[n]=t&&"object"==typeof t?this.preventWritesToObject(t):t}return Object.freeze(e)},new t})),define("caglass/ba-instrumentation/dist/bundle",[],(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var i,r;i=[n,t,n(1),n(6)],void 0===(r=function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstrumentationService=n.default,t.BluemixAnalytics=i}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r,s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n};i=[n,t,n(2)],void 0===(r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.analyticsKey="_analytics",this.bluemixKey="bluemixAnalytics",this.instrumentationKey="instrumentation",this.bluemixLoaded=!1,this.category="Offering Interface",this.digitalDataKey="digitalData",this.segmentApiKey="analytics"}return e.prototype.initialize=function(e,t){var i=this;if(this.glassContext=e,this.configBuilder=new n.default(t),this.eventQueue=[],this._logger=this.glassContext.getCoreSvc(".Logger"),!0===t.enabled&&""!==t.key)return this.configureAnalytics(),this.requireBluemixScript(this.configBuilder.config.scriptURL).then((function(){var e=i.configBuilder.buildTraits(),t=i.configBuilder.buildContext();i.bluemixLoaded=!0,window[i.bluemixKey].identify(e,t),i.configBuilder.config.autoSPAEnabled||i.registerPageEventListener()})).catch((function(e){i.configBuilder.disableService(),i.logger.error("InstrumentationService is not enabled, Bluemix script failed to load",e)}));var r="InstrumentationService was not enabled. Config: "+JSON.stringify(this.configBuilder.config);return Promise.resolve(r)},Object.defineProperty(e.prototype,"config",{get:function(){return this.configBuilder.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger||console},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return!0===this.bluemixLoaded&&void 0!==window[this.analyticsKey]&&this.configBuilder.config.enabled},enumerable:!0,configurable:!0}),e.prototype.resetAnalyticsCookie=function(){var e=this;return new Promise((function(t,n){if(e.enabled&&Object.prototype.hasOwnProperty.call(window,e.segmentApiKey))try{return window[e.segmentApiKey].reset(),t()}catch(t){e.logger.error(t),n()}}))},e.prototype.track=function(e){try{if(this.enabled){var t=this.configBuilder.trackEventPayload(),n=this.configBuilder.buildContext();e.productTitle=this.configBuilder.config.productTitle;var i=e.type,r=o(e,["type"]),a=s({},r,t);this.callAction(window[this.bluemixKey].trackEvent,i,a,n)}}catch(e){this.logger.warn("Failed to call a trackEvent as instrumentation is disabled")}},e.prototype.page=function(e){try{if(this.enabled){var t=this.configBuilder.pageEventPayload(),n=this.configBuilder.buildContext();this.callAction(window[this.bluemixKey].pageEvent,this.category,e,t,n)}}catch(t){this.logger.warn("Failed to call a pageEvent for '"+e+"' as instrumentation is disabled")}},e.prototype.isBluemixAnalyticsLoaded=function(){return!!window[this.bluemixKey]},e.prototype.sendQueuedEvents=function(){for(;this.eventQueue.length>0;){var e=this.eventQueue.shift(),t=e.fn,n=e.args;t.apply(void 0,n)}},e.prototype.callAction=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isBluemixAnalyticsLoaded()?e.apply(void 0,t):this.eventQueue.push({fn:e,args:t})},e.prototype.configureAnalytics=function(){this.category=this.configBuilder.config.category||this.category,window[this.analyticsKey]=this.configBuilder.buildAnalyticsKey(),window[this.digitalDataKey]=this.configBuilder.buildDigitalDataKey(this.category),window[this.instrumentationKey]=this.configBuilder.buildDDO()},e.prototype.requireBluemixScript=function(e){var t=this;return new Promise((function(n,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.addEventListener("load",(function(){if(t.isBluemixAnalyticsLoaded())return t.sendQueuedEvents(),n();i("The bluemix script loaded but did not successfully initialize: window.bluemixAnalytics was not created.")})),r.addEventListener("error",(function(){i("Error loading script '"+e+"'")})),r.addEventListener("abort",(function(){i("Script loading aborted '"+e+"'")})),document.head.appendChild(r)}))},e.prototype.registerPageEventListener=function(){var e=this;try{this.glassContext.getCoreSvc(".Events").on("appView:loaded",(function(t){var n=t.context.content.perspective;e.page(n)}))}catch(e){this.logger.warn("Failed to register page listener for instrumentation on core service .Events 'appView:loaded'")}},e}();t.default=i}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r,s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};i=[n,t,n(3)],void 0===(r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,o=new n.default;!function(e){e.accountId="accountId",e.accountIdType="accountIdType",e.browserLanguage="browserLanguage",e.capabilities="capabilities",e.gbt10="GBT10",e.gbt15="GBT15",e.gbt17="GBT17",e.gbt20="GBT20",e.gbtlvlcd="GBTLVLCD",e.isIBMer="isIBMer",e.isTestUser="isTestUser",e.isTrial="isTrial",e.productVersion="productVersion",e.partIds="partNumber",e.productID="productId",e.productTitle="productTitle",e.roles="user.role",e.tenantId="tenantId",e.url="url",e.ut30="UT30",e.instanceGuid="instanceGuid",e.productCode="productCode",e.productCodeType="productCodeType"}(i=t.SegmentKeys||(t.SegmentKeys={})),function(e){e.IBM="ibm.com",e.YOPMAIL="yopmail.com",e.MAILINATOR="mailinator.com",e.COGNOS="cognos.com"}(r=t.EmailDomains||(t.EmailDomains={}));var a=function(){function e(e){this.serviceConfig={enabled:this.getValidConfigEnabled(e),key:this.getValidConfigKey(e),scriptURL:this.getValidConfigScriptURL(e),productTitle:this.getValidConfigProductTitle(e),productID:this.getValidConfigProductId(e),versionNumber:this.getValidConfigVersionNumber(e),tenantId:this.getValidConfigTenantId(e),accountId:this.getValidConfigAccountId(e),accountIdType:this.getValidConfigAccountIdType(e),whitelistedValues:this.getValidConfigWhitelistedValues(e),allowlistedValues:this.getValidConfigAllowlistedValues(e),digitalContextEnable:this.getValidConfigDigitalContextEnable(e),whitelist:this.getValidConfigWhitelist(e),allowlist:this.getValidConfigAllowlist(e),autoSPAEnabled:this.getValidConfigAutoSPAEnabled(e),email:this.getValidConfigEmail(e),creationTime:this.getValidConfigCreationTime(e),productLocale:this.getValidConfigProductLocale(e),gbt10:this.getValidConfigGbt10(e),gbt15:this.getValidConfigGbt15(e),gbt17:this.getValidConfigGbt17(e),gbt20:this.getValidConfigGbt20(e),gbtlvlcd:this.getValidConfigGbtlvlcd(e),category:this.getValidConfigCategory(e),environment:this.getValidConfigEnvironment(e),partIds:this.getValidConfigPartIds(e),capabilities:this.getValidConfigCapabilities(e),isTrial:this.getValidConfigIsTrial(e),roles:this.getValidConfigRoles(e),ut30:this.getValidConfigUt30(e),instanceGuid:this.getValidConfigInstanceGuid(e),productCode:this.getValidConfigProductCode(e),productCodeType:this.getValidConfigProductCodeType(e)}}return Object.defineProperty(e.prototype,"config",{get:function(){return this.serviceConfig},enumerable:!0,configurable:!0}),e.prototype.disableService=function(){this.config.enabled=!1},e.prototype.buildTraits=function(){var e,t=null;return this.isEnabled&&((e={})[i.productVersion]=this.version,e[i.partIds]=this.partIdsString,e[i.tenantId]=this.tenantId,e[i.accountId]=this.accountId,e[i.isIBMer]=this.isIBMer(this.email),e[i.isTestUser]=this.isTestUser(this.email),e.url=o.getSanitizedURL(this.url,this.whitelistedValues,this.whitelist),e.createdAt=this.creationTime,t=e),t},e.prototype.buildContext=function(){var e=null;return this.isEnabled?e={context:{isIBMer:this.isIBMer(this.email),isTestUser:this.isTestUser(this.email),page:this.commonHrefProps}}:console.warn("Instrumentation.ConfigBuilder.buildContext(): Instrumentation is disabled."),e},e.prototype.buildAnalyticsKey=function(){var e;return this.isEnabled&&""!==this.key&&(e={skipIdentify:!0,autoPageEventSpa:this.isAutoSPAEnabled,autoPageView:this.isAutoSPAEnabled,segment:!0,segment_key:this.key,coremetrics:!1,optimizely:!1,nps:!1}),e},e.prototype.buildDigitalDataKey=function(e){var t,n;return this.isEnabled&&""!==this.key&&(n={pageInfo:(t={},t[i.productTitle]=this.productTitle,t.analytics={category:e},t)},this.environment&&(n.appInfo={plan:this.environment})),n},e.prototype.buildDDO=function(){var e,t,n,r,o,a,l,c,u,d={};return this.isEnabled&&(d=s({},this.capabilities&&""!==this.capabilitiesString&&((e={})[i.capabilities]=this.capabilities,e),this.version&&((t={})[i.productVersion]=this.version,t),this.url&&((n={})[i.url]=this.url,n),this.partIds&&""!==this.partIdsString&&((r={})[i.partIds]=this.partIds,r),this.accountIdType&&((o={})[i.accountIdType]=this.accountIdType,o),this.accountId&&((a={})[i.accountId]=this.accountId,a),this.tenantId&&((l={})[i.tenantId]=this.tenantId,l),this.productID&&((c={})[i.productID]=this.productID,c),this.isTrial&&((u={})[i.isTrial]=this.isTrial,u))),d},e.prototype.pageEventPayload=function(){var e,t={};if(this.isEnabled){var n=((e={name:o.getPerspectiveName(this.url),path:this.pathname})[i.browserLanguage]=this.productLocale,e);t=s({},this.commonEvtProps,n,this.commonHrefProps)}return t},e.prototype.trackEventPayload=function(){var e={};if(this.isEnabled){var t={url:o.getSanitizedURL(this.url,this.whitelistedValues,this.whitelist)};e=s({},this.commonEvtProps,t)}return e},Object.defineProperty(e.prototype,"isEnabled",{get:function(){var e=!1;return this.config&&this.config.enabled?e=!0:console.warn("Instrumentation.ConfigBuilder: Instrumentation is disabled."),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commonHrefProps",{get:function(){return{referrer:o.getSanitizedURL(this.referrer,this.whitelistedValues,this.whitelist),search:o.getSanitizedQueryParams(this.search,this.whitelistedValues,this.whitelist),title:o.getPerspectiveName(this.url),url:o.getSanitizedURL(this.url,this.whitelistedValues,this.whitelist)}},enumerable:!0,configurable:!0}),e.prototype.isIBMer=function(e){var t=!1;return this.isEnabled&&(this.validateEmail(e)?t=e.split("@")[1].includes(r.IBM):console.warn("Instrumentation.ConfigBuilder.isIBMer: Invalid email passed as parameter "+e)),t},e.prototype.isTestUser=function(e){var t=!1;if(this.isEnabled)if(this.validateEmail(e)){var n=e.split("@")[1];t=n.includes(r.YOPMAIL)||n.includes(r.MAILINATOR)||n.includes(r.COGNOS)}else console.warn("Instrumentation.ConfigBuilder.isTestUser: Invalid email passed as parameter "+e);return t},e.prototype.validateEmail=function(e){var t=RegExp(/\S+@\S+\.\S+/);return e&&t.test(e)},Object.defineProperty(e.prototype,"commonEvtProps",{get:function(){var e;return(e={})[i.productVersion]=this.version,e[i.productTitle]=this.productTitle,e[i.partIds]=this.partIdsString,e[i.productID]=this.productID,e[i.tenantId]=this.tenantId,e[i.accountId]=this.accountId,e[i.accountIdType]=this.accountIdType,e[i.gbt10]=this.gbt10,e[i.gbt15]=this.gbt15,e[i.gbt17]=this.gbt17,e[i.gbt20]=this.gbt20,e[i.gbtlvlcd]=this.gbtlvlcd,e["custom.capabilities"]=this.capabilitiesString,e[i.roles]=this.rolesString,e[i.ut30]=this.ut30,e[i.instanceGuid]=this.instanceGuid,e[i.productCode]=this.productCode,e[i.productCodeType]=this.productCodeType,e},enumerable:!0,configurable:!0}),e.prototype.getValidConfigEnabled=function(e){return!(!e||!0!==e.enabled)},e.prototype.getValidConfigKey=function(e){return e&&e.key&&"string"==typeof e.key?e.key:""},e.prototype.getValidConfigScriptURL=function(e){return e&&e.scriptURL&&"string"==typeof e.scriptURL?e.scriptURL:""},e.prototype.getValidConfigProductTitle=function(e){return e&&e.productTitle&&"string"==typeof e.productTitle?e.productTitle:""},e.prototype.getValidConfigProductId=function(e){return e&&e.productID&&"string"==typeof e.productID?e.productID:""},e.prototype.getValidConfigVersionNumber=function(e){return e&&e.versionNumber&&"string"==typeof e.versionNumber?e.versionNumber:""},e.prototype.getValidConfigTenantId=function(e){return e&&e.tenantId&&"string"==typeof e.tenantId?e.tenantId:""},e.prototype.getValidConfigAccountId=function(e){return e&&e.accountId&&"string"==typeof e.accountId?e.accountId:""},e.prototype.getValidConfigAccountIdType=function(e){return e&&e.accountIdType&&"string"==typeof e.accountIdType?e.accountIdType:""},e.prototype.getValidConfigWhitelistedValues=function(e){var t=this.getValidConfigAllowlistedValues(e);return e&&e.whitelistedValues&&Array.isArray(e.whitelistedValues)&&JSON.stringify(e.whitelistedValues)!==JSON.stringify([""])?e.whitelistedValues:t},e.prototype.getValidConfigAllowlistedValues=function(e){return e&&e.allowlistedValues&&Array.isArray(e.allowlistedValues)?e.allowlistedValues:[""]},e.prototype.getValidConfigDigitalContextEnable=function(e){return!(!e||!e.digitalContextEnable||"boolean"!=typeof e.digitalContextEnable)&&e.digitalContextEnable},e.prototype.getValidConfigWhitelist=function(e){var t=this.getValidConfigAllowlist(e);return!(!e||!0!==e.whitelist)||t},e.prototype.getValidConfigAllowlist=function(e){return!(!e||!0!==e.allowlist)},e.prototype.getValidConfigAutoSPAEnabled=function(e){return!(!e||!0!==e.autoSPAEnabled)},e.prototype.getValidConfigEmail=function(e){return e&&e.email&&"string"==typeof e.email?e.email:""},e.prototype.getValidConfigCreationTime=function(e){return e&&e.creationTime&&"string"==typeof e.creationTime?e.creationTime:""},e.prototype.getValidConfigProductLocale=function(e){return e&&e.productLocale&&"string"==typeof e.productLocale?e.productLocale:""},e.prototype.getValidConfigGbt10=function(e){return e&&e.gbt10&&"string"==typeof e.gbt10?e.gbt10:""},e.prototype.getValidConfigGbt15=function(e){return e&&e.gbt15&&"string"==typeof e.gbt15?e.gbt15:""},e.prototype.getValidConfigGbt17=function(e){return e&&e.gbt17&&"string"==typeof e.gbt17?e.gbt17:""},e.prototype.getValidConfigGbt20=function(e){return e&&e.gbt20&&"string"==typeof e.gbt20?e.gbt20:""},e.prototype.getValidConfigGbtlvlcd=function(e){return e&&e.gbtlvlcd&&"string"==typeof e.gbtlvlcd?e.gbtlvlcd:""},e.prototype.getValidConfigCategory=function(e){return e&&e.category&&"string"==typeof e.category?e.category:null},e.prototype.getValidConfigEnvironment=function(e){return e&&e.environment&&"string"==typeof e.environment?e.environment:null},e.prototype.getValidConfigPartIds=function(e){return e&&e.partIds&&Array.isArray(e.partIds)?e.partIds.sort():[""]},e.prototype.getValidConfigCapabilities=function(e){return e&&e.capabilities&&Array.isArray(e.capabilities)?e.capabilities.sort():[""]},e.prototype.getValidConfigIsTrial=function(e){return!e||!0!==e.isTrial&&!1!==e.isTrial?void 0:e.isTrial},e.prototype.getValidConfigRoles=function(e){return e&&e.roles&&Array.isArray(e.roles)?e.roles.sort():[""]},e.prototype.getValidConfigUt30=function(e){return e&&e.ut30&&"string"==typeof e.ut30?e.ut30:""},e.prototype.getValidConfigInstanceGuid=function(e){return e&&e.instanceGuid&&"string"==typeof e.instanceGuid?e.instanceGuid:""},e.prototype.getValidConfigProductCode=function(e){return e&&e.productCode&&"string"==typeof e.productCode?e.productCode:""},e.prototype.getValidConfigProductCodeType=function(e){return e&&e.productCodeType&&"string"==typeof e.productCodeType?e.productCodeType:""},Object.defineProperty(e.prototype,"email",{get:function(){return this.config.email},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creationTime",{get:function(){return this.config.creationTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productLocale",{get:function(){return this.config.productLocale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return window.location.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return window.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathname",{get:function(){return window.location.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"referrer",{get:function(){return window.document.referrer||" "},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"whitelist",{get:function(){return this.config.whitelist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"whitelistedValues",{get:function(){return this.config.whitelistedValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowlist",{get:function(){return this.config.allowlist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowlistedValues",{get:function(){return this.config.allowlistedValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.config.key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"environment",{get:function(){return this.config.environment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.config.versionNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productID",{get:function(){return this.config.productID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productTitle",{get:function(){return this.config.productTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tenantId",{get:function(){return this.config.tenantId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accountId",{get:function(){return this.config.accountId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accountIdType",{get:function(){return this.config.accountIdType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gbt10",{get:function(){return this.config.gbt10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gbt15",{get:function(){return this.config.gbt15},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gbt17",{get:function(){return this.config.gbt17},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gbt20",{get:function(){return this.config.gbt20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gbtlvlcd",{get:function(){return this.config.gbtlvlcd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partIds",{get:function(){return this.config.partIds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partIdsString",{get:function(){return this.partIds.join()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAutoSPAEnabled",{get:function(){return this.config.autoSPAEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capabilities",{get:function(){return this.config.capabilities},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capabilitiesString",{get:function(){return this.capabilities.join()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrial",{get:function(){return this.config.isTrial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roles",{get:function(){return this.config.roles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rolesString",{get:function(){return this.roles.join()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ut30",{get:function(){return this.config.ut30},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instanceGuid",{get:function(){return this.config.instanceGuid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productCode",{get:function(){return this.config.productCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productCodeType",{get:function(){return this.config.productCodeType},enumerable:!0,configurable:!0}),e}();t.default=a}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n,t,n(4)],void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getSanitizedURL=function(e,t,n){var i="",r="";return e&&t?e.includes("?")?t.some((function(t){return e.includes(t)}))&&(r=e.substring(e.indexOf("?"),e.length),i=e.substring(0,e.indexOf("?"))+this.getSanitizedQueryParams(r,t,n)):i=e:console.warn("Instrumentation.URLSanitizer.getSanitizedURL(): Cannot sanitize.  Missing url: "+e+" or whitelisted arguments "+t+"."),i},e.prototype.getSanitizedQueryParams=function(e,t,n){var i=new URLSearchParams,r="";if(e)if(!t||0===t.length||null===n&&void 0===n)console.warn("Instrumentation.URLSanitizer.getSanitizedQueryParams():  Missing list of values: "+t+" or whitelist flag is undefined: "+n);else if("?"===e.substring(0,1)){for(var s=new URLSearchParams(e.substring(1)),o=0;o<t.length;o++)s.has(t[o])&&(i.append(t[o],s.get(t[o])),s.delete(t[o]));""!==(r+=n?i.toString():s.toString())&&(r="?"+r)}else console.warn("Instrumentation.URLSanitizer.getSanitizedQueryParams(): Passed argument "+e+" is not valid.");else console.warn("Instrumentation.URLSanitizer.getSanitizedQueryParams(): Cannot sanitize.  Missing search string: "+e);return r},e.prototype.getPerspectiveName=function(e){var t="",n=[];if(e){if((n=e.split("?")).length>1){var i=new URLSearchParams(n[1]);i.has("perspective")?t=i.get("perspective"):console.warn("Instrumentation.URLSanitizer.getPerspectiveName(): No perspective name found in the url.")}}else console.warn("Instrumentation.URLSanitizer.getPerspectiveName(): Cannot return perspective name.  Missing a valid url: "+e);return t},e}();t.default=n}.apply(t,i))||(e.exports=r)},function(e,t,n){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"use strict";var n=e.URLSearchParams?e.URLSearchParams:null,i=n&&"a=1"===new n({a:1}).toString(),r=n&&"+"===new n("s=%2B").get("s"),s="__URLSearchParams__",o=u.prototype,a=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&i&&r)){o.append=function(e,t){f(this[s],e,t)},o.delete=function(e){delete this[s][e]},o.get=function(e){var t=this[s];return e in t?t[e][0]:null},o.getAll=function(e){var t=this[s];return e in t?t[e].slice(0):[]},o.has=function(e){return e in this[s]},o.set=function(e,t){this[s][e]=[""+t]},o.toString=function(){var e,t,n,i,r=this[s],o=[];for(t in r)for(n=d(t),e=0,i=r[t];e<i.length;e++)o.push(n+"="+d(i[e]));return o.join("&")};var l=!!r&&n&&!i&&e.Proxy;e.URLSearchParams=l?new Proxy(n,{construct:function(e,t){return new e(new u(t[0]).toString())}}):u;var c=e.URLSearchParams.prototype;c.polyfill=!0,c.forEach=c.forEach||function(e,t){var n=g(this.toString());Object.getOwnPropertyNames(n).forEach((function(i){n[i].forEach((function(n){e.call(t,n,i,this)}),this)}),this)},c.sort=c.sort||function(){var e,t,n,i=g(this.toString()),r=[];for(e in i)r.push(e);for(r.sort(),t=0;t<r.length;t++)this.delete(r[t]);for(t=0;t<r.length;t++){var s=r[t],o=i[s];for(n=0;n<o.length;n++)this.append(s,o[n])}},c.keys=c.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},c.values=c.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},c.entries=c.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},a&&(c[e.Symbol.iterator]=c[e.Symbol.iterator]||c.entries)}function u(e){((e=e||"")instanceof URLSearchParams||e instanceof u)&&(e=e.toString()),this[s]=g(e)}function d(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function h(e){return decodeURIComponent(e.replace(/\+/g," "))}function p(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(n[e.Symbol.iterator]=function(){return n}),n}function g(e){var n={};if("object"===t(e))for(var i in e)e.hasOwnProperty(i)&&f(n,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var r=e.split("&"),s=0;s<r.length;s++){var o=r[s],a=o.indexOf("=");-1<a?f(n,h(o.slice(0,a)),h(o.slice(a+1))):o&&f(n,h(o),"")}}return n}function f(e,t,n){var i="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);t in e?e[t].push(i):e[t]=[i]}}(void 0!==e?e:"undefined"!=typeof window?window:this)}).call(this,n(5))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(i=window)}e.exports=i},function(e,t,n){var i,r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});void 0===(i=function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CreatedObject="Created Object",e.ReadObject="Read Object",e.UpdatedObject="Updated Object",e.DeletedObject="Deleted Object",e.SearchedObject="Searched Object",e.RanProcess="Ran Process",e.StartedProcess="Started Process",e.EndedProcess="Ended Process",e.CustomEvent="Custom Event",e.ServiceLogin="Service Login",e.ServiceLogout="Service Logout",e.HybridRatedUsage="Hybrid Rated Usage",e.VideoPlaybackStarted="Video Playback Started",e.VideoPlaybackCompleted="Video Playback Completed",e.ObjectInteraction="Object Interaction"}(n=t.AnalyticsEventType||(t.AnalyticsEventType={}));var i=function(e,t){this.customName1="action",this.type=e,this.customValue1=t};t.AnalyticsEvent=i;var r=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t}(i),o=function(e){function t(t){return e.call(this,n.CreatedObject,t)||this}return s(t,e),t}(r);t.CreatedObjectEvent=o;var a=function(e){function t(t){return e.call(this,n.ReadObject,t)||this}return s(t,e),t}(r);t.ReadObjectEvent=a;var l=function(e){function t(t){return e.call(this,n.UpdatedObject,t)||this}return s(t,e),t}(r);t.UpdatedObjectEvent=l;var c=function(e){function t(t){return e.call(this,n.DeletedObject,t)||this}return s(t,e),t}(r);t.DeletedObjectEvent=c;var u=function(e){function t(t){return e.call(this,n.SearchedObject,t)||this}return s(t,e),t}(r);t.SearchedObjectEvent=u;var d=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.processType=n,i}return s(t,e),t}(i),h=function(e){function t(t){return e.call(this,n.RanProcess,t)||this}return s(t,e),t}(d);t.RanProcessEvent=h;var p=function(e){function t(t){return e.call(this,n.StartedProcess,t)||this}return s(t,e),t}(d);t.StartedProcessEvent=p;var g=function(e){function t(t){return e.call(this,n.EndedProcess,t)||this}return s(t,e),t}(d);t.EndedProcessEvent=g;var f=function(e){function t(t){var i=e.call(this,n.CreatedObject,"")||this;return i.action=t,i}return s(t,e),t}(r);t.CustomEvent=f;var m=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t}(i),v=function(e){function t(t){return e.call(this,n.ServiceLogin,t)||this}return s(t,e),t}(m);t.ServiceLoginEvent=v;var b=function(e){function t(t){return e.call(this,n.ServiceLogout,t)||this}return s(t,e),t}(m);t.ServiceLogoutEvent=b;var y=function(e){function t(t){return e.call(this,n.HybridRatedUsage,t)||this}return s(t,e),t}(i);t.HybridRatedUsageEvent=y;var C=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.customName2="videoUrl",r.customValue2=i,r}return s(t,e),t}(i),_=function(e){function t(t,i){return e.call(this,n.VideoPlaybackStarted,t,i)||this}return s(t,e),t}(C);t.VideoPlaybackStartedEvent=_;var w=function(e){function t(t,i){return e.call(this,n.VideoPlaybackCompleted,t,i)||this}return s(t,e),t}(C);t.VideoPlaybackCompletedEvent=w}.apply(t,[n,t]))||(e.exports=i)}])})),define("caglass/app/services/CAFEncodingService",["lodash","jquery"],(function(e,t){class n{constructor(e,t){this.glassContext=e,this._xssChars=t||""}cafEncodeQSValue(n){if(!0===this.glassContext.getCoreSvc(".Config").getXSSChecking()){if(e.isObject(n)){const e=t.extend(!0,{},n);return this._encodeObjectWithTags(e),e}if(e.isString(n))return this.encodeWithTags(n)}return n}_encodeObjectWithTags(t){for(let n in t)e.isObject(t[n])?this._encodeObjectWithTags(t[n]):e.isString(t[n])&&(t[n]=this.encodeWithTags(t[n]))}encodeWithTags(e){return"XSSSTART"+this.encode(e)+"XSSEND"}encode(e){let t="",n="";const i=""+e;for(let e=0;e<i.length;e++)n=i.charAt(e),t+='"'==n?"_22":"%"==n?"*":"*"==n?"_2a":"_"==n?"_5f":this._getXSSChar(n);return t}_getXSSChar(e){let t="",i=!1;for(let t=0;t<this._xssChars.length;++t)if(e==this._xssChars.charAt(t)){i=!0;break}if(i){t+="_";const i=Math.floor(e.charCodeAt(0)/16),r=e.charCodeAt(0)-16*i;t+=n.HEX_CHARS.charAt(i),t+=n.HEX_CHARS.charAt(r)}else t+=e;return t}}return n.HEX_CHARS="0123456789abcdef",n})),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("caglass/nls/StringResources"),require("baglass/core-client/js/core-client/utils/UrlUtils"),require("baglass/core-client/js/core-client/utils/BrowserUtils"),require("baglass/core-client/js/core-client/utils/Utils"));else if("function"==typeof define&&define.amd)define("caglass/caglass.webpack.bundle",["caglass/nls/StringResources","baglass/core-client/js/core-client/utils/UrlUtils","baglass/core-client/js/core-client/utils/BrowserUtils","baglass/core-client/js/core-client/utils/Utils"],t);else{var n="object"==typeof exports?t(require("caglass/nls/StringResources"),require("baglass/core-client/js/core-client/utils/UrlUtils"),require("baglass/core-client/js/core-client/utils/BrowserUtils"),require("baglass/core-client/js/core-client/utils/Utils")):t(e["caglass/nls/StringResources"],e["baglass/core-client/js/core-client/utils/UrlUtils"],e["baglass/core-client/js/core-client/utils/BrowserUtils"],e["baglass/core-client/js/core-client/utils/Utils"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,(function(e,t,n,i){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postSecondaryLogin=t.SecondaryLoginConstants=void 0;const r=i(n(5)),s=i(n(6)),o=i(n(7)),a=i(n(8));var l;!function(e){e.path="/login",e.parameters="secondaryLogin=true",e.successMessageKey="secondaryLoginSuccess",e.refreshMessageKey="secondaryLoginRefresh"}(l=t.SecondaryLoginConstants||(t.SecondaryLoginConstants={}));const c=`${l.path}?${l.parameters}`;function u(e){e.appController.showMessage(r.default.get(l.successMessageKey),r.default.get(l.refreshMessageKey),"info",["ok","cancel"],"500px",t=>{"ok"===t.btn&&setTimeout(()=>{e.close().then(()=>{a.default.getCurrentWindow().location.reload()})},1)},!0,"ANSDialog")}t.postSecondaryLogin=function(e,t){return o.default.isIE()?e.localStorage.secondaryLoginResult=JSON.stringify(t):e.opener?e.opener.postMessage(t):e.close(),t},t.default=function(e,t){const n=e.gateway?e.gateway:"/bi";let i=window.location.origin+n+c;t&&(i+="&state="+s.default.base64Encode(JSON.stringify(t)));const r=window.open(i,"");return a.default.getCurrentWindow().onbeforeunload=()=>{r&&r.close()},new Promise((t,n)=>{try{r&&(r.addEventListener("load",()=>{r.onbeforeunload=()=>{n(new Error("SecondaryLogin cancelled"))},function(e,t,n){const i=r=>{e&&r.source===e&&(n(r.data),e.close(),u(t),window.removeEventListener("message",i))};window.addEventListener("message",i,{once:!0})}(r,e,t)}),o.default.isIE()&&(window.localStorage.removeItem("secondaryLoginResult"),function(e,t,n){const i=r=>{let s;if(r.key&&"secondaryLoginResult"===r.key&&(s=r.newValue),s&&e){window.removeEventListener("storage",i),window.localStorage.removeItem("secondaryLoginResult");const r=JSON.parse(s);n(r),e.close(),u(t)}};window.addEventListener("storage",i)}(r,e,t)))}catch(e){n(e)}}).catch(()=>(e.appController.unlockGlass(),Promise.reject()))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.getNavBar=()=>{const e=document.querySelector(".appview.paneColumn:not(.hidden)").getElementsByClassName("navbar");return e&&e.length>0?e[0]:null}}canExecute(e){if(e.glassContext.appController.currentAppView){const t=e.glassContext.appController.currentAppView.hasHomeFlag();return null!==this.getNavBar()&&!t}return!1}doAction(){const e=this.getNavBar();null!==e&&e.classList.add("narrow")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.getNavBar=()=>{const e=document.querySelector(".appview.paneColumn:not(.hidden)").getElementsByClassName("navbar");return e&&e.length>0?e[0]:null}}canExecute(e){return!!e.glassContext.appController.currentAppView&&null!==this.getNavBar()}doAction(){const e=this.getNavBar();null!==e&&e.classList.remove("narrow")}}},function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i);n.d(t,"HideNavBarItemLabelsAction",(function(){return r.a}));var s=n(2),o=n.n(s);n.d(t,"ShowNavBarItemLabelsAction",(function(){return o.a}));var a=n(0),l=n.n(a);n.d(t,"secondaryLogin",(function(){return l.a})),n.d(t,"postSecondaryLogin",(function(){return a.postSecondaryLogin}))},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=i}])})),define("caglass/app/services/CredentialDialogBuilder",["baglass/common/ui/SubmitPasswordDialog","caglass/nls/StringResources","jquery"],(function(e,t,n){return class{constructor(e,t){this.glassContext=e,this.endpoint=t}openRenewCredentialDialog(e){return this._openCredentialDialog(e,t.get("credentialChange"),"renewCredential")}_openCredentialDialog(n,i,r){const s=this._buildParameters(n),o={glassContext:this.glassContext,displayPrompts:s},a={buttons:[{text:t.get("ok"),handler:this._submitCredential.bind(this),type:"primary",defaultId:r},"cancel"],title:i,viewOptions:o,cancelCallback:function(){this._credentialDialogObj.dialog.hide()}.bind(this)};return e.prototype.openSubmitPasswordDialog(a).then(function(e){return this._credentialDialogObj=e,Promise.resolve()}.bind(this),function(){return Promise.reject("Failed to open submit-password dialog")}.bind(this))}_buildParameters(e){this.credentialParameters=[];let t=[];return n.each(e,function(e,n){this.credentialParameters.push(n),"hidden"!==n.type&&"display"!==n.type&&t.push(n)}.bind(this)),t}_submitCredential(){n.each(this.credentialParameters,function(e,t){const i=n('input[class*="'+t.name+'"]');if(i.length){const e=i.val();e&&(t.value=e)}}.bind(this));const e={type:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},url:this.endpoint,data:JSON.stringify({parameters:this.credentialParameters}),skipErrorHandling:!0};return this.glassContext.services.ajax.ajax(e).then(function(){return this._submitSuccessHandler(),Promise.resolve()}.bind(this),function(e,t,n,i){return t.status===this.glassContext.ajaxCodes.UNAUTHORIZED&&t.responseJSON&&"camAuthUserRecoverable"===t.responseJSON.errorCodeString?this._submitErrorHandler(t,i,!1):this._submitErrorHandler(t,i,!0),Promise.reject("Failed to renew credential: ".concat(i))}.bind(this))}_submitSuccessHandler(){this._credentialDialogObj.dialog.hide(),this.glassContext.appController.showToast(t.get("credentialCreateSuccess"))}_submitErrorHandler(e,n,i){i?(this.glassContext.appController.showToast(n,{type:"error"}),this._credentialDialogObj.dialog.hide()):(this.glassContext.appController.showToast(t.get("wrongPassword"),{type:"error"}),this._buildParameters(e.responseJSON.promptInfo.displayObjects))}}})),define("caglass/app/services/LoginService",["caglass/ajax/CAAuthentication","caglass/caglass.webpack.bundle","caglass/nls/StringResources","caglass/app/services/CredentialDialogBuilder"],(function(e,t,n,i){const r=t.secondaryLogin;class s{constructor(t){this.glassContext=t,this.caAuth=new e}secondaryLogin(e){return r(this.glassContext,e).catch(e=>{this.glassContext.getCoreSvc(".Logger").error("Secondary login failed",e)})}renewCredential(){return this.caAuth.storeCredentials(this.glassContext).then(()=>this.glassContext.appController.showToast(n.get("credentialRenewed")),e=>{if(e&&e.displayObjects){return new i(this.glassContext,s.CREDENTIALS_URL).openRenewCredentialDialog(e.displayObjects)}return this.glassContext.getCoreSvc(".Logger").error("Missing displayObjects while opening crendential dialog",e),Promise.reject()})}recoverFromCamError(e){return e&&"camAuthUserRecoverable"==e.errorCodeString?this._recoverFromError(e):Promise.reject(e)}_recoverFromError(e){const t={responseJSON:e},n=this.caAuth.processAuthenticationError(this.glassContext,t);return n.displayObjects&&n.displayObjects.length>0?this.secondaryLogin(n):Promise.reject(e)}}return s.CREDENTIALS_URL="v1/users/~/credentials",s})),define("caglass/utils/EntitlementObject",[],(function(){var e={ENTITLEMENTS:{enabled:!0,display_name:"display_name",entitled_organization:{country_code:"country_code",name:"name",other_identifier:{org_id:"org_id",sap_sold_to_site_number:"string",ibm_customer_number:"ibm_customer_number"}},entitled_user:{family_name:"string",email_address:"user@example.com",given_name:"string",language:"string",ibm_unique_id:"string"},third_party_marketplace:{route_indicator:"3PM"},entitled_parts:[{part_number:"part_number",display_name:"TRIAL_PART",type:"trial",offering:"CA",subscription_id:"2",expiration_date:"2020-05-29T23:59:59.000Z",abilities:[{type:"CAPABILITY",value:"value1"},{type:"GROUP",value:"value2"}]},{part_number:"part_number",display_name:"BASE_PART",type:"base",offering:"CA",subscription_id:"3",expiration_date:"2019-03-29T23:59:59.000Z",abilities:[{type:"GROUP",value:"value1"}]},{part_number:"part_number",display_name:"BASE_PART",type:"something else",offering:"CA",subscription_id:"4",expiration_date:"2019-03-29T23:59:59.000Z",abilities:[{type:"GROUP",value:"value1"}]}],tenant_id:"tenant_id",user_id:"user_id",account_id:"account_id",subscription_id:"1",product_deployment:{product_deployment_location:"multitenant1.dal10.us-south",instance_url:"https://ca1.analytics.ibm.com",offering:"CA",description:"CA on DAL10 US-South"}}};return e})),define("caglass/app/services/DigitalContextService",["lodash","caglass/utils/EntitlementObject","caglass/utils/CAUtils","baglass/utils/Utils"],(function(e,t,n,i){class r{constructor(e){this._glassContext=e,this._setLogger(e)}initialize(){if(this.isEnabled()){if(null==i.getCookieValue(r.DCO_COOKIE))return this.fetchEntitlements();{const e=this.parseJsonFromDcoCookie(i.getCookieValue(r.DCO_COOKIE));if(e)return this.digitalContext=e,Promise.resolve(e)}}return Promise.resolve()}fetchEntitlements(){return this._glassContext.getCoreSvc(".Ajax").ajax({url:r.DIGITAL_CONTEXT_URL,type:"POST"}).then(e=>{e.data&&!1!==e.data.enabled?(this.digitalContext=e.data,n.preventWritesToObject(this.digitalContext)):this._getLogger().error("DigitalContextService Retrieved Entitlement data invalid ")}).catch(e=>{this._getLogger().error("DigitalContextService Communication error with digitalcontext API",e)})}isInitialized(){return!!this.digitalContext}isEnabled(){return this._glassContext.getCoreSvc(".Config").getConfigValueSync("Glass.digitalContextEnabled")}getAccountId(){if(this.digitalContext&&this.digitalContext[r.ACCOUNT_ID])return this.digitalContext[r.ACCOUNT_ID]}getSubscriptionId(){const e=this.getEntitledParts(),t=this._findBasePartSbsId(e);if(t)return t;const n=this._findTrialPartSbsId();return n||this.digitalContext[r.SUBSCRIPTION_ID]}_findBasePartSbsId(e){return e.map(e=>e.type&&e.type.toLowerCase()===r.BASE&&e[r.SUBSCRIPTION_ID]).filter(e=>!1!==e)[0]}_findTrialPartSbsId(){const e=this.getTrialPart();return e&&e[r.SUBSCRIPTION_ID]}getValueByKey(e){if(this.digitalContext&&this.digitalContext[e])return this.digitalContext[e]}getTrialPart(){const e=this.getEntitledParts();if(e&&e.length>0)return this._getTrialParts(e)}_getTrialParts(t){let n;if(e.each(t,(function(e){if(e[r.PART_TYPE]&&e[r.PART_TYPE].toLowerCase()==r.TRIAL)return n=e,!1})),n)return n}isTrial(){return!!this.getTrialPart()}getTieredParts(){const e=this.getEntitledParts();return e&&e.length>0?this._getTieredParts(e):e}_getTieredParts(t){let n=[];return e.each(t,(function(e){e[r.PART_TYPE]&&e[r.PART_TYPE].toLowerCase()!==r.TRIAL&&e[r.PART_TYPE].toLowerCase()!==r.BASE&&e[r.PART_NUMBER]&&e[r.PART_NUMBER].toLowerCase()==r.PART_NUMBER&&n.push(e)})),n}getEntitledOrganization(){return this.getValueByKey(r.ENTITLED_ORGANIZATION)}getEntitledParts(){return this.digitalContext&&this.digitalContext[r.ENTITLED_PARTS]?this.digitalContext[r.ENTITLED_PARTS]:[]}getEntitledUser(){return this.getValueByKey(r.ENTITLED_USER)}getThirdPartyMarketplace(){return this.getValueByKey(r.THIRD_PARTY_MARKETPLACE)}isThirdPartyMarketplace(){const t=this.getThirdPartyMarketplace();return!e.isEmpty(t)&&t.route_indicator===r.THIRD_PARTY_MARKETPLACE_ID}getUserOtherIdentifiers(){const e=this.getEntitledOrganization();return e&&e[r.OTHER_IDENTIFIER]}getICN(){const e=this.getUserOtherIdentifiers();return e&&e[r.ICN]}getOrgId(){const e=this.getUserOtherIdentifiers();return e&&e[r.ORG_ID]}getTenantId(){if(this.digitalContext&&this.digitalContext[r.TENANT_ID])return this.digitalContext[r.TENANT_ID]}getPartIds(){const t=this.getEntitledParts(),n=[];return t&&t.length>0&&e.each(t,(function(e){n.push(e[r.PART_NUMBER])})),n}_getLogger(){return this._logger}_setLogger(e){e&&e.getCoreSvc(".Logger")?this._logger=e.getCoreSvc(".Logger"):this._logger=console}getDigitalContextObject(){return this.digitalContext}getDigitalContextObjectMock(){return t.ENTITLEMENTS}killDcoCookie(){return this.isEnabled()?this._glassContext.getCoreSvc(".Ajax").ajax({type:"DELETE",url:r.DIGITAL_CONTEXT_URL}):Promise.resolve()}parseJsonFromDcoCookie(e){let t;const n=e.split("_json_");try{t=JSON.parse(n[1])}catch(e){this._getLogger().error("DigitalContextService Not initialized with an invalid cookie")}return t}}return r.ACCOUNT_ID="account_id",r.BASE="base",r.BASE_URL="v1",r.DCO_COOKIE="dco",r.DIGITAL_CONTEXT_ENABLED_CONF="Glass.digitalContextEnabled",r.DIGITAL_CONTEXT_URL=r.BASE_URL+"/digitalcontext",r.ENTITLED_USER="entitled_user",r.ENTITLED_PARTS="entitled_parts",r.ENTITLED_ORGANIZATION="entitled_organization",r.ICN="ibm_customer_number",r.IS_ENABLED="enabled",r.PART_NUMBER="part_number",r.PART_TYPE="type",r.ORG_ID="org_id",r.OTHER_IDENTIFIER="other_identifier",r.SUBSCRIPTION_ID="subscription_id",r.THIRD_PARTY_MARKETPLACE="third_party_marketplace",r.THIRD_PARTY_MARKETPLACE_ID="3PM",r.TENANT_ID="tenant_id",r.TIERED_PART_NUMBER="tiered_part_number",r.TRIAL="trial",r})),define("caglass/app/services/InstrumentationConfigBuilder",[],(function(){return class{constructor(e,t){if(e){const n=e.getCoreSvc(".Config"),i=e.getCoreSvc(".UserProfile"),r=e.getCoreSvc(".DigitalContext"),s=n.getInstrumentationConfig();return s&&s.enabled&&(s.whitelistedValues=s.whitelistedValues.split(","),s.allowlistedValues=s.allowlistedValues.split(","),t&&t.identity&&t.identity.data&&(s.roles=this._getUserRoles(t.identity.data)),n&&(s.versionNumber=n.getVersion()),i&&i.userAccount&&i.preferences&&(s.email=i.userAccount.email,s.capabilities=i.capabilities,s.creationTime=i.userAccount.creationTime,s.productLocale=i.preferences.productLocale),r&&r.isInitialized()&&(s.tenantId=r.getTenantId(),s.accountId=r.getOrgId(),s.accountIdType="ssmHubId",s.partIds=r.getPartIds(),s.isTrial=r.isTrial())),s}}_getUserRoles(e){const t=[];return e.forEach(e=>{"role"===e.type&&t.push(e.defaultName)}),t}}})),define("baglass/utils/Notifier",[],(function(){return class{constructor(){this.cache={}}register(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>this.cache[e]=t)}notify(e){let t;if(this.cache.hasOwnProperty(e)){try{t=this.cache[e](e)}catch(e){return Promise.reject(e)}return t=t||Promise.resolve(),t.then(()=>{this.remove(e)})}return Promise.reject("Notifier::notify '".concat(e,"' not found"))}remove(e){delete this.cache[e]}}})),define("baglass/services/AlertBannerService",["../utils/Notifier","baglass/glass.webpack.bundle","baglass/app/services/ConfigService"],(function(e,t,n){const{AlertStore:i}=t;return class{constructor(t){this.glassContext=t,this.store=i.create({disabled:this._isDisabled()}),this.notifier=new e}_isDisabled(){return this.glassContext.getCoreSvc(".Config").getConfigValueSync(n.DISABLE_ALERTBANNER)}getDisabled(){return this.store.disabled}addAlerts(e,t){Array.isArray(e)||(e=[e]),t&&this.notifier.register(e.map(e=>e.id),t),this.store.addAlerts(e);const n=this.glassContext.getCurrentPerspective();this.glassContext.getCoreSvc(".Events").trigger("".concat(n,":alert:added"),{ids:e.map(e=>e.id),alerts:this.store.getAlerts().length}),setTimeout(()=>{let t=Promise.resolve();e.forEach(e=>{t=t.then(this.removeAlertById.bind(this,e.id))})},12e4)}removeAlert(e){const t=this.store.getAlertAt(e),n=()=>{this.store.removeAlert(e)};return this.notifier.notify(t.id).then(n,n).then(()=>{const e=this.glassContext.getCurrentPerspective();this.glassContext.getCoreSvc(".Events").trigger("".concat(e,":alert:removed"),{alert:t,alerts:this.store.getAlerts().length})})}removeAlertById(e){const t=this.store.getAlerts().findIndex(t=>t.id===e);return t>-1?this.removeAlert(t):Promise.resolve()}getStore(){return this.store}}})),define("caglass/app/services/DigitalDispatcherService",[],(function(){return class{constructor(e){e&&(this.glassContext=e,this.instrumentationService=this.glassContext.getCoreSvc(".Instrumentation"),this.logger=this.glassContext.getCoreSvc(".Logger"))}sendEvent(e){e?(e.instrumentationPayload&&"object"==typeof e.instrumentationPayload&&this._sendInstrumentationEvt(e.instrumentationPayload),e.npsTrigger&&"string"==typeof e.npsTrigger&&this._triggerNpsMomentOfTruth(e.npsTrigger)):this.logger.debug("DigitalDispatcher: Unexpected payload. skipping MOT trigger",e)}_sendInstrumentationEvt(e){this.instrumentationService.enabled&&this.instrumentationService.track(e)}_triggerNpsMomentOfTruth(e){this.glassContext.services.exists(".MultiTenantNPSService")&&(this.npsService=this.glassContext.services.getSvcSync(".MultiTenantNPSService"),this.npsService.triggerNPS(e))}}})),define("caglass/app/StartupCA",["jquery","lodash","baglass/app/AppController","baglass/services/OfflineOnlineService","baglass/nls/StringResources","baglass/core-client/js/core-client/utils/PerfUtils","baglass/core-client/js/core-client/utils/Utils","baglass/utils/Utils","caglass/app/services/CAUserProfileService","caglass/app/services/LogoutService","caglass/ajax/PrepareRequest","caglass/ajax/HandleError","caglass/ajax/HandleResponse","caglass/utils/CAUtils","caglass/ba-instrumentation/dist/bundle","caglass/app/services/CAFEncodingService","caglass/ajax/PrepareRequestURL","caglass/app/services/LoginService","caglass/app/services/DigitalContextService","caglass/app/services/InstrumentationConfigBuilder","baglass/services/AlertBannerService","caglass/app/services/DigitalDispatcherService","jquery-bbq"],(e,t,n,i,r,s,o,a,l,c,u,d,h,p,g,f,m,v,b,y,C,_)=>(w,S)=>{s.createPerformanceMark({component:"glass-foundation",name:"entry",state:"begin"});const P=new n({$rootPane:e("#main"),installInfo:w.configuration.installInfo,versionInfo:w.versionInfo,authInfo:w.authInfo,perspectives:w.perspectives});window.__glassAppController=P;const M=P.glassContext,x=function(e,t,n){e.getCoreSvc(".Config").initialize(t.configuration),e.getCoreSvc(".Taxonomy").initialize(t.taxonomy);const r=new f(e,"<'>");e.registerCoreService(".CAFEncoding",r),e.getCoreSvc(".URLEncoder").registerQSValueEncoder(r.cafEncodeQSValue.bind(r));const s=e.getCoreSvc(".Ajax");s.addRequestHandler(new u(e)),s.addRequestHandler(new m(e)),s.setErrorHandler(new d(e)),s.addResponseHandler(new h(e)),e.registerCoreService(".Login",new v(e));const o=new c;e.services.register(".Logout",o);const a=new l({glassContext:e});e.services.userProfile=a,e.services.register(".UserProfile",a);const p=new b(e);e.registerCoreService(".DigitalContext",p);const y=new g.InstrumentationService;e.registerCoreService(".Instrumentation",y);const w=new i;e.registerCoreService(".OfflineOnline",w);const S=new C(e);e.registerCoreService(".Message",S);const P=new _(e);return e.registerCoreService(".DigitalDispatcher",P),Promise.all([a.initialize(t),p.initialize()]).catch(t=>{e.getCoreSvc(".Logger").error("Error loading UPS and DCS",t)}).then(()=>{n&&n.resolve(e)})}(M,w,S);P.detectAccessibilityChange(!0);const E=t.unescape(e("#queryString_data").text()),I=a.getAppContent(E,e.param.fragment(),M),O=I.perspective,A=I.objRef,D={perspective:O,content:I};return A&&(D.id=A,D.content.objRef=A),delete D.content.module,M.getCoreSvc(".Events").on("appView:loaded",p.removeLoadingSpinner.bind(void 0,M),"removeLoadingSpinnerFunction"),e(document).ready(()=>{window.cssVars&&window.cssVars();const t=o.getCurrentWindow();e(t).on("beforeunload",()=>P.close(!1,!0)),e(t).on("unload",()=>{P.close(!0)})}),x.then(()=>{const t=new y(M,w),n=M.getCoreSvc(".Instrumentation");return n.initialize(M,t).then(()=>{n.enabled&&n.track({type:"Service Login"})}),M.getCoreSvc(".Config").getProductVersion().then(t=>{e("body").attr("productVersion",t)}),P.openAppView(O,D)}).catch(e=>(M.getCoreSvc(".Logger").error("error while showing the home page",e),p.removeLoadingSpinner(M),P.showErrorMessage(r.get("errLoadingView"),r.get("CAInitTitle"))))}),define("caglass/app/LoginCA",["jquery","lodash","baglass/app/AppController","caglass/ajax/CAAuthentication","baglass/nls/StringResources","baglass/core-client/js/core-client/utils/PerfUtils","baglass/core-client/js/core-client/utils/Utils","baglass/core-client/js/core-client/utils/UrlUtils","baglass/utils/Utils","caglass/app/services/LogoutService","caglass/ajax/PrepareRequest","caglass/ajax/HandleError","caglass/utils/CAUtils","caglass/caglass.webpack.bundle","jquery-bbq"],(function(e,t,n,i,r,s,o,a,l,c,u,d,h,p){const{postSecondaryLogin:g}=p;return function(p){s.createPerformanceMark({component:"bi_commons",name:"entry",state:"start"});var f=new n({$rootPane:e("#main"),installInfo:p.configuration.installInfo,versionInfo:p.versionInfo,perspectives:p.perspectives});window.__glassAppController=f;var m=f.glassContext;m.getCoreSvc(".Config").initialize(p.configuration);var v=m.getCoreSvc(".Ajax");v.addRequestHandler(new u(m)),v.setErrorHandler(new d(m));var b=new c;m.services.register(".Logout",b);var y=m.window||o.getCurrentWindow();f.detectAccessibilityChange();var C=t.unescape(e("#queryString_data").text()),_=l.getAppContent(C,e.param.fragment(),m);m.getCoreSvc(".Events").on("appView:loaded",h.removeLoadingSpinner.bind(this,m),"removeLoadingSpinnerFunction");var w,S=p.requestMethod||"GET",P=new i;if(_.legacyLogin){var M={legacyLogin:!0,redirectUrl:_.legacyLogin};w=P.legacyLogin(m,M).then((function(){y.location=_.legacyLogin}))}else if(_.secondaryLogin){let e;_.state&&(e=JSON.parse(a.base64Decode(_.state))),w=P.secondaryLogin(m,e).then(e=>g(y,e)).catch(e=>(m.getCoreSvc(".Logger").error("Error showing the login prompt",e),f.showErrorMessage(r.get("unableLogin"),r.get("CAInitTitle"))))}else w=P.login(m,{initialLogin:!0,requestMethod:S,queryString:e.deparam(C)}).then((function(){if(y.external&&y.external.HasOnClose)return y.external.OnClose(0);if("POST"===S)y.location.assign(y.location.pathname+"?"+h.removeCAMNamespaceHref(C));else{let e=new window.URL(y.location.href);const t=e.searchParams.get("perspective");m.isLoginViewShown()&&t===m.getCurrentPerspective()&&e.searchParams.delete("perspective"),e.pathname=e.pathname.replace("/login",""),_.CAMNamespace&&(e.href=h.removeCAMNamespaceHref(e.href)),y.location.assign(e.pathname+e.search+e.hash)}})).catch((function(e){return m.getCoreSvc(".Logger").error("Cannot login",e),f.showErrorMessage(r.get("unableLogin"),r.get("CAInitTitle"))}));return w}})),define("caglass/app/services/AdminMessageService",["caglass/nls/StringResources"],(function(e){return class{initialize(t){if(t){const n=t.getCoreSvc(".Message");if(n&&this.isAdmin(t))return t.getCoreSvc(".Ajax").ajax({type:"GET",url:"v1/ext/warnings",contentType:"application/json; charset=utf-8",dataType:"json",skipErrorHandling:!0}).then(t=>{const i=t.data,r=[];for(const t in i)r.push({id:"AdminExtWarningMsg",type:"warning",title:e.get("extWarningTitle"),message:e.get("extWarningMessage",{extName:t,specAttr:i[t]})});r.length>0&&n.addAlerts(r)}).catch(e=>{console.log(e)})}}isAdmin(e){return e.getCoreSvc(".UserProfile").capabilities.includes("canUsePortalAdministrationTool")}}})),define("caglass/app/services/CloudMaintenanceBannerService",["caglass/nls/StringResources"],(function(e){return class{initialize(t){if(t){const n=t.getCoreSvc(".Config");if(n["Glass.maintenanceMessage"]){const i={id:"MaintenanceMessage",title:e.get("maintenanceTitle"),message:n["Glass.maintenanceMessage"]};n["Glass.maintenanceLink"]&&(i.action={id:"Glass.maintenanceLink",label:e.get("maintenanceLink"),url:n["Glass.maintenanceLink"]});const r=t.getCoreSvc(".Message");r&&r.addAlerts([i])}}}}})),define("caglass/app/services/all",["./AdminMessageService","./CAFEncodingService","./CAUserProfileService","./CloudMaintenanceBannerService","./CredentialDialogBuilder","./DigitalContextService","./DigitalDispatcherService","./InstrumentationConfigBuilder","./LoginService","./LogoutService"],(function(){})),define("caglass/app/all",["./StartupCA","./LoginCA","./services/all"],(function(){})),define("caglass/common/services/WhatsNewService",["lodash","baglass/app/services/ConfigService"],(function(e,t){class n{constructor(){this._loadMessage=e=>{this._perspectivesLoaded[e.perspective]||(this._perspectivesLoaded[e.perspective]=!0,this._getWhatsNewMessages(e.perspective))},this.dismissMessage=e=>{window.localStorage.setItem(this._getDismissalID(e),!0)}}initialize(e){this.glassContext=e,this._perspectivesLoaded={},this.messageService=this.glassContext.getCoreSvc(".Message"),this._isDisabled()||(e.getCoreSvc(".Events").on("appView:loaded",this._loadMessage),this._getWhatsNewMessages())}_isDisabled(){const e=this.glassContext.getCoreSvc(".Config"),n=this.glassContext.isEmbedded(),i=e.getConfigValueSync(t.DISABLE_WHATSNEWSERVICE),r=!this.messageService||this.messageService.getDisabled();return n||r||i}_getWhatsNewMessages(t){return this._getMessagesAjax(t).then(t=>{let n=t.data;n&&e.isArray(n)&&n.length>0&&(n=n.filter(e=>!this.isMessageDismissed(e.id)),this.messageService&&this.messageService.addAlerts(n,this.dismissMessage))})}_getMessagesAjax(e){return this.glassContext.getCoreSvc(".Ajax").ajax({url:e?n.ENDPOINT_PATH+e:n.ENDPOINT_PATH,headers:{"accept-language":this.glassContext.getCoreSvc(".UserProfile").getProductLocale()}})}isMessageDismissed(e){return null!=window.localStorage.getItem(this._getDismissalID(e))}_getDismissalID(e){return e+"-"+this.glassContext.getCoreSvc(".UserProfile").getAccountID()}}return n.ENDPOINT_PATH="v1/whatsnew/",n})),define("caglass/common/services/all",["./WhatsNewService"],(function(){})),define("caglass/common/all",["./services/all"],(function(){})),define("caglass/utils/all",["./CAUtils","./EntitlementObject"],(function(){})),define("baglass/core-client/js/core-client/utils/Promise",["bluebird"],(function(e){return e.prototype.fail=e.prototype.catch,e.prototype.done=e.prototype.then,/\b(MSIE|Trident|Edge)\b/.test(navigator.userAgent)&&e.setScheduler((function(e){setTimeout(e,0)})),Object.defineProperty(window,"Promise",{get:function(){return e},set:function(){try{throw new Error("Tried to override the global Promise object")}catch(e){console.warn(e)}}}),e})),define("baglass/core-client/js/core-client/utils/Downloader",["../ui/core/Class","jquery","lodash"],(function(e,t,n){"use strict";var i=e.extend({init:function(e){this.fallback=!0,i.inherited("init",this,arguments),n.extend(this,e)},doDownload:function(){return this.url?(this._removeContainers(),this._useHtml5Download()?this._html5Download():this._iFrameDownload(),Promise.resolve()):(this.logger&&this.logger.error("Downloader url is undefined."),Promise.reject(new Error("Downloader url is undefined.")))},_useHtml5Download:function(){return!this.fallback||"download"in document.createElement("a")},_html5Download:function(){i.container=t("<div>").hide().on("click",(function(e){e.stopPropagation()})).appendTo("body");var e=t("<a>",{target:"_blank",href:this.url,download:!this.name||this.name}).appendTo(i.container);this._fireDownload(e)},_iFrameDownload:function(){i.container=t("<iframe>").hide().attr("src",this.url).appendTo("body")},_removeContainers:function(){i.container&&(i.container.remove(),i.container=null)},_fireDownload:function(e){e.length&&e[0].click()}});return i})),define("baglass/core-client/js/core-client/utils/PromptManager",["../ui/core/Class","../utils/ClassFactory","lodash","jquery"],(function(e,t,n,i){"use strict";var r=e.extend({init:function(){r.inherited("init",arguments),this.inProgressMap={},this.pendingPrompts=[]},promptForDataSourceSignon:function(e,t){var n="promptForSignon"+e.dataSourceName,r=this.inProgressMap[n];if(!r)if(r=t||i.Deferred(),this._isPrompting()){var s=this._getPendingPrompt(n);s?r=s.deferred:this.pendingPrompts.push({promptFunction:this.promptForDataSourceSignon.bind(this,e,r),id:n,deferred:r})}else this.inProgressMap[n]=r,this._getSignOnDialog(e,n,r);return r.promise()},_getSignOnDialog:function(e,n,i){var r={dataSourceName:e.dataSourceName,dataSourceConnectionName:e.dataSourceConnectionName,glassContext:e.glassContext,displayErrMsg:!0,promptForPasswordOnly:e.promptForPasswordOnly,isPowerCube:e.isPowerCube,onSubmit:function(){this._removeInProgress(n),i.resolve()}.bind(this),onCancel:function(){this._removeInProgress(n),i.reject()}.bind(this)};return t.instantiate("../ui/content/dialog/SignOnDialog",r).then((function(e){return e.open(),e}))},_getPendingPrompt:function(e){for(var t=null,n=0;n<this.pendingPrompts.length;n++)if(this.pendingPrompts[n].id===e){t=this.pendingPrompts[n];break}return t},_executeNextPrompt:function(){this.pendingPrompts.length>0&&(this.pendingPrompts[0].promptFunction(),this.pendingPrompts.splice(0,1))},_removeInProgress:function(e){delete this.inProgressMap[e],this._executeNextPrompt()},_isPrompting:function(){return Object.keys(this.inProgressMap).length>0}});return new r})),define("baglass/core-client/js/core-client/i18n/Locales",["require","exports","module"],(function(e,t,n){return n.config()&&n.config().locales||[]})),define("baglass/core-client/js/core-client/i18n/Utils",[],(function(){return{parseLocale:function(e){var t,n=-1!=e.indexOf("-")?"-":"_",i=e.split(n),r=null,s=null;function o(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}return t=i[0].toLowerCase(),3===i.length?(r=o(i[1]),s=i[2].toUpperCase()):2===i.length&&(i[1].length<=2?s=i[1].toUpperCase():r=o(i[1])),{lang:t,script:r,region:s,toString:function(){var e=[t];return r&&e.push(r),s&&e.push(s),e.join("-")}}}}})),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),define("baglass/core-client/js/core-client/i18n/Load",["require","text!ecma402/cldr/config/availableLocales.json","lodash","module","./Locales","./Utils","text"],(function(e,t,n,i,r,s){return{id:i.id,load:function(e,t,n,i){var o=this;if(i&&i.isBuild)n();else{var a=r.map((function(e){return o._resolveLocale(e)})),l=[];a.forEach((function(e){var t=s.parseLocale(e),n=t.lang;t.region&&-1===a.indexOf(n)&&l.push(n)}));var c=["root"].concat(l,_toConsumableArray(a)),u=[];c.forEach((function(e){u.push("text!ecma402/cldr/"+e+"/custom_numbers.json"),u.push("text!ecma402/cldr/"+e+"/ca-gregorian.json")}));var d=null;Promise.all(this._loadDependencies(t,u)).then((function(e){e.forEach((function(e){if(e){var t=Object.entries(e.data.main)[0][0];null===d?d=e.data.main:d[t]?Object.assign(d[t],e.data.main[t]):Object.assign(d,e.data.main)}})),n(d)})).catch((function(e){console.error("Failed to load cldr data.",e),n(d)}))}},_loadDependencies:function(e,t){var n=[],i=/cldr\/([a-zA-z-]+)\//;return t.forEach((function(t){var r=t.match(i)[1];n.push(new Promise((function(n){e([t],(function(e){n({data:JSON.parse(e),locale:r,path:t})}),(function(){n(),console.warn("Unable to load formatting resource: '"+t+"'")}))})))})),n},_resolveLocale:function(e){if(e){var n=e.indexOf("-"),i=JSON.parse(t).availableLocales,r=e;if(n>0){var o=s.parseLocale(e);r=o.toString(),-1===i.indexOf(r)&&(r=-1!==i.indexOf(o.lang)?o.lang:"en")}return-1===i.indexOf(r)&&(r="en"),r}return"en"}}})),define("baglass/core-client/js/core-client/i18n/Const",[],(function(){return{TOKENS:{DOW:"dddd",FULL_M:"MMMM",LONG_M:"MMM",MEDIUM_M:"MM",MO:"Mo",SHORT_M:"M",D:"D",DO:"Do",DD:"DD",Y:"Y",Y_SHORT:"YY",A:"A",ZZ:"zz"},SIZES:["full","long","medium","short"],TYPES:{numbers:"numbers",dates:"dates"}}})),define("baglass/core-client/js/core-client/i18n/FormatResources",["../ui/core/Class","./Load!","./Const","./Locales","./Utils"],(function(e,t,n,i,r){return new(e.extend({init:function(){},getListSeparatorSymbol:function(e){return this._lookupResource(e,"numbers.symbols-numberSystem-latn.list")},getShortNumberFormatPatterns:function(e){return this._lookupResource(e,"numbers.decimalFormats-numberSystem-latn.short.decimalFormat")},getDateFormatPatterns:function(e){var t=this._lookupResource(e,"dates.calendars.gregorian.dateFormats");return t.short=t.short.replace(/yy/,"y"),t},getTimeFormatPatterns:function(e){return this._lookupResource(e,"dates.calendars.gregorian.timeFormats")},getDateTimeFormatPatterns:function(e){var t=this,i=this._lookupResource(e,"dates.calendars.gregorian.dateTimeFormats"),r=n.SIZES,s=/\{1\}/,o=/\{0\}/,a={};return r.forEach((function(n){var r=t.getDateFormatPatterns(e)[n],l=t.getTimeFormatPatterns(e)[n],c=i[n];a[n]=c.replace(s,r).replace(o,l)})),a},_lookupResource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=arguments[1],n=r.parseLocale(e),i=n.lang,s=n.script,o=n.region,a=this._getResource(i+"."+t);return null===a&&(a=this._getResource("root."+t)),s&&(a=this._extendResource(a,i+"-"+s+"."+t)),s&&o&&(a=this._extendResource(a,i+"-"+s+"-"+o+"."+t)),!s&&o&&(a=this._extendResource(a,i+"-"+o+"."+t)),a},_extendResource:function(e,t){var n=this._getResource(t);return null!==n?"string"==typeof e?n:Object.assign(Object.create(e),n):e},_getResource:function(e){var n=e.split(".").reduce((function(e,t){return e?e[t]:null}),t);return void 0===n?null:n}}))})),define("baglass/core-client/js/core-client/i18n/CurrencySymbols",[],(function(){return{AED:{symbol:"د.إ."},ARS:{symbol:"$"},AUD:{symbol:"$",replace:"A$"},BDT:{symbol:"৳"},BRL:{symbol:"R$"},CAD:{symbol:"$",replace:"CA$"},CHF:{symbol:"Fr."},CLP:{symbol:"$"},CNY:{symbol:"¥",replace:"CN¥"},COP:{symbol:"$"},CZK:{symbol:"Kč"},DKK:{symbol:"kr"},DZD:{symbol:"د.ج.‏"},EGP:{symbol:"ج.م.‏"},EUR:{symbol:"€"},GBP:{symbol:"£"},HKD:{symbol:"HK$"},HUF:{symbol:"Ft"},IDR:{symbol:"Rp"},ILS:{symbol:"₪"},INR:{symbol:"₹"},IRR:{symbol:"﷼"},JPY:{symbol:"¥"},KRW:{symbol:"₩"},KZT:{symbol:"₸"},MXN:{symbol:"$"},MYR:{symbol:"RM"},NGN:{symbol:"₦"},NOK:{symbol:"kr"},PEN:{symbol:"S/."},PHP:{symbol:"₱"},PKR:{symbol:"₨"},PLN:{symbol:"zł"},RON:{symbol:"lei"},RUB:{symbol:"руб."},SAR:{symbol:"﷼"},SEK:{symbol:"kr"},SGD:{symbol:"S$"},THB:{symbol:"฿"},TRY:{symbol:"TL"},TWD:{symbol:"NT$"},UAH:{symbol:"₴"},USD:{symbol:"$",replace:"US$"},VEF:{symbol:"Bs.F."},VND:{symbol:"₫"},ZAR:{symbol:"R"}}})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/ar.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd، MMMM[ ]D[، ]Y",\n        "dddd، D[ ]MMMM[، ]Y",\n        "dddd، Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[، ]Y",\n        "D[ ]MMMM[، ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MM[‏/]DD[‏/]Y",\n        "DD[‏/]MM[‏/]Y",\n        "Y[‏/]MM[‏/]DD"\n    ],\n    "short": [\n        "M[‏/]D[‏/]Y",\n        "D[‏/]M[‏/]Y",\n        "Y[‏/]M[‏/]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/zh-cn.json",[],(function(){return'{\n\t"defaultOrder": [2,2,2,2],\n\t"dateFormats": {\n    "full": [\n        "M[月]D[日]Y年dddd",\n        "D[日]M[月]Y年dddd",\n        "Y[年]M[月]D日dddd"\n    ],\n    "long": [\n        "M[月]D[日]Y[年]",\n        "D[日]M[月]Y[年]",\n        "Y[年]M[月]D[日]"\n    ],\n    "medium": [\n        "M[月]D[日]Y[年]",\n        "D[日]M[月]Y[年]",\n        "Y[年]M[月]D[日]"\n    ],\n    "short": [\n        "M[/]D[/]Y",\n        "D[/]M[/]Y",\n        "Y[/]M[/]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/cs.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[. ]D[ ]Y",\n        "dddd, D[. ]MMMM[ ]Y",\n        "dddd, Y[. ]MMMM[. ]D"\n    ],\n    "long": [\n        "MMMM[. ]D[ ]Y",\n        "D[. ]MMMM[ ]Y",\n        "Y[. ]MMMM[. ]D"\n    ],\n    "medium": [\n        "M[. ]D[. ]Y",\n        "D[. ]M[. ]Y",\n        "Y[. ]M[. ]D"\n    ],\n    "short": [\n        "MM[.]DD[.]YY",\n        "DD[.]MM[.]YY",\n        "YY[.]MM[.]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/da.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd d. MMMM[ ]D[. ]Y",\n        "dddd d. D[. ]MMMM[ ]Y",\n        "dddd d. Y[ ]MMMM[ ]D[.]"\n    ],\n    "long": [\n        "MMMM[ ]D[. ]Y",\n        "D[. ]MMMM[ ]Y",\n        "Y[. ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[. ]Y",\n        "D[. ]MMM[ ]Y",\n        "Y[ ]MMM[ ]D[.]"\n    ],\n    "short": [\n        "MM[/]DD[/]Y",\n        "DD[/]MM[/]Y",\n        "Y[/]MM[/]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/nl.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd MMMM[ ]D[ ]Y",\n        "dddd D[ ]MMMM[ ]Y",\n        "dddd Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y",\n        "D[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[-]D[-]Y",\n        "D[-]MMM[-]Y",\n        "Y[-]MMM[-]D"\n    ],\n    "short": [\n        "M[-]D[-]YY",\n        "D[-]M[-]YY",\n        "YY[-]M[-]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/en.json",[],(function(){return'{\n\t"defaultOrder": [0,0,0,0],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ ]D[, ]Y",\n        "dddd, D[ ]MMMM[, ]Y",\n        "dddd, Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[, ]Y",\n        "D[ ]MMMM[, ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[, ]Y",\n        "D[ ]MMM[, ]Y",\n        "Y[ ]MMM[ ]D"\n    ],\n    "short": [\n        "M[/]D[/]Y",\n        "D[/]M[/]Y",\n        "Y[/]M[/]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/en-au.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ ]D[ ]Y",\n        "dddd, D[ ]MMMM[ ]Y",\n        "dddd, Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y",\n        "D[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[ ]Y",\n        "D[ ]MMM[ ]Y",\n        "Y[ ]MMM[ ]D"\n    ],\n    "short": [\n        "M[/]D[/]YY",\n        "D[/]M[/]YY",\n        "YY[/]M[/]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/en-ie.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd MMMM[ ]D[ ]Y",\n        "dddd D[ ]MMMM[ ]Y",\n        "dddd Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y",\n        "D[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[ ]Y",\n        "D[ ]MMM[ ]Y",\n        "Y[ ]MMM[ ]D"\n    ],\n    "short": [\n        "MM[/]DD[/]Y",\n        "DD[/]MM[/]Y",\n        "Y[/]MM[/]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/fo.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM D[.] Y",\n        "dddd, D[.] MMMM Y",\n        "dddd, Y MMMM D[.]"\n    ],\n    "long": [\n        "MMMM[. ]D[ ]Y",\n        "D[. ]MMMM[ ]Y",\n        "Y[. ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MM[.]DD[.]Y",\n        "DD[.]MM[.]Y",\n        "Y[.]MM[.]DD"\n    ],\n    "short": [\n        "MM[.]DD[.]YY",\n        "DD[.]MM[.]YY",\n        "YY[.]MM[.]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/fi.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ta ]D[ta ]Y",\n        "dddd, D[. ]MMMM[ta ]Y",\n        "dddd, Y[. ]MMMM[ta ]D"\n    ],\n    "long": [\n        "MMMM[. ]D[ta ]Y",\n        "D[. ]MMMM[ta ]Y",\n        "Y[. ]MMMM[. ]D"\n    ],\n    "medium": [\n        "M[.]D[.]Y",\n        "D[.]M[.]Y",\n        "Y[.]M[.]D"\n    ],\n    "short": [\n        "M[.]D[.]Y",\n        "D[.]M[.]Y",\n        "Y[.]M[.]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/fr-ch.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ ]D[ ]Y",\n        "dddd, D[ ]MMMM[ ]Y",\n        "dddd, Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y",\n        "D[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[ ]YY",\n        "D[ ]MMM[ ]YY",\n        "YY[ ]MMM[ ]D"\n    ],\n    "short": [\n        "MM[.]DD[.]YY",\n        "DD[.]MM[.]YY",\n        "MM[.]DD[.]YY"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/hu.json",[],(function(){return'{\n\t"defaultOrder": [2,2,2,2],\n\t"dateFormats": {\n    "full": [\n        "MMMM[ ]D[. ]Y., dddd",\n        "D[. ]MMMM[. ]Y., dddd",\n        "Y[. ]MMMM[ ]D., dddd"\n    ],\n    "long": [\n        "MMMM[ ]D[. ]Y[.]",\n        "D[. ]MMMM[. ]Y[.]",\n        "Y[. ]MMMM[ ]D[.]"\n    ],\n    "medium": [\n        "MMM[ ]D[. ]Y[.]",\n        "D[. ]MMM[ ]Y[.]",\n        "Y[. ]MMM[ ]D[.]"\n    ],\n    "short": [\n        "MM[. ]DD[. ]Y[.]",\n        "DD[. ]MM[. ]Y[.]",\n        "Y[. ]MM[. ]DD[.]"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/it.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd MMMM[ ]D[ ]Y",\n        "dddd D[ ]MMMM[ ]Y",\n        "dddd Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]DD[ ]Y",\n        "DD[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]DD"\n    ],\n    "medium": [\n        "MMM[/]DD[/]Y[/]",\n        "DD[/]MMM[/]Y",\n        "Y[/]MMM[/]DD"\n    ],\n    "short": [\n        "MM[/]DD[/]YY",\n        "DD[/]MM[/]YY",\n        "YY[/]MM[/]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/ja.json",[],(function(){return'{\n\t"defaultOrder": [2,2,2,2],\n\t"dateFormats": {\n    "full": [\n        "M[月]D[日]Y年dddd",\n        "D[日]M[月]Y年dddd",\n        "Y[年]M[月]D日dddd"\n    ],\n    "long": [\n        "M[月]D[日]Y[年]",\n        "D[月]M[日]Y[年]",\n        "Y[年]M[月]D[日]"\n    ],\n    "medium": [\n        "MM[/]DD[/]Y",\n        "DD[/]MM[/]Y",\n        "Y[/]MM[/]DD"\n    ],\n    "short": [\n        "MM[/]DD[/]YY",\n        "DD[/]MM[/]YY",\n        "YY[/]MM[/]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/ko.json",[],(function(){return'{\n\t"defaultOrder": [2,2,2,2],\n\t"dateFormats": {\n    "full": [\n        "M[월 ]D[일 ]Y년 dddd",\n        "D[일]M[월 ]Y년 dddd",\n        "Y[년 ]M[월 ]D일 dddd"\n    ],\n    "long": [\n        "M[월 ]D[일]Y[년]",\n        "D[일]M[월 ]Y[년]",\n        "Y[년 ]M[월 ]D[일]"\n    ],\n    "medium": [\n        "M[. ]D[. ]Y[.]",\n        "D[. ]M[. ]Y[.]",\n        "Y[. ]M[. ]D[.]"\n    ],\n    "short": [\n        "M[. ]D[. ]YY[.]",\n        "D[. ]M[. ]YY[.]",\n        "YY[. ]M[. ]D[.]"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/nb.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd MMMM[. ]D[ ]Y",\n        "dddd D[. ]MMMM[ ]Y",\n        "dddd Y[. ]MMMM[. ]D"\n    ],\n    "long": [\n        "MMMM[. ]D[ ]Y",\n        "D[. ]MMMM[ ]Y",\n        "Y[. ]MMMM[. ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[. ]Y",\n        "D[. ]MMM[ ]Y",\n        "Y[. ]MMM[ ]D"\n    ],\n    "short": [\n        "MM[.]DD[.]YY",\n        "DD[.]MM[.]YY",\n        "YY[.]MM[.]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/pl.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ ]D[ ]Y",\n        "dddd, D[ ]MMMM[ ]Y",\n        "dddd, Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y",\n        "D[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MM[-]DD[-]Y",\n        "DD[-]MM[-]Y",\n        "Y[-]MM[-]DD"\n    ],\n    "short": [\n        "MM[-]DD[-]YY",\n        "DD[-]MM[-]YY",\n        "YY[-]MM[-]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/pt.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ de ]D[ de ]Y",\n        "dddd, D[ de ]MMMM[ de ]Y",\n        "dddd, Y[ de ]MMMM[ de ]D"\n    ],\n    "long": [\n        "MMMM[ de ]D[ de ]Y",\n        "D[ de ]MMMM[ de ]Y",\n        "Y[ de ]MMMM[ de ]D"\n    ],\n    "medium": [\n        "MMM[ de ]D[ de ]Y",\n        "D[ de ]MMM[ de ]Y",\n        "Y[ de ]MMM[ de ]D"\n    ],\n    "short": [\n        "MM[/]DD[/]Y",\n        "DD[/]MM[/]Y",\n        "Y[/]MM[/]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/ru.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ ]D[ ]Y[ г.]",\n        "dddd, D[ ]MMMM[ ]Y[ г.]",\n        "dddd, Y[ ]MMMM[ ]D[ г.]"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y[ г.]",\n        "D[ ]MMMM[ ]Y[ г.]",\n        "Y[ ]MMMM[ ]D[ г.]"\n    ],\n    "medium": [\n        "MMM[ ]D[ ]Y[ г.]",\n        "D[ ]MMM[ ]Y[ г.]",\n        "Y[ ]MMM[ ]D[ г.]"\n    ],\n    "short": [\n        "MM[.]DD[.]YY",\n        "DD[.]MM[.]YY",\n        "YY[.]MM[.]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/sk.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd MMMM[. ]D[ ]Y",\n        "dddd D[. ]MMMM[ ]Y",\n        "dddd Y[. ]MMMM[. ]D"\n    ],\n    "long": [\n        "MMMM[. ]D[ ]Y",\n        "D[. ]MMMM[ ]Y",\n        "Y[. ]MMMM[. ]D"\n    ],\n    "medium": [\n        "M[. ]D[. ]Y",\n        "D[. ]M[. ]Y",\n        "Y[. ]M[. ]D"\n    ],\n    "short": [\n        "M[. ]D[. ]Y",\n        "D[. ]M[. ]Y",\n        "Y[. ]M[. ]D"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/es.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "dddd, MMMM[ de ]D[ de ]Y",\n        "dddd, D[ de ]MMMM[ de ]Y",\n        "dddd, Y[ de ]MMMM[ de ]D"\n    ],\n    "long": [\n        "MMMM[ de ]D[ de ]Y",\n        "D[ de ]MMMM[ de ]Y",\n        "Y[ de ]MMMM[ de ]D"\n    ],\n    "medium": [\n        "MM[/]DD[/]Y",\n        "DD[/]MM[/]Y",\n        "Y[/]MM[/]DD"\n    ],\n    "short": [\n        "MM[/]DD[/]YY",\n        "DD[/]MM[/]YY",\n        "YY[/]MM[/]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/sv.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,2],\n\t"dateFormats": {\n    "full": [\n        "dddd MMMM[ ]D[ ]Y",\n        "dddd D[ ]MMMM[ ]Y",\n        "dddd Y[ ]MMMM[ ]D"\n    ],\n    "long": [\n        "MMM[ ]D[ ]Y",\n        "D[ ]MMM[ ]Y",\n        "Y[ ]MMM[ ]D"\n    ],\n    "medium": [\n        "MM[-]DD[-]Y",\n        "DD[-]MM[-]Y",\n        "Y[-]MM[-]DD"\n    ],\n    "short": [\n        "MM[-]DD[-]Y",\n        "DD[-]MM[-]Y",\n        "Y[-]MM[-]DD"\n    ]\n}\n}\n'})),define("text!baglass/core-client/js/core-client/i18n/custom/locale/tr.json",[],(function(){return'{\n\t"defaultOrder": [1,1,1,1],\n\t"dateFormats": {\n    "full": [\n        "MMMM[ ]DD[ ]Y dddd",\n        "DD[ ]MMMM[ ]Y dddd",\n        "Y[ ]MMMM[ ]DD dddd"\n    ],\n    "long": [\n        "MMMM[ ]D[ ]Y",\n        "D[ ]MMMM[ ]Y",\n        "Y[ ]MMMM[ ]D"\n    ],\n    "medium": [\n        "MMM[ ]D[ ]Y",\n        "D[ ]MMM[ ]Y",\n        "Y[ ]MMM[ ]D"\n    ],\n    "short": [\n        "MM[.]D[.]Y",\n        "D[.]MM[.]Y",\n        "Y[.]MM[.]D"\n    ]\n}\n}\n'})),define("baglass/core-client/js/core-client/i18n/custom/locale/all",["text!./ar.json","text!./zh-cn.json","text!./cs.json","text!./da.json","text!./nl.json","text!./en.json","text!./en-au.json","text!./en-ie.json","text!./fo.json","text!./fi.json","text!./fr-ch.json","text!./hu.json","text!./it.json","text!./ja.json","text!./ko.json","text!./nb.json","text!./pl.json","text!./pt.json","text!./ru.json","text!./sk.json","text!./es.json","text!./sv.json","text!./tr.json"],(function(e,t,n,i,r,s,o,a,l,c,u,d,h,p,g,f,m,v,b,y,C,_,w){return{no:JSON.parse(f),nono:JSON.parse(f),ar:JSON.parse(e),ardz:JSON.parse(e),arbh:JSON.parse(e),areg:JSON.parse(e),ariq:JSON.parse(e),arjo:JSON.parse(e),arkw:JSON.parse(e),arlb:JSON.parse(e),arly:JSON.parse(e),arma:JSON.parse(e),arom:JSON.parse(e),arqa:JSON.parse(e),arsa:JSON.parse(e),arsy:JSON.parse(e),artn:JSON.parse(e),arae:JSON.parse(e),arye:JSON.parse(e),zhcn:JSON.parse(t),zhhk:JSON.parse(t),zhmo:JSON.parse(t),zhsg:JSON.parse(t),zhtw:JSON.parse(t),zh:JSON.parse(t),cs:JSON.parse(n),cscz:JSON.parse(n),da:JSON.parse(i),dadk:JSON.parse(i),nl:JSON.parse(r),nlnl:JSON.parse(r),en:JSON.parse(s),envi:JSON.parse(s),enus:JSON.parse(s),or:JSON.parse(s),orin:JSON.parse(s),zu:JSON.parse(s),zuza:JSON.parse(s),enau:JSON.parse(o),ensg:JSON.parse(o),el:JSON.parse(o),elgr:JSON.parse(o),hi:JSON.parse(o),hiin:JSON.parse(o),pa:JSON.parse(o),pain:JSON.parse(o),enie:JSON.parse(a),fr:JSON.parse(a),frfr:JSON.parse(a),frlu:JSON.parse(a),ga:JSON.parse(a),gaie:JSON.parse(a),fo:JSON.parse(l),fofo:JSON.parse(l),de:JSON.parse(l),deat:JSON.parse(l),debe:JSON.parse(l),dede:JSON.parse(l),delu:JSON.parse(l),dech:JSON.parse(l),fi:JSON.parse(c),fifi:JSON.parse(c),frch:JSON.parse(u),itch:JSON.parse(u),hu:JSON.parse(d),huhu:JSON.parse(d),it:JSON.parse(h),itit:JSON.parse(h),ja:JSON.parse(p),jajp:JSON.parse(p),ko:JSON.parse(g),kokr:JSON.parse(g),nb:JSON.parse(f),nbno:JSON.parse(f),nn:JSON.parse(f),nnno:JSON.parse(f),pl:JSON.parse(m),plpl:JSON.parse(m),ro:JSON.parse(m),roro:JSON.parse(m),pt:JSON.parse(v),ptbr:JSON.parse(v),ru:JSON.parse(b),ruru:JSON.parse(b),ruua:JSON.parse(b),sk:JSON.parse(y),sksk:JSON.parse(y),es:JSON.parse(C),esar:JSON.parse(C),escr:JSON.parse(C),esdo:JSON.parse(C),esec:JSON.parse(C),essv:JSON.parse(C),esni:JSON.parse(C),espy:JSON.parse(C),eses:JSON.parse(C),esus:JSON.parse(C),esuy:JSON.parse(C),esve:JSON.parse(C),sv:JSON.parse(_),svse:JSON.parse(_),tr:JSON.parse(w),trtr:JSON.parse(w)}})),define("baglass/core-client/js/core-client/i18n/custom/Date",["./locale/all"],(function(e){var t={MDY:0,DMY:1,YMD:2},n="short",i={full:0,long:1,medium:2,short:3};return{getDateFormat:function(){function r(){_classCallCheck(this,r)}return _createClass(r,null,[{key:"getDateFormat",value:function(r,s){var o=s.formatLength,a=s.separator,l=s.displayOrder;o=o||n;var c=e[r]||e.en,u="";if(l=l?t[l]:c.defaultOrder[i[o]],u=c.dateFormats[o][l],a){u=u.replace(/\[[^[\]]*\]/g,(function(){return a})),a="[\\^$.|?*+(){}".includes(a)?"\\\\"+a:a;var d=new RegExp("("+a+"$|^"+a+")","g");u=u.replace(d,(function(){return""}))}return u}}]),r}().getDateFormat}}));var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};define("baglass/core-client/js/core-client/i18n/Formatter",["moment-timezone","ecma402/IntlShim","./FormatResources","./CurrencySymbols","lodash","./Const","../i18n/custom/Date"],(function(e,t,n,i,r,s,o){var a="NumberFormat",l=0,c=20,u="()";return new(function(){function d(){_classCallCheck(this,d),this.formatterCache={}}return _createClass(d,[{key:"parseDecimal",value:function(e,t){function n(e){return e.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&").replace(/[\s]/g,"\\s")}var i=this.formatNumber(.1,t?{locale:t}:null).substring(1,2),r=new RegExp("["+n(i)+"]"),s=new RegExp("[^\\d"+n(i)+"]","g"),o=e.replace(s,"");return Number(o.replace(r,"."))}},{key:"format",value:function(e,t){return t?null!=e&&""!==e||!t.defaultValue?"date"===t.type||"datetime"===t.type||"time"===t.type||"lastModified"===t.type?this.formatDateTime(e,t):"year"===t.type?this.formatYear(e,t):"text"===t.type?this.formatText(e,t):this.formatNumber(e,t):t.defaultValue:this.formatNumber(e,{type:"decimal"})}},{key:"formatNumber",value:function(e,t){if(r.isNaN(e))return"NaN";var n=e,s=String(Math.round(Math.abs(e))).length,o={style:"decimal"},l=t&&t.locale||this._getUserLocale();if(t)if("currency"===t.type){t.currencyCode&&(o.style=t.type,o.currency=t.currencyCode,o.currencyDisplay=t.currencyDisplay),o.useGrouping=t.useGrouping;var c=0;if(r.isNumber(t.minimumFractionDigits)&&(c=t.minimumFractionDigits,o.minimumFractionDigits=t.minimumFractionDigits),r.isNumber(t.maximumFractionDigits)&&(o.maximumFractionDigits=Math.max(t.maximumFractionDigits,c)),o.pattern=t.pattern,t.decimalFormatLength&&"short"===t.decimalFormatLength&&s>=4)return this._formatShortNumber(e,l,t)}else if("percent"===t.type)!1===t.convertPercent&&(e/=100),o.style=t.type,r.isNumber(t.minimumFractionDigits)&&(o.minimumFractionDigits=t.minimumFractionDigits),r.isNumber(t.maximumFractionDigits)&&(o.maximumFractionDigits=t.maximumFractionDigits),o.useGrouping=t.useGrouping;else if(r.extend(o,t),t.decimalFormatLength&&"short"===t.decimalFormatLength&&s>=4)return this._formatShortNumber(e,l,t);var u=this._getFormatter(l,o,a);if(t&&t.pattern&&(u.resolved.pattern=t.pattern),n=t&&"number"===t.type?u.format(Math.abs(e)):u.format(e),t&&"number"===t.type&&e<0&&(n=this._formatNegativeSign(n,t)),o.currency&&"code"!==t.currencyDisplay&&i[o.currency]){var d=i[o.currency].replace?i[o.currency].replace:o.currency;n=n.replace(d,i[o.currency].symbol)}if(t&&t.currencySymbol&&"code"!==t.currencyDisplay){var h=o.currency&&i[o.currency]&&i[o.currency].symbol;n=h?n.replace(h,t.currencySymbol):t.currencySymbol+n}return(n=this._addNumberLabel(n,t))&&"NaN"!==n&&"-NaN"!==n?n:e}},{key:"_formatNegativeSign",value:function(e,t){var n=t.sign||"-";return n===u?"("+e+")":"true"===t.useTrailingSign?""+e+n:""+n+e}},{key:"formatDateTime",value:function(t,n){var i=null,r=this._getUserLocale(),s=e.tz.guess(),o="l",a="",l=void 0;n&&("lastModified"===(a=n.type||"")&&(n.type="datetime"),r=n.locale||r,o=this._getDateTimeFormat(r,n),s=n.timezone||s);try{if(this.isTimeOnly(t))l=e.utc("1970-01-01T"+t).locale(r);else if("lastModified"===a)l=e.utc(t,"ddd, DD MMM YYYY HH:mm:ss [GMT]").tz(s);else{if("year"===a&&(o=this._getMomentDateTimeFormatOption(t,n),this.isAlreadyFormattedYear(t,o)))return t;"Invalid Date"===e.tz(t,s).locale(r).tz(s).format(o)?l=e.tz(new Date(t),s).locale(r).tz(s):(l=e.tz(t,s).locale(r),(n.displayOrder||n.separator)&&(o=this._getCustomDateFormat(r,n)))}i=l.format(o)}catch(e){i=t}return!l||l&&!l.isValid()?t:i}},{key:"isAlreadyFormattedYear",value:function(e,t){var n=Number.parseInt(e);return!Number.isNaN(n)&&(""+e).length<=t.length}},{key:"formatYear",value:function(t,n){var i,r="l";if(n&&(r=this._getMomentDateTimeFormatOption(t,n)),this.isAlreadyFormattedYear(t,r))return t;var s=e(t+"010");return i=s.format(r),s.isValid()?i:t}},{key:"formatText",value:function(e,t){return e}},{key:"_getUserLocale",value:function(){return requirejs.s.contexts._.config.locale||"en-us"}},{key:"_getCustomDateFormat",value:function(e,t){var n={formatLength:t.formatLength||t.dateStyle,displayOrder:t.displayOrder,separator:t.separator};return this.getCustomDateFormat(e,n)}},{key:"isTimeOnly",value:function(e){var t=new Date(e),n=t.getTime();return!!isNaN(n)&&(n=(t=new Date("1970-01-01T"+e)).getTime(),!isNaN(n)||(n=(t=new Date("1970-01-01T"+e+"Z")).getTime(),!isNaN(n)))}},{key:"_formatShortNumber",value:function(e,t,i){var r=String(Math.round(Math.abs(e))),s=r.length,o=void 0,l=n.getShortNumberFormatPatterns(t),c=Object.keys(l),u=c[c.length-1],d=u.substring(0,u.indexOf("-")).length;r.length>d&&(s=d);var h=i.maximumSignificantDigits?i.maximumSignificantDigits:r.length>15?r.length-15+3:3,p=l[this._generatePatternKey(s)],g=p.lastIndexOf("0")-p.indexOf("0")+1;h<g&&(h=g);var f={maximumFractionDigits:2,maximumSignificantDigits:h};i.currencyCode&&(f.style="currency",f.currency=i.currencyCode,f.currencyDisplay=i.currencyDisplay),o=this._getFormatter(t,f,a);var m=i&&"number"===i.type?o.format(Math.abs(e)/this._getDevisionFactor(s,g)):o.format(e/this._getDevisionFactor(s,g)),v=void 0;if(i.currencyCode&&!isNaN(parseInt(m.charAt(0)))){var b=m.split(/\s/),y=_slicedToArray(b,2),C=y[0],_=y[1];v=p.replace(/0+/g,C)+" "+_}else v=p.replace(/0+/g,m);return i&&"number"===i.type&&e<0&&(v=this._formatNegativeSign(v,i)),(v=this._addNumberLabel(v,i)).replace(/'/g,"")}},{key:"_addNumberLabel",value:function(e,t){return t&&t.numberLabel&&(e=t.numberLabelPosition&&"left"===t.numberLabelPosition?t.numberLabel+e:e+t.numberLabel),e}},{key:"_getDevisionFactor",value:function(e,t){return Math.pow(10,e-t)}},{key:"_generatePatternKey",value:function(e){return"1"+new Array(e).join("0")+"-count-other"}},{key:"_getFormatter",value:function(e,n,i){var r=this._getFormatTypeValidOptions(n,i),s=this._createCacheKey(e,r,i),o=this.formatterCache[s];return o||(o=new t[i](e,r),this.formatterCache[s]=o),o}},{key:"_getFormatTypeValidOptions",value:function(e,t){var n=e;switch(t){case a:n=this._getValidNumberOptions(n)}return n}},{key:"_getValidNumberOptions",value:function(e){var t=r.extend(e),n=function(e){r.isUndefined(t[e])||(t[e]>c?t[e]=c:t[e]<l&&(t[e]=l))};return n("minimumFractionDigits"),n("maximumFractionDigits"),t}},{key:"_createCacheKey",value:function(e,t,n){for(var i=Object.keys(t).sort(),r=[n,e],s=void 0,o=0;o<i.length;o++)s=i[o],r.push(s,t[s]);return r.join()}},{key:"isInt",value:function(e){return"number"==typeof e&&e%1==0}},{key:"_hasTime",value:function(e){return e instanceof Date||this.isInt(e)||e.indexOf("T")>0||e.indexOf(":")>0}},{key:"_getMomentDateTimeFormatOption",value:function(e,t){var n="l";if("time"===t.type||this.isTimeOnly(e))switch(t.formatLength||t.timeStyle){case"full":n="HH:mm:ss A";break;case"long":n="hh:mm:ss A";break;case"medium":n="h:m:s A";break;case"short":default:n="LT"}else if("year"===t.type)switch(t.formatLength){case"full":case"long":case"medium":n="YYYY";break;case"short":n="YY";break;default:n="YYYY"}else if("date"===t.type)switch(t.formatLength||t.dateStyle){case"full":n="LLLL";break;case"long":n="LLL";break;case"medium":n="ll";break;case"short":default:n="l"}else if("datetime"===t.type||this._hasTime(e))switch(t.formatLength||t.dateStyle){case"full":n="LLLL";break;case"long":n="LLL";break;case"medium":n="lll";break;case"short":default:n="l LT"}return n}},{key:"_getDateTimeFormat",value:function(e,t){var i=t.formatLength||t.dateStyle||t.timeStyle||"short";-1===s.SIZES.indexOf(i)&&(i="short");var r,o,a=void 0;switch(t.type){case"time":a=n.getTimeFormatPatterns;break;case"date":a=n.getDateFormatPatterns;break;case"datetime":a=n.getDateTimeFormatPatterns;break;default:a=n.getDateTimeFormatPatterns}return r=a.call(n,e)[i],o=s.TOKENS,r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/'[^']+'/g,(function(e){return"["+(e=e.replace(/'/g,""))+"]"}))).replace(/\bEEEE\b/,o.DOW)).replace(/\bcccc\b/,o.DOW)).replace(/\bdd\b/,o.DD)).replace(/\bd\b/,o.D)).replace(/\byy\b/,o.Y_SHORT)).replace(/\by\b/,o.Y)).replace(/\ba\b/,o.A)).replace(/\bzzzz\b/,o.ZZ)}},{key:"getCustomDateFormat",value:function(e,t){return o.getDateFormat(e,t)}}]),d}())})),define("baglass/core-client/js/core-client/utils/DateTimeUtils",["moment-timezone","../i18n/Formatter","baglass/services/LogService"],(function(e,t,n){return{LOCALIZED_DATE_FORMAT:{long:"ddd LL",medium:"ll",short:"l"},LOCALIZED_DATETIME_FORMAT:{long:"llll",medium:"lll",short:"l LT"},LOCALIZED_TIME_FORMAT:{long:"LTS",short:"LT"},LOCALE_MOMENT_MAP:{"zh-hans":"zh-cn","zh-hans-sg":"zh-cn","zh-sg":"zh-cn","zh-hant":"zh-tw","zh-hant-hk":"zh-tw","zh-hk":"zh-tw","zh-mo":"zh-tw"},_userTimeLocale:function(e){var t,n=e||{},i={contentLocale:n.contentLocale||"en",timeZone:n.timeZone||"America/New_York"};return void 0!==(t=this.LOCALE_MOMENT_MAP[i.contentLocale.toLowerCase()])&&(i.contentLocale=t),i},format:function(e,n,i,r){var s={type:e,locale:(r=this._userTimeLocale(r)).contentLocale,timezone:r.timeZone,formatLength:i};return t.format(n,s)},formatDate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.format.apply(this,["date"].concat(t))},formatDateTime:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.format.apply(this,["datetime"].concat(t))},formatTime:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.format.apply(this,["time"].concat(t))},is24HrFormat:function(t){t||(new n).error("No locale provided");return(e.localeData(t)||e.localeData("en")).longDateFormat("LT").indexOf("H")>-1},getCustomDateFormat:function(e,n){return t.getCustomDateFormat(e,n)}}})),define("baglass/core-client/js/core-client/utils/LoadCSS",[],(function(){return{_handlers:{},_handlerIndex:1,load:function(e,t){t=t||window.document;var n=this._createNode(t,e);return this._ready(t,function(){this._getInsertLocation(t).parentNode.insertBefore(n,null)}.bind(this)),this._handlers["_loadCB"+this._handlerIndex]=this._loadCB.bind(this,n,this._handlerIndex),n.addEventListener("load",this._handlers["_loadCB"+this._handlerIndex]),n.addEventListener("error",this._handlers["_loadCB"+this._handlerIndex]),this._handlerIndex++,n},_createNode:function(e,t){var n=e.createElement("link");return n.rel="stylesheet",n.href=t,n.media="awesome possum",n},_loadCB:function(e,t){e.removeEventListener("load",this._handlers["_loadCB"+t]),e.removeEventListener("error",this._handlers["_loadCB"+t]),this._handlers["_loadCB"+t]=null,e.media="all"},_getInsertLocation:function(e){var t=e.getElementsByTagName("head")[0].childNodes;return t[t.length-1]},_ready:function(e,t){if(e.head)return t();setTimeout((function(){this._ready(t)}))},onload:function(e,t,n){function i(r){e.removeEventListener("load",i),e.removeEventListener("error",i),"load"===r.type?t():n()}e.addEventListener("load",i),e.addEventListener("error",i)},unload:function(e){e.remove()}}})),define("baglass/core-client/js/core-client/utils/LoadCSSPromise",["./LoadCSS"],(function(e){return{_LoadCSS:e,load:function(e,t,n,i){try{var r=this._LoadCSS.load(e,t);Array.isArray(i)&&i.forEach((function(e){r.setAttribute(e.name,e.type)}));var s=new Promise(function(e,t){this._LoadCSS.onload(r,(function(){e(r)}),t)}.bind(this));return this._promiseTimeout(s,n||12e4)}catch(e){return Promise.reject(e)}},unload:function(e){this._LoadCSS.unload(e)},_promiseTimeout:function(e,t){var n=new Promise((function(e,n){setTimeout((function(){n(new Error("operation timed out"))}),t)}));return Promise.race([e,n])}}})),define("baglass/core-client/js/core-client/utils/all",["./Promise","./dom-utils","./Downloader","./PromptManager","./DateTimeUtils","./PerfUtils","./LoadCSS","./LoadCSSPromise","./UniqueId","./JQueryExt"],(function(){})),define("baglass/core-client/js/core-client/ui/dialogs/MessageBox",["./BaseDialog","jquery","lodash"],(function(e,t,n){var i=null;return i=e.extend({_buttons:["ok"],init:function(e,t,n){this._props={type:e,title:t,msg:n},this.id="com-ibm-ca-messageBoxTitle",this.contentId="com-ibm-ca-messageBoxContent",i.inherited("init",this,[this._props])},renderContent:function(e){return e.append(t("<div>",{class:"messageBox "+this._props.type,"aria-label":this._props.msg,html:n.escape(this._props.msg)})),e},renderTitle:function(e){return e.text(this._props.title),e}})})),define("baglass/core-client/js/core-client/ui/dialogs/ConfirmationDialog",["./MessageBox"],(function(e){var t=e.extend({_buttons:["ok","cancel"],_confirmCallback:null,_cancelCallback:null,confirm:function(e,n){this._confirmCallback=e,this._cancelCallback=n,t.inherited("open",this)},ok:function(){t.inherited("ok",this,arguments),this._confirmCallback&&this._confirmCallback()},cancel:function(){t.inherited("cancel",this,arguments),this._cancelCallback&&this._cancelCallback()}});return t})),define("baglass/core-client/js/core-client/ui/dialogs/all",["./BaseDialog","./ConfirmationDialog","./GenericViewDialog","./MessageBox"],(function(){})),define("baglass/core-client/js/core-client/ui/ToastMessage",["./core/Class","lodash","jquery","toastr","../utils/Utils","../nls/StringResources","../utils/JQueryTabbable"],(function(e,t,n,i,r,s){var o=e.extend({TIMEOUT:3e3,MAX_TOAST:5,currentOptions:{},defaultOptions:{closeButton:!0,newestOnTop:!1,tapToDismiss:!1,positionClass:"toast-top-center",showDuration:"500",hideDuration:"500",showEasing:"swing",hideEasing:"linear",showMethod:"slideDown",hideMethod:"slideUp",type:"success",iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},secondaryLabel:s.get("details"),target:".glass, body:not(body:has(.glass))"},init:function(e){this.toastrOptions={},n.extend(!0,this.toastrOptions,this.defaultOptions,e),this.toastrOptions.timeOut=this.toastrOptions.timeOut||0,this.toastrOptions.extendedTimeOut=0,o.inherited("init",this,arguments)},render:function(e){var o=n.now(),a="toast-message"+o,l="toast-icon"+o;t.isUndefined(i.options.type)&&(i.options.type="success");var c=s.get(i.options.type);if(i.options.btnLabel){var u=n("<div></div>",{"aria-label":i.options.btnLabel,title:i.options.btnLabel,class:"toast-close-label",type:"button",role:"button",tabIndex:"0"});u.text(i.options.btnLabel),i.options.closeHtml=u[0]}else{var d=s.get("close"),h=n("<div></div>",{role:"button","aria-label":d,title:d,class:"toast-close-div",tabIndex:"0"});r.setIcon(h,"common-close_icon",d),i.options.closeHtml=h[0]}i.options.type=i.options.type.toLowerCase();var p,g="common-success";switch(e=t.escape(e),this._isMessageLarge(e)&&t.each(i.options.iconClasses,(function(e,t){i.options.iconClasses[t]=e.concat(" large")})),i.options.type){case"info":i.options.timeOut=0===i.options.timeOut?this.TIMEOUT:i.options.timeOut,p=i.info(e),g="common-info-moreinfo";break;case"warning":i.options.timeOut=i.options.timeOut||0,p=i.warning(e),g="common-warning";break;case"error":i.options.timeOut=i.options.timeOut||0,p=i.error(e),g="common-error";break;default:i.options.timeOut=0===i.options.timeOut?this.TIMEOUT:i.options.timeOut,p=i.success(e)}if(p){p.parent().removeAttr("role aria-live"),r.activateAriaAlert(e),p.attr("aria-labelledby",l+" "+a),p.find(".toast-message").attr("id",a);var f=n("<div></div>",{class:"toast-icon",id:l,"aria-label":c});p.append(f),r.setIcon(f,g,c),t.isFunction(i.options.callback)&&p.find(".toast-close-button").on("primaryaction",i.options.callback),n(p).unbind("mouseenter mouseleave");var m=p.find(".toast-close-button");this._addSecondaryButton(m),m.on("primaryaction",function(e){m.off("primaryaction"),m.trigger("click"),this.setNextTabFocus(p),e&&e.stopPropagation()}.bind(this)),p.on("click",function(e){e&&e.stopPropagation()}.bind(this)),this._limitToast()}return p},show:function(e){return i.options=this.toastrOptions,this.render(e)},setNextTabFocus:function(e){var t=e.next(".toast").find(".toast-close-button").first();0===t.length&&(t=e.prev(".toast").find(".toast-close-button").first()),0===t.length?n(":tabbable:first").focus():t.focus()},_limitToast:function(){var e=n(document).find("#toast-container").children();if(e.length>this.MAX_TOAST)for(var t=e.length-this.MAX_TOAST,r=0;r<t;r++)n(e[r]).hasClass("toast-progress")||i.clear(n(e[r]))},_addSecondaryButton:function(e){var t=this;if(this.toastrOptions.secondaryCallback){var i=n('<button class="secondaryButton">'+this.toastrOptions.secondaryLabel+"</button>");i.click((function(){t.toastrOptions.secondaryCallback(),e.trigger("primaryaction")})),e.after(i)}},_isMessageLarge:function(e){var t,i=n('<span class = "test-message">'+e+"</span>");i.css("width",200),i.css("height","auto"),i.css("font-size",15),i.css("font-family","HelvNeue Roman for IBM"),i.css("word-wrap","break-word");var r=n("<div></div>");return r.css("width",200),r.css("position","absolute"),r.css("left",-500),r.append(i),n("body").append(r),t=i.height()>30,r.remove(),t}});return o.remove=function(){n("#toast-container").children(":not(.toast-progress)").remove()},o})),define("baglass/core-client/js/core-client/ui/ProgressToast",["lodash","jquery","toastr","../utils/Utils","../nls/StringResources","./ToastMessage","../utils/JQueryExt"],(function(e,t,n,i,r,s){return s.extend({open:!1,hide:!1,currentBar:null,progressPercentage:null,statusBars:null,_onComplete:null,REMOVE_DELAY:3e3,DEFAULT_DURATION:500,defaultOptions:{newestOnTop:!0,tapToDismiss:!1,positionClass:"toast-top-center",preventDuplicates:!1,hideDuration:500,showEasing:"swing",hideEasing:"linear",showMethod:"slideDown",hideMethod:"slideUp",onClick:function(){},iconClasses:{success:"toast-progress"},target:".glass, body:not(body:has(.glass))"},btns:{hide:{class:"hide-action",i18n:"progressHideBtn",callback:function(e){t(e.target).blur(),this.remove(0),this.setNextTabFocus(this.$el)}},cancel:{class:"cancel",i18n:"cancel",callback:function(e){t(e.target).blur(),this.remove(0),this.setNextTabFocus(this.$el)}},details:{class:"details",i18n:"details"}},render:function(i){var s=t("<div></div>",{style:"float:right;padding-right:16px;"});e.each(this.btns,function(n,i){var o=t('<button type="button" tabIndex="0" class="toast-close-button '+n.class+'" role="button">'+r.get(n.i18n)+"</button>");n.$btn=o;var a=i.charAt(0).toUpperCase()+i.slice(1),l=n.callback||this.toastrOptions["on"+a];(e.isUndefined(l)||!0===this.toastrOptions["no"+a+"Btn"])&&this.hideButton(i),e.isFunction(l)&&this["on"+a](l.bind(this)),s.append(o)}.bind(this));var o=e.isUndefined(i)?r.get("defaultProgressMessage"):i;this.$el=n.success(e.escape(o)),this.$el.parent().removeAttr("role aria-live"),this.setMessage(o);var a=this._getUniqueId(),l=a+"Msg";this.$el.attr({id:a,"aria-labelledby":l}),this.$el.find("div.toast-close-button").attr("class","toast-buttons");var c=t("<div>",{class:"linear-bar-wrapper"}),u=t("<div>"),d=t("<div>",{class:"loading-indef-meter hidden"}),h=t("<div>",{class:"loading-indicator"}),p=t("<div>",{class:"loading-meter"}),g=t("<div>",{class:"loading-complete hidden"}),f=t("<div>",{class:"loading-pause-grey hidden"}),m=t("<div>",{}),v=t("<div>",{class:"loading-fail-grey hidden"});return u.append(h),p.append(u),c.append(p),f.append(m),c.append(f),c.append(v),c.append(d),c.append(g),this.currentBar=p,this.statusBars={progress:p,indefinite:d,pause:f,fail:v,complete:g},this.progressPercentage=0,this.$el.append(s),this.$el.append(c),t(this.$el).unbind("mouseenter mouseleave"),this.$el.find(".toast-message").attr("id",l),this.$el},show:function(e){if(!this.open)return this.open=!0,n.options=this.toastrOptions,this.render(e)},hideButton:function(t){if(e.isString(t)){var n=t.toLowerCase(),i=this.btns[n].$btn;i&&i.addClass("hidden")}},showButton:function(t){if(e.isString(t)){var n=t.toLowerCase(),i=this.btns[n].$btn;i&&i.removeClass("hidden")}},progress:function(t){var n=e.isUndefined(t)?r.get("defaultProgressMessage"):t;this.setMessage(n),this._setStatusToBar("progress"),this._changeBorderColor("progress"),this._setBarToNormal()},fail:function(t){var n=e.isUndefined(t)?r.get("defaultFailMessage"):t;this.setMessage(n),this._setStatusToBar("fail"),this._changeBorderColor("fail")},pause:function(t){var n=e.isUndefined(t)?r.get("defaultPauseMessage"):t;this.setMessage(n),this._setStatusToBar("pause"),this.currentBar.children().css("width",this.progressPercentage+"%")},indefinite:function(t){var n=e.isUndefined(t)?r.get("defaultIndefiniteMessage"):t;this.setMessage(n),this._changeBorderColor("indefinite"),this._setStatusToBar("indefinite")},setMessage:function(e){e&&(this.$el.find(".toast-message").text(e),i.activateAriaAlert(e))},onCancel:function(e){this.btns.cancel.$btn.on("primaryaction",function(t){e(t),this.open=!1}.bind(this))},onHide:function(e){this.btns.hide.$btn.on("primaryaction",function(t){e(t),this.hide=!0}.bind(this))},onDetails:function(e){this.btns.details.$btn.on("primaryaction",function(t){e(t)}.bind(this))},reset:function(){this.statusBars.progress.find("> div").css("width",0),this.progress(),this.progressPercentage=0,this.open&&(this.open=!1)},getCurrentProgress:function(){return this.progressPercentage},remove:function(i){if(this.open){var r=t("#"+this.$el.attr("id"));return i=e.isUndefined(i)?this.REMOVE_DELAY:i,new Promise((function(e){setTimeout(function(){n.clear(r),e()}.bind(this),i)}))}},setComplete:function(t,n){var i;if(e.isUndefined(t))return!1;if(this.currentBar.hasClass("loading-meter")||this.progress(),!this.open||this.progressPercentage>t||t>100)return!1;e.isUndefined(n)||(i=e.isUndefined(n.duration)?this.DEFAULT_DURATION:n.duration);var o=t+"%";this.progressPercentage=t;var a={width:o},l={duration:i,easing:"swing"};return l.complete=function(){var t,i,o,a=!1;(e.isUndefined(n)||(e.isUndefined(n.completeMsg)||(t=n.completeMsg),e.isFunction(n.onComplete)&&(a=!0),o=n.isComplete,i=e.isUndefined(n.removeDelay)?this.REMOVE_DELAY:n.removeDelay),o)&&(e.isUndefined(t)&&(t=r.get("defaultCompleteMessage")),this.hide?(new s).show(t):(i>=0&&this.remove(i).then(function(){this.open=!1}.bind(this)),this._setBarToComplete(t),this._changeBorderColor("complete")));t&&this.setMessage(t),a&&n.onComplete()}.bind(this),this.$el.find(".loading-meter > div").animate(a,l),!0},_getUniqueId:function(){return this.viewId+e.uniqueId("_progress")},_setStatusToBar:function(e){this.currentBar.addClass("hidden"),this.statusBars[e].removeClass("hidden"),this.currentBar=this.statusBars[e]},_setBarToComplete:function(){this._setStatusToBar("complete"),this.btns.cancel.$btn.addClass("hidden")},_changeBorderColor:function(e){this.$el.removeClass("progress indefinite fail complete"),this.$el.addClass(e)},_setBarToNormal:function(){this._setStatusToBar("progress"),this.btns.cancel.$btn.removeClass("hidden")}})})),define("baglass/core-client/js/core-client/ui/all",["./dialogs/all","./ProgressToast"],(function(){})),define("baglass/core-client/js/core-client/i18n/V5Formatter",["../ui/core/Class","lodash","./Formatter"],(function(e,t,n){var i={numberFormat:"number",currencyFormat:"currency",percentFormat:"percent",dateFormat:"date",dateTimeFormat:"datetime",timeFormat:"time",stringFormat:"text"},r={decimalSize:function(e){if(e.decimalSize)return{minimumFractionDigits:parseInt(e.decimalSize),maximumFractionDigits:parseInt(e.decimalSize)}},useGrouping:function(e){return t.isUndefined(e.useGrouping)?{}:{useGrouping:"true"===e.useGrouping}},currencyCode:"currencyCode",currencySymbol:"currencySymbol",useIntlSymbol:function(e){return{currencyDisplay:"true"===e.useIntlSymbol?"code":"symbol"}},dateStyle:"dateStyle",dateSeparator:"separator",displayOrder:"displayOrder",timeStyle:"timeStyle",numberLabel:"numberLabel",numberLabelPosition:"numberLabelPosition",whenMissing:function(e){if(e.whenMissing)return{defaultValue:e.whenMissing}},sign:"sign",useTrailingSign:"useTrailingSign"},s={number:["decimalSize","useGrouping","numberLabel","numberLabelPosition","whenMissing","sign","useTrailingSign"],currency:["decimalSize","currencyCode","currencySymbol","useIntlSymbol","useGrouping","numberLabel","numberLabelPosition","whenMissing"],percent:["decimalSize","useGrouping","whenMissing"],date:["dateStyle","dateSeparator","displayOrder","whenMissing"],datetime:["dateStyle","timeStyle"],time:["timeStyle","whenMissing"],text:["whenMissing"]},o=new Set;Object.values(s).forEach((function(e){e.forEach((function(e){return o.add(e)}))}));var a=Array.from(o),l=Object.keys(i);return new(e.extend({format:function(e,t,i){var r=i||t.getFormat();return r&&this.getFormatSpec(r)?n.format(e,this.getFormatSpec(i)):e},getFormatSpec:function(e){var n=null;if(e)try{var i=t.isObject(e)?e:JSON.parse(e);n=this._getFormatSpec(i)}catch(t){console.error("Invalid format spec: "+e)}return n},_getFormatSpec:function(e){var t,n=this._getFormatGroup(e),r=null;if(n)for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)){r=n[t];break}var s=null;return r&&t in i&&(s={type:i[t]},this._fillInSpecProperties(s,n)),s},_fillInSpecProperties:function(e,n){var i={};t.each(n,(function(e){for(var t in e)i[t]=e[t]}));var o=s[e.type];t.each(o,(function(n){var s=r[n];if(t.isObject(s))t.extend(e,s(i));else{var o=i[n];void 0!==o&&(e[s]=o)}}))},_getPropValue:function(e,n){var i=r[e];return i&&t.isFunction(i)?i(n):n[i]},_getFormatGroup:function(e){return e.formatGroup||e.format&&e.format.formatGroup},getSupportedV5Props:function(){return a},getFormatType:function(e){return i[e]},getSupportedV5Types:function(){return l}}))})),define("js/glass/bundle",(function(){}));