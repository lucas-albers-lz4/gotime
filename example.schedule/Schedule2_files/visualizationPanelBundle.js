/**
 * IBM Confidential OCO Source Materials IBM Business Platform: Dashboard
 * (C) Copyright IBM Corp. 2016, 2021
 *
 * The source code for this program is not published or otherwise divested of
 * its trade secrets, irrespective of what has been deposited with the U.S.
 * Copyright Office
 */

function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}define("text!dashboard-analytics/visualizationPanel/templates/LoadingIndicator.html",[],(function(){return'<div class="loadingIndicatorContainer">\n    <div class="loading_indicator"></div>\n</div>'})),define("dashboard-analytics/visualizationPanel/components/VisualizationContentContainer",["react","react-dom","prop-types","@ba/ba-ui-carbon-toolkit","@ba/ba-ui-carbon"],(function(e,t,n,i,s){var o=e.Component,a=i.Container,r=i.FlexLayout,c=i.FlexItem,l=i.SVGIcon,u=i.Multilinetruncatedtext,d=i.TruncatedText,p=s.ClickableTile,m=function(t){function n(){return t.apply(this,arguments)||this}_inheritsLoose(n,t);var i=n.prototype;return i.componentDidMount=function(){this.props.handlers.componentDidMountCallback(this.props.containerClass,this.props.itemClass)},i.componentWillUnmount=function(){this.props.handlers.componentWillUnmountCallback(this.props.containerClass,this.props.itemClass)},i.render=function(){var t=this,n=this.props,i=n.containerClass,s=n.items,o=[];return s.forEach((function(e){o.push(t.renderVisualizationItem(e))})),e.createElement(a,{className:i},e.createElement(r,{fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(c,null,e.createElement(r,{fullHeight:!0,direction:"row",wrap:"wrap"},o))))},i.renderVisualizationItem=function(t){var n=t.label&&-1!==t.label.indexOf(" ");return e.createElement(c,{role:"group",className:"prop-item","data-name":t.name,"walkme-data-id":t.name},e.createElement(p,{className:"vis-type-tile"},e.createElement(r,{fullHeight:!0,direction:"column",alignItems:"center",justifyContent:"center",tabIndex:0,className:"prop-icon",role:"button","aria-label":t.label},e.createElement(c,null,e.createElement(l,{iconId:t.icon,height:24,width:24,className:"svgIcon"})),e.createElement(c,null,e.createElement("div",{className:"prop-icon-label-container"},n?e.createElement(u,{className:"prop-icon-label",value:t.label,numLines:2}):e.createElement(d,{className:"prop-icon-label",value:t.label}))))))},n}(o);return m.propTypes={items:n.array.isRequired,containerClass:n.string.isRequired,itemClass:n.string.isRequired,handlers:n.shape({componentDidMountCallback:n.func.isRequired,componentWillUnmountCallback:n.func.isRequired}).isRequired},m})),define("dashboard-analytics/visualizationPanel/components/contextMenu/ContextMenuWrapper",["react","react-dom","prop-types","@ba/ba-ui-carbon-toolkit"],(function(e,t,n,i){var s=e.Component,o=i.ContextMenu,a=function(t){function n(){return t.apply(this,arguments)||this}_inheritsLoose(n,t);var i=n.prototype;return i.render=function(){var t=this.props,n=t.theme,i=t.placement,s=void 0===i?"bottomRight":i,a=t.align,r=void 0===a?"left":a,c=t.domNodeToAttachTo,l=void 0===c?document.body:c,u=t.triggerNode,d=t.contextMenuItems,p=t.onClose,m=t.onChange;if(d&&d.length)return e.createElement(o,{theme:n,placement:s,align:r,triggerNode:u,domNodeToAttachTo:l,onClose:p,onChange:m},this._renderMenuItems(d))},i._renderMenuItems=function(e){var t=this;if(e)return e.map((function(e,n){return t._renderMenuSection(e,n)}))},i._renderMenuSection=function(t,n){if(Array.isArray(t.items)){var i=t.name,s=void 0===i?"menu":i,a=t.label,r=t.items;return e.createElement(o.List,{key:n,content:r,name:s,label:a,clickSelection:!0})}return e.createElement(o.Separator,{key:n})},n}(s);return a.propTypes={contextMenuItems:n.array,placement:n.string,align:n.string,triggerNode:n.object,style:n.object,domNodeToAttachTo:n.object,theme:n.bool,onClose:n.func,onChange:n.func},a})),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"));else if("function"==typeof define&&define.amd)define("dashboard-analytics/lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/icons-js/overflow-menu--vertical_32",["@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"],t);else{var n=t("object"==typeof exports?require("@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"):e["@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}("undefined"!=typeof self?self:this,(function(e){return webpackJsonPBaGraphics([464],{"05e92c9505a6025ba118":function(e,t,n){"use strict";var i=n("9689a9c94ae38b47fa2c"),s=n.n(i),o=n("9ce58a7deea14f49ef01"),a=n.n(o),r=new s.a({id:"overflow-menu--vertical_32_v7",use:"overflow-menu--vertical_32_v7-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="overflow-menu--vertical_32_v7"><circle cx="16" cy="8" r="2" /><circle cx="16" cy="16" r="2" /><circle cx="16" cy="24" r="2" /></symbol>'});a.a.add(r),t.a=r},"226a34d55d3eac820fae":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("6873601dfe1d9459c1a9"),s=(n.n(i),n("05e92c9505a6025ba118"));t.default=s.a},"6873601dfe1d9459c1a9":function(t,n){t.exports=e}},["226a34d55d3eac820fae"])})),define("dashboard-analytics/visualizationPanel/components/VisualItem",["react","prop-types","@ba/ba-ui-carbon-toolkit","jquery","./contextMenu/ContextMenuWrapper","../../widgets/livewidget/nls/StringResources","../../visualizations/vipr/VIPRBundleHelper","../../lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/icons-js/overflow-menu--vertical_32"],(function(e,t,n,i,s,o,a,r){var c=e.Component,l=n.FlexLayout,u=n.FlexItem,d=n.VSpacer,p=n.HSpacer,m=n.SVGIcon,h=n.Label,f=n.Dialog,b=n.Multilinetruncatedtext,g=n.TruncatedText,v=function(t){function n(n){var i;(i=t.call(this,n)||this).target=void 0,i._iconRef=null,i._rootRef=e.createRef(),i.state={item:i.props.item,isContextMenuOpen:!1,openDeleteDialog:!1};var s=i.state.item;return i._renderContext={icon:s.icon,description:s.label,isDisabled:!1},i}_inheritsLoose(n,t);var r=n.prototype;return r.componentDidMount=function(){this._renderContext.isDisabled||this._attachCallbacksAndImages()},r._attachCallbacksAndImages=function(){var e=this._findChildVisCustomVisNode();e&&this.props.handlers.componentDidMountCallback("vis-custom-container","visualItemLayout",e);this._appendIconNode()},r.componentWillUnmount=function(){this._renderContext.isDisabled||this._detachCallbacksAndImages()},r._detachCallbacksAndImages=function(){var e=this._findChildVisCustomVisNode();e&&this.props.handlers.componentWillUnmountCallback("vis-custom-container","visualItemLayout",e);this._iconRef=null},r.render=function(){var t=this.state.item,n="vis-custom-vis"+(this._renderContext.isDisabled?" no-sdk":"");return e.createElement(u,{className:this._getVisualItemCssClasses(),role:"group"},e.createElement("div",{ref:this._rootRef},e.createElement(l,{fullHeight:!0,direction:"column"},e.createElement(u,{className:n,"data-name":t.name},this._renderItem()),e.createElement(u,null,e.createElement(d,{size:1}))),this.renderDeleteDialog()))},r._getVisualItemCssClasses=function(){return"vis-custom-visual-item"},r._renderItem=function(){var t,n=this.state.item;return t=this._canRenderMenuOption()?this._isSchematic(n)&&n.numSVGs>1?this._renderSchematicCountWithOptions():this._renderMenuOption():e.createElement(d,{size:1.5}),e.createElement(l,{fullHeight:!0,direction:"column",className:"visualItemLayout"},e.createElement(u,null,e.createElement(d,{size:.5})),e.createElement(u,{className:"vis-options"},t),e.createElement(u,null,this._renderContent()))},r._renderContent=function(){var t=this.state.item,n="prop-item"+(this._renderContext.isDisabled?" is-disabled":"");return e.createElement(l,{fullHeight:!0,direction:"column",role:"button",className:n,"data-name":t.name},e.createElement(u,{role:"group"},this._renderVisIcon()),e.createElement(u,null,this._renderVisLabel()))},r._canRenderMenuOption=function(){return this.props.customVisAction.canManage()},r._isSchematic=function(e){var t=this.props.handlers;return t.isSchematicType(e)&&!t.isSchematicTypePreview(e)},r._renderMenuOption=function(){var t=this.props.menuIcon,n=this.state.item;return e.createElement(l,{fullHeight:!0,direction:"row-reverse",className:"vis-custom-menu-overflow"},e.createElement(u,null,e.createElement(p,{size:1})),e.createElement(u,{"data-name":n.name,className:"vis-custom-menu-overflow-anchor",title:o.get("extVisMore")},e.createElement(m,{size:"small",className:"svgIcon",verticalAlign:"initial",tabIndex:0,iconId:t.default.id,onKeyUp:this._renderContextMenu.bind(this),onClick:this._handleOnClick.bind(this)}),this._renderContextMenu()))},r._renderSchematicCountWithOptions=function(){var t=this.state.item,n=this._canRenderMenuOption(),i=n?"50%":"100%";return e.createElement(l,{fullHeight:!0,direction:"row",justifyContent:"space-between"},e.createElement(u,{width:i,grow:!0,shrink:!0},e.createElement(l,{fullHeight:!0,direction:"row",justifyContent:"flex-start"},e.createElement(u,null,e.createElement(p,{size:.5})),e.createElement(u,null,e.createElement("div",{className:"vis-svg-count-container",title:t.numSVGs,"aria-label":t.numSVGs},e.createElement(h,{className:"vis-svg-count-content",label:t.numSVGs}))))),n&&e.createElement(u,{grow:!0,shrink:!0},this._renderMenuOption()))},r._renderVisIcon=function(){var t=this.state.item;return e.createElement(l,{fullHeight:!0,direction:"column",alignItems:"center",tabIndex:0,className:"prop-icon","aria-label":t.label},e.createElement(u,null,a.isValidIconFileExt(t.icon)?this._renderIconRef():this._renderIcon()))},r._renderIcon=function(){var t="svgIcon"+(this._renderContext.isDisabled?" is-disabled":"");return e.createElement(m,{iconId:this._renderContext.icon,height:24,width:24,className:t})},r._renderIconRef=function(){return this._iconRef=e.createRef(),e.createElement("div",{ref:this._iconRef})},r._appendIconNode=function(){if(this._iconRef&&this._iconRef.current){var e=this.state.item.placeholderIcon,t=i('<img src="'+e+'"></img>');t.addClass("is-small"),t.addClass("ba-common-svgIcon"),t.css({height:"24px",width:"24px","vertical-align":"bottom"}),this._iconRef.current.appendChild(t[0])}},r._renderVisLabel=function(){var t="vis-custom-vis-label"+(this._renderContext.isDisabled?" no-sdk":""),n=-1!==this._renderContext.description.indexOf(" ");return e.createElement(l,{fullHeight:!0,direction:"column",alignItems:"center","aria-label":this._renderContext.description},e.createElement(u,null,n?e.createElement(b,{className:t,value:this._renderContext.description,numLines:2}):e.createElement(g,{className:t,value:this._renderContext.description})))},r._renderContextMenu=function(){var e=this.state.item;if(this.state.isContextMenuOpen&&this.target&&(!this.targetName||this.targetName===e.name))return this._getContextMenuContent()},r._getContextMenuContent=function(){return e.createElement(s,{theme:!0,placement:"bottomRight",align:"left",triggerNode:this.target,domNodeToAttachTo:document.body,onClose:this.onClose.bind(this),onChange:this.onChange.bind(this),contextMenuItems:this._getContextMenuItems()})},r.onClose=function(){this.target&&i(this.target).removeClass("open-context-menu"),this.target=void 0,this.targetName=void 0,this.setState({isContextMenuOpen:!1})},r.onChange=function(e,t){if("delete"===t)this.setState({openDeleteDialog:!0});else if("update"===t){var n=this.props.customVisAction,i=this.state.item;n.openSelectBundleFileDialog&&n.openSelectBundleFileDialog(i)}this.onClose()},r.renderDeleteDialog=function(){var t=this;return e.createElement("div",null,this.state.openDeleteDialog&&e.createElement(f,_extends({},{size:"small",width:"20px",minWidth:"450px",maxWidth:"500px",clickaway:!1,theme:"ba-theme-default",startingFocusIndex:1},{onClose:function(){t.setState({openDeleteDialog:!1})}}),e.createElement(f.Header,null,o.get("extVisDeleteDialogTitle")),e.createElement(f.Body,null,o.get("extVisDeleteDialogBody")),e.createElement(f.Footer,null,e.createElement(f.Button,{primary:!0,label:o.get("extVisCustomDelete"),onClick:function(){t.deleteCustomVisualization()}}),e.createElement(f.Button,{label:o.get("dlg_cancel"),onClick:function(){t.setState({openDeleteDialog:!1})}}))))},r.deleteCustomVisualization=function(){this.setState({openDeleteDialog:!1}),(0,this.props.onContextMenuChange)(this.state.item,"delete")},r._getContextMenuItems=function(){return[{items:[{id:"update",value:"update",label:o.get("extVisCustomUpdate")}]},{},{items:[{id:"delete",value:"delete",label:o.get("extVisCustomDelete")}]}]},r._handleOnClick=function(e){if(this.state.isContextMenuOpen)this.target&&i(this.target).removeClass("open-context-menu"),this.target=void 0,this.targetName=void 0,this.setState({isContextMenuOpen:!1});else{var t=i(e.target);(t=t.closest(".vis-custom-menu-overflow-anchor")).addClass("open-context-menu"),this.target=t[0],this.targetName=t.data("name"),this.setState({isContextMenuOpen:!0})}},r._findChildVisCustomVisNode=function(){return this._rootRef.current?i(this._rootRef.current).find(".prop-item"):null},n}(c);return v.propTypes={item:t.object.isRequired,iconsFeature:t.object.isRequired,handlers:t.shape({componentDidMountCallback:t.func.isRequired,componentWillUnmountCallback:t.func.isRequired,isSchematicType:t.func.isRequired,isSchematicTypePreview:t.func.isRequired}).isRequired,openSelectBundleFileDialog:t.func.isRequired,onContextMenuChange:t.func,customVisAction:t.object.isRequired,menuIcon:t.object},v.defaultProps={onContextMenuChange:function(){},openSelectBundleFileDialog:function(){},menuIcon:r},v})),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"));else if("function"==typeof define&&define.amd)define("dashboard-analytics/lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/icons-js/information_16",["@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"],t);else{var n=t("object"==typeof exports?require("@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"):e["@ba/ba-graphics/dist/icons-js/ba-graphics-icons-commons.js"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}("undefined"!=typeof self?self:this,(function(e){return webpackJsonPBaGraphics([620],{"2dabc7b141fc376b4462":function(e,t,n){"use strict";var i=n("9689a9c94ae38b47fa2c"),s=n.n(i),o=n("9ce58a7deea14f49ef01"),a=n.n(o),r=new s.a({id:"information_16_v7",use:"information_16_v7-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="information_16_v7"><path d="M8.5 11L8.5 6.5 6.5 6.5 6.5 7.5 7.5 7.5 7.5 11 6 11 6 12 10 12 10 11zM8 3.5c-.4 0-.8.3-.8.8S7.6 5 8 5c.4 0 .8-.3.8-.8S8.4 3.5 8 3.5z" /><path d="M8,15c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S11.9,15,8,15z M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z" /></symbol>'});a.a.add(r),t.a=r},"6873601dfe1d9459c1a9":function(t,n){t.exports=e},"81d634d51c8ee12bbf26":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("6873601dfe1d9459c1a9"),s=(n.n(i),n("2dabc7b141fc376b4462"));t.default=s.a}},["81d634d51c8ee12bbf26"])})),define("dashboard-analytics/visualizationPanel/components/custom/PreviewVisualItem",["react","prop-types","@ba/ba-ui-carbon-toolkit","../VisualItem","../../../widgets/livewidget/nls/StringResources","../../../lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/icons-js/information_16"],(function(e,t,n,i,s,o){var a=n.FlexLayout,r=n.FlexItem,c=n.VSpacer,l=n.HSpacer,u=n.Flyout,d=n.Label,p=function(t){function n(e){var n;return(n=t.call(this,e)||this).state.sdkIsRunning=!1,n._initRenderContext(n.state.sdkIsRunning),n}_inheritsLoose(n,t);var i=n.prototype;return i._initRenderContext=function(e){var t,n=this.state.item,i=this.props,o=i.handlers,a=i.iconsFeature,r=o.isSchematicType(n);t=r?a.getIcon("svgFile").id:a.getIcon("codeFile").id,this._renderContext={icon:t,description:r?n.label:s.get("customVisTestVisualization"),isDisabled:!r&&!e}},i._isSDKActive=function(){return this.props.handlers.isSDKActive()},i.componentDidMount=function(){var e=this;return t.prototype.componentDidMount.call(this),this._isSDKActive().then((function(t){t&&(e._initRenderContext(!0),e.setState({sdkIsRunning:!0}),e._attachCallbacksAndImages())})).catch((function(){}))},i.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this)},i._getVisualItemCssClasses=function(){return t.prototype._getVisualItemCssClasses.call(this)+" vis-custom-preview"},i._canRenderMenuOption=function(){return!!this._renderContext.isDisabled},i._getContextMenuContent=function(){return e.createElement(u,{theme:!0,placement:"bottomRight",showX:!0,triggerNode:this.target,domNodeToAttachTo:document.body,onClose:this.onClose.bind(this),className:"vis-preview-indicator-menu"},e.createElement(a,{fullHeight:!0,direction:"row",justifyContent:"flex-start"},e.createElement(r,null,e.createElement(l,{size:2})),e.createElement(r,null,e.createElement(a,{fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(r,null,e.createElement(c,{size:2})),e.createElement(r,null,e.createElement(d,{label:s.get("extVisNoSDKConnection"),className:"vis-preview-indicator-menu-title"})),e.createElement(r,null,e.createElement(c,{size:2})),e.createElement(r,null,e.createElement(d,{label:s.get("extVisNoSDKPreviewMsg"),className:"vis-preview-indicator-menu-msg"})),e.createElement(r,null,e.createElement(c,{size:2})))),e.createElement(r,null,e.createElement(l,{size:2}))))},n}(i);return p.propTypes={item:t.object.isRequired,handlers:t.shape({componentDidMountCallback:t.func.isRequired,componentWillUnmountCallback:t.func.isRequired,isSchematicType:t.func.isRequired,isSDKActive:t.func.isRequired}).isRequired,menuIcon:t.object},p.defaultProps={menuIcon:o},p})),define("dashboard-analytics/visualizationPanel/components/custom/CustomPreviewWidgetsComponent",["react","@ba/ba-ui-carbon-toolkit","prop-types","./PreviewVisualItem","../../../widgets/livewidget/nls/StringResources"],(function(e,t,n,i,s){var o=e.Component,a=t.FlexLayout,r=t.FlexItem,c=t.VSpacer,l=t.Label,u=function(t){function n(){return t.apply(this,arguments)||this}_inheritsLoose(n,t);var o=n.prototype;return o.render=function(){var t=this,n=this.props.previewItems,i=[];return n.forEach((function(e){i.push(t._renderPreviewItem(e))})),e.createElement(a,{fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(r,null,e.createElement(c,{size:2})),e.createElement(r,null,e.createElement(l,{className:"vis-custom-preview-widget-label",label:s.get("extVisCustomPreviewWidgets")})),e.createElement(r,null,e.createElement(c,null)),e.createElement(r,{height:"90px"},e.createElement(a,{fullHeight:!0,direction:"row",justifyContent:"flex-start"},i)),e.createElement(r,null,e.createElement(c,{size:2.5})))},o._renderPreviewItem=function(t){var n=this.props,s=n.handlers,o=n.dashboardApi.getFeature("Icons");return e.createElement(r,{grow:1,shrink:1,className:"vis-custom-preview-item"},e.createElement(a,{fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(r,null,e.createElement(i,{item:t,handlers:s,iconsFeature:o}))))},n}(o);return u.propTypes={previewItems:n.array.isRequired,dashboardApi:n.object.isRequired,handlers:n.shape({componentDidMountCallback:n.func.isRequired,componentWillUnmountCallback:n.func.isRequired,isSDKActive:n.func.isRequired}).isRequired},u})),define("dashboard-analytics/visualizationPanel/components/custom/CustomVisualItems",["react","prop-types","@ba/ba-ui-carbon-toolkit","../VisualizationContentContainer","../VisualItem"],(function(e,t,n,i,s){var o=n.FlexLayout,a=n.FlexItem,r=function(t){function n(e){var n;return(n=t.call(this,e)||this).target=void 0,n.targetName=void 0,n.state={isContextMenuOpen:!1,items:n.props.items},n}_inheritsLoose(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){this.setState({items:e.items})},i.render=function(){var t=this,n=this.state.items,i=this.props.containerClass,s=[];return n.forEach((function(e){s.push(t.renderVisualizationItem(e))})),e.createElement(o,{className:i,fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(a,null,e.createElement(o,{fullHeight:!0,direction:"row",wrap:"wrap"},s)))},i.renderVisualizationItem=function(t){var n=this.props,i=n.onContextMenuChange,o=n.handlers;return e.createElement(s,{item:t,handlers:o,onContextMenuChange:i,openSelectBundleFileDialog:this.props.handlers.openSelectBundleFileDialog,customVisAction:this.props.customVisAction})},n}(i);return r.propTypes={items:t.array,isRefreshing:t.bool,containerClass:t.string.isRequired,itemClass:t.string.isRequired,handlers:t.shape({openSelectBundleFileDialog:t.func.isRequired}).isRequired,customVisAction:t.object.isRequired},r.defaultProps={items:[],onContextMenuChange:function(){}},r})),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"));else if("function"==typeof define&&define.amd)define("dashboard-analytics/lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/illustrations-js/nothing-here_128",["@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"],t);else{var n=t("object"==typeof exports?require("@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"):e["@ba/ba-graphics/dist/illustrations-js/ba-graphics-icons-commons.js"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}("undefined"!=typeof self?self:this,(function(e){return webpackJsonPBaGraphics([60],{"6873601dfe1d9459c1a9":function(t,n){t.exports=e},"9612edcdbcc934e7f1ff":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("6873601dfe1d9459c1a9"),s=(n.n(i),n("dd3d8884a737f47c10b1"));t.default=s.a},dd3d8884a737f47c10b1:function(e,t,n){"use strict";var i=n("9689a9c94ae38b47fa2c"),s=n.n(i),o=n("9ce58a7deea14f49ef01"),a=n.n(o),r=new s.a({id:"nothing-here_128_v7",use:"nothing-here_128_v7-usage",viewBox:"0 0 200 200",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" id="nothing-here_128_v7"><circle class="ba-graphics-neutral-white4" cx="100" cy="100" r="100" /><path class="ba-graphics-white" d="M14.97 170.08L150.63 170.08" /><path class="ba-graphics-gray60" d="M150.63,172.08H15a2,2,0,1,1,0-4H150.63a2,2,0,0,1,0,4Z" /><path class="ba-graphics-white" d="M2 170.08L6.97 170.08" /><path class="ba-graphics-gray60" d="M7,172.08H2a2,2,0,0,1,0-4H7a2,2,0,0,1,0,4Z" /><path class="ba-graphics-white" d="M179.03 170.08L198 170.08" /><path class="ba-graphics-gray60" d="M198,172.08H179a2,2,0,0,1,0-4h19a2,2,0,0,1,0,4Z" /><path class="ba-graphics-white" d="M158.63 170.08L171.03 170.08" /><path class="ba-graphics-gray60" d="M171,172.08h-12.4a2,2,0,0,1,0-4H171a2,2,0,0,1,0,4Z" /><path class="ba-graphics-white" d="M30.17,46.52H169.74A6.21,6.21,0,0,1,176,52.73v96.79a4,4,0,0,1-4,4H28a4,4,0,0,1-4-4V52.73A6.21,6.21,0,0,1,30.17,46.52Z" /><path class="ba-graphics-gray60" d="M169.74,50.34a2.39,2.39,0,0,1,2.39,2.39v96.79a.18.18,0,0,1-.18.18H28a.18.18,0,0,1-.18-.18V52.73a2.4,2.4,0,0,1,2.4-2.39H169.74m0-3.82H30.17A6.22,6.22,0,0,0,24,52.73v96.79a4,4,0,0,0,4,4H172a4,4,0,0,0,4-4V52.73a6.21,6.21,0,0,0-6.21-6.21Z" /><path class="ba-graphics-gray1" d="M176,67.28V50.48a4,4,0,0,0-4-4H28a4,4,0,0,0-4,4v16.8Z" /><path class="ba-graphics-gray60" d="M172,50.3a.18.18,0,0,1,.18.18v13H27.77v-13A.18.18,0,0,1,28,50.3H172m0-3.82H28a4,4,0,0,0-4,4v16.8H176V50.48a4,4,0,0,0-4-4Z" /><circle class="ba-graphics-gray60" cx="34.07" cy="56.82" r="2" /><circle class="ba-graphics-gray60" cx="41.21" cy="56.82" r="2" /><circle class="ba-graphics-gray60" cx="48.34" cy="56.82" r="2" /><circle class="ba-graphics-gray60" cx="104.65" cy="20.58" r="2" /><circle class="ba-graphics-gray60" cx="141.96" cy="31.17" r="2" /><path class="ba-graphics-gray60" d="M61.33,27.91a4,4,0,0,0,4-4,1,1,0,1,1,2,0,4,4,0,0,0,4,4,1,1,0,0,1,0,2,4,4,0,0,0-4,4,1,1,0,0,1-2,0,4,4,0,0,0-4-4,1,1,0,0,1,0-2Z" /><path class="ba-graphics-white" d="M88.66 128.74L107.74 128.74" /><path class="ba-graphics-gray60" d="M107.74,130.74H88.65a2,2,0,0,1,0-4h19.09a2,2,0,0,1,0,4Z" /><circle class="ba-graphics-gray60" cx="75.32" cy="117.69" r="3.47" /><circle class="ba-graphics-gray60" cx="121" cy="117.69" r="3.47" /></symbol>'});a.a.add(r),t.a=r}},["9612edcdbcc934e7f1ff"])})),define("dashboard-analytics/visualizationPanel/components/custom/NoCustomVisuals",["react","prop-types","@ba/ba-ui-carbon-toolkit","../../../widgets/livewidget/nls/StringResources","../../../lib/@waca/dashboard-common/dist/lib/@ba/ba-graphics/dist/illustrations-js/nothing-here_128"],(function(e,t,n,i,s){var o=e.Component,a=n.FlexLayout,r=n.FlexItem,c=n.VSpacer,l=n.SVGIcon,u=n.Label,d=n.Button,p=function(t){function n(){return t.apply(this,arguments)||this}return _inheritsLoose(n,t),n.prototype.render=function(){var t,n,o=this.props.customVisAction,p=o.openSelectBundleFileDialog.bind(o);return o.canManage()?(t=i.get("extVisNoCustomVisualsAdminMsg"),n=i.get("extVisAddCustomVisual")):t=i.get("extVisNoCustomVisualsMsg"),e.createElement(a,{fullHeight:!0,direction:"column",justifyContent:"space-between",alignItems:"center"},e.createElement(r,null,e.createElement(c,{size:3})),e.createElement(r,null,e.createElement(a,{fullHeight:!0,direction:"column",justifyContent:"center",alignItems:"center",className:"vis-no-custom-visuals"},e.createElement(a,{fullHeight:!0,direction:"column",justifyContent:"center",alignItems:"center"},e.createElement(r,null,e.createElement(l,{size:"xxlarge",className:"svgIcon",iconId:s.default.id})),e.createElement(r,null,e.createElement(c,{size:3})),e.createElement(r,null,e.createElement(u,{className:"vis-no-custom-visuals-label",label:i.get("extVisNoCustomVisuals")})),e.createElement(r,null,e.createElement(c,{size:2})),e.createElement(r,null,e.createElement(u,{className:"vis-no-custom-visuals-msg",label:t})),o.canManage()&&e.createElement("div",null,e.createElement(r,null,e.createElement(c,{size:4})),e.createElement(r,null,e.createElement(d,{set:"primary",label:n,title:n,onClick:function(){return p()}})))))),e.createElement(r,null,e.createElement(c,{size:3})))},n}(o);return p.propTypes={handlers:t.shape({openSelectBundleFileDialog:t.func.isRequired}).isRequired,customVisAction:t.object.isRequired},p})),define("dashboard-analytics/visualizationPanel/components/util/CustomUtil",["../../../visualizations/vipr/VIPRBundleHelper","../../../widgets/livewidget/nls/StringResources","../../../lib/@waca/core-client/js/core-client/ui/ProgressToast"],(function(e,t,n){var i=function(e,t){e.getGlassCoreSvc(".Logger").error(t)},s=function(e){var t=JSON.parse(e.message);return t&&t.Description?t.Description:""};return function(){function o(){}return o.deleteCustomVis=function(n,o,a){try{var r=n.getFeature("VisDefinitions").getById(o);if(!r)throw new Error("Cannot update bundle: "+o);var c=r.getProperty("assetId");return e.deleteCustomBundleVisulization({id:o,assetId:c,dashboardApi:n}).then(a).then((function(e){return n.showToast(t.get("extVisDeleteConfirmation"),{type:"success"}),e})).catch((function(e){n.showToast(t.get("extVisDeleteError",{msg:s(e)}),{type:"error"}),i(n,e)}))}catch(e){i(n,e)}},o.addCustomVis=function(n,a,r){if(0===n.target.files.length)return r();if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return console.log("The File APIs are not fully supported in this browser."),r();var c=o.getProgressToast(n.target.files[0].name),l=o.getDataFromFileEvent(n);return e.loadCustomBundleVisualization({data:l,dashboardApi:a}).then((function(){return r(!1).then((function(e){return c.setComplete(100,{duration:0,completeMsg:t.get("extVisAdd"),isComplete:!0}),c.remove(),e}))})).catch((function(e){c.fail(t.get("extVisAddError",{msg:s(e)})),i(a,e)}))},o.updateCustomVis=function(n,a,r,c){if(void 0===c&&(c={}),0===n.target.files.length)return r();if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return console.log("The File APIs are not fully supported in this browser."),r();var l=o.getProgressToast(c.label);try{var u=a.getFeature("VisDefinitions").getById(c.name);if(!u)throw new Error("Cannot update bundle: "+c.name);var d=u.getId(),p=o.getDataFromFileEvent(n);return e.updateCustomBundleVisualization({data:p,dashboardApi:a,bundleId:d,assetId:u.getProperty("assetId")}).then((function(){return r(!1).then((function(e){return l.setComplete(100,{duration:0,completeMsg:t.get("extVisUpdate"),isComplete:!0}),l.remove(),e}))})).catch((function(e){l.fail(t.get("extVisUpdateError",{msg:s(e)})),i(a,e)}))}catch(e){i(a,e)}},o.getDataFromFileEvent=function(e){var t=e.target.files[0],n=new FormData;return n.append(t.name,t),n},o.getProgressToast=function(e){var i=new n({noCancelBtn:!0}),s=t.get("extVisUpdateProgress",{name:e});return i.show(s),i.indefinite(s),i},o}()})),define("dashboard-analytics/visualizationPanel/components/custom/CustomVisualsContentComponent",["react","prop-types","./CustomVisualItems","./NoCustomVisuals","../util/CustomUtil"],(function(e,t,n,i,s){var o=e.Component,a=function(t){function o(e){var n;return(n=t.call(this,e)||this).props.customVisAction.setCustomVisualsContentComponent(_assertThisInitialized(n)),n.state={items:n.props.items,isRefreshing:n.props.isRefreshing},n}_inheritsLoose(o,t);var a=o.prototype;return a.componentWillReceiveProps=function(e){this.setState({items:e.items,isRefreshing:e.isRefreshing})},a.render=function(){var t=this.state,s=t.items,o=t.isRefreshing,a=this.props,r=a.handlers,c=a.customVisAction,l=s.length>0;return o?null:l?e.createElement(n,{items:s,containerClass:"vis-custom-vis-content",itemClass:"prop-item",onContextMenuChange:this.onContextMenuChange.bind(this),handlers:r,customVisAction:c}):e.createElement(i,{handlers:r,customVisAction:c})},a.onContextMenuChange=function(e,t){var n=this;if("delete"===t){var i=this.props.dashboardApi,o=this.props.handlers.refreshCustomVisDefinitions;return s.deleteCustomVis(i,e.name,o).then((function(e){n.props.customVisAction.setItems(e)}))}},o}(o);return a.propTypes={items:t.array.isRequired,handlers:t.shape({refreshCustomVisDefinitions:t.func.isRequired}).isRequired,isRefreshing:t.bool,dashboardApi:t.object.isRequired,customVisAction:t.object.isRequired},a.defaultProps={isRefreshing:!1},a})),define("dashboard-analytics/visualizationPanel/components/custom/CustomVisualsComponentHeader",["react","@ba/ba-ui-carbon-toolkit","prop-types","../../../widgets/livewidget/nls/StringResources"],(function(e,t,n,i){var s=e.Component,o=t.Button,a=function(t){function n(){return t.apply(this,arguments)||this}_inheritsLoose(n,t);var s=n.prototype;return s.componentDidMount=function(){var e=this.props.customVisAction,t=this.props.handlers.refreshCustomVisDefinitions;e.createUploadFileNode(t)},s.componentWillUnmount=function(){this.props.customVisAction.removeUploadFileNode()},s.render=function(){var t=this.props.customVisAction,n=t.openSelectBundleFileDialog.bind(t),s=t.dashboardApi.getFeature("Icons").getIcon("add16"),a=i.get("extVisAddCustomVisual");return e.createElement("div",{className:"addNewCustomVisContainer"},e.createElement(o,{icon:s.id,size:"small",intent:"primary",variant:"icon",onClick:function(){return n()},focusable:!0,iconDescription:a,"aria-label":a,tooltipAlignment:"end"}))},n}(s);return a.propTypes={handlers:n.shape({refreshCustomVisDefinitions:n.func.isRequired}).isRequired,customVisAction:n.object.isRequired},a})),define("dashboard-analytics/visualizationPanel/components/custom/CustomVisualsComponent",["react","@ba/ba-ui-carbon-toolkit","prop-types","./CustomVisualsContentComponent","./CustomVisualsComponentHeader","../../../widgets/livewidget/nls/StringResources"],(function(e,t,n,i,s,o){var a=e.Component,r=t.Label,c=t.VSpacer,l=t.FlexLayout,u=t.FlexItem,d=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={items:n.props.items,isRefreshing:n.props.isRefreshing},n}_inheritsLoose(n,t);var a=n.prototype;return a.componentWillReceiveProps=function(e){this.setState({items:e.items,isRefreshing:e.isRefreshing})},a.render=function(){var t=this.props.customVisAction,n=this.state,a=n.items,d=n.isRefreshing,p=this.props,m=p.handlers,h=p.dashboardApi;return e.createElement(l,{fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(u,{grow:5,className:"vis-custom-visuals-container"},e.createElement(l,{fullHeight:!0,direction:"column",justifyContent:"flex-start"},e.createElement(u,null,e.createElement(l,{direction:"row",justifyContent:"space-between"},e.createElement(u,{alignSelf:"flex-start"},e.createElement(r,{className:"vis-custom-vis-visuals-label",label:o.get("extVisCustomVisuals")})),t.canManage()&&e.createElement(u,{alignSelf:"flex-end"},e.createElement(s,{customVisAction:t,handlers:m})))),e.createElement(u,null,e.createElement(c,{size:2})),e.createElement(u,{basis:"0%",grow:1,shrink:1},e.createElement(i,{items:a,handlers:m,isRefreshing:d,customVisAction:t,dashboardApi:h})),e.createElement(u,null,e.createElement(c,{size:2})))))},n}(a);return d.propTypes={items:n.array.isRequired,handlers:n.shape({componentDidMountCallback:n.func.isRequired,componentWillUnmountCallback:n.func.isRequired,refreshCustomVisDefinitions:n.func.isRequired}).isRequired,isRefreshing:n.bool,dashboardApi:n.object.isRequired,customVisAction:n.object.isRequired},d.defaultProps={isRefreshing:!1},d})),define("dashboard-analytics/visualizationPanel/components/custom/CustomPanelContainer",["react","prop-types","@ba/ba-ui-carbon-toolkit","./CustomPreviewWidgetsComponent","./CustomVisualsComponent"],(function(e,t,n,i,s){var o=e.Component,a=n.Container,r=n.FlexLayout,c=n.FlexItem,l=n.VSpacer,u=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={previewItems:n.props.custom.preview.previewItems,items:n.props.custom.visuals.items,isRefreshing:n.props.isRefreshing},n}_inheritsLoose(n,t);var o=n.prototype;return o.componentWillReceiveProps=function(e){this.setState({previewItems:e.custom.preview.previewItems,items:e.custom.visuals.items,isRefreshing:e.isRefreshing})},o.render=function(){var t=this.props.customVisAction,n=this.state,o=n.previewItems,u=n.items,d=n.isRefreshing,p=t.canDevelop(),m="vis-custom-container"+(p?"":" no-preview");return e.createElement(a,{className:m},e.createElement(r,{fullHeight:!0,direction:"column"},p&&e.createElement(c,{className:"vis-custom-preview-container"},e.createElement(i,{previewItems:o,handlers:this.props.handlers,dashboardApi:this.props.dashboardApi})),t.canManageOnly()&&e.createElement(c,null,e.createElement(l,{size:2})),e.createElement(c,{basis:"0%",grow:1,shrink:1},e.createElement(s,{items:u,handlers:this.props.handlers,dashboardApi:this.props.dashboardApi,customVisAction:this.props.customVisAction,isRefreshing:d}))))},n}(o);return u.propTypes={custom:t.shape({preview:t.shape({previewItems:t.array}).isRequired,visuals:t.shape({items:t.array.isRequired}).isRequired}).isRequired,handlers:t.object.isRequired,isRefreshing:t.bool,dashboardApi:t.object.isRequired,customVisAction:t.object.isRequired},u.defaultProps={isRefreshing:!1},u})),define("dashboard-analytics/visualizationPanel/components/util/CustomVisAction",["jquery","./CustomUtil"],(function(e,t){return function(){function n(e){this.dashboardApi=e.dashboardApi,this.refreshCustomVis=e.refreshCustomVis,this.enabled=!0===this.dashboardApi.getConfiguration("enableCustomVisualizations"),this._loadUserCapabilities()}var i=n.prototype;return i.openSelectBundleFileDialog=function(e){this.item=e,this.$uploadFileButton.click()},i.bundleFileSelected=function(e,n){var i=this;return(this.item?t.updateCustomVis:t.addCustomVis)(e,this.dashboardApi,n,this.item).then((function(e){e&&i.setItems(e)}))},i.setItems=function(e){void 0===e&&(e=[]),this.customVisualsContentComponent.setState({items:[]}),this.customVisualsContentComponent.setState({items:e})},i.shouldRefreshCustomPanel=function(){return this.canDevelop()||this.canManage()},i.createUploadFileNode=function(t){var n=this;this.removeUploadFileNode(),this.$uploadFileButton=e('<input type="file" id="custom-vis-uploadfiles" style="display: none;" accept="application/zip,application/x-zip-compressed,multipart/x-zip,application/x-compressed" onclick="this.value=null;">'),e("body").append(this.$uploadFileButton),this.$uploadFileButton.on("change",(function(e){n.bundleFileSelected(e,t)})),this.$uploadFileButton.on("onClick",(function(){n.$uploadFileButton.value=null}))},i.removeUploadFileNode=function(){this.$uploadFileButton&&this.$uploadFileButton.length>0&&(this.$uploadFileButton.remove(),this.$uploadFileButton=null)},i.setCustomVisualsContentComponent=function(e){this.customVisualsContentComponent=e},i.destroy=function(){this.removeUploadFileNode(),this.customVisualsContentComponent=null,this.dashboardApi=null,this.refreshCustomVis=null},i.canDevelop=function(){return this.capabilities.canDevelop},i.canManage=function(){return this.capabilities.canManage},i.canManageOnly=function(){return this.capabilities.canManageOnly},i.canUseOnly=function(){return this.capabilities.canUseOnly},i.isEnabled=function(){return this.enabled},i._loadUserCapabilities=function(){var e=this.dashboardApi.getGlassCoreSvc(".UserProfile").capabilities,t=-1!==e.indexOf("canDevelopVisualizations")||this.dashboardApi.getGlassCoreSvc(".FeatureChecker").checkValue("dashboard","canDevelopVisualizations","enabled"),n=-1!==e.indexOf("canManageVisualizations")||this.dashboardApi.getGlassCoreSvc(".FeatureChecker").checkValue("dashboard","canManageVisualizations","enabled");this.capabilities={canDevelop:t,canManage:n,canManageOnly:!t&&n,canUseOnly:!t&&!n}},n}()})),define("dashboard-analytics/visualizationPanel/VisualizationPanelView",["../lib/@waca/core-client/js/core-client/ui/core/View","../lib/@waca/core-client/js/core-client/ui/KeyCodes","../widgets/livewidget/nls/StringResources","../visualizations/vipr/VIPRConfig","../visualizations/vipr/extendedVis/SchematicVis","../util/VidaSdkUtil","text!./templates/LoadingIndicator.html","underscore","jquery","doT","react","react-dom","prop-types","@ba/ba-ui-carbon-toolkit","./components/VisualizationContentContainer","./components/custom/CustomPanelContainer","./components/util/CustomVisAction","hammerjs","jquery.hammer"],(function(e,t,n,i,s,o,a,r,c,l,u,d,p,m,h,f,b){var g=u.Component,v=m.Container,y=m.ProgressIndicator,C=m.Tabs,_=m.TabPanel,w=m.VSpacer,E=m.Label,V=m.FlexLayout,x=m.FlexItem,I=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).state={selectedTab:t.props.selectedTab,isRefreshing:!1,deleteable:!1,editable:!1,addable:!1,align:"center",tabs:t.props},t}_inheritsLoose(t,e);var i=t.prototype;return i.render=function(){var e=this._renderTabPanels(),t=1===e.length?"vis-panel-tabs hide-tabs":"vis-panel-tabs";return u.createElement(v,{className:"vis-panel-container"},u.createElement(w,{size:2}),u.createElement(E,{className:"vis-panel-banner",label:n.get("visualizationSlideoutTitle")}),u.createElement(w,{size:2}),u.createElement(C,{className:t,selected:this.state.selectedTab,onChange:this.onChange.bind(this)},e))},i._renderTabPanels=function(){var e=[];return e.push(u.createElement(_,{id:"System",label:n.get("extVisSystem")},u.createElement(h,{containerClass:"vis-system-container",itemClass:"prop-item",items:this.props.tabs.system.items,handlers:this.props.tabs.handlers}))),this.props.customVisAction.isEnabled()&&e.push(u.createElement(_,{id:"Custom",label:n.get("extVisCustom")},this._renderCustomPanelContainer())),e},i.onChange=function(e){var t=this,n=this.props.customVisAction,i=n.shouldRefreshCustomPanel()&&"Custom"===e;if(this.setState({selectedTab:e,isRefreshing:i}),i)return n.refreshCustomVis(!0).then((function(e){void 0===e&&(e={}),t.setState({tabs:e,isRefreshing:!1})}))},i._renderProgressIndicator=function(){return u.createElement(V,{fullHeight:!0,direction:"column",justifyContent:"center",width:"100%",height:"100%"},u.createElement(x,{alignSelf:"center"},u.createElement(y,null)))},i._renderCustomPanelContainer=function(){var e=this.props,t=e.dashboardApi,n=e.customVisAction,i=e.tabs,s=this.state.isRefreshing;return u.createElement(f,{custom:i.custom,handlers:i.handlers,dashboardApi:t,customVisAction:n,isRefreshing:s})},t}(g);I.propTypes={tabs:p.object.isRequired,dashboardApi:p.object.isRequired,selectedTab:p.string.isRequired,customVisAction:p.object.isRequired},I.defaultProps={selectedTab:"System",isRefreshing:!1};var P=function(e){return r.chain(e).map((function(e){return"."+e})).value().join(" ")};return function(e){function p(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];t=e.call.apply(e,[this].concat(i))||this;var o=i[0];return o.getEntries?(t.getEntries=o.getEntries,t.selectedTab=o.selectedTab||"System",t.dashboardApi=o.dashboardApi,t.dndManager=t.dashboardApi.getFeature("DashboardDnd.internal"),t.loadingIndicatorTemplate=l.template(a||""),t.glassContext=o.glassContext,t.customVisAction=new b({dashboardApi:t.dashboardApi,refreshCustomVis:t._refreshCustomVisDefinitions.bind(_assertThisInitialized(t))}),t._createViewStates(),t):Promise.reject("Invalid getEntries api provided")||_assertThisInitialized(t)}_inheritsLoose(p,e);var m=p.prototype;return m.init=function(){var t;this.events={"clicktap .vis-panel-container .prop-item:not(.is-disabled)":"_onItemClick","mousedown .vis-panel-container .prop-item:not(.is-disabled)":"_onItemMouseDownStartDrag","keydown .vis-panel-container .prop-item:not(.is-disabled)":"_onItemKeyDown"};for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];(t=e.prototype.init).call.apply(t,[this].concat(i))},m.remove=function(){var t;this._dropZone&&(this._dropZone.remove(),this._dropZone=null),this.dndManager=null,this.customVisAction.destroy(),this.customVisAction=null,d.unmountComponentAtNode(this.$el[0]);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];(t=e.prototype.remove).call.apply(t,[this].concat(i))},m.render=function(){var e=this;return this._showLoadingIndicator(),this.getEntries().then((function(t){return e.items=t.items,e.options=t.options,e._separateVisBaseOnFunctionality(t.items)})).then((function(){e.viewState.handlers={componentDidMountCallback:e._componentDidMountCallback.bind(e),componentWillUnmountCallback:e._componentWillUnmountCallback.bind(e),refreshCustomVisDefinitions:e._refreshCustomVisDefinitions.bind(e),isSchematicType:e.isSchematicType.bind(e),isSDKActive:e._isSDKActive.bind(e),isSchematicTypePreview:e.isSchematicTypePreview.bind(e)},d.render(u.createElement(I,{tabs:e.viewState,dashboardApi:e.dashboardApi,selectedTab:e.selectedTab,customVisAction:e.customVisAction}),e.$el[0])})).finally((function(){e._hideLoadingIndicator(),e._dropZone=e.dndManager.addDropTarget(e.$el[0],{accepts:e._accepts.bind(e)})}))},m._createViewStates=function(){this.viewState={system:{items:[]},custom:{preview:{previewItems:[]},visuals:{items:[]}}}},m._showLoadingIndicator=function(){this.$el.append(this.loadingIndicatorTemplate({})),this.loadingIndicatorContainer=this.$el.find(".loadingIndicatorContainer"),this.loadingIndicator=this.loadingIndicatorContainer.find(".loading_indicator"),d.render(u.createElement(y,null),this.loadingIndicator.get(0))},m._hideLoadingIndicator=function(){this.loadingIndicatorContainer&&(this.loadingIndicatorContainer.remove(),this.loadingIndicatorContainer=null,d.unmountComponentAtNode(this.loadingIndicator.get(0)))},m._accepts=function(){return!0},m._componentDidMountCallback=function(e,t,n){var i=this;if(n instanceof c)n.hammer(),n.on("hold",this._onItemHoldAndStartDrag.bind(this));else{var s=P([e,t]),o=this.$el.find(s);r.each(o,(function(e){var t=c(e);t.hammer(),t.on("hold",i._onItemHoldAndStartDrag.bind(i))}))}},m._componentWillUnmountCallback=function(e,t,n){var i=this;if(n instanceof c)n.off("hold",this._onItemHoldAndStartDrag.bind(this));else{var s=P([e,t]),o=this.$el.find(s);r.each(o,(function(e){c(e).off("hold",i._onItemHoldAndStartDrag.bind(i))}))}},m._refreshCustomVisDefinitions=function(e){var t=this;if(void 0===e&&(e=!1),!this.getEntries)return Promise.reject("Invalid getEntries api provided");var n=this.dashboardApi.getFeature("VisDefinitions");return this._refreshPromise||(this._refreshPromise=n.refresh().then(this.getEntries.bind(this)).then((function(e){void 0===e&&(e={});var n=e.items||[];return t.items=n,t._separateVisBaseOnFunctionality(n)})).then((function(){return t._refreshPromise=null,e?t.viewState:t.viewState.custom.visuals.items})).catch((function(e){throw t._refreshPromise=null,e}))),this._refreshPromise},m._isSDKActive=function(){var e=this;return this._sdkPromise||(this._sdkPromise=o.isSDKActive(this.dashboardApi).then((function(t){if(t)return e._refreshPromise?e._refreshPromise.then(e._refreshCustomVisDefinitions.bind(e,!0)):e._refreshCustomVisDefinitions(!0);throw new Error("SDK is not active")})).then((function(){return e._sdkPromise=null,!0})).catch((function(){return e._sdkPromise=null,!1}))),this._sdkPromise},m._separateVisBaseOnFunctionality=function(e){var t=this;void 0===e&&(e=[]);var s,o,a=[],c=[],l=this.viewState.system.items=[],u=[],d=this.dashboardApi.getFeature("Icons").getIcon("customVisual");return e.forEach((function(e){var t=i.getConfig(e.name),n=t&&t.isCustomVis,a=t&&t.isSchematic;"visualizationPreview"===e.name?s=e:"com.ibm.vis.schematicsPreview"===e.name?o=e:n?(e.icon||(e.icon=d.id),e.isCustomVis=n,c.push(e)):a?(e.isSchematic=a,u.push({item:e,bundle:t})):l.push(e)})),s?a.push(s):a.push({name:"visualizationPreview",label:n.get("customVisTestVisualization")}),o&&a.push(o),this._getSchematicSVGContext(u).then((function(){t.viewState.custom.preview.previewItems=a;var e=u.map((function(e){return e.item}));t.viewState.custom.visuals.items=r.sortBy([].concat(c,e),(function(e){return e.label}))}))},m._getSchematicSVGContext=function(e){var t=this;void 0===e&&(e=[]);var n=[];return e.forEach((function(e){var i={method:"get",type:"meta",library:e.bundle.id};n.push(e.bundle.schematicVis.getSchematicContent(i,t.dashboardApi))})),Promise.all(n).then((function(n){void 0===n&&(n=[]),n.forEach((function(n,i){var o=e[i],a=(JSON.parse(n)||{}).content||[];if(o.item.numSVGs=a.length,o.bundle.icon)o.item.placeholderIcon=o.bundle.placeholderIcon+s.cleanseFilename(o.bundle.icon);else{var r=t.dashboardApi.getFeature("Icons").getIcon("schematicVisual");o.item.icon=r.id}}))}))},m._getEntry=function(e){var t=c(e.target).closest(".prop-item").data("name");return this.items.find((function(e){return e.name===t})).content},m._onItemKeyDown=function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||this._onItemClick(e)},m._onItemClick=function(e){var t=e.currentTarget;if(!0!==c.data(t,"_clickEventReceived")&&(c.data(t,"_clickEventReceived",!0),setTimeout((function(){c.data(t,"_clickEventReceived",!1)}),500),this.options.onItemClick)){var n=this._getEntry(e);this._setDashboardApi(n),this.options.onItemClick(n,e),e&&e.gesture&&e.gesture.preventDefault()}},m._onStartDrag=function(e){if(this.options.onItemStartDrag){e.preventDefault&&e.preventDefault();var t=this._getEntry(e);this._setDashboardApi(t),this.options.onItemStartDrag(t,e)}},m._setDashboardApi=function(e){e.options||(e.options={}),e.options.dashboardApi=this.glassContext.appController.getCurrentContentView().getDashboardApi()},m._onItemHoldAndStartDrag=function(e){e.showAvatarImmediately=!0,this._onStartDrag(e)},m._onItemMouseDownStartDrag=function(e){this._onStartDrag(e)},m.isSchematicType=function(e){return void 0===e&&(e={}),"com.ibm.vis.schematicsPreview"===e.name||e.isSchematic},m.isSchematicTypePreview=function(e){return void 0===e&&(e={}),"com.ibm.vis.schematicsPreview"===e.name},p}(e)})),define("dashboard-analytics/visualizationPanel/layers",["./VisualizationPanelView"],(function(){})),define("dashboard-analytics/visualizationPanelBundle",(function(){}));