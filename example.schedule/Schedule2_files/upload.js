/*!
 * Licensed Materials - Property of IBM
 * IBM Cognos Products: Modeling UI
 * (C) Copyright IBM Corp. 2020
 * US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("bi/moser/moser.min"),require("ca-ui-carbon-toolkit"),require("mobx"),require("mobx-react"),require("ca-graphics/icons-js/ba-graphics-icons-commons"),require("react-dom"),require("ca-ui-common-components"),require("react-dnd"),require("prop-types"),require("ca-ui-carbon"),require("baglass/core-client/js/core-client/utils/BidiUtil"),require("ca-graphics/illustrations-js/ba-graphics-icons-commons"),require("ca-modeller/common"),require("ca-modeller/bridge/StringResourcesBridge"),require("baglass/core-client/js/core-client/i18n/Formatter"),require("ca-modeller/upload"),require("baglass/core-client/js/core-client/ui/ProgressToast"),require("moment"),require("ca-ui-common-filters"),require("react-draggable"),require("baglass/core-client/js/core-client/utils/DateTimeUtils"),require("whatIf/whatIfBundle.min"),require("corsair_ship/ba-react-html5-dnd"),require("baglass/utils/Utils"),require("react-dnd-html5-backend"),require("lib/flowjs/2.13.0/flow"));else if("function"==typeof define&&define.amd)define(["react","bi/moser/moser.min","ca-ui-carbon-toolkit","mobx","mobx-react","ca-graphics/icons-js/ba-graphics-icons-commons","react-dom","ca-ui-common-components","react-dnd","prop-types","ca-ui-carbon","baglass/core-client/js/core-client/utils/BidiUtil","ca-graphics/illustrations-js/ba-graphics-icons-commons","ca-modeller/common","ca-modeller/bridge/StringResourcesBridge","baglass/core-client/js/core-client/i18n/Formatter","ca-modeller/upload","baglass/core-client/js/core-client/ui/ProgressToast","moment","ca-ui-common-filters","react-draggable","baglass/core-client/js/core-client/utils/DateTimeUtils","whatIf/whatIfBundle.min","corsair_ship/ba-react-html5-dnd","baglass/utils/Utils","react-dnd-html5-backend","lib/flowjs/2.13.0/flow"],t);else{var r="object"==typeof exports?t(require("react"),require("bi/moser/moser.min"),require("ca-ui-carbon-toolkit"),require("mobx"),require("mobx-react"),require("ca-graphics/icons-js/ba-graphics-icons-commons"),require("react-dom"),require("ca-ui-common-components"),require("react-dnd"),require("prop-types"),require("ca-ui-carbon"),require("baglass/core-client/js/core-client/utils/BidiUtil"),require("ca-graphics/illustrations-js/ba-graphics-icons-commons"),require("ca-modeller/common"),require("ca-modeller/bridge/StringResourcesBridge"),require("baglass/core-client/js/core-client/i18n/Formatter"),require("ca-modeller/upload"),require("baglass/core-client/js/core-client/ui/ProgressToast"),require("moment"),require("ca-ui-common-filters"),require("react-draggable"),require("baglass/core-client/js/core-client/utils/DateTimeUtils"),require("whatIf/whatIfBundle.min"),require("corsair_ship/ba-react-html5-dnd"),require("baglass/utils/Utils"),require("react-dnd-html5-backend"),require("lib/flowjs/2.13.0/flow")):t(e.react,e["bi/moser/moser.min"],e["ca-ui-carbon-toolkit"],e.mobx,e["mobx-react"],e["ca-graphics/icons-js/ba-graphics-icons-commons"],e["react-dom"],e["ca-ui-common-components"],e["react-dnd"],e["prop-types"],e["ca-ui-carbon"],e["baglass/core-client/js/core-client/utils/BidiUtil"],e["ca-graphics/illustrations-js/ba-graphics-icons-commons"],e["ca-modeller/common"],e["ca-modeller/bridge/StringResourcesBridge"],e["baglass/core-client/js/core-client/i18n/Formatter"],e["ca-modeller/upload"],e["baglass/core-client/js/core-client/ui/ProgressToast"],e.moment,e["ca-ui-common-filters"],e["react-draggable"],e["baglass/core-client/js/core-client/utils/DateTimeUtils"],e["whatIf/whatIfBundle.min"],e["corsair_ship/ba-react-html5-dnd"],e["baglass/utils/Utils"],e["react-dnd-html5-backend"],e["lib/flowjs/2.13.0/flow"]);for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(window,(function(e,t,r,i,o,a,n,s,l,c,p,d,u,h,g,m,f,b,y,v,O,_,C,j,w,F,S){return function(e){function t(t){for(var i,n,s=t[0],l=t[1],c=t[2],d=0,u=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(p&&p(t);u.length;)u.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,s=1;s<r.length;s++){var l=r[s];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},o={54:0},a=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,i){r=o[e]=[t,i]}));t.push(r[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.src=function(e){return n.p+""+({1:"commonAsync",2:"commonAsyncShared__buildQS__expressions__format__grid__pkgEnrich__relationship__sourceSelection",3:"commonAsyncShared__buildQS__grid__pkgEnrich__relationship__sourceSelection",4:"commonAsyncShared__diagram__normalization__queryFlow__sourceSelection",5:"commonAsyncShared__dataSecurity__filters__properties",6:"commonAsyncShared__binning__properties",7:"commonAsyncShared__buildQS__relationship",8:"commonAsyncShared__dataSecurity__properties",9:"commonAsyncShared__expressions__queryInfo",10:"commonAsyncShared__normalization__queryFlow",12:"binning",13:"buildQS",14:"clean",15:"contextMenu",16:"convertQS",19:"dataCache",20:"dataSecurity",21:"diagram",22:"expressions",24:"filters",25:"format",26:"grid",27:"grouping",28:"itemHierarchy",29:"itemPicker",30:"memberSearch",33:"navigationGroup",34:"normalization",37:"parameter",38:"pkgEnrich",39:"properties",40:"queryFlow",41:"queryInfo",42:"relationship",43:"relink",47:"simpleCalculations",48:"sort",50:"sourceSelection",51:"sourceStatus",52:"split",53:"update",55:"validation",56:"whatIf"}[e]||e)+".js"}(e);var l=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(c);var r=o[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,r[1](l)}o[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./ca-modeller/",n.oe=function(e){throw console.error(e),e};var s=window.caModellingPerspective=window.caModellingPerspective||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var p=l;return a.push([590,0]),r()}({0:function(t,r){t.exports=e},1:function(e,r){e.exports=t},107:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return n}));var i=["xls","xlm","xlsx","xlsm","csv","tsv","tab","txt","zip","csv.gz"],o=["xls","xlm","xlsx","xlsm","csv","tsv","tab","txt","zip","gz"],a="fileInput",n="fileUpload"},108:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s}));var i="SUCCESS",o="NOT_CANCELLABLE",a="NOT_AVAILABLE",n="CANCELLED",s="ERROR"},12:function(e,t){e.exports=o},127:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=".my_folders"},15:function(e,t){e.exports=a},17:function(e,t){e.exports=n},18:function(e,t){e.exports=s},195:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return F}));var i,o=r(114),a=r.n(o),n=r(381),s=r.n(n),l=r(0),c=r.n(l),p=r(2),d=r(71),u=r.n(d),h=r(3),g=r(73),m=r(127),f=r(13),b=r(382),y=r(390),v=r(393),O=r(394),_=r(395);function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var j=Object(p.withContext)()(i=class extends l.Component{constructor(){super(...arguments),this.state={showStatusDialog:!1,uploadFileManager:{},fileName:"",replaceOnly:!1,destination:this.props.destination},this.onConfirmOk=void 0,this.onConfirmCancel=void 0,this.setConfirmProps=e=>{this.setState(e)},this.toggleConfirmDialog=e=>{this.setState({showConfirmDialog:e}),this.state.uploadFileManager.showConfirmDialog=e},this.registerOnConfirmHandlers=(e,t)=>{this.onConfirmOk=e,this.onConfirmCancel=t},this._uploadFiles=()=>{var{onFileUploaded:e,providers:t,goal:r,context:i,fileList:o={},baseModuleId:a,isAppend:n=!1,destination:s}=this.props,{dispatch:l,rootStore:c}=i;if(o.length){var p=new u.a;p.show(Object(h.getString)("msgInitFileUpload")),p.hideButton("hide"),p.showButton("details");var d=new y.a(o,p,{toggleConfirmDialog:this.toggleConfirmDialog,registerOnConfirmHandlers:this.registerOnConfirmHandlers,setConfirmProps:this.setConfirmProps});p.onDetails(()=>{this.setState({showStatusDialog:!0,uploadFileManager:d})}),this.setState({uploadFileManager:d}),Object(f.userProfileUploadLocation)().then(o=>{var p=s;void 0===p&&o!==m.a&&(p=o),this.setState({destination:p}),Object(b.a)({uploadFileManager:d,baseModuleId:a,goal:r,isAppend:n,providers:t,destination:p})(l,c,i).then((function(){e&&e(...arguments)}))})}}}componentDidMount(){this.props.fileList&&this.props.fileList.length>0&&this._uploadFiles()}componentDidUpdate(e){var{fileList:t,baseModuleId:r}=this.props;Object(g.a)(t,e.fileList||{})&&r===e.baseModuleId||this._uploadFiles()}render(){var e=a()(this.props,"onFileUploaded","fileList"),{showStatusDialog:t,showConfirmDialog:r,uploadFileManager:i,fileName:o,replaceOnly:n}=this.state,s=c.a.createElement(v.a,{destination:this.state.destination,baseModuleId:this.props.baseModuleId,uploadFileManager:i,onOk:()=>this.setState({showStatusDialog:!1})}),l=c.a.createElement(O.a,{message:Object(h.getString)(n?"confirmReplaceMessage":"fileUploadConfirmMessage",{fileName:o}),uploadFileManager:i,replaceOnly:n,onOk:()=>"function"==typeof this.onConfirmOk&&this.onConfirmOk(),onCancel:()=>"function"==typeof this.onConfirmCancel&&this.onConfirmCancel()});return c.a.createElement(p.Container,C({height:"100%"},e),!r&&t&&s,r&&l,this.props.children)}})||i,w=s()(Object(_.a)(j));function F(e,t){var r=t?w:j;return class extends l.Component{render(){return c.a.createElement(p.ContextProvider,e,c.a.createElement(r,this.props))}}}},2:function(e,t){e.exports=r},207:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return d}));var i=r(168),o=r.n(i),a=r(389),n=r.n(a),s=r(13),l=r(107),c=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=l.c);var r=t===l.c?l.d:l.b;return e.filter(e=>o()(e.capabilities,e=>s.hasCapability(e))).forEach(e=>r=n()(r,e.fileTypes)),r},p=(e,t)=>{var r=c(t),i=e.name;return r.some(e=>i.toLowerCase().endsWith("."+e))},d=(e,t)=>"."+c(e,t).join(",.")},210:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var i="upload:complete",o="import:complete",a="module:created"},22:function(e,t,r){"use strict";r.d(t,"i",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return n})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"d",(function(){return p})),r.d(t,"f",(function(){return d}));var i=1,o=3,a=4,n=5,s=6,l=7,c=8,p=9,d=-1},333:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i=r(136),o=r.n(i),a=r(0),n=r.n(a),s=r(17),l=r.n(s),c=r(36),p=r(31),d=r(195),u=r(207),h=r(107);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var m;class f{constructor(){this.context=void 0,this.props=void 0,this.container=void 0,this.el=void 0,arguments.length>0&&this.initialize(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}initialize(e,t){this.context=Object(c.a)(e,{type:p.b}),this.props={},m=Object(d.b)(this.context,t)}_setProps(e,t){return this._reactRender(g({},this.props,e),t)}render(e,t,r){var i=this;if(void 0===e&&(e={}),this.props=e,r)this.container=r;else{var a=document.createElement("div");document.body.appendChild(a),this.container=a}return new Promise(r=>{var{providers:a}=e;if(o()(a))r(this._setProps(e,t));else{var n=a.map(e=>e.fileUploadModule);requirejs(n,(function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];a.forEach((e,t)=>{var r=n[t];r&&(e.onFileUploadHandler=r.onFileUpload&&r.onFileUpload.bind(r),e.onFileUploadedHandler=r.onFileUploaded&&r.onFileUploaded.bind(r))}),r(i._setProps(e,t))}),i=>{r(this._setProps(e,t)),console.error("Fail to load file upload modules in providers: ",i)})}})}_reactRender(e,t){return new Promise((r,i)=>{try{l.a.render(n.a.createElement(m,g({},e,{ref:e=>this.el=l.a.findDOMNode(e)})),this.container,()=>{t&&"function"==typeof t&&t(this.el),r(this.el)})}catch(e){i(e)}})}upload(e,t,r){void 0===r&&(r={}),this.el&&this._setProps(g({fileList:e},r),t)}showFilePicker(e,t,r,i){if(void 0===r&&(r=!1),void 0===i&&(i={}),this.el){var o=document.getElementById("__ca_uploadfiles_input_");o&&o.parentElement.removeChild(o),o=document.createElement("input"),document.body.appendChild(o),o.setAttribute("id","__ca_uploadfiles_input_"),o.setAttribute("style","display: none"),o.setAttribute("type","file"),o.setAttribute("accept",Object(u.a)(this.props.providers,h.a)),o.addEventListener("change",()=>this._setProps(g({fileList:o.files,baseModuleId:e,isAppend:r},i),t),!1),null!=e?o.removeAttribute("multiple"):o.setAttribute("multiple",!0),document.getElementById("skipInvokingFileSelection")?o.addEventListener("uploadMultiple",o=>this._setProps(g({fileList:o.detail.fileList,baseModuleId:e,isAppend:r},i),t),!1):o.click()}}unmount(){l.a.unmountComponentAtNode(this.el),this.container.removeChild(this.el)}}},334:function(e,t,r){var i=r(596);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0};r(32)(i,o);i.locals&&(e.exports=i.locals)},381:function(e,t){e.exports=j},382:function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));var i=r(1),o=r.n(i),a=r(6),n=r(13),s=r(52),l=r(8),c=r(5),p=r(33),d=r(203),u=r(383),h=r(40),g=r(3),m=r(384),f=r(385),b=r(386),y=r(387),v=r(388),O=r(125),_=r(124),C=r(65),j=r(106),w=r(39),F=r(153),S=r(108),x=r(207),U=r(22),D=r(99),E=r(210);function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var P=e=>{var{uploadFileManager:t,uploadFile:r,dataCollectorId:i,affinity:a,context:s,onFileUpload:p}=e;return r.initFileUploader(i,a,{fileProgress:()=>(e=>{var{acceptedFiles:t,progressToast:r}=e;t.length>1?r.setMessage(Object(g.getString)("msgReadingFilesProgress",{total:t.length})):r.setMessage(Object(g.getString)("msgReadingProgress",{fileName:t[0].file.name})),e.setComplete(100*e.progress)})(t)}),r.upload().then(e=>e?(r.status=U.d,Promise.resolve(r)):p(r).then(e=>(e=>{var{uploadFileManager:t,uploadFile:r,context:i}=e,{progressToast:a}=t,{affinity:s}=r,p=r.file.name;return r.status=U.b,new Promise(e=>{Object(y.a)(i,{dataCollectorId:r.dataCollectorId,affinity:s}).then(d=>{var{data:h}=d;if(!h||!h.taskID)return r.error=h,e(r);var m,f=1,b=()=>Object(O.a)(i,{taskId:h.taskID,affinity:s}).then(s=>{f<5&&(f+=1);var d=50*f+f*f*100*.5;if(s.state===S.e)if(t.isUploadDone&&a.setMessage(Object(g.getString)("msgUploadedSuccessfully",{fileName:p})),r.analysisProgress=100,t.setComplete(100*t.progress),s.response&&s.response.ids){var h=[];r.status=U.a,r.detail="",s.response.ids.forEach(e=>{h.push(Object(j.a)(i,{objectId:e}).then(e=>{var t=e&&e.data&&e.data[0]||{};r.cmObject.push(t),t.type===l.b&&(r.source=new u.a(o.a.UseSpecType.FILE,s.response.id,s.response.label,s.response.description,s.response.href,t.ancestor,r.isRefresh)),n.addToMRU({id:t.id,type:t.type})}))}),Promise.all(h).then(()=>e(r))}else r.error=new Error(Object(g.getString)("msgUploadedDoneWithUnknownStatus")),e(r);else s.state===S.b?(r.analysisProgress=100,r.error=s.response.entity,e(r)):s.state===S.a?(r.analysisProgress=100,r.status=U.d,e(r)):s.state===S.c?(r.analysisProgress=100,r.error=new Error(Object(g.getString)("msgUploadedDoneWithUnknownStatus")),e(r)):s.state!==S.c&&(s.state===S.d&&(r.status=U.c),s.taskStep&&s.taskStep.currentStepDescription&&(r.detail=s.taskStep.currentStepDescription,r.analysisProgress=Object(c.getTaskPercentage)(s)),t.isUploadDone&&a.setMessage(Object(g.getString)("msgAnalyzing",{fileName:p})),t.setComplete(100*t.progress),m=setTimeout(b,d))},t=>{r.error=t,e(r)});return r.onCancel(()=>(clearTimeout(m),r.status=U.e,Object(_.a)(i,{taskId:h.taskID,affinity:s}).then(()=>{r.status=U.d,r.analysisProgress=100,e(r)},t=>{r.error=t,e(r)}))),m=setTimeout(b,100)},t=>{r.error=t.data,e(r)}).catch(t=>{r.error=t,e(r)})})})({uploadFileManager:t,uploadFile:e,context:s}),e=>(r.error=e,Promise.resolve(r))),e=>((e,t)=>{e.error=new Error(t),Promise.resolve(e)})(r,e))},A=e=>{var{uploadFileManager:t,uploadFile:r,baseModuleId:i,context:o,onFileUpload:a}=e;return r.isRefresh=!0,Object(f.a)(o,{moduleId:i,fileName:r.file.name}).then(e=>P({uploadFileManager:t,uploadFile:r,dataCollectorId:e.data,affinity:e.affinity,context:o,onFileUpload:a}),()=>null)},I=e=>{var{uploadFileManager:t,uploadFile:r,baseModuleId:i,context:o,onFileUpload:a}=e;return r.isAppend=!0,Object(b.a)(o,{moduleId:i,fileName:r.file.name}).then(e=>P({uploadFileManager:t,uploadFile:r,dataCollectorId:e.data,affinity:e.affinity,context:o,onFileUpload:a}),()=>null)},M=e=>{var{uploadFileManager:t,baseModuleId:r,goal:i=D.c,isAppend:o=!1,providers:l=[],destination:u}=e;return(e,f,b)=>{var{progressToast:y}=t;if(!n.hasCapability(s.CAN_UPLOAD_FILES))return y.hideButton("details"),y.fail(Object(g.getString)("noAccessToFileUpload")),Promise.reject(new Error(Object(g.getString)("noAccessToFileUpload")));var O=(e,i)=>{if(!i)return e.error=new Error(Object(g.getString)("msgUploadedFileFetchSizeLimitPerUploadFailed",{fileName:e.file.name})),Promise.resolve(e);if(e.file.size>1048576*i)return e.error=new Error(Object(g.getString)("msgHardLimitFileUpload",{message:i})),Promise.resolve(e);return(e=>{var{uploadFileManager:t,uploadFile:r,baseModuleId:i,isAppend:o,context:a,onFileUpload:n,destination:s}=e;return r.status=U.i,o&&null!=i?I({uploadFileManager:t,uploadFile:r,baseModuleId:i,context:a,onFileUpload:n}):null!=i?A({uploadFileManager:t,uploadFile:r,baseModuleId:i,context:a,onFileUpload:n}):Object(m.a)(a,{fileName:r.file.name,destination:s}).then(e=>P({uploadFileManager:t,uploadFile:r,dataCollectorId:e.data,affinity:e.affinity,context:a,onFileUpload:n}),e=>{if(e&&e.data&&e.data.muiFileExisted){var{callbacks:{registerOnConfirmHandlers:i,toggleConfirmDialog:o,setConfirmProps:s}}=t;return new Promise(l=>{var c=()=>{t.isReplaceChecked?l(A({uploadFileManager:t,uploadFile:r,baseModuleId:e.data.id,context:a,onFileUpload:n})):l(I({uploadFileManager:t,uploadFile:r,baseModuleId:e.data.id,context:a,onFileUpload:n}))},p=()=>{r.status=U.d,l(r)},d=(a,n)=>{t.isApplyAllChecked?(o(!1),t.overwriteOnDup?a():n(),t.showNextDialog()):(o(!0),s({fileName:r.fileName,replaceOnly:e.data.muiReplaceOnly}),i(()=>{a(),t.showNextDialog()},()=>{n(),t.showNextDialog()}))};t.showConfirmDialog?t.queueConfirmDialog(()=>d(c,p)):d(c,p)})}return r.error=e.data,Promise.resolve(r)})})({uploadFileManager:t,uploadFile:e,baseModuleId:r,isAppend:o,context:b,onFileUpload:t=>{var r=Promise.resolve(t.file);return l.forEach(t=>{t.fileTypes.includes(e.extension)&&"function"==typeof t.onFileUploadHandler&&(r=r.then(e=>t.onFileUploadHandler(n,e)))}),r.then(()=>t,e=>(t.error=e,t))},destination:u})};return Object(v.a)(b).then(e=>Object(d.b)(t.droppedFiles.map(t=>()=>((e,t)=>{var{file:r}=e;return Object(x.b)(r,l)?O(e,t.size).then(t=>(l.forEach(r=>{r.fileTypes.includes(e.extension)&&"function"==typeof r.onFileUploadedHandler&&r.onFileUploadedHandler(n,t.file)}),t)):(e.error=new Error(Object(g.getString)("msgUploadedFileTypeNotSupported",{fileName:r.name})),Promise.resolve(e))})(t,e)),10)).then(r=>{var{acceptedFiles:o,droppedFiles:s,allCancelled:l,withError:d,errors:u}=t;return y.hideButton("cancel"),y.showButton("hide"),l||n.eventTrigger(E.c,{files:o}),(i===D.b||i===D.a)&&o.length>0?(e=>{var{uploadFileManager:t,goal:r,dispatch:i,store:o,context:s}=e,{progressToast:l,acceptedFiles:d,droppedFiles:u,droppedFilesToJS:m,withError:f,sources:b,allCancelled:y,errors:v}=t;d.length>1?l.setMessage(Object(g.getString)("msgImportingFilesProgress",{total:d.length})):l.setMessage(Object(g.getString)("msgImportingProgress",{fileName:d[0].file.name})),d.forEach(e=>e.status=U.g);var O=r!==D.a&&o.module?o.module:Object(c.createModule)(s.moser.objectFactory);return Object(p.g)(b,O)(i).then(()=>(d.forEach(e=>e.status=U.h),y||n.eventTrigger(E.a,{files:d}),y?l.setComplete(100,{isComplete:!0,completeMsg:Object(g.getString)("msgUploadCanceled")}):f?1===u.length?l.fail(Object(w.a)(v[0].errorMessage)):(l.fail(Object(g.getString)("msgUploadedDoneWithError")),R(h.a,u.length,d.length)):(t.setComplete(100,{isComplete:!0,completeMsg:1===d.length?Object(g.getString)("msgImportedSuccessfully",{fileName:d[0].file.name}):Object(g.getString)("msgImportedFilesSuccessfully",{numberOfFiles:d.length})}),R(h.a,u.length,d.length)),r===D.a?Object(C.a)(s,{module:O}).then(e=>(n.track(Object(F.a)(h.a,{module:O})),n.eventTrigger(E.b,{module:O}),Promise.resolve(k({files:m,module:Object(a.toJS)(O)},e)))):Promise.resolve({files:m,module:Object(a.toJS)(O)})),e=>{d.forEach(t=>t.error=e),l.fail(e.message)})})({uploadFileManager:t,goal:i,dispatch:e,store:f,context:b}):(l?y.setComplete(100,{isComplete:!0,completeMsg:Object(g.getString)("msgUploadCanceled")}):d?1===s.length?y.fail(Object(w.a)(u[0].errorMessage)):(y.fail(Object(g.getString)("msgUploadedDoneWithError")),R(h.a,s.length,o.length)):(t.setComplete(100,{isComplete:!0,completeMsg:1===o.length?Object(g.getString)("msgUploadedSuccessfully",{fileName:o[0].file.name}):Object(g.getString)("msgUploadedFilesSuccessfully",{numberOfFiles:o.length})}),R(h.a,s.length,o.length)),r)},e=>y.fail(e.message)).catch(e=>y.fail(e.message))}},R=(e,t,r)=>{n.track(Object(F.b)(e,t,r))}},383:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(96),o=r(5);class a{constructor(e,t,r,a,n,s,l){this.type=void 0,this.id=void 0,this.label=void 0,this.description=void 0,this.href=void 0,this.ancestors=void 0,this.isRelinkTarget=void 0,this.isRefresh=void 0,this.type=e,this.id=t,this.label=r,this.description=a||(s?Object(i.a)(Object(o.createAncestors)(s)):null),this.href=n,this.ancestors=s,this.isRelinkTarget=!1,this.isRefresh=l}}},384:function(e,t,r){"use strict";var i=r(14);t.a=function(e,t){var{fileName:r,destination:o}=t,a=encodeURI(i.o+"/files"),n="filename="+encodeURIComponent(r)+"&async=true";return(o?Promise.resolve(n+"&destination="+encodeURIComponent(o)):Promise.resolve(n)).then(t=>e.ajaxService({url:a+"?"+t,method:"POST",rawResponse:!0,data:{filename:r,async:!0,destination:o}}).then(e=>({data:e.data,affinity:e.getResponseHeader(i.a)}),e=>{throw 409===e.status&&(e.data.msg.includes("MSR-UPL-2109")&&(e.data.muiFileExisted=!0),e.data.msg.includes("MSR-UPL-2144")&&(e.data.muiReplaceOnly=!0,e.data.muiFileExisted=!0)),e}))}},385:function(e,t,r){"use strict";var i=r(14);t.a=function(e,t){var{fileName:r,moduleId:o}=t,a=encodeURI(i.o+"/files/"+o),n="filename="+encodeURIComponent(r)+"&async=true";return e.ajaxService({url:a+"?"+n,method:"PUT",rawResponse:!0,data:{filename:r,async:!0}}).then(e=>({data:e.data,affinity:e.getResponseHeader(i.a)}))}},386:function(e,t,r){"use strict";var i=r(14);t.a=function(e,t){var{fileName:r,moduleId:o}=t,a=encodeURI(i.o+"/files/append/"+o),n="filename="+encodeURIComponent(r)+"&async=true";return e.ajaxService({url:a+"?"+n,method:"PUT",rawResponse:!0,data:{filename:r,async:!0}}).then(e=>({data:e.data,affinity:e.getResponseHeader(i.a)}))}},387:function(e,t,r){"use strict";var i=r(14);t.a=function(e,t){var{dataCollectorId:r,affinity:o}=t,a=encodeURI(i.o+"/files/segment/"+r);return e.ajaxService({url:a+"?index=-1",method:"PUT",headers:{[i.a]:o||void 0},rawResponse:!0,data:{index:-1}})}},388:function(e,t,r){"use strict";var i=r(14);t.a=function(e){return e.ajaxService({url:i.j+"/keys/DatasetService.maxUploadSizeMBytes",method:"GET"}).then(e=>e&&e["DatasetService.maxUploadSizeMBytes"]?{size:Number(e["DatasetService.maxUploadSizeMBytes"])}:{size:100},()=>({size:void 0}))}},389:function(e,t,r){var i=r(160),o=r(211),a=r(444),n=r(215),s=o((function(e){return a(i(e,1,n,!0))}));e.exports=s},390:function(e,t,r){"use strict";r.d(t,"a",(function(){return Q}));var i,o,a,n,s,l,c,p,d,u,h,g,m,f,b,y=r(144),v=r.n(y),O=r(154),_=r.n(O),C=r(391),j=r.n(C),w=r(105),F=r.n(w),S=r(217),x=r.n(S),U=r(60),D=r.n(U),E=(r(595),r(6)),k=r(241),P=r.n(k),A=r(119),I=r.n(A),M=r(289),R=r.n(M),T=r(392),q=r(14),z=r(3),N=r(39),L=r(22);function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function H(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function J(e,t,r,i,o){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var{Flow:W}=window;W&&(W.FlowChunk.prototype.getParams=function(){return{index:this.offset+1}});class V{constructor(){this.flow=void 0,this.isRejected=void 0,this.file=void 0,this.isCancelled=void 0,this.isRejected=!1,this.flow={}}init(e,t){this.flow=new W({target:e,headers:t,chunkSize:10485760,testChunks:!1,forceChunkSize:!0,simultaneousUploads:3,maxChunkRetries:3,method:"octet",uploadMethod:"PUT",testMethod:"PUT",progressCallbacksInterval:500,fileParameterName:"data",generateUniqueIdentifier:()=>D()("flowUploader")})}cancel(){this.flow.cancel(),this.isCancelled=!0}retry(){this.flow.retry()}upload(){this.flow.upload()}get progress(){return this.flow.progress()}get size(){return this.flow.getSize()}get sizeUploaded(){return this.flow.getSizeUploaded()}addFile(e){this.file=e,this.flow.addFile(e)}onError(e){this.flow.on("error",(t,r,i)=>{this.isRejected=!0,e&&e(t,r,i)})}onComplete(e){this.flow.on("complete",()=>this.isRejected?null:e(this.isCancelled))}}var G=(o=J((i=class{constructor(e){H(this,"_status",o,this),H(this,"_progress",a,this),H(this,"_analysisProgress",n,this),H(this,"_error",s,this),H(this,"_detail",l,this),H(this,"_showDetail",c,this),this.file=void 0,this.fileUploader=void 0,this.isRefresh=void 0,this.isAppend=void 0,this.cmObject=void 0,this._affinity=void 0,this._dataCollectorId=void 0,this._onCancel=void 0,this._source=void 0,this.cancel=()=>{if(this.status===L.i)try{this.fileUploader.cancel(),this.status=L.d,this.progress=1}catch(e){}this.status===L.b&&this._onCancel&&"function"==typeof this._onCancel&&this._onCancel()},this.retry=()=>{this.fileUploader.retry()},this.file=e,this.fileUploader=new V,this.isRefresh=!1,this.isAppend=!1,this.cmObject=[]}get affinity(){return this._affinity}set affinity(e){this._affinity=e}get dataCollectorId(){return this._dataCollectorId}set dataCollectorId(e){this._dataCollectorId=e}get target(){return q.n+"/segment/"+this.dataCollectorId}get headers(){return{"X-XSRF-TOKEN":Object(T.getCookieValue)("XSRF-TOKEN"),"X-CA-Affinity":this.affinity}}get fileName(){return this.file?this.file.name:""}get extension(){return F()(this.file.name.split(".")).toLowerCase()}onCancel(e){this._onCancel=e}set source(e){this._source=e}get source(){return this._source}set error(e){this._error=e,this.status=L.f}get error(){return this._error}set detail(e){this._detail=e}get detail(){return this._detail}set showDetail(e){this._showDetail=e}get showDetail(){return this._showDetail}get detailMessage(){return this.status===L.d?"":this.status===L.f?Object(N.a)(this.error):this.detail}get status(){return this._status}set status(e){this._status=e}get statusDetail(){switch(this.status){case L.i:return{message:Object(z.getString)("fileUploadStatusUploading",{percent:Math.round(100*this.progress)}),isCancellable:!0,isRunning:!0};case L.b:return{message:Object(z.getString)("fileUploadStatusAnalyzing",{percent:Math.round(100*this.analysisProgress)}),isCancellable:!0,isRunning:!0};case L.c:return{message:Object(z.getString)("fileUploadStatusAnalyzing",{percent:Math.round(100*this.analysisProgress)}),isRunning:!0};case L.a:return{iconId:P.a.id,intent:"positive",iconTitle:Object(z.getString)("information"),message:this.isRefresh?Object(z.getString)("fileUploadStatusUploadedReplaced"):this.isAppend?Object(z.getString)("fileUploadStatusUploadedAppended"):Object(z.getString)("fileUploadStatusUploaded")};case L.g:return{message:Object(z.getString)("fileUploadStatusImporting"),isRunning:!0};case L.h:return{iconId:P.a.id,intent:"positive",iconTitle:Object(z.getString)("information"),message:Object(z.getString)("fileUploadStatusImported")};case L.e:return{message:Object(z.getString)("fileUploadStatusCancelling"),isRunning:!0};case L.d:return{iconId:R.a.id,intent:"positive",iconTitle:Object(z.getString)("information"),message:Object(z.getString)("fileUploadStatusCancelled")};case L.f:return{iconId:I.a.id,intent:"danger",iconTitle:Object(z.getString)("error"),message:this.isRefresh?Object(z.getString)("fileUploadStatusReplaceError"):this.isAppend?Object(z.getString)("fileUploadStatusAppendError"):Object(z.getString)("fileUploadStatusError")};default:return{}}}get progress(){return this._progress}set progress(e){this._progress=e}get analysisProgress(){return this._analysisProgress/100}set analysisProgress(e){this._analysisProgress=e}initFileUploader(e,t,r){this.dataCollectorId=e,this.affinity=t,this.fileUploader.init(this.target,this.headers),this.fileUploader.addFile(this.file),this.fileUploader.flow.on("fileProgress",()=>{this.progress=this.fileUploader.progress}),j()(r,(e,t)=>{this.fileUploader.flow.on(t,e)})}upload(){return new Promise(e=>(this.fileUploader.onComplete(t=>e(t)),this.fileUploader.onError(t=>(this.error=t,e())),this.dataCollectorId&&this.affinity?this.fileUploader.upload():(this.error=new Error(Object(z.getString)("msgFileUploaderNotInitialized")),e())))}toJS(){return Object(E.toJS)(this)}}).prototype,"_status",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=J(i.prototype,"_progress",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n=J(i.prototype,"_analysisProgress",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=J(i.prototype,"_error",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=J(i.prototype,"_detail",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=J(i.prototype,"_showDetail",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J(i.prototype,"error",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"error"),i.prototype),J(i.prototype,"detail",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"detail"),i.prototype),J(i.prototype,"showDetail",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"showDetail"),i.prototype),J(i.prototype,"detailMessage",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"detailMessage"),i.prototype),J(i.prototype,"status",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"status"),i.prototype),J(i.prototype,"statusDetail",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"statusDetail"),i.prototype),J(i.prototype,"progress",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"progress"),i.prototype),J(i.prototype,"analysisProgress",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"analysisProgress"),i.prototype),i),Q=(d=J((p=class{constructor(e,t,r){H(this,"_droppedFiles",d,this),H(this,"_isApplyAllChecked",u,this),H(this,"_showConfirmDialog",h,this),H(this,"_overWriteOnDup",g,this),H(this,"_appendOnDup",m,this),H(this,"_isReplaceChecked",f,this),H(this,"_isAppendChecked",b,this),this._queuedConfirmDialog=[],this.callbacks=void 0,this.progressToast=void 0,this._overwriteOnDup=void 0,this.callbacks=r,this._droppedFiles=v()(e,e=>new G(e)),this.progressToast=t,this.progressToast.onCancel(()=>{this._droppedFiles.forEach(e=>{e.cancel()})})}get showConfirmDialog(){return this._showConfirmDialog}set showConfirmDialog(e){this._showConfirmDialog=e}get overwriteOnDup(){return this._overwriteOnDup}set overwriteOnDup(e){this._overwriteOnDup=e}get appendOnDup(){return this._appendOnDup}set appendOnDup(e){this._appendOnDup=e}get isApplyAllChecked(){return this._isApplyAllChecked}set isApplyAllChecked(e){this._isApplyAllChecked=e}get isReplaceChecked(){return this._isReplaceChecked}set isReplaceChecked(e){this._isReplaceChecked=e}get isAppendChecked(){return this._isAppendChecked}set isAppendChecked(e){this._isAppendChecked=e}get droppedFiles(){return this._droppedFiles}get droppedFilesToJS(){return this._droppedFiles.map(e=>e.toJS())}get acceptedFiles(){return _()(this.droppedFiles,e=>e.status!==L.f&&e.status!==L.d)}get sources(){return this.acceptedFiles.map(e=>e.source)}get progress(){var{totalSize:e,totalDone:t}=this.acceptedFiles.reduce((e,t)=>{var{analysisProgress:r,progress:i,file:{size:o}}=t;return e.totalDone+=o*i+5*o*r,e.totalSize+=6*o,e},{totalDone:0,totalSize:0});return e>0?t/e:0}get allCancelled(){return!x()(this.droppedFiles,e=>e.status!==L.d)}get withError(){return!!x()(this.droppedFiles,e=>e.status===L.f)}get isUploadDone(){var{totalSize:e,totalDone:t}=this.acceptedFiles.reduce((e,t)=>{var{progress:r,file:{size:i}}=t;return e.totalDone+=i*r,e.totalSize+=i,e},{totalDone:0,totalSize:0});return e&&t/e==1}setComplete(e,t){return this.progressToast.setComplete(e,B({},t,{duration:10}))}queueConfirmDialog(e){this._queuedConfirmDialog.push(e)}showNextDialog(){var{toggleConfirmDialog:e}=this.callbacks;this._queuedConfirmDialog.length?this._queuedConfirmDialog.shift()():e(!1)}get errors(){return _()(this.droppedFiles,e=>e.status===L.f).map(e=>({fileName:e.file.name,errorMessage:e.error}))}}).prototype,"_droppedFiles",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=J(p.prototype,"_isApplyAllChecked",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=J(p.prototype,"_showConfirmDialog",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=J(p.prototype,"_overWriteOnDup",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=J(p.prototype,"_appendOnDup",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=J(p.prototype,"_isReplaceChecked",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=J(p.prototype,"_isAppendChecked",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J(p.prototype,"showConfirmDialog",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"showConfirmDialog"),p.prototype),J(p.prototype,"overwriteOnDup",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"overwriteOnDup"),p.prototype),J(p.prototype,"appendOnDup",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"appendOnDup"),p.prototype),J(p.prototype,"isApplyAllChecked",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"isApplyAllChecked"),p.prototype),J(p.prototype,"isReplaceChecked",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"isReplaceChecked"),p.prototype),J(p.prototype,"isAppendChecked",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"isAppendChecked"),p.prototype),J(p.prototype,"droppedFiles",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"droppedFiles"),p.prototype),J(p.prototype,"droppedFilesToJS",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"droppedFilesToJS"),p.prototype),J(p.prototype,"acceptedFiles",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"acceptedFiles"),p.prototype),J(p.prototype,"sources",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"sources"),p.prototype),J(p.prototype,"progress",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"progress"),p.prototype),J(p.prototype,"allCancelled",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"allCancelled"),p.prototype),J(p.prototype,"withError",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"withError"),p.prototype),J(p.prototype,"isUploadDone",[E.computed],Object.getOwnPropertyDescriptor(p.prototype,"isUploadDone"),p.prototype),p)},391:function(e,t,r){var i=r(179),o=r(230),a=r(81);e.exports=function(e,t){var r={};return t=a(t,3),o(e,(function(e,o,a){i(r,t(e,o,a),e)})),r}},392:function(e,t){e.exports=w},393:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i,o,a,n=r(0),s=r.n(n),l=r(2),c=r(12),p=r(3),d=r(20),u=r(127),h=r(290),g=r(22),m=Object(c.observer)(i=class extends n.Component{render(){var{uploadFile:{status:e,statusDetail:{iconId:t,intent:r,iconTitle:i,isRunning:o}},toggleDetail:a}=this.props;return o?s.a.createElement(l.ProgressIndicator,{variant:"circle",size:"small"}):e===g.f||e===g.b||e===g.c?s.a.createElement(l.SVGIcon,{size:"small",iconId:t,intent:r,onClick:a,title:i,"aria-label":i}):s.a.createElement(l.SVGIcon,{size:"small",iconId:t,intent:r,title:i,"aria-label":i})}})||i,f=Object(h.a)(e=>!!e.uploadFile.statusDetail.message)(o=Object(c.observer)(o=class extends n.Component{constructor(){super(...arguments),this.toggleDetail=()=>{this.props.uploadFile.showDetail=!this.props.uploadFile.showDetail},this._tid=e=>Object(d.a)("FileUploadResult",e)}render(){var{fileName:e,statusDetail:{message:t,isCancellable:r},detailMessage:i,cancel:o,showDetail:a}=this.props.uploadFile,{index:n}=this.props;return s.a.createElement(l.FlexLayout,{direction:"column"},s.a.createElement(l.FlexItem,{"data-tid":this._tid("item_"+n)},s.a.createElement(l.FlexLayout,{direction:"row",alignItems:"center"},s.a.createElement(l.FlexItem,null,s.a.createElement(m,{uploadFile:this.props.uploadFile,toggleDetail:this.toggleDetail})),s.a.createElement(l.FlexItem,null,s.a.createElement(l.Container,{maxWidth:350,gutter:[2,1,2,1]},s.a.createElement(l.TruncatedText,{value:e,"data-tid":this._tid("fileName_"+n)}))),s.a.createElement(l.FlexItem,{grow:!0},s.a.createElement(l.Container,{"data-tid":this._tid("message_"+n),gutter:[2,1,2,1]},t)),!!r&&s.a.createElement(l.FlexItem,null,s.a.createElement(l.Container,{gutter:[1]},s.a.createElement(l.Link,{"data-tid":this._tid("cancel_"+n),onClick:()=>o()},Object(p.getString)("cancel")))),!!i&&s.a.createElement(l.FlexItem,null,s.a.createElement(l.Container,{gutter:[2,1,2,1]},s.a.createElement(l.Link,{"data-tid":this._tid("details_"+n),onClick:()=>this.toggleDetail()},a?Object(p.getString)("fileUploadHideDetails"):Object(p.getString)("fileUploadViewDetails")))))),a&&i&&s.a.createElement(l.FlexItem,null,s.a.createElement(l.Container,{"data-tid":this._tid("detailMessage_"+n),gutter:[0,0,2,5],style:{"white-space":"pre-wrap"}},i)),s.a.createElement(l.Separator,{hMargin:0}))}})||o)||o,b=Object(c.observer)(a=class extends n.Component{constructor(){super(...arguments),this.state={isErrorAllChecked:!1,droppedFiles:[]},this._onChange=()=>{this.setState(e=>({isErrorAllChecked:!e.isErrorAllChecked}))},this._itemRenderer=e=>{var t=this.state.droppedFiles[e];return s.a.createElement(f,{uploadFile:t,key:e,index:e})},this._getFolderName=()=>{var{destination:e,baseModuleId:t}=this.props;if(e===u.a)return Object(p.getString)("myContent");if(e&&e.length&&t)return e;var r=e&&e.length?e.match(/\[(.*?)\]/g):[];return(r=(r.length?r[r.length-1]:"").match(/'(.*?)'/))&&2===r.length?r[1]:Object(p.getString)("myContent")},this._tid=e=>Object(d.a)("FileUploadResultDialog",e)}static getDerivedStateFromProps(e,t){return{droppedFiles:e.uploadFileManager.droppedFiles.filter(e=>!t.isErrorAllChecked||e.status===g.f)}}render(){var{uploadFileManager:{droppedFiles:e},onOk:t}=this.props,{isErrorAllChecked:r}=this.state,i=this._getFolderName();return e.length>0?s.a.createElement(l.Dialog,{onClose:t,className:"bi-common-fileUpload__dialog"},s.a.createElement(l.Dialog.Header,null,s.a.createElement(l.TruncatedText,{value:Object(p.getString)("fileUploadDetailsHeader",{folderName:i}),"data-tid":this._tid("folderName")})),s.a.createElement(l.Dialog.Body,null,s.a.createElement(l.FlexLayout,{height:"400px",width:"800px",className:"bi-common-fileUpload__body",direction:"column"},s.a.createElement(l.FlexItem,{className:"bi-common-fileUpload__body__text",gutter:[2]},s.a.createElement(l.TruncatedText,{value:Object(p.getString)("fileUploadStatus")})),s.a.createElement(l.FlexItem,{overflow:"auto",grow:!0,gutter:[0,2]},s.a.createElement(l.FlexLayout,{direction:"column",height:"100%"},s.a.createElement(l.List,{itemRenderer:this._itemRenderer,length:this.state.droppedFiles.length}))))),s.a.createElement(l.Dialog.Footer,null,s.a.createElement(l.FlexItem,{grow:!0,alignSelf:"center"},s.a.createElement(l.Checkbox,{labelText:s.a.createElement(l.TruncatedText,{value:Object(p.getString)("fileUploadShowErrorOnly")}),title:Object(p.getString)("fileUploadShowErrorOnly"),checked:r,onChange:this._onChange,"data-tid":this._tid("showErrorsOnly")})),s.a.createElement(l.Dialog.Button,{primary:!0,"data-tid":this._tid("okButton"),label:Object(p.getString)("ok"),onClick:t}))):null}})||a},394:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var i,o=r(0),a=r.n(o),n=r(2),s=r(12),l=r(20),c=r(3),p=(r(334),"FileUploadConfirmDialog"),d=Object(c.getString)("confirmRefreshUpload"),u=Object(c.getString)("fileUploadConfirmReplace"),h=Object(c.getString)("fileUploadConfirmAppend"),g=Object(c.getString)("fileUploadApplyAll"),m=Object(c.getString)("ok"),f=Object(c.getString)("cancel"),b=Object(l.a)(p,"confirmRefresh"),y=Object(l.a)(p,"confirmMessage"),v=Object(l.a)(p,"replaceData"),O=Object(l.a)(p,"appendData"),_=Object(l.a)(p,"applyToAll"),C=Object(l.a)(p,"ok"),j=Object(l.a)(p,"cancel"),w=Object(s.observer)(i=class extends o.Component{constructor(){super(...arguments),this.state={isApplyAllChecked:!1,isReplaceChecked:!0,isAppendChecked:!1},this._onChange=()=>{this.setState(e=>({isApplyAllChecked:!e.isApplyAllChecked}))},this._onReplaceChange=()=>{this.setState(e=>({isReplaceChecked:!e.isReplaceChecked,isAppendChecked:!e.isAppendChecked}))},this._onOk=()=>{var{uploadFileManager:e,onOk:t}=this.props;e.overwriteOnDup=!0,e.isApplyAllChecked=this.state.isApplyAllChecked,e.isReplaceChecked=this.state.isReplaceChecked,e.isAppendChecked=this.state.isAppendChecked,t()},this._onCancel=()=>{var{uploadFileManager:e,onCancel:t}=this.props;e.overwriteOnDup=!1,e.isApplyAllChecked=this.state.isApplyAllChecked,e.isReplaceChecked=this.state.isReplaceChecked,e.isAppendChecked=this.state.isAppendChecked,t()},this._getTid=e=>Object(l.a)("FileUploadConfirmDialog",e)}render(){var{replaceOnly:e,message:t}=this.props,{isApplyAllChecked:r,isReplaceChecked:i,isAppendChecked:o}=this.state;return a.a.createElement(n.Dialog,{onClose:this._onCancel,className:"bi-common-fileUpload__dialog",width:"640px"},a.a.createElement(n.Dialog.Header,null,a.a.createElement(n.TruncatedText,{value:d,"data-tid":b})),a.a.createElement(n.Dialog.Body,null,a.a.createElement(n.FlexLayout,{direction:"column",alignItems:"flex-start"},a.a.createElement(n.FlexItem,{overflow:"auto"},a.a.createElement(n.Label,{label:t,"data-tid":y})),!e&&a.a.createElement(a.a.Fragment,null,a.a.createElement(n.FlexItem,{gutter:[3,0,0,0]},a.a.createElement(n.Radio,{label:u,title:u,checked:i,onChange:this._onReplaceChange,"data-tid":v})),a.a.createElement(n.FlexItem,{gutter:[1,0,0,0]},a.a.createElement(n.Radio,{label:h,title:h,checked:o,onChange:this._onReplaceChange,"data-tid":O}))))),a.a.createElement(n.Dialog.Footer,null,a.a.createElement(n.FlexItem,{grow:!0,alignSelf:"center"},a.a.createElement(n.Checkbox,{labelText:a.a.createElement(n.TruncatedText,{value:g}),checked:r,onClick:this._onChange,"data-tid":_})),a.a.createElement(n.Dialog.Button,{primary:!0,label:m,onClick:this._onOk,className:"bi-common-fileUpload__dialog__okButton","data-tid":C}),a.a.createElement(n.Dialog.Button,{secondary:!0,label:f,onClick:this._onCancel,"data-tid":j})))}})||i},395:function(e,t,r){"use strict";var i=r(114),o=r.n(i),a=r(0),n=r.n(a),s=r(17),l=r.n(s),c=r(41),p=r(396),d=r(2),u=r(192),h=r.n(u),g=r(3),m=r(73);r(334);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}t.a=function(e){var t,r={drop(e,t,r){r.setState({fileList:t.getItem().files})}};return Object(c.DropTarget)([p.NativeTypes.FILE],r,(e,t)=>({connectDropTarget:e.dropTarget(),isActive:t.isOver()&&t.canDrop()}))(t=class extends a.Component{constructor(){super(...arguments),this.state={fileList:[]},this._setRef=e=>{this.props.connectDropTarget(l.a.findDOMNode(e))}}componentWillReceiveProps(e){var{fileList:t}=this.props;Object(m.a)(t,e.fileList)||this.setState({fileList:e.fileList})}render(){var t=o()(this.props,"connectDropTarget","isActive"),r="bi-common-fileUpload"+(this.props.isActive?" dragging":"");return n.a.createElement(d.Container,{height:"100%"},n.a.createElement(e,f({},t,{ref:this._setRef,fileList:this.state.fileList})),n.a.createElement(d.Container,{className:r},n.a.createElement(d.Container,{className:"bi-common-fileUploadBanner"},n.a.createElement(d.SVGIcon,{className:"bi-common-fileUploadBanner__dndIcon",iconId:h.a.id}),Object(g.getString)("dropYourFiles"))))}})||t}},396:function(e,t){e.exports=F},41:function(e,t){e.exports=l},42:function(e,t){e.exports=c},43:function(e,t){e.exports=p},46:function(e,t){e.exports=d},48:function(e,t){e.exports=u},590:function(e,t,r){r(61),e.exports=r(591)},591:function(e,t,r){"use strict";r.r(t);var i=r(333);r.d(t,"FileUploadHelper",(function(){return i.a}));var o=r(195);r.d(t,"FileUploadDnDContainer",(function(){return o.a}));var a=r(99);r.d(t,"IMPORT",(function(){return a.b}));var n=r(127);r.d(t,"MY_FOLDERS",(function(){return n.a}));var s=r(22);r.d(t,"ANALYZE_DONE",(function(){return s.a}))},595:function(e,t){e.exports=S},596:function(e,t,r){(e.exports=r(30)(!1)).push([e.i,".bi-common-fileUpload{display:none;pointer-events:none;z-index:999999;position:absolute;left:0;top:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.75)}.bi-common-fileUpload__dialog{z-index:999999}.bi-common-fileUpload__dialog .ba-common-dialog__footer .bi-common-fileUpload__dialog__okButton{margin-left:auto}.bi-common-fileUpload__dialog .ba-common-separator{border-color:#eaeaea}.bi-common-fileUpload__body{border:2px solid #eaeaea}.bi-common-fileUpload__body__text{border-bottom:1px solid #eaeaea}.bi-common-fileUpload__body__text .ba-common-truncatedText__text{font-weight:700}.bi-common-fileUpload.dragging{display:inline}.bi-common-fileUpload .bi-common-fileUploadBanner{bottom:0;text-align:center;padding:30px;position:absolute;width:100%;color:#fff;font-size:1.3em;background-color:#1f57a4}.bi-common-fileUpload .bi-common-fileUploadBanner__dndIcon{height:32px;width:32px;margin-right:10px;vertical-align:middle}",""])},6:function(e,t){e.exports=i},62:function(e,t){e.exports=h},63:function(e,t){e.exports=g},64:function(e,t){e.exports=m},66:function(e,t){e.exports=f},71:function(e,t){e.exports=b},78:function(e,t){e.exports=y},80:function(e,t){e.exports=v},83:function(e,t){e.exports=O},84:function(e,t){e.exports=_},85:function(e,t){e.exports=C},99:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var i="upload",o="import",a="createModule"}})}));
//# sourceMappingURL=upload.js.map