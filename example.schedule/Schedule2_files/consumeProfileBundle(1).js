/**
 * IBM Confidential OCO Source Materials IBM Business Platform: Dashboard
 * (C) Copyright IBM Corp. 2016, 2021
 *
 * The source code for this program is not published or otherwise divested of
 * its trade secrets, irrespective of what has been deposited with the U.S.
 * Copyright Office
 */

function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};define("dashboard-core/js/features/dashboard/actions/pinAction/PinAction",["../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../../lib/@waca/core-client/js/core-client/ui/ProgressToast","../../../../app/nls/StringResources","../../../../dashboard/util/DashboardSpecHelper","../../../../app/util/ErrorUtils","jquery","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","underscore"],(function(t,e,i,o,n,r,a,s,l){var d="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjY0cHgiIHZpZXdCb3g9IjAgMCA2NCA2NCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNjQgNjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNBRUI4Qjg7fQ0KPC9zdHlsZT4NCjxnPg0KCTxjaXJjbGUgY3g9IjgiIGN5PSI4IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iMjQiIGN5PSI4IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iNDAiIGN5PSI4IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iNTYiIGN5PSI4IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iOCIgY3k9IjI0IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iNiIvPg0KCTxjaXJjbGUgY3g9IjQwIiBjeT0iMjQiIHI9IjYiLz4NCgk8Y2lyY2xlIGN4PSI1NiIgY3k9IjI0IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iOCIgY3k9IjQwIiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iMjQiIGN5PSI0MCIgcj0iNiIvPg0KCTxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjYiLz4NCgk8Y2lyY2xlIGN4PSI1NiIgY3k9IjQwIiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iOCIgY3k9IjU2IiByPSI2Ii8+DQoJPGNpcmNsZSBjeD0iMjQiIGN5PSI1NiIgcj0iNiIvPg0KCTxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjQwIiBjeT0iNTYiIHI9IjYiLz4NCgk8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI1NiIgY3k9IjU2IiByPSI2Ii8+DQo8L2c+DQo8L3N2Zz4NCg==";return function(){function t(e){var i=e.features;_classCallCheck(this,t),i&&(this.dashboard=i.API,this.toast={},i.ContentActions.registerProvider("pin",this.getAPI()),this._features=i)}return t.prototype.getAPI=function(){return this._api||(this._api=a.createAPI(this,[s])),this._api},t.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0}]},t.prototype.postDashboardInitialize=function(){return this.controller=this.dashboard.getFeature("InteractionController.internal"),this.specHelper=new o(this.controller),Promise.resolve()},t.prototype._isEnabled=function(t){return t.length&&this._isSupportedVisualizations(t)&&this.dashboard.getMode()!==this.dashboard.MODES.EDIT_GROUP&&n.hasCapability(this.dashboard,"canAuthorDashboard")},t.prototype._isSupportedVisualizations=function(t){for(var e=0;e<t.length;e++)if(this._isNotSupportedVisualization(t[e]))return!1;return!0},t.prototype._isNotSupportedVisualization=function(t){var e=this.dashboard.getCanvas().getContent(t);if(!e)return!1;var i=e.getFeature("Visualization");return"widget.live"===e.getType()&&i&&"com.ibm.vis.schematicsPreview"===i.getDefinition().getId()},t.prototype.getContentActionList=function(t){var e={};this.dashboard.prepareGlassOptions(e);var o=e.glassContext;return this._isEnabled(t)&&!o.isEmbedded()?[{name:"pin",label:i.get("toolbarActionPinOld"),icon:this._features.Icons.getIcon("pin").id,type:"Button",section:s.ACTION_SECTION.SELECTION_WIDGET_FORMAT,order:10,actions:{apply:this.pinItems.bind(this)}}]:[]},t.prototype.pinItems=function(){var t=this;return new Promise((function(o,n){var a=l.uniqueId("pinToast"),s=new e({noCancelBtn:!0,onShown:function(e){var a=[],s=t.controller.boardModel.name,l=t._createPath();return t.specHelper.getContents(!0).forEach((function(e){var i={source:"authoredview",sourceName:s,sourceUri:l+"?embed=ba1",sourceInstanceId:l,contentType:"boardFragment",content:e};if(t._shouldUsePlaceholder(e.widgets))i.thumbUri=t._getPlaceholder(e.widgets),t._pinItem(i);else{var o="group"===e.layout.type,n="tab"===e.layout.type,d=r("#"+e.layout.id)[0],p=d;o||n||(p=r(p).find(".widgetContentWrapper")[0]);var c={widget:d,content:p},u={};t._prepareNodeStylesForThumbnail(c,u),a.push(t._createThumbnail(p).then((function(e){i.thumbUri=e,t._restoreStylesAfterThumbnail(c,u)}),(function(e){t.dashboard.getGlassCoreSvc(".Logger").error(e)})).then(t._pinItem.bind(t,i)))}})),Promise.all(a).then((function(){t.toast[e].setComplete(100,{duration:0,completeMsg:i.get("pinAddedToast"),isComplete:!0}),o()})).catch((function(){t.toast[e].fail(i.get("contentPinFailOld")),n()})).finally((function(){t.toast[e].remove(),t.toast[e]=null}))}.bind(t,a)});s.show(i.get("pinningToast")),s.indefinite(i.get("pinningToast")),t.toast[a]=s}))},t.prototype._createPath=function(){return(this.controller.gatewayUrl?this.controller.gatewayUrl:"")+"/board/"+this.controller.boardModel.id},t.prototype._shouldUsePlaceholder=function(t){return 1===t.length&&t[0].mapping&&t[0].mapping[0]&&t[0].mapping[0].graphic},t.prototype._getPlaceholder=function(t){var e;return 1===t.length&&t[0].mapping&&t[0].mapping[0]&&t[0].mapping[0].graphic&&(e=d),e},t.prototype._pinItem=function(t){return this.dashboard.getGlassSvc(".DashboardPinning").then((function(e){return e.addPin(t)}))},t.prototype._prepareNodeStylesForThumbnail=function(t,e){if(t.widget!==t.content){e.widget=t.widget.getAttribute("style")||"",e.content=t.content.getAttribute("style")||"";var i=[],o=[];e.widget.split(";").forEach((function(t){switch(t.split(":")[0].trim()){case"width":case"height":case"top":case"left":i.push(t);break;default:o.push(t)}})),t.widget.setAttribute("style",i.join(";")),t.content.setAttribute("style",e.content+";"+o.join(";"))}r(t.widget).addClass("pinThumbnail")},t.prototype._createThumbnail=function(t){return this.dashboard.getDashboardSvc(".Thumbnail").then((function(e){return e.generateImage(t)}))},t.prototype._restoreStylesAfterThumbnail=function(t,e){t.widget!==t.content&&(t.widget.setAttribute("style",e.widget),t.content.setAttribute("style",e.content)),r(t.widget).removeClass("pinThumbnail")},t}()})),define("dashboard-core/js/features/dashboard/actions/launchExploreAction/LaunchIntoExploreHandler",["../../../../lib/@waca/core-client/js/core-client/utils/UniqueId","../../../../dashboard/util/DashboardSpecHelper","../../../../app/nls/StringResources","../../../../dashboard/glass/util/InstrumentationUtil"],(function(t,e,i,o){return function(){function n(t){_classCallCheck(this,n),this.dashboard=t.dashboard,this.controller=t.controller,this.specHelper=new e(this.controller)}return n.prototype.launchExplore=function(e){var o=this,n=t.get("explore"),r=this._createEmptyBoardSpec(),a=this._getAddOnSpec();this._track(a,e);var s=!1;return this.dashboard.getGlassSvc(".ConversionService").then((function(t){return t.convert("DASHBOARD","EXPLORE",a.spec)})).then((function(t){var i=o._getPerspectiveOptions(r,t,n,e);for(var a in i.content.openAppViewCallback=o._openAppViewCallback,i.content.addOnSpec=o._getAddOnFragment(t),i.content.addOnSpec.hasOwnProperty("isStylesStripped")&&(!0===i.content.addOnSpec.isStylesStripped&&(s=!0),delete i.content.addOnSpec.isStylesStripped),i.content.addOnSpec.widgets)i.content.addOnSpec.widgets.hasOwnProperty(a)&&(i.content.addOnSpec.widgets[a].titleMode="smartTitle",delete i.content.addOnSpec.widgets[a].responsiveTitle);return o.dashboard.openAppView("explore",i)})).then((function(t){return t&&"capability__empty__view"!==t.currentContentView.el.id&&(s&&o.dashboard.showToast(i.get("explore_remove_widget_styles"),{type:"info"}),t&&t.currentContentView&&t.currentContentView.openCardListPane&&t.currentContentView.openCardListPane()),t&&t.currentContentView&&t.currentContentView.getDashboardApi()}))},n.prototype._track=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.content,n=void 0===i?{}:i;if(t.spec){var r=JSON.parse(t.spec),a={objectType:"explore"},s=void 0;n.boardId?(a.object=n.boardId,s="exportedToExistingExplore"):s="exportedToNewExplore",r.dataSources&&r.dataSources.sources&&(a.sources=r.dataSources.sources),r.widgets&&(a.widgets=r.widgets),a.type="Exported Object";var l={};this.dashboard.prepareGlassOptions(l);var d=l.glassContext;o.track(d,s,a)}},n.prototype._openAppViewCallback=function(t,e){t&&e.addFragment({model:t},{selectAfterAdd:!0},{skipUndoRedo:!0})},n.prototype._getAddOnFragment=function(t){if(!t)return null;var e=JSON.parse(t);return this.preprocess(e),e},n.prototype._getPerspectiveOptions=function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=o.content,r=JSON.parse(e);this.preprocess(r);var a=n||{boardSpec:t,isAuthoringMode:!0};return a.addOnSpec=r,{id:a.boardId||i,content:a}},n.prototype.preprocess=function(t){t&&t.layout&&"exploreContainer"===t.layout.type&&(t.layout.items.map((function(t,e){t.id=t.id+"_"+e})),t.layout=t.layout.items)},n.prototype._getAddOnSpec=function(){var t=this.controller.getSelectedNodes(),e=this.specHelper.getContentsToJSONSpec().spec;return{spec:void 0===e?null:e,count:t.length||0}},n.prototype._createEmptyBoardSpec=function(){return{name:i.get("launchNewExplore"),layout:{type:"exploreContainer",items:[]},widgets:{},_meta:{bundleID:null}}},n}()})),define("dashboard-core/js/features/dashboard/actions/launchExploreAction/LaunchIntoExploreAction",["./LaunchIntoExploreHandler","../../../../app/nls/StringResources","../../../../app/util/ErrorUtils","../../../../app/util/CapabilityUtils","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,i,o,n,r){var a=["dataPlayer","dropdownList"],s=["new","existing"];return function(){function o(t){var e=t.features;_classCallCheck(this,o),this._dashboard=e.API,this._contentActions=e.ContentActions,this._controller=null,this._launchHandler=null,this._features=e,this._contentActions.registerProvider("LaunchIntoExplore",this.getAPI())}return o.prototype.getAPI=function(){return this._api||(this._api=n.createAPI(this,[r])),this._api},o.prototype.getLifeCycleHandlers=function(){return[{name:"post:dashboard.initialize",action:this.postDashboardInitialize.bind(this),triggerIfEventAlreadySent:!0}]},o.prototype.postDashboardInitialize=function(){return this._controller=this._dashboard.getFeature("InteractionController.internal"),this._launchHandler=new t({dashboard:this._dashboard,controller:this._controller}),Promise.resolve()},o.prototype.destroy=function(){},o.prototype.getContentActionList=function(t){var o={};this._dashboard.prepareGlassOptions(o);var n=o.glassContext;return i.hasCapability(this._dashboard,"canUseExploration")&&0!==t.length&&this._validateWidgetTypes()&&this._dashboard.getMode()!==this._dashboard.MODES.EDIT_GROUP&&!n.isEmbedded()?[{name:"launchExplore",label:e.get("exploreData"),icon:this._features.Icons.getIcon("explore").id,type:"DropDown",section:r.ACTION_SECTION.SELECTION_DATA,order:30,className:"launchExplore",view:{state:{idList:t}},actions:{apply:this.handleSelection.bind(this),getMenuItems:this._getMenuItems.bind(this)}}]:[]},o.prototype.handleSelection=function(t){var i=this,o=this._dashboard.getFeature("Capabilities");if(!o)return this._handleSelection(t);var n=this._collectSourcesInSelectedItems();return n.length?o.hasCapability(n,"canUseExploration").then((function(o){if(o)return i._handleSelection(t);i._dashboard.showToast(e.get("noCapabilityForLaunchInExplore"),{type:"error",preventDuplicates:!0})})).catch((function(t){throw i._dashboard.getFeature("Logger").error("Fail to check capability in Launch into explore",t),t})):this._handleSelection(t)},o.prototype._handleSelection=function(t){return t===s[1]?this._selectExistingExplore():this._launchNewExplore()},o.prototype._collectSourcesInSelectedItems=function(){var t=this._dashboard.getCanvas().getSelectedContentList({type:"widget.live"}),e=[];return t.forEach((function(t){var i=t.getFeature("Visualization").getDataSource();if(i){var o=i.getAssetId(),n=i.getType();e.push({assetId:o,type:n})}})),e},o.prototype._getMenuItems=function(){return[{text:e.get("launchNewExplore"),itemId:s[0]},{text:e.get("addToExisting"),itemId:s[1]}]},o.prototype._isCustomVisType=function(t,e){var i=t.getProperty("isSchematic"),o=t.getProperty("isCustomVis");return i||o||["visualizationPreview","com.ibm.vis.schematicsPreview"].indexOf(e)>=0},o.prototype._isInvalidWidget=function(t){if(!t)return!0;var e=t.getDefinition().getId();return-1!==a.indexOf(e)||this._isCustomVisType(t.getDefinition(),e)},o.prototype._validateWidgetTypes=function(){var t=this,e=this._dashboard.getCanvas(),i=e?e.getSelectedContentList({type:"widget.live"}):[];return!i.some((function(e){var i=e.getFeature("Visualization");return t._isInvalidWidget(i)}))&&0!==i.length},o.prototype._filterResults=function(t){var e=this;t.data?t.data=t.data.filter((function(t){return e._hasRequiredPermissions(t)})):t.data=[]},o.prototype._hasRequiredPermissions=function(t){var e=t.permissions;return"folder"===t.type?e&&e.indexOf("read")>-1&&e.indexOf("traverse")>-1:"exploration"===t.type&&(e&&e.indexOf("read")>-1)},o.prototype._selectExistingExplore=function(){var t=this;return this._dashboard.getGlassSvc(".ContentDialogFactory").then((function(i){return new Promise((function(o,n){var r={dataManipulationCallback:t._filterResults.bind(t),dialogTitle:e.get("addToExisting"),extraUrlParameters:["tags","permissions"],multiSelect:!1,onOpenCallback:t._launchExistingExplore.bind(t,o,n),primaryBtnText:e.get("addTo"),typesToOpen:["explore"]};t._dashboard.prepareGlassOptions(r),i.createOpenDialog(r).open()}))}))},o.prototype._launchExistingExplore=function(t,e,i){var o=i[0].id;this._launchHandler.launchExplore({content:{boardId:o,isAuthoringMode:!0,objRef:o}}).then((function(e){t(e)})).catch((function(t){e(t)}))},o.prototype._launchNewExplore=function(){return this._launchHandler.launchExplore()},o}()})),define("dashboard-core/js/features/dashboard/actions/resetDashboard/ResetDashboardAction",["../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","../../../../lib/@waca/dashboard-common/dist/ui/dialogs/ConfirmationDialog"],(function(t,e,i){return function(){function o(i){var n=i.features;_classCallCheck(this,o),this._dashboard=n.API;var r=n.ContentActions;this._features=n,this._api=t.createAPI(this,[e]),r.registerProvider("ResetDashboard",this.getAPI())}return o.prototype.getAPI=function(){return this._api},o.prototype._isItemVisible=function(){var t=!!this._dashboard.getCurrentContentView().getSavedInstance(),e=this._features.DashboardState.getUiState().dirty;return t&&e},o.prototype._resetDashboard=function(){var t=this._dashboard.getCurrentContentView(),e=t.getSavedInstance();t.clearTransientState();return t.reloadFromJSONSpec(JSON.parse(e),{isAuthoringMode:!1,clearDirtyFlag:!0})},o.prototype._onReset=function(){var t=this,e=this._dashboard.getCurrentContentView(),o=e.stringService,n=o.get("dashboardResetToast");new i({title:o.get("dashboardResetTitle"),message:o.get("dashboardResetMessage"),confirmCallback:function(){return t._resetDashboard().then((function(){return e.getDashboardApi().showToast(n,{type:"success",preventDuplicates:!0})}))}}).render()},o.prototype.getContentActionList=function(){var t=this,i=this._dashboard.getCurrentContentView().stringService,o=this._features.DashboardState.getUiState();return!1===o.authoring&&this._isItemVisible()&&o.dirty?[{name:"ResetDashboard",type:"Button",section:e.ACTION_SECTION.DASHBOARD,order:70,label:i.get("dashboardResetTitle"),icon:this._features.Icons.getIcon("restore").id,actions:{apply:function(){return t._onReset()}}}]:[]},o}()})),define("dashboard-core/js/features/dashboard/actions/editNotebookAction/EditNotebookAction",["../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI","../../../../app/util/ErrorUtils","../../../../app/nls/StringResources"],(function(t,e,i,o,n){return function(){function t(e){var i=e.features;_classCallCheck(this,t),this._dashboard=i.API,i.ContentActions.registerProvider("editNotebook",this.getAPI()),this._features=i}return t.prototype.getAPI=function(){return this._api||(this._api=e.createAPI(this,[i])),this._api},t.prototype.destroy=function(){this._dashboard=null,this._features=null,this._api=null},t.prototype._isAvailable=function(t){return!(1!==t.length||!0!==this._features.DashboardState.getUiState().authoring||!o.hasCapability(this._dashboard,"canAuthorDashboard"))&&(this._selectedWidget=this._dashboard.getCanvas().getWidget(t[0]),this._selectedWidget&&"function"==typeof this._selectedWidget.allowReconfigure&&this._selectedWidget.allowReconfigure())},t.prototype.getContentActionList=function(t){return this._isAvailable(t)?[{name:"editNotebook",label:n.get("editNotebook"),icon:this._features.Icons.getIcon("edit").id,type:"Button",actions:{apply:this.triggerEdit.bind(this)}}]:[]},t.prototype.triggerEdit=function(){this._selectedWidget.editConfig()},t}()})),define("dashboard-core/js/features/content/contentFilter/api/ContentFilterProviderAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.match=function(){},t}()})),define("dashboard-core/js/features/content/contentFilter/ContentFilterPropertiesProvider",["underscore","./api/ContentFilterProviderAPI","../../../lib/@waca/dashboard-common/dist/core/APIFactory"],(function(t,e,i){return function(){function t(o){_classCallCheck(this,t),this.content=o.content,this._api=i.createAPI(this,[e]),this._key="properties",this.content.getFeature("ContentFilter").registerProvider(this._key,this.getAPI())}return t.prototype.getAPI=function(){return this._api},t.prototype.match=function(t){var e=t.selector,i=!1;for(var o in e[this._key]){if(this.content.getPropertyValue(o)!==e[this._key][o]){i=!1;break}i=!0}return i},t}()})),define("dashboard-core/js/features/dashboard/convertToTemplate/api/ConvertToTemplateAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.convertToTemplate=function(){},t}()})),define("text!dashboard-core/js/dashboard/schema/templateSchemaMappings.json",[],(function(){return'{\n    "copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2022. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "version": "versionSchema.json",\n    "name": "nameSchema.json",\n    "layout": "layoutSchema.json",\n    "theme": "themeSchema.json",\n    "specVersion": "versionSchema.json",\n    "eventGroups": "eventGroupsSchema.json",\n    "properties": "propertiesSchema.json",\n    "features": "featuresSchema.json"\n}\n'})),define("text!dashboard-core/js/dashboard/schema/featuresSchema.json",[],(function(){return'{\n\t"copyright": "Licensed Materials - Property of IBM. IBM Cognos Products: BI Cloud (C) Copyright IBM Corp. 2022. US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.",\n    "$id": "featuresSchema.json",\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "title": "features",\n    "description": "The features of the dashboard specification",\n\t"type": "object",\n\t"properties":{\n\t\t"CascadingFilters":{\n\t\t\t"type": "object",\n\t\t\t"properties":{\n\t\t\t\t"cascadeGlobalToTab": {"type": "boolean"},\n\t\t\t\t"cascadeStrategy": {"type": "string"},\n\t\t\t\t"cascadeTabToLocal": {"type": "boolean"}\n\t\t\t}\n\t\t}\n\t}\n}'})),define("dashboard-core/js/features/dashboard/convertToTemplate/ConvertToTemplate",["./api/ConvertToTemplateAPI","@waca/dashboard-common/js/core/APIFactory","text!../../../dashboard/schema/schemaDefs.json","text!../../../dashboard/schema/templateSchemaMappings.json","text!../../../dashboard/schema/nameSchema.json","text!../../../dashboard/schema/layoutSchema.json","text!../../../dashboard/schema/themeSchema.json","text!../../../dashboard/schema/versionSchema.json","text!../../../dashboard/schema/eventGroupsSchema.json","text!../../../dashboard/schema/propertiesSchema.json","text!../../../dashboard/schema/widgetsTemplateSchema.json","text!../../../dashboard/schema/featuresSchema.json"],(function(t,e,i,o,n,r,a,s,l,d,p,c){return function(){function u(t){var e=t.features;_classCallCheck(this,u),this.dashboard=e.API,this._featureChecker=this.dashboard.getGlassCoreSvc(".FeatureChecker")}return u.prototype.getAPI=function(){return!this._featureChecker.checkValue("dashboard","dashboardTemplates","disabled")||this._api||(this._api={convertToTemplate:function(){return Promise.resolve()}}),this._api||(this._api=e.createAPI(this,[t])),this._api},u.prototype.convertToTemplate=function(t){var e=this;return t&&Object.keys(t).length?this._getAjv().then((function(i){var o=e._getSchemaMappings(),n={},r=Object.keys(t),a=Array.isArray(r),s=0;for(r=a?r:r[Symbol.iterator]();;){var l;if(a){if(s>=r.length)break;l=r[s++]}else{if((s=r.next()).done)break;l=s.value}var d=l,p=o[d];if(p){var c=t[d],u=i.getSchema(p);u&&(u(c),"layout"!==d||Array.isArray(c)||e._lockVisualizationType(c.items),n[d]=c)}}return n})):Promise.resolve(null)},u.prototype._lockVisualizationType=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.items&&this._lockVisualizationType(i.items),"widget"===i.type&&i.features&&i.features.Models_internal&&"live"===i.features.Models_internal.type&&(i.features.Models_internal.visTypeLocked=!0)}},u.prototype._getSchemaMappings=function(){return this.schemaMappings||(this.schemaMappings=JSON.parse(o)),this.schemaMappings},u.prototype._getAjv=function(){var t=this;return this.ajv?Promise.resolve(this.ajv):new Promise((function(e,o){require(["ajv"],(function(u){try{t.ajv=new u({verbose:!0,allErrors:!0,removeAdditional:"all",schemas:[JSON.parse(i),JSON.parse(n),JSON.parse(r),JSON.parse(a),JSON.parse(s),JSON.parse(l),JSON.parse(d),JSON.parse(p),JSON.parse(c)]}),e(t.ajv)}catch(t){o(t)}}),o)}))},u}()})),define("dashboard-core/js/features/dashboard/csvExport/api/CsvExportAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.export=function(){},t}()})),define("dashboard-core/js/features/dashboard/csvExport/CsvExport",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./api/CsvExportAPI"],(function(t,e){return function(){function i(o){_classCallCheck(this,i),this.dashboard=o,this.api=t.createAPI(this,[e])}return i.prototype.destroy=function(){this.dashboard=null},i.prototype.getAPI=function(){return this.api},i.prototype._toCSV=function(t){if(Array.isArray(t)){var e=function(t){var e=t;return isNaN(e)&&-1!==(e=e.toString().trim()).indexOf(",")&&(e='"'+e.replace(/"/g,'""')+'"'),e};return t.map((function(t){return t.map?t.map(e).join(","):e(t)})).join("\n")+"\n"}throw new Error("The export data must be an array")},i.prototype.export=function(t){if("string"!=typeof t)throw new Error("The filename must be a string");for(var e=this._getWindow(),i=arguments.length,o=Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];var r=o.map(this._toCSV.bind(this)),a=t+".csv",s=new Blob(r,{type:"text/csv"});if(!t)throw new Error("Invalid filename");var l=this._createAnchor(e);if(void 0!==l.download){var d=e.URL.createObjectURL(s);return l.setAttribute("href",d),l.setAttribute("download",a),l.style.display="none",e.document.body.appendChild(l),l.click(),e.document.body.removeChild(l),setTimeout(e.URL.revokeObjectURL.bind(this,d),5e3),s}if(e.navigator&&e.navigator.msSaveBlob)return e.navigator.msSaveBlob(s,a),s;throw new Error("This browser does not support the ability to export")},i.prototype._getWindow=function(){return window},i.prototype._createAnchor=function(t){return t.document.createElement("a")},i}()})),define("dashboard-core/js/features/dashboard/fullScreen/FullScreenAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.enter=function(){},t.prototype.exit=function(){},t.prototype.isFullScreen=function(){},t}()})),define("dashboard-core/js/features/dashboard/fullScreen/FullScreen",["./FullScreenAPI","jquery","../../../api/DashboardAPI","../../../app/nls/StringResources","../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../lib/@waca/dashboard-common/dist/api/ContentActionsProviderAPI"],(function(t,e,i,o,n,r){var a="webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",s=function(){function s(t){var e=t.features;_classCallCheck(this,s),this._dashboard=e.API,this._dashboardState=e.DashboardState,this._contentActions=e.ContentActions,this._features=e,this._logger=this._dashboard.getService(i.GLOBAL_SERVICES.LOGGER),this._initialize()}return s.prototype._initialize=function(){this._api=n.createAPI(this,[t,r]),this._contentActions.registerProvider("fullScreenAction",this._api),this._dashboardState.onChangeActive(this._onChangeDashboardState.bind(this)),this._dashboardState.onUiStateChange(this._onUiStateChange.bind(this)),this._isEventTriggeredInternally=!1,this._isFullScreen=!1,this._inProgress=!1,this._setupEvents()},s.prototype.getAPI=function(){return this._api},s.prototype.destroy=function(){this._api=null,e(document).off(a)},s.prototype._setupEvents=function(){e(document).on(a,this._onFullScreenChangeEvents.bind(this))},s.prototype._teardownEvents=function(){e(document).off(a)},s.prototype.enter=function(){this.isFullScreen()?this._logger.info(s.LOGGER_MESSAGE.ENTER):(this._onEnterFullScreen(),this._isFullScreenEnabled()&&(this._isEventTriggeredInternally=!0,document.body.requestFullscreen?document.body.requestFullscreen():document.body.webkitRequestFullscreen?document.body.webkitRequestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():!document.body.msRequestFullscreen||window.frameElement&&"IFRAME"===window.frameElement.nodeName||document.body.msRequestFullscreen()))},s.prototype.exit=function(){this.isFullScreen()?(this._onExitFullScreen(),this._isFullScreenEnabled()&&(this._isEventTriggeredInternally=!0,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())):this._logger.info(s.LOGGER_MESSAGE.EXIT)},s.prototype.isFullScreen=function(){return this._isFullScreen},s.prototype._onChangeDashboardState=function(t){this._teardownEvents(),t.info.value?this._setupEvents():this.exit()},s.prototype._onFullScreenChangeEvents=function(){this._isEventTriggeredInternally?this._isEventTriggeredInternally=!1:this.isFullScreen()?(this._onExitFullScreen(),this._dashboardState.setFullScreen(!1)):this._onEnterFullScreen()},s.prototype._onEnterFullScreen=function(){this._activePaneColumn=e(".appview.paneColumn").not(".hidden"),this._activePaneColumn.find(".appbar").addClass("fullScreenNoGlass"),this._activePaneColumn.find(".templateBox").addClass("fullScreen"),e("body").addClass("fullScreen"),document.body.style.cssText="height: 100% !important",e("body").append(e('<div class="dashboardAriaAlert fullScreenAlert" role="alert"></div>').text(o.get("ariaFullScreenMessage"))),this._isFullScreen=!0,this._dashboard.triggerDashboardEvent("enter:fullscreen")},s.prototype._onExitFullScreen=function(){this._activePaneColumn.find(".appbar").removeClass("fullScreenNoGlass"),this._activePaneColumn.find(".templateBox").removeClass("fullScreen"),e("body").removeClass("fullScreen"),document.body.style.cssText="",e("body").find(".fullScreenAlert").remove(),this._isFullScreen=!1,this._dashboard.triggerDashboardEvent("exit:fullscreen")},s.prototype._isFullScreenEnabled=function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},s.prototype._onUiStateChange=function(t){var e=t.fullScreen;this._inProgress?this._logger.info(s.LOGGER_MESSAGE.IN_PROGRESS):(this._inProgress=!0,!0===e?this.enter():this.exit(),this._inProgress=!1)},s.prototype.getContentActionList=function(){var t=this,e=this._dashboardState.getUiState(),i=void 0,n=void 0;return e.fullScreen?(i=o.get("fullScreenClose"),n=this._features.Icons.getIcon("minimize").id):(i=o.get("fullScreenEnter"),n=this._features.Icons.getIcon("maximize").id),[{name:"FullScreen",type:"Button",label:i,icon:n,section:r.ACTION_SECTION.DASHBOARD,order:20,disabled:e.eventGroups,action:function(){e.fullScreen?t._dashboardState.setFullScreen(!1):t._dashboardState.setFullScreen(!0)}}]},s}();return s.LOGGER_MESSAGE={ENTER:"enter fullScreen - already in full screen",EXIT:"exit fullScreen - not in full screen",IN_PROGRESS:"change fullScreen state - already in progress"},s})),define("dashboard-core/js/features/dashboard/inAppSlideout/InAppSlideoutStateAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.registerContribution=function(){},t.prototype.removeContribution=function(){},t.prototype.getContributions=function(){},t.prototype.getContribution=function(){},t.prototype.getCurrent=function(){},t.prototype.getUiState=function(){},t.prototype.onStateChange=function(){},t.prototype.isOpen=function(){},t.prototype.open=function(){},t.prototype.close=function(){},t}()})),define("dashboard-core/js/features/dashboard/inAppSlideout/InAppSlideoutState",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./InAppSlideoutStateAPI"],(function(t,e){function i(t){return JSON.parse(JSON.stringify(t))}return function(){function o(n){var r=n.features;_classCallCheck(this,o),this._features=r,this._dashboardApi=r.API,this._dashboardState=r.DashboardState,this._contentActions=r.ContentActions,this._contributions={items:[]},this._stateListeners=[],this._previousDashboardState=i(this._dashboardState.getUiState()),this._dashboardStateIgnoreList=["dirty"],this._api=t.createAPI(this,[e]),this._dashboardState.onUiStateChange(this._onUiStateChange.bind(this)),this._updateContributionSelections(),this._dashboardApi.on("filterDock:expanded",this.close,this)}return o.prototype.getAPI=function(){return this._api},o.prototype.getUiState=function(){return this._dashboardState.getUiState().sidePanel},o.prototype._filterCaredDashboardState=function(t){var e=this;return JSON.stringify(t,(function(t,i){return-1!==e._dashboardStateIgnoreList.indexOf(t)?void 0:i}))},o.prototype._onUiStateChange=function(t){this._filterCaredDashboardState(t)!==this._filterCaredDashboardState(this._previousDashboardState)&&(this._updateContributionSelections(t.sidePanel),this._stateListeners.forEach((function(e){return e(t)}))),this._previousDashboardState=i(t)},o.prototype._updateContributionSelections=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getUiState();this._contributions.items.forEach((function(e){var i=e.contribution,o=e.id;i.selected=t.current===o}))},o.prototype.registerContribution=function(t,e){if(this.getContribution(t))throw new Error('Contribution with id "'+t+'" is already registered');e=this._populateContentContribution(t,e),this._registerContentContribution(t,e),this._contributions.items.push({id:t,contribution:e}),this._updateContributionSelections()},o.prototype._populateContentContribution=function(t,e){var i=this,o=function(){var e=i.getUiState(),o=e.isOpen,n=e.current;o&&n===t?i.close():i.open(t)};return _extends({},e,{checked:this.isOpen(),action:o,offAction:o,selected:!1})},o.prototype._registerContentContribution=function(t,e){var i=this;this._contentActions.registerProvider(t,{getContentActionList:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return e.isEnabled(o)?n.push(e):i.getUiState().current===t&&i.close(),n}})},o.prototype.onStateChange=function(t){var e=this,i=this._stateListeners.push(t)-1;return function(){e._stateListeners.splice(i,1)}},o.prototype.removeContribution=function(t){var e=this._contributions.items.findIndex((function(e){return e.id===t}));if(-1===e)throw new Error('Contribution with id "'+t+'" does not exist');this._contributions.items.splice(e,1)},o.prototype.getContribution=function(t){return this._contributions.items.find((function(e){return e.id===t}))},o.prototype.getContributions=function(){return this._contributions.items},o.prototype.getCurrent=function(){var t=this.getUiState().current;return this.getContribution(t)},o.prototype.isOpen=function(){return this.getUiState().isOpen},o.prototype.open=function(t){if(t){if(!this.getContribution(t))throw new Error('Contribution "'+t+'" does not exist');this._dashboardState.setSidePanelCurrentView(t)}this.isOpen()||(this._dashboardApi.triggerDashboardEvent("filterDock:collapse"),this._dashboardState.setSidePanelOpen(!0))},o.prototype.close=function(){this._dashboardState.setSidePanelOpen(!1)},o.prototype.destroy=function(){this._dashboardApi.off("filterDock:expand",this.close,this),this._dashboardApi=null,this._api=null},o}()})),define("dashboard-core/js/features/dashboard/inAppSlideout/InAppSlideoutDOMAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.render=function(){},t.prototype.registerView=function(){},t.prototype.removeView=function(){},t.prototype.getViews=function(){},t.prototype.getView=function(){},t.prototype.onDomStateChange=function(){},t}()})),define("dashboard-core/js/features/dashboard/inAppSlideout/InAppSlideoutContainer",["react","@ba/ba-ui-carbon-toolkit","prop-types","jquery"],(function(t,e,i,o){var n=e.Container,r=e.Slideout,a=function(t,e){return t.dataset.contributionId===e},s=function(e){function i(o){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,e.call(this,o));return n.contentRef=t.createRef(),n}return _inherits(i,e),i.prototype.componentDidMount=function(){this._updateInAppSlideout()},i.prototype.componentWillUnmount=function(){this._onComponentMountedChange(!1)},i.prototype.componentDidUpdate=function(){this._updateInAppSlideout()},i.prototype._getContainerNode=function(){var t=this.props.contribution.getProviderId(),e=this.contentRef.current;if(e){var i=function(t,e){return Array.from(t.childNodes).find((function(t){return a(t,e)}))}(e,t);return i||(i=function(t){var e=document.createElement("div");return e.dataset.contributionId=t,e.setAttribute("class","slideout__contributions__item"),e.style.overflow="auto",e}(t),e.appendChild(i)),i}},i.prototype._updateInAppSlideout=function(){var t=this,e=this.props,i=e.contribution,o=e.options;if(i){var n=i.getProviderId();!function(t,e){Array.from(t.childNodes).forEach((function(t){t.style.display=a(t,e)?"":"none"}))}(this.contentRef.current,n);var r=this._getContainerNode();r&&i.render(_extends({},o,{parentNode:r})).then((function(e){if(e){t.props._renderDone&&t.props._renderDone(t);var i=e.dataset.childPanelId;o.isChild||i?t._updateChildView(e,o):t._updateParentView(e,r),t._onComponentMountedChange(!0)}}))}},i.prototype._updateChildView=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.props.active;if(i){var n=this._getContainerNode(),r=n.firstElementChild;r&&(n.childNodes.length>1?e.refreshChild&&(o(r).remove(),r=n.firstElementChild):r.style.display="none",n.insertBefore(t,r),n.childNodes[0].focus())}},i.prototype._updateParentView=function(t,e){this.props.active&&e&&(e.innerHTML="",e.insertBefore(t,e.firstElementChild),e.childNodes[0].focus())},i.prototype._onComponentMountedChange=function(t){var e=this.props,i=e.onDomStateChange,o=e.contribution;o&&o.getProviderId&&i&&i({type:t?"mounted":"unmounted",current:o.getProviderId()})},i.prototype.render=function(){var e=this.props.active;return t.createElement(n,{relative:!0,height:"100%",width:"100%"},t.createElement(r,{animationOnRender:!0,toDirection:"",active:e,width:"100%",style:{borderLeft:"1px solid #eaeaea"}},t.createElement("div",{ref:this.contentRef,className:"slideout__contributions"})))},i}(t.Component);return s.propTypes={active:i.bool,contribution:i.object.isRequired,options:i.object,onDomStateChange:i.func,_renderDone:i.func},s.defaultProps={active:!1,options:{},onDomStateChange:function(){}},s})),define("dashboard-core/js/features/dashboard/inAppSlideout/InAppSlideoutDOM",["react","react-dom","../../../lib/@waca/dashboard-common/dist/core/APIFactory","./InAppSlideoutDOMAPI","./InAppSlideoutContainer","jquery"],(function(t,e,i,o,n,r){return function(){function a(t){_classCallCheck(this,a),this._slideout=t.features.InAppSlideoutState,this._api=null,this._rootNode=null,this._currentView=null,this._views=[],this._domListeners=[],this._features=t.features,this._api=i.createAPI(this,[o]),this._slideout.onStateChange(this._onSlideoutStateChange.bind(this))}return a.prototype.getAPI=function(){return this._api},a.prototype._onSlideoutStateChange=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.sidePanel.isOpen;if(this._shouldRenderSlideout(i))this.render();else if(!o&&this._currentView&&this._rootNode){this._currentView.close&&this._currentView.close();var n={width:"0px"};return this._doAnimation(n,(function(){t._unmountContribution(),t._rootNode&&e.unmountComponentAtNode(t._rootNode),t._rootNode=null,t._triggerResizeEvent()}))}},a.prototype._doAnimation=function(t,e){return r(this._rootNode).animate(t,"fast",e)},a.prototype._unmountContribution=function(){this._currentView&&this._currentView.unmount&&(this._currentView.unmount&&this._currentView.unmount(),this._currentView.close&&this._currentView.close()),this._currentView=null},a.prototype._triggerResizeEvent=function(){var t=this;this._delayResizeCall((function(){t._pendingTimeout&&(clearTimeout(t._pendingTimeout),t._pendingTimeout=null),t._api&&t._dispatchResizeEvent()}),200)},a.prototype._dispatchResizeEvent=function(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!1,!0),window.dispatchEvent(t)},a.prototype.registerView=function(t,e){if(this.getView(t))throw new Error('View with id "'+t+'" is already registered');this._views.push({id:t,instance:e})},a.prototype.removeView=function(t){var e=this._views.findIndex((function(e){return e.id===t}));if(-1===e)throw new Error('View with id "'+t+'" does not exist');this._views.splice(e,1)},a.prototype.getView=function(t){return this._views.find((function(e){return e.id===t}))},a.prototype.getViews=function(){return this._views},a.prototype._setupRenderNode=function(){var t=this;if(!this._rootNode){var e=document.querySelector("div.appview.paneColumn:not(.hidden)");e||(e=document.body);var i=e.querySelector(".dashboardFrame");this._rootNode=i.querySelector(".dashboardFrameRight"),this._rootNode.classList.add("dashboardAuthoringToolsPane");var o=this._features.DashboardSettings.get("panelWidth"),n=o||"320px",r={width:n};i.querySelector(".dashboardFrameCentre").setAttribute("style","width: calc(100% - "+n+")"),this._doAnimation(r,(function(){t._triggerResizeEvent()}))}},a.prototype._delayResizeCall=function(t,e){this._pendingTimeout=setTimeout((function(){t()}),e)},a.prototype.render=function(i){var o=this;return this._setupRenderNode(),new Promise((function(r,a){try{var s=o._slideout.getCurrent().id,l=o.getView(s).instance;l?(o._currentView=l,e.render(t.createElement(n,{active:o._slideout.isOpen(),contribution:l,options:i,onDomStateChange:o._onUiDomStateChange.bind(o)}),o._rootNode,(function(){return r()}))):r()}catch(t){a(t)}}))},a.prototype.destroy=function(){this._pendingTimeout&&clearTimeout(this._pendingTimeout),this._rootNode&&e.unmountComponentAtNode(this._rootNode),this._rootNode=null,this._api=null,this._currentView=null,this._domListeners.length=0},a.prototype.onDomStateChange=function(t){var e=this,i=this._domListeners.push(t)-1;return function(){e._domListeners.splice(i,1)}},a.prototype._onUiDomStateChange=function(t){this._domListeners&&this._domListeners.forEach((function(e){return e(t)}))},a.prototype._shouldRenderSlideout=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!this._currentView||this._currentView.getProviderId()!==t.sidePanel.current;return t.sidePanel.isOpen&&(e||t.dirty||t.selectionProperties)},a}()})),define("dashboard-core/js/features/dashboard/lassoFeatures/LassoRegister",[],(function(){return function(){function t(e){_classCallCheck(this,t),this._features=e.features,this._element=this._features.ContentViewDOM.getNode(),this._content=e.content,this._features.LassoSelect.register(this._element,this._content)}return t.prototype.destroy=function(){this._features.LassoSelect.deregister(this._element,this._content)},t}()})),define("dashboard-core/js/features/dashboard/lassoFeatures/LassoSelectAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.register=function(){},t.prototype.deregister=function(){},t.prototype.isAggregatedSelectInProgress=function(){},t}()})),define("dashboard-core/js/features/dashboard/lassoFeatures/LassoSelect",["./LassoSelectAPI","../../../lib/@waca/dashboard-common/dist/core/APIFactory"],(function(t,e){return function(){function i(o){_classCallCheck(this,i),this._features=o.features,this._api=e.createAPI(this,[t]),this._startListener=this._start.bind(this),this._stopListener=this._stop.bind(this),this._scanListener=this._scan.bind(this),this._activateTolerance=2,this._lassoedWidgets=[],this._aggregateResults=!1,this._startListenerCallbacks={}}return i.prototype.getAPI=function(){return this._api},i.prototype.register=function(t,e){if(t){var i=this._startListener.bind(this,e);this._startListenerCallbacks[e.getId()]=i,t.addEventListener("mousedown",i),t.addEventListener("mouseup",this._stopListener),t.addEventListener("mousemove",this._scanListener)}},i.prototype.deregister=function(t,e){t&&(t.removeEventListener("mousedown",this._startListenerCallbacks[e.getId()]),delete this._startListenerCallbacks[e.getId()],t.removeEventListener("mouseup",this._stopListener),t.removeEventListener("mousemove",this._scanListener)),this.lassoWidget&&(this.lassoWidget.remove(),delete this.lassoWidget)},i.prototype._start=function(t,e){if(this._tab=e.target.closest(".pagecontainer"),!this._isMousedownWithinAnyContent(e,t)&&this._tab){var i=this._tab.getElementsByClassName("widget"),o=i,n=Array.isArray(o),r=0;for(o=n?o:o[Symbol.iterator]();;){var a;if(n){if(r>=o.length)break;a=o[r++]}else{if((r=o.next()).done)break;a=r.value}a&&(a.style.userSelect="none")}this._selectedWidgets=this._features.Canvas.getSelectedContentList().map((function(t){return t.getId()})),window.navigator.userAgent.match("Mac")?this._aggregateResults=e.metaKey:this._aggregateResults=e.ctrlKey;for(var s=Array.from(this._tab.getElementsByClassName("expandHandle")),l=Array.from(this._tab.getElementsByClassName("moveHandle")),d=s.concat(l),p=e.pageX,c=e.pageY,u=0;u<i.length;u++){var h=i[u];if(h){var g=h.getBoundingClientRect();if(this._isClickInRect(p,c,g))return}}var f=d,b=Array.isArray(f),y=0;for(f=b?f:f[Symbol.iterator]();;){var v;if(b){if(y>=f.length)break;v=f[y++]}else{if((y=f.next()).done)break;v=y.value}if(v){var _=v.getBoundingClientRect();if(this._isClickInRect(p,c,_))return}}this.scanning=!0,this.x=e.pageX,this.y=e.pageY,this.lassoWidget?(this.lassoWidget.style.setProperty("display","inherit"),this.lassoWidget.classList.remove("hidden")):(this.lassoWidget=document.createElement("div"),this.lassoWidget.className="com_ibm_cognos_lasso");var m=this._tab.offsetParent.getBoundingClientRect();this.lassoWidget.style.top=this.y+this._tab.scrollTop-m.top+"px",this.lassoWidget.style.left=this.x+this._tab.scrollLeft-m.left+"px",this._tab.appendChild(this.lassoWidget)}},i.prototype._stop=function(){var t=this;if(this.scanning=!1,this._lassoedWidgets){var e=new Set,i=[].concat(this._selectedWidgets),o=this._lassoedWidgets,n=Array.isArray(o),r=0;for(o=n?o:o[Symbol.iterator]();;){var a;if(n){if(r>=o.length)break;a=o[r++]}else{if((r=o.next()).done)break;a=r.value}var s=a,l=this._features.Canvas.getContent(s);if(l){var d=l.getContainer();if("group"===d.getType())if(-1!==this._selectedWidgets.indexOf(d.getId())){if(e.add(l.getId()),this._aggregateResults){var p=i.indexOf(d.getId());-1!==p&&(i.splice(p,1),this._features.Canvas.deselectContent([d.getId()]))}}else this._features.Canvas.getContent(d.getId()).getChildren().filter((function(e){return-1!==t._selectedWidgets.indexOf(e.getId())})).length>0?e.add(l.getId()):e.add(d.getId());else e.add(l.getId())}}this._aggregateResults&&i.forEach((function(t){return e.add(t)})),e.size>0&&this._features.Canvas.selectContent(Array.from(e)),this._lassoedWidgets=[],this._aggregateResults=!1}if(this._tab){var c=this._tab.getElementsByClassName("widget"),u=Array.isArray(c),h=0;for(c=u?c:c[Symbol.iterator]();;){var g;if(u){if(h>=c.length)break;g=c[h++]}else{if((h=c.next()).done)break;g=h.value}g&&(g.style.userSelect="auto")}}this.lassoWidget&&(this.lassoWidget.style.setProperty("width","0"),this.lassoWidget.style.setProperty("height","0"),this.lassoWidget.classList.add("hidden"))},i.prototype._scan=function(t){var e=this;if(this.scanning){this.finX=t.pageX,this.finY=t.pageY;var i=Math.abs(this.finX-this.x),o=Math.abs(this.finY-this.y);this.lassoWidget.style.setProperty("left",Math.min(this.x,this.finX)+this._tab.scrollLeft-this._tab.offsetParent.getBoundingClientRect().left+"px"),this.lassoWidget.style.setProperty("top",Math.min(this.y,this.finY)+this._tab.scrollTop-this._tab.offsetParent.getBoundingClientRect().top+"px"),this.lassoWidget.style.setProperty("width",i+"px","important"),this.lassoWidget.style.setProperty("height",o+"px","important"),Array.from(this._tab.querySelectorAll(".widget:not(.kpi-widget-sparkline)")).forEach((function(t){var i=e._features.Canvas.getContent(t.id);if(i&&(!1!==i.getPropertyValue("selectable")&&t&&t.getBoundingClientRect&&e.lassoWidget))if(e._shouldSelectWidget(t))-1===e._lassoedWidgets.indexOf(i.getId())&&e._lassoedWidgets.push(i.getId());else{var o=e._lassoedWidgets.indexOf(i.getId());-1!==o&&e._lassoedWidgets.splice(o,o+1)}}))}},i.prototype._isClickInRect=function(t,e,i){return t>=i.x-this._activateTolerance&&t<=i.right+this._activateTolerance&&e>=i.y-this._activateTolerance&&e<=i.bottom+this._activateTolerance},i.prototype._shouldSelectWidget=function(t){if(this.lassoWidget){var e=this.lassoWidget.getBoundingClientRect(),i=t.getBoundingClientRect(),o=.1*i.width,n=.1*i.height;return(e.left>i.left+o&&e.left<i.right-o||e.left<i.left+o&&e.right>i.left+o)&&(e.top>i.top+n&&e.top<i.bottom-n||e.top<i.top+n&&e.bottom>i.top+n)}return!1},i.prototype._isMousedownWithinAnyContent=function(t,e){var i=!1,o=e.findContent();return o.length&&o.some((function(e){var o=e.getFeature("ContentViewDOM"),n=o&&o.getNode();if(n)return!0===(i=n.contains(t.target))})),i},i.prototype.isAggregatedSelectInProgress=function(){return!!this._aggregateResults},i}()})),define("dashboard-core/js/features/content/layoutProperties/LayoutPropertiesProvider",["../../../app/nls/StringResources","../../../dashboard/layout/LayoutHelper","../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../lib/@waca/baglass/js/baglass/utils/Utils","../../../lib/@waca/dashboard-common/dist/api/PropertiesProviderAPI","underscore","../../../dashboard/widgets/PropertyListUtil","../../../dashboard/util/ContentRegistryUtil"],(function(t,e,i,o,n,r,a,s,l){var d={"widget.text":{min:{width:100,height:40}},default:{min:{width:25,height:25}}};return function(){function e(t){_classCallCheck(this,e),this.dashboard=t.dashboardApi||t.dashboardAPI,this._canvas=t.features.Canvas,this.content=t.content,this.content.getFeature("Properties").registerProvider(this.getAPI());var i=this.dashboard&&this.dashboard.getGlassCoreSvc&&this.dashboard.getGlassCoreSvc(".FeatureChecker");this.isPropertiesV2Enabled=i&&i.checkValue("dashboard","PropertiesV2","enabled")}return e.prototype.getLayoutModel=function(){return this.dashboard.getFeature("internal").getBoardModel().layout.findModel(this.content.getId())},e.prototype.getAPI=function(){return i.createAPI(this,[r])},e.prototype._getCommonType=function(t){return t&&t.split(".")[0]},e.prototype._getSubType=function(t){return t&&-1!==t.indexOf(".")?t.split(".")[1]:null},e.prototype.getPropertyList=function(){var t=this,e=[],i=this.content.getType(),o=this._getCommonType(i),n=this._getSubType(i);if(("widget"===o||"group"===o||this._isTypeRegistered(o))&&e.push.apply(e,this._getWidgetPropertyList(n)),e)for(var r=function(i){var o=e[i];o.setPropertyValue||(o.setPropertyValue=function(e){return t._setPropertyValueInModel(o.id,e)}),o.getPropertyValue||(o.getPropertyValue=function(){return t._getPropertyValueFromModel(o.id)})},a=0;a<e.length;a++)r(a);return e},e.prototype.reset=function(){},e.prototype._isTypeRegistered=function(t){return this.dashboard.getFeature("ContentTypeRegistry").isTypeRegistered(t)},e.prototype.getPropertyLayoutList=function(){var e=[];this._isTopLevelPage()||e.push({value:t.get("settings"),id:"banner",type:"Banner",editable:!1,override:!1});var i=this._getCommonType(this.content.getType());return(this._isTypeRegistered(i)||"widget"===i||"group"===i)&&(e.push({id:"general",type:"Group",label:t.get("tabName_general")},{id:"appearance",type:"Section",open:!1,label:t.get("sectionName_appearance"),position:1},{id:"layout",type:"Section",open:!0,label:t.get("sectionName_layout"),position:2},{id:"widgetPosition",type:"Section",collapsible:!1,label:t.get("propPositionLabel"),position:2},{id:"moveWidgetSplit",type:"Split",items:[{id:"left",align:"left",items:[]},{id:"right",align:"right",items:[]}]},{id:"resizeWidget",type:"Section",collapsible:!1,label:t.get("propResizeLabel"),position:3},{id:"rotate",type:"Section",collapsible:!1,label:this.isPropertiesV2Enabled?t.get("propRotateLabel"):t.get("propRotateLabel_v1"),position:4},{id:"resizeWidgetSplit",type:"Split",items:[{id:"left",align:"left",items:[]},{id:"right",align:"right",items:[]}]}),this.isPropertiesV2Enabled)?this._generatePropertiesLayoutList_V2(e):e},e.prototype._generatePropertiesLayoutList_V2=function(e){var i=[];return i.push({id:"positionAndStyle",type:"Section",open:!1,label:t.get("sectionName_positionAndStyle"),position:200}),i.push(e[5]),i[1].position=1,i.push(e[8]),i[2].position=2,i},e.prototype.getUnit=function(){return"absolute"===this._canvas.getPropertyValue("layoutPositioning")?"px":"%"},e.prototype._getMaxValueForConstraint=function(t){return"relative"===this._canvas.getPropertyValue("layoutPositioning")?100:"width"===t||"left"===t?parseFloat(this._canvas.getPropertyValue("pageSizeWidth")):parseFloat(this._canvas.getPropertyValue("pageSizeHeight"))},e.prototype._getNumericValueWithConstraint=function(t,e,i){var o=parseFloat(e);isNaN(o)&&(o=0);var n=this.content.getPropertyValue(t)||0,r=this._getMaxValueForConstraint(t);return o=Math.max(Math.min(r,o),i||0),(n=parseFloat(n))+o>r&&(o=r-n),o},e.prototype._applyMinOrMaxConstraintValue=function(t,e,i){var o=this.getUnit(),n=d[this.content.getType()]?d[this.content.getType()].min[e]:d.default.min[e];if(n&&"%"===o){var r=this.content.getContainer().getFeature("ContentViewDOM");if(r){var a=r.getNode();n=100*n/("height"===e?a.clientHeight:a.clientWidth)}else n=0}var s=this._getNumericValueWithConstraint(t,i,n);return this._getPropertyDisplayString(s,o)},e.prototype._getPropertyDisplayString=function(e,i){return null!=e?(i&&(i=i.trim()),String(Number(e.toFixed(i===t.get("pixelUnit")?0:2)))+i):""},e.prototype._onChangePercentOrPixelProperty=function(t,e,i,o){var n=this._applyMinOrMaxConstraintValue(t,e,i);this.content.setPropertyValue(e,n,o)},e.prototype._onChangeAngle=function(t,e,i){this.content.setPropertyValue(t,e,i)},e.prototype._stripPositionSuffix=function(t){return Number.parseFloat(t)},e.prototype._getNumericDecimalPlacesBasedOnLayoutPositioning=function(){return"absolute"===this._canvas.getPropertyValue("layoutPositioning")?0:2},e.prototype._getWidgetPropertyList=function(){var e=this,i=this.getLayoutModel(),n=!1,r=this._canvas.getSelectedContentList();if(r&&r.length){var a=r[0].getContainer();a&&(n="group"===a.getType())}var s=void 0,l=void 0,d=void 0,p=void 0,c=void 0,u=void 0,h=void 0,g=void 0,f=void 0;if(this.isPropertiesV2Enabled){s=9;l="positionAndStyle",d="positionAndStyle.moveWidgetSplit.left",p="positionAndStyle.moveWidgetSplit.right",c="positionAndStyle.resizeWidgetSplit.left",u="positionAndStyle.resizeWidgetSplit.right",h="positionAndStyle",g=3,f=t.get("propRotateLabel")}else s=4,l="general.appearance",d="general.layout.widgetPosition.moveWidgetSplit.left",p="general.layout.widgetPosition.moveWidgetSplit.right",c="general.layout.resizeWidget.resizeWidgetSplit.left",u="general.layout.resizeWidget.resizeWidgetSplit.right",h="general.layout.rotate",f=t.get("propRotateAngle");var b=[{getPropertyValue:function(){return i.style&&(i.style.opacity||0===i.style.opacity)?i.style.opacity:1},setPropertyValue:function(t,i){e._updateStyleValueInModel("opacity",t,i)},id:"opacity",editor:{sectionId:l,position:s,uiControl:{label:this.isPropertiesV2Enabled?t.get("propOpacity"):t.get("propOpacity_v1"),description:t.get("propOpacityDescription"),module:"../ui/UiSlider",sliderType:"percentage",connect:[!0,!1],noInputView:!0,step:1,start:[100],startLabels:[t.get("propOpacityDescription")],range:{min:0,max:100},format:{decimals:0,postfix:"%"}}}}],y={id:"left",getPropertyValue:function(){if(i.style)return i.style.left},setPropertyValue:function(t,i){e._updateStyleValueInModel("left",t,i)},editor:{sectionId:d,uiControl:{type:"InputLabel",label:t.get("propPositionXAxis_v1"),multiline:!0,handleReturnKey:!0,decimalPlaces:2,onChange:this._onChangePercentOrPixelProperty.bind(this,"width")}},onPropertyChange:{refresh:{propertiesPane:!0},resizing:!0}};this.isPropertiesV2Enabled&&(y.editor.uiControl.inputType="number",y.editor.uiControl.decimalPlaces=this._getNumericDecimalPlacesBasedOnLayoutPositioning(),y.editor.uiControl.label=t.get("propPositionXAxis",{unit:this.getUnit()}),y.getPropertyValue=function(){if(i.style)return e._stripPositionSuffix(i.style.left)},y.setPropertyValue=function(t,i){var o=e._applyMinOrMaxConstraintValue("width","left",t);e._updateStyleValueInModel("left",o,i)}),n&&delete y.editor,b.push(y);var v={id:"top",getPropertyValue:function(){if(i.style)return i.style.top},setPropertyValue:function(t,i){e._updateStyleValueInModel("top",t,i)},editor:{sectionId:p,uiControl:{type:"InputLabel",label:t.get("propPositionYAxis_v1"),multiline:!0,handleReturnKey:!0,decimalPlaces:2,onChange:this._onChangePercentOrPixelProperty.bind(this,"height")}},onPropertyChange:{refresh:{propertiesPane:!0},resizing:!0}};this.isPropertiesV2Enabled&&(v.editor.uiControl.inputType="number",v.editor.uiControl.decimalPlaces=this._getNumericDecimalPlacesBasedOnLayoutPositioning(),v.editor.uiControl.label=t.get("propPositionYAxis",{unit:this.getUnit()}),v.getPropertyValue=function(){if(i.style)return e._stripPositionSuffix(i.style.top)},v.setPropertyValue=function(t,i){var o=e._applyMinOrMaxConstraintValue("height","top",t);e._updateStyleValueInModel("top",o,i)}),n&&delete v.editor,b.push(v);var _={id:"width",getPropertyValue:function(){if(i.style)return i.style.width},setPropertyValue:function(t,i){e._updateStyleValueInModel("width",t,i)},editor:{sectionId:c,uiControl:{type:"InputLabel",label:t.get("propResizeWidth_v1"),multiline:!0,handleReturnKey:!0,decimalPlaces:2,onChange:this._onChangePercentOrPixelProperty.bind(this,"left")}},onPropertyChange:{refresh:{propertiesPane:!0},resizing:!0}};if(this.isPropertiesV2Enabled){var m=this.getUnit();_.editor.uiControl.inputType="number",_.editor.uiControl.decimalPlaces=this._getNumericDecimalPlacesBasedOnLayoutPositioning(),_.editor.uiControl.label=t.get("propResizeWidth",{unit:m}),_.getPropertyValue=function(){if(i.style)return e._stripPositionSuffix(i.style.width)},_.setPropertyValue=function(t,i){var o=e._applyMinOrMaxConstraintValue("left","width",t);e._updateStyleValueInModel("width",o,i)}}n&&delete _.editor,b.push(_);var P={id:"height",getPropertyValue:function(){if(i.style)return i.style.height},setPropertyValue:function(t,i){e._updateStyleValueInModel("height",t,i)},editor:{sectionId:u,uiControl:{type:"InputLabel",label:t.get("propResizeHeight_v1"),multiline:!0,handleReturnKey:!0,decimalPlaces:2,onChange:this._onChangePercentOrPixelProperty.bind(this,"top")}},onPropertyChange:{refresh:{propertiesPane:!0},resizing:!0}};this.isPropertiesV2Enabled&&(P.editor.uiControl.inputType="number",P.editor.uiControl.decimalPlaces=this._getNumericDecimalPlacesBasedOnLayoutPositioning(),P.editor.uiControl.label=t.get("propResizeHeight",{unit:this.getUnit()}),P.getPropertyValue=function(){if(i.style)return e._stripPositionSuffix(i.style.height)},P.setPropertyValue=function(t,i){var o=e._applyMinOrMaxConstraintValue("top","height",t);e._updateStyleValueInModel("height",o,i)}),n&&delete P.editor,b.push(P);var C=this._isCapabilityEnabled("rotation");if(b.push({id:"canRotate",getPropertyValue:function(){return C},setPropertyValue:function(){throw new Error("not supported")}}),C){var S={id:"rotateAngle",getPropertyValue:function(){var t=i.style&&i.style.transform;if(t){var e=/-?\d*\.?\d*deg/.exec(t);if(e){var n=e[0],r=n.substr(0,n.length-3);return parseFloat(r)||0}return o.getAngleFromMatrix(t)}return 0},setPropertyValue:function(t,i){var o=((t=parseFloat(t))%360+360)%360;isNaN(o)||(e._updateStyleValueInModel("-webkit-transform","rotate( "+o+"deg )",i),e._updateStyleValueInModel("transform","rotate( "+o+"deg )",i))},editor:{sectionId:h,position:g,uiControl:{type:"InputLabel",label:f,inputType:"text",handleReturnKey:!0,onChange:this._onChangeAngle.bind(this)}}};this.isPropertiesV2Enabled&&(S.editor.uiControl.inputType="number"),n&&delete S.editor,b.push(S)}return b},e.prototype._isCapabilityEnabled=function(t){var e=l.getCapabilities(this.content);return"widget.live"!==this.content.getType()&&(!e||e.getCapabilities()[t])},e.prototype._getPropertyValueFromModel=function(t){var e=this.getLayoutModel();return e&&e.get(t)},e.prototype._setPropertyValueInModel=function(t,e,i){var o={},n=this.getLayoutModel();o[t]=e,n.set(o,i)},e.prototype._updateStyleValueInModel=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e,n=this.getLayoutModel(),r=a.extend({},n.style);r[t]=o;var s={skipUndoRedo:!0,transactionToken:i};return n.getTopLayoutModel().updateModel({updateArray:[{id:n.id,style:r}]},this,s),o},e.prototype._isTopLevelPage=function(){return!this.content.getContainer()},e}()})),define("dashboard-core/js/features/content/toolbar/ToolbarAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.refresh=function(){},t}()})),define("dashboard-core/js/features/content/toolbar/Toolbar",["underscore","./ToolbarAPI","../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../dashboard/util/ContentActionUtil"],(function(t,e,i,o){return function(){function n(t){_classCallCheck(this,n),this._toolbarDock=t.features["Dashboard.ToolbarDock"],this._transaction=t.features["Dashboard.Transaction"],this._content=t.content,this.dashboard=t.features["Dashboard.API"],this.type=this.dashboard.getType(),this._isExplore="EXPLORE"===this.type.toUpperCase()}return n.prototype.initialize=function(){this._isExplore||(this._internalApi=i.createAPI(this,[e]),this._content.on("change:visualization:slots:dataitems:addMapping",this._refreshHandler,this),this._content.on("change:visualization:slots:dataitems:removeMapping",this._refreshHandler,this))},n.prototype.getAPI=function(t){if("internal"===t)return this._internalApi},n.prototype._deregisterEvents=function(){this._isExplore||(this._content.off("change:visualization:slots:dataitems:addMapping",this._refreshHandler,this),this._content.off("change:visualization:slots:dataitems:removeMapping",this._refreshHandler,this))},n.prototype.destroy=function(){this._deregisterEvents(),this._content=null},n.prototype._refreshHandler=function(t){var e=t&&t.transactionToken;return this._transaction.registerTransactionHandler(e||{},this,function(){this.refresh()}.bind(this),t)},n.prototype.refresh=function(){var e=[this._content.getId()];if(t.isEqual(e,this._toolbarDock.getOwnerIDs())){var i=o.getContentActionList(this.dashboard,this.dashboard.getFeature("ContentActions"),e);this._toolbarDock.updateODTState(i,e)}},n}()})),define("dashboard-core/js/features/dashboard/toolbarDock/ToolbarDockDOMAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.render=function(){},t.prototype.addProvider=function(){},t.prototype.removeProvider=function(){},t.prototype.getProviders=function(){},t}()})),define("dashboard-core/js/features/dashboard/toolbarDock/ToolbarDockDOM",["react","react-dom","../../../lib/@waca/dashboard-common/dist/core/APIFactory","./ToolbarDockDOMAPI","./ToolbarDockComponent"],(function(t,e,i,o,n){return function(){function r(t){var e=t.features;_classCallCheck(this,r),this._sections={},this._providers={},this._features=e}return r.prototype.initialize=function(){this._api=i.createAPI(this,[o]);var t=this._features.DashboardSettings.get("odtToolbarContainer");return this._root=document.createElement("div"),this._root.className="toolbarDockRoot",t.appendChild(this._root),this.render()},r.prototype.getAPI=function(){return this._api},r.prototype.destroy=function(){this._root&&e.unmountComponentAtNode(this._root),this._root&&this._root.parentNode&&this._root.parentNode.removeChild(this._root),delete this._api,delete this._providers,delete this._node},r.prototype.render=function(){var i=this;return new Promise((function(o){e.render(t.createElement(n,{toolbarDockDOM:i}),i._root,o)}))},r.prototype.addProvider=function(t,e){this._providers[t]=e,this.render()},r.prototype.removeProvider=function(t){delete this._providers[t],this.render()},r.prototype.getProviders=function(){return this._providers},r}()})),define("dashboard-core/js/features/dashboard/toolbarDock/ToolbarPanelDockDOM",["../../../lib/@waca/dashboard-common/dist/core/APIFactory","./ToolbarDockDOMAPI","./ToolbarDockDOM"],(function(t,e,i){return function(i){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,i.apply(this,arguments))}return _inherits(o,i),o.prototype.initialize=function(){this._api=t.createAPI(this,[e]);var i=this._features.DashboardSettings.get("panelToolbarContainer");return this._root=document.createElement("div"),this._root.className="toolbarDockRoot",i.appendChild(this._root),this.render()},o}(i)})),define("dashboard-core/js/features/dashboard/toolbarDock/toolbarSections/ToolbarSectionDOMAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.getReactElement=function(){},t.prototype.setNode=function(){},t.prototype.getNode=function(){},t.prototype.getIndex=function(){},t}()})),define("dashboard-core/js/features/dashboard/toolbarDock/toolbarSections/onDemandToolbarSection/OnDemandToolbarSectionDOM",["react","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../ToolbarSectionDOMAPI","../ToolbarSectionComponent","../../ToolbarDockAPI"],(function(t,e,i,o,n){var r=function(){function r(t){var o=t.features;_classCallCheck(this,r),this._toolbarDockDOM=o.ToolbarDockDOM,this._toolbarDock=o.ToolbarDock,this._api=e.createAPI(this,[i]),this._toolbarDockDOM.addProvider(r.PROVIDER_ID,this)}return r.prototype.getAPI=function(){return this._api},r.prototype.destroy=function(){delete this._api,delete this._node},r.prototype.setNode=function(t){this._node=t},r.prototype.getNode=function(){return this._node},r.prototype.getReactElement=function(){return t.createElement(o,{className:r.PROVIDER_ID,stateProvider:this._toolbarDock,stateEvent:n.UPDATE_DOCKED_TOOLBAR_STATE,focusEvent:n.FOCUS_DOCKED_TOOLBAR,toolbarSectionDOM:this})},r.prototype.getIndex=function(){return r.PROVIDER_INDEX},r}();return r.PROVIDER_ID="OnDemandToolbarSection",r.PROVIDER_INDEX=0,r})),define("dashboard-core/js/features/dashboard/toolbarDock/toolbarSections/canvasToolbarSection/CanvasToolbarSectionDOM",["react","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../ToolbarSectionDOMAPI","../ToolbarSectionComponent","../../ToolbarDockAPI"],(function(t,e,i,o,n){var r=function(){function r(t){var o=t.features;_classCallCheck(this,r),this._toolbarDockDOM=o.ToolbarPanelDockDOM,this._toolbarDock=o.ToolbarDock,this._api=e.createAPI(this,[i]),this._toolbarDockDOM.addProvider(r.PROVIDER_ID,this)}return r.prototype.getAPI=function(){return this._api},r.prototype.destroy=function(){delete this._api,delete this._node},r.prototype.setNode=function(t){this._node=t},r.prototype.getNode=function(){return this._node},r.prototype.getReactElement=function(){return t.createElement(o,{className:r.PROVIDER_ID,stateProvider:this._toolbarDock,stateEvent:n.UPDATE_CANVAS_TOOLBAR_STATE,toolbarSectionDOM:this})},r.prototype.getIndex=function(){return r.PROVIDER_INDEX},r}();return r.PROVIDER_ID="CanvasToolbarSection",r.PROVIDER_INDEX=1,r})),define("dashboard-core/js/features/content/topLevelProperties/TopLevelPropertiesProvider",["../../../app/nls/StringResources","../../../dashboard/layout/LayoutHelper","../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../lib/@waca/baglass/js/baglass/utils/Utils","../../../lib/@waca/dashboard-common/dist/ui/dialogs/ConfirmationDialog","../../../lib/@waca/dashboard-common/dist/api/PropertiesProviderAPI","../../../lib/@waca/dashboard-common/dist/api/CustomColorProviderAPI","underscore","../../../dashboard/widgets/PropertyListUtil","../../../utils/FeatureFlagUtil"],(function(t,e,i,o,n,r,a,s,l,d){var p={width:320,height:200},c={"16:9":{width:1280,height:720},"4:3":{width:1280,height:960},letter:{width:612,height:792},legal:{width:612,height:1008},a4:{width:595,height:842},tabloid:{width:792,height:1224},infographic:{width:512,height:1024}},u=[{label:t.get("propPageSizePresetCustom"),value:"custom"},{label:t.get("propPageSizePreset16x9"),value:"16:9"},{label:t.get("propPageSizePreset4x3"),value:"4:3"},{label:t.get("letter"),value:"letter"},{label:t.get("legal"),value:"legal"},{label:t.get("a4"),value:"a4"},{label:t.get("tabloid"),value:"tabloid"},{label:t.get("propPageSizePresetInfographic"),value:"infographic"}];return function(){function s(t){_classCallCheck(this,s),this.content=t.content,this.dashboard=t.dashboardApi||t.dashboardAPI,this._features=t.features,this._api=i.createAPI(this,[r]),t.features.Properties.registerProvider(this._api);var e=i.createAPI(this,[a]);this._features["Dashboard.CustomColor"].registerProvider(e),this._customColorProperties=new Set,d.generateChecker(this.dashboard,this)("isPropertiesV2Enabled",["dashboard","PropertiesV2","enabled"])}return s.prototype.getCustomColorList=function(){for(var t=[],e=this.getPropertyList(),i=0;i<e.length;i++){var o=e[i].id;if(this._customColorProperties.has(o)){var n=this.content.getPropertyValue(o);n&&t.push(this._features.Colors.getHexColorFromClassName(n))}}return t},s.prototype.getCanvas=function(){return this.canvas||(this.canvas=this.dashboard.getFeature("Canvas")),this.canvas||(this.canvas=this.dashboard.getCanvas()),this.canvas},s.prototype.getLayoutModel=function(){return this.content.getFeature("Models.internal").getLayoutModel()},s.prototype.getAPI=function(){return this._api},s.prototype._getCommonType=function(t){return t&&t.split(".")[0]},s.prototype._getSubType=function(t){return t&&-1!==t.indexOf(".")?t.split(".")[1]:null},s.prototype._generateBackgroundColorProperties=function(e){var i=this,o="colorsAndTheme";this.isPropertiesV2Enabled||(o="general."+o),e.push({id:"fillColor",getPropertyValue:function(){return i._getPropertyValueFromModel("fillColor")||"transparent"},setPropertyValue:this._setFillColor.bind(this),supportsUndoRedo:!0,editor:{sectionId:o+".backgroundColor",position:0,uiControl:{type:"ColorPicker",label:t.get("defaultBackgroundColorLabel"),ariaLabel:t.get("defaultBackgroundColorLabel"),paletteType:"DashboardColorSet",open:!1,showHexValue:!0,addButton:!0}}});("page"===this.content.getType()?[this.content]:this.content.getChildren()).forEach((function(n,r){var a=n.getFeature("Models.internal").getLayoutModel().get("title");a||"page"!==i.content.getType()||(a=t.get("defaultInfographicTitle"));var s="backgroundColorLink"+r;i._customColorProperties.add(s),e.push({id:s,getPropertyValue:n.getPropertyValue.bind(n,"backgroundColor"),setPropertyValue:n.setPropertyValue.bind(n,"backgroundColor"),editor:{sectionId:o+".backgroundColor",position:2,uiControl:{type:"ColorPicker",label:a,ariaLabel:a,paletteType:"DashboardColorSet",open:!1,showHexValue:!0,addButton:!0}}})}))},s.prototype.getPropertyList=function(){var t=this,e=[];return this._isTopLevelPage()&&(e.push.apply(e,this._getTopLevelLayoutPropertiesList()),this._generateBackgroundColorProperties(e)),e.forEach((function(e){e.setPropertyValue||(e.setPropertyValue=function(i){return t._setPropertyValueInModel(e.id,i)}),e.getPropertyValue||(e.getPropertyValue=function(){return t._getPropertyValueFromModel(e.id)})})),e},s.prototype.getPropertyLayoutList=function(){var t=[];return this._isTopLevelPage()&&(t=this._getTopLevelPropertiesLayoutSpec()),t},s.prototype._getTopLevelPropertiesLayoutSpec=function(){var e=[{id:"general",type:"Group",label:t.get("tabName_general")},{id:"canvas",type:"Section",label:t.get("sectionName_canvas"),position:1},{id:"pageSize",type:"Section",collapsible:!1,label:t.get("propPageSizeLabel"),position:2},{id:"colorsAndTheme",type:"Section",label:t.get(this.isPropertiesV2Enabled?"sectionName_colorsAndThemes":"sectionName_colorsAndThemes_v1"),position:3},{id:"grid",type:"Section",collapsible:!1,label:t.get("gridLabel"),position:2},{id:"backgroundColor",type:"Section",collapsible:!1,label:t.get("propDashboardBackgroundColor"),position:2},{id:"pageSizeSplit",type:"Split",items:[{id:"left",align:"left",items:[]},{id:"right",align:"right",items:[]}]}];return this.isPropertiesV2Enabled&&(e[3].position=1,e[1].position=2,e[6].position=3,e[4].position=4,e.splice(0,1),e.splice(1,1)),e},s.prototype._getTopLevelLayoutPropertiesList=function(){var e=this,i=this,n=this.getLayoutModel(),r=void 0,a=void 0,s=void 0;return this.isPropertiesV2Enabled?(a=r="canvas",s="absolute"===n.getValueFromSelfOrParent("layoutPositioning")):(a=(r="general.canvas")+".pageSize",s=!1),[{id:"layoutPositioning",getPropertyValue:function(){return n.getValueFromSelfOrParent("layoutPositioning")},setPropertyValue:this._setLayoutPositioning.bind(this),validatePropertyValue:function(t){return{isValid:-1!==["relative","absolute"].indexOf(t),message:"layoutPositioning must be either relative or absolute."}},editor:{sectionId:r,position:1,uiControl:{type:"DropDown",label:t.get("propLayoutPositioning"),getOptions:this._getLayoutPositioningSpecOptions.bind(this),coachMark:{render:function(e){o.addCoachmark({id:"com.ibm.bi.dashboard.dashboardCoreProperties.layoutPositioning",title:t.get("propLayoutPositioningCoachmarkTitle"),contents:t.get("propLayoutPositioningCoachmarkContent"),placement:"bottom",glassContext:e.glassContext,$el:e.$el})}},onChange:function(t,e){i._onChangeLayoutPosition(this,e)}}}},{id:"pageSizePreset",getPropertyValue:this._getPageSizePreset.bind(this),setPropertyValue:this._setPageSizePreset.bind(this),editor:{sectionId:a,position:1,uiControl:{type:"DropDown",label:t.get(this.isPropertiesV2Enabled?"propPageSizePreset":"propPageSizePreset_v1"),ariaLabel:t.get("propPageSizePresetAriaLabel"),options:u,onChange:this._onChangePresetPageSize.bind(this)}}},{id:"fitPage",getPropertyValue:function(){var t=!1;return"absolute"!==n.getValueFromSelfOrParent("layoutPositioning")&&(t=n.getValueFromSelfOrParent("fitPage")||!1),t},setPropertyValue:function(t){n.set({fitPage:t})},editor:{sectionId:a,position:2,uiControl:{type:"ToggleButton",label:t.get("fitPageText"),readOnly:s}}},{id:"pageSizeWidth",getPropertyValue:function(){var t=e._getPropertyValueFromModel("pageSize");return t&&t.width},setPropertyValue:function(t){e._setPageSizeDirection(t,"pageSizeWidth",!0)},editor:{sectionId:a+".pageSizeSplit.left",uiControl:{type:"InputLabel",inputType:this.isPropertiesV2Enabled?"number":"text",label:this.isPropertiesV2Enabled?t.get("propPageSizeWidth"):t.get("propPageSizeWidth_v1"),ariaLabel:t.get("propPageSizeWidthAriaLabel"),multiline:!0,handleReturnKey:!0,onChange:function(t,e){i._onChangePageSize(t,e,this)}}}},{id:"pageSizeHeight",getPropertyValue:function(){var t=e._getPropertyValueFromModel("pageSize");return t&&t.height},setPropertyValue:function(t){e._setPageSizeDirection(t,"pageSizeHeight",!0)},editor:{sectionId:a+".pageSizeSplit.right",uiControl:{type:"InputLabel",inputType:this.isPropertiesV2Enabled?"number":"text",label:this.isPropertiesV2Enabled?t.get("propPageSizeHeight"):t.get("propPageSizeHeight_v1"),ariaLabel:t.get("propPageSizeHeightAriaLabel"),multiline:!0,handleReturnKey:!0,onChange:function(t,e){i._onChangePageSize(t,e,this)}}}},{id:"showGrid",editor:{sectionId:r+".grid",position:1,uiControl:{type:"ToggleButton",label:t.get("gridText")}}},{id:"snapGrid",editor:{sectionId:r+".grid",position:2,uiControl:{type:"ToggleButton",label:t.get("snapText")}}},{id:"snapObjects",editor:{sectionId:r+".grid",position:3,uiControl:{type:"ToggleButton",label:t.get("snapObjectsText")}}}]},s.prototype._getPageSizePreset=function(){var t=this.getLayoutModel().get("pageSize"),e=t.width,i=t.height,o="custom",n=parseInt(e,10),r=parseInt(i,10);for(var a in c)if(c.hasOwnProperty(a)){var s=c[a];if(s.width===n&&s.height===r){o=a;break}}return o},s.prototype._setFillColor=function(t){var e={fillColor:this._features.Colors.getColorClassName(t)};this._features.Colors.prepareForColorModelChange(e,"fillColor"),this.getLayoutModel().set(e,{payloadData:{skipUndoRedo:!0}})},s.prototype._setPageSizePreset=function(t){var e=c[t];if(e){"absolute"!==this.getCanvas().getPropertyValue("layoutPositioning")&&this.getCanvas().setPropertyValue("fitPage","16:9"===t||"4:3"===t);var i=this.getCanvas().getPropertyValue("pageSizeWidth"),o=this.getCanvas().getPropertyValue("pageSizeHeight");i&&i===e.width&&o&&o===e.height||this._setPageSize({width:e.width,height:e.height},!0)}},s.prototype._onChangePresetPageSize=function(t,e){c[e]&&("absolute"!==this.getLayoutModel().get("layoutPositioning")&&this.dashboard.triggerDashboardEvent("properties:setValue",{propertyName:"fitPage",value:"16:9"===e||"4:3"===e}),this.getCanvas().setPropertyValue(t,e))},s.prototype._getPropertyValueFromModel=function(t){var e=this.getLayoutModel();return e&&e.get(t)},s.prototype._setPropertyValueInModel=function(t,e,i){var o={},n=this.getLayoutModel();o[t]=e,n.set(o,i)},s.prototype._isTopLevelPage=function(){return!this.content.getContainer()},s.prototype._onChangeLayoutPosition=function(e,i){var o=this,r=this._features.Transaction.startTransaction();if(r.undoRedoTransactionId||(r.undoRedoTransactionId=r.transactionId),this.getCanvas().getPropertyValue("layoutPositioning")){if("absolute"===i)this.dashboard.triggerDashboardEvent("properties:updateEnabled",{propertyName:"fitPage",enabled:!1}),this.dashboard.triggerDashboardEvent("properties:setValue",{propertyName:"fitPage",value:!1}),this.dashboard.triggerDashboardEvent("properties:updateEnabled",{propertyName:"defaultZoom",enabled:!0});else{this.dashboard.triggerDashboardEvent("properties:updateEnabled",{propertyName:"fitPage",enabled:!0}),this.dashboard.triggerDashboardEvent("properties:updateEnabled",{propertyName:"defaultZoom",enabled:!1});var a=this._getPageSizePreset();"16:9"===a||"4:3"===a?this.dashboard.triggerDashboardEvent("properties:setValue",{propertyName:"fitPage",value:!0}):this.dashboard.triggerDashboardEvent("properties:setValue",{propertyName:"fitPage",value:!1})}this.getCanvas().setPropertyValue("layoutPositioning",i,r),this._features.Transaction.endTransaction(r)}else{new n({title:t.get("confirmLayoutStyleUpgradeTitle"),message:t.get("confirmLayoutStyleUpgrade"),confirmCallback:function(){o.getCanvas().setPropertyValue("layoutPositioning",i,r),o._features.Transaction.endTransaction(r),o.dashboard.triggerDashboardEvent("properties:refreshPane")},cancelCallback:function(){e._lastChangedValue="undefined",e.setValue("undefined")}}).render()}},s.prototype._setLayoutPositioning=function(t,e){var i=this._features.Transaction.startTransaction(e);i.undoRedoTransactionId||(i.undoRedoTransactionId=i.transactionId);var o=this.getLayoutModel();if(o.set({layoutPositioning:t},{payloadData:i,sender:this.senderId}),"absolute"===t)this.isPropertiesV2Enabled?(this.dashboard.getFeature("InternalProperties").updatePropertySpec("fitPage","readOnly",!0),this.content.setPropertyValue("fitPage",!1)):o.set({fitPage:!1},{payloadData:i,sender:this.senderId});else{this.isPropertiesV2Enabled&&this.dashboard.getFeature("InternalProperties").updatePropertySpec("fitPage","readOnly",!1);var n=this._getPageSizePreset();"16:9"===n||"4:3"===n?this.isPropertiesV2Enabled?this.content.setPropertyValue("fitPage",!0):o.set({fitPage:!0},{payloadData:i,sender:this.senderId}):this.isPropertiesV2Enabled?this.content.setPropertyValue("fitPage",!1):o.set({fitPage:!1},{payloadData:i,sender:this.senderId})}this._features.Transaction.endTransaction(i),this.dashboard.triggerDashboardEvent("layout:resize")},s.prototype._getLayoutPositioningSpecOptions=function(){var e=[];return this.getCanvas().getPropertyValue("layoutPositioning")||e.push({label:"",value:"undefined"}),e.push({label:t.get("propLayoutRelative"),value:"relative"},{label:t.get("propLayoutAbsolute"),value:"absolute"}),e},s.prototype._onChangePageSize=function(e,i,o){if(o.propertiesManagerChange)o.onChangeValueHold=i;else{this.getCanvas().setPropertyValue(e,i);var n=parseInt(this.getCanvas().getPropertyValue(e),10),r=["pageSizeSplit",e];isNaN(n)?this.dashboard.triggerDashboardEvent("properties:setValue",{propertyName:r,value:o.onChangeValueHold}):i!==o.onChangeValueHold&&(o.onChangeValueHold=l.getPropertyDisplayString(n,t.get("pixelUnit"),!0),this.dashboard.triggerDashboardEvent("properties:setValue",{propertyName:r,value:o.onChangeValueHold}))}},s.prototype._showPageSizeChangeToast=function(){this.dashboard.showToast(t.get("propPageSizeAdjustedMessage"),{type:"info"})},s.prototype._setPageSizeDirection=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=parseInt(t,10);if(!isNaN(o)){var n=this.getLayoutModel(),r="pageSizeWidth"===e?"width":"height",a="pageSizeWidth"===e?"height":"width",s=n.get("pageSize")||{};if(s[r]===o)return;var l={};l[r]=o,l[a]=s[a],this._setPageSize(l,i);var d="width"===r?"change:pageSizeWidth":"change:pageSizeHeight";n.trigger(d,{value:l[r],model:n,eventName:d})}},s.prototype._setPageSize=function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.getLayoutModel(),n=!1,r=e.getBoundingPageSize(o,p);return r&&((isNaN(t.width)||r.width>t.width)&&(t.width=r.width,n=!0),(isNaN(t.height)||r.height>t.height)&&(t.height=r.height,n=!0),n&&i&&this._showPageSizeChangeToast()),o.set({pageSize:t}),this.isPropertiesV2Enabled&&this.dashboard.getFeature("InternalProperties").refresh(),this.dashboard.triggerDashboardEvent("layout:resize"),t},s}()})),define("dashboard-core/js/features/content/widgetTitleTruncate/WidgetTitleTruncateAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.getExtensionHooks=function(){},t.prototype.setUpdateModelContent=function(){},t.prototype.getState=function(){},t.prototype.setTitleHighlighter=function(){},t.prototype.highlightTitle=function(){},t}()})),define("dashboard-core/js/features/content/widgetTitleTruncate/impl/WidgetTitleTruncate",["../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../WidgetTitleTruncateAPI","../../../../dashboard/util/StaticTextHelper"],(function(t,e,i){"use strict";var o={truncateTitle:!1};return function(){function n(t){_classCallCheck(this,n),this._content=t.content,this._internal=t.features&&t.features["Dashboard.internal"],this._dashboard=t.dashboardAPI,this._getProperty=this._getModelProp.bind(this),this._state={initialWidgetRenderDone:!1,truncateOn:!1}}return n.prototype.getExtensionHooks=function(){return{onInit:this._handleTitleTruncation.bind(this),onSetText:this._onSetText.bind(this),onEditStart:this._onEditStart.bind(this),onEditUpdate:this._onEditUpdate.bind(this),onEditEnd:this._onEditEnd.bind(this),isTextWrapOn:this._isTextWrapOn.bind(this),onTextWrapChanged:this._onTextWrapChanged.bind(this)}},n.prototype.setUpdateModelContent=function(t){this._updateModelContent=t},n.prototype.setTitleHighlighter=function(t){this._highlightTitle=t},n.prototype.highlightTitle=function(){this._highlightTitle&&this._highlightTitle()},n.prototype.getState=function(){return{truncateTitleOn:this._content.getPropertyValue("truncateTitle"),truncateTemporarilyOff:this._truncateTemporarilyOff}},n.prototype.getAPI=function(){return t.createAPI(this,[e])},n.prototype._showTitle=function(){return"noTitle"!==this._getProperty("titleMode")},n.prototype._isTextWrapOn=function(){return!0!==this._getProperty("truncateTitle")},n.prototype._onTextWrapChanged=function(t){this._setProperty("truncateTitle",!t)},n.prototype._handleTitleTruncation=function(t){var e=this;if(this._content){this._onWidgetRenderDone();var i=this._showTitle(),o=this._getProperty("truncateTitle");i&&o&&this._setTruncate(t,!0,!0),this._content.on("change:property:truncateTitle",(function(i){var o=e._showTitle();!0===i.info.value?o&&!e._isTruncateStateSet()&&e._setTruncate(t,!0):o&&e._isTruncateStateSet()&&e._setTruncate(t,!1)}))}},n.prototype._onWidgetRenderDone=function(){var t=this,e=this._content.getFeature("state");return this._state.initialWidgetRenderDone?Promise.resolve(!0):e.whenStatusChanges("rendered").then((function(){t._getProperty=t._getContentProperty.bind(t),t._state.initialWidgetRenderDone=!0}))},n.prototype._getContentProperty=function(t){return this._content.getPropertyValue(t)},n.prototype._getModelProp=function(t){var e=this._internal.getBoardModel(),i=this._content.getId(),n=e.getWidgetModel(i).get(t);return void 0!==n?n:o[t]},n.prototype._setProperty=function(t,e){var i=this;this._state.initialWidgetRenderDone?this._content.setPropertyValue(t,e):this._content.getFeature("state").whenStatusChanges("rendered").then((function(){i._content.setPropertyValue(t,e)}))},n.prototype._isTruncateStateSet=function(){return this._state.truncateOn},n.prototype._setTruncateState=function(t){this._state.truncateOn=t},n.prototype._setTruncate=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e?(this._setTruncateState(!0),t.setTruncateOn(),i&&this._setProperty("truncateTitle",!0)):!1===e&&(this._setTruncateState(!1),t.setTruncateOff(),this._updateModelContent&&this._updateModelContent({}))},n.prototype._onSetText=function(t){if(this._content){var e=this._showTitle(),i=this._getProperty("truncateTitle");e&&i&&this._setTruncate(t,!0,!0)}},n.prototype._onEditStart=function(t){this._disableTruncateOnManualEditStart(t)},n.prototype._onEditUpdate=function(t,e,o,n){t!==o&&this._disableSmartTitleOnManualEdit(n);var r=o+"</span>",a=e.replace("</i>","");-1===(a=(a=a.replace("</u>","")).replace("</b>","")).indexOf(r)&&this._disableSmartTitleOnManualEdit(n);var s=this._dashboard.getFeature("Colors");new i({Colors:s}).titleContainsSize(e)&&this._disableResponsiveTitleOnManualSize(n)},n.prototype._onEditEnd=function(t){this._restoreTruncateAfterManualEdit(t)},n.prototype._disableTruncateOnManualEditStart=function(t){if(this._content&&!this._truncateTemporarilyOff){var e=this._showTitle(),i=this._content.getPropertyValue("truncateTitle");e&&i&&(this._setTruncate(t,!1),this._truncateTemporarilyOff=!0)}},n.prototype._disableSmartTitleOnManualEdit=function(t){if(this._content){var e=this._content.getPropertyValue("titleMode");e&&"smartTitle"===e&&this._content.setPropertyValue("titleMode","customTitle",{undoRedoTransactionId:t})}},n.prototype._disableResponsiveTitleOnManualSize=function(t){this._content&&(this._content.getPropertyValue("responsiveTitle")&&this._content.setPropertyValue("responsiveTitle",!1,{transactionId:t}))},n.prototype._restoreTruncateAfterManualEdit=function(t){if(this._content&&this._truncateTemporarilyOff){var e=this._showTitle(),i=this._content.getPropertyValue("truncateTitle");e&&i&&(this._setTruncate(t,!0),this._truncateTemporarilyOff=!1)}},n}()})),define("dashboard-core/js/features/content/alignProperties/AlignPropertiesProvider",["underscore","../../../lib/@waca/dashboard-common/dist/api/PropertiesProviderAPI","../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../app/nls/StringResources"],(function(t,e,i,o){return function(){function n(t){_classCallCheck(this,n),this._features=t.features,this.content=t.content,this.dashboardApi=t.dashboardAPI,this._api=i.createAPI(this,[e]),this.content.getFeature("Properties").registerProvider(this.getAPI());var o=this.dashboardApi&&this.dashboardApi.getGlassCoreSvc(".FeatureChecker");this.isPropertiesV2Enabled=o&&o.checkValue("dashboard","PropertiesV2","enabled")}return n.prototype.getAPI=function(){return this._api},n.prototype.destroy=function(){this.dashboardApi=null},n.prototype.getPropertyLayoutList=function(){var t=void 0;return this.isPropertiesV2Enabled?[{id:t="positionAndStyle",type:"Section",label:o.get("sectionName_positionAndStyle"),position:1}].concat(this.getPropertyLayoutControlList("positionAndStyle")):(t="layout",[{id:"general",type:"Group",label:o.get("tabName_general")},{id:t,type:"Section",label:o.get("sectionName_layout"),position:2}].concat(this.getPropertyLayoutControlList("general.layout")))},n.prototype.getPropertyList=function(){return[]},n.prototype.reset=function(){},n.prototype.getPropertyLayoutControlList=function(e){var i=this._features["Dashboard.Icons"],n=this.dashboardApi.getCanvas().getSelectedContentList(),r=n.length<=2,a=this.dashboardApi.getFeature("alignAction"),s={id:"alignWidget",editor:{sectionId:e,readOnly:n.length<=1,uiControl:{type:"IconPicker",label:o.get("toolbarActionAlign"),items:[{name:"left",label:o.get("alignWidgetLeft"),value:i.getIcon("align-left").id},{name:"center",label:o.get("alignWidgetCenter"),value:i.getIcon("align-horizontally").id},{name:"right",label:o.get("alignWidgetRight"),value:i.getIcon("align-right").id},{name:"top",label:o.get("alignWidgetTop"),value:i.getIcon("align-top").id},{name:"middle",label:o.get("alignWidgetMiddle"),value:i.getIcon("align-vertically").id},{name:"bottom",label:o.get("alignWidgetBottom"),value:i.getIcon("align-bottom").id},{name:"horizDistrib",label:o.get("distributeWidgetsHoriz"),value:i.getIcon("distribute-horizontal").id,disabled:r},{name:"vertDistrib",label:o.get("distributeWidgetsVertical"),value:i.getIcon("distribute-vertical").id,disabled:r}]}}};return this.isPropertiesV2Enabled?(s.editor.position=4,s.editor.uiControl.onChange=function(t){a.applyAction(t.map((function(t){return _extends({},t,{layoutIds:n.map((function(t){return t.getId()}))})})))}):(s.editor.position=1,s.editor.uiControl.onChange=function(e,i){a.applyAction(t.map(i,(function(e){return t.extend(e,{layoutIds:t.map(n,(function(t){return t.getId()}))})})))}),[s]},n}()})),define("dashboard-core/js/features/content/util/IconList",["../../../app/nls/StringResources"],(function(t){return{getTabIcons:function(e,i){return[{name:"transparent",label:t.get("no_icon"),type:"ColorCode",value:i?"none":"transparent"},{name:"bullhorn",label:t.get("announcement"),type:"svg",value:e.getIcon("bullhorn").id},{name:"api",label:t.get("api"),type:"svg",value:e.getIcon("api").id},{name:"archive",label:t.get("archive"),type:"svg",value:e.getIcon("archive").id},{name:"microphone",label:t.get("asset"),type:"svg",value:e.getIcon("microphone").id},{name:"attachment",label:t.get("attachment"),type:"svg",value:e.getIcon("attachment").id},{name:"audio",label:t.get("audio"),type:"svg",value:e.getIcon("audio").id},{name:"bee",label:t.get("bee"),type:"svg",value:e.getIcon("bee").id},{name:"blog",label:t.get("blog"),type:"svg",value:e.getIcon("blog").id},{name:"bookmark",label:t.get("bookmark"),type:"svg",value:e.getIcon("bookmark").id},{name:"calendar",label:t.get("calendar"),type:"svg",value:e.getIcon("calendar").id},{name:"camera",label:t.get("camera"),type:"svg",value:e.getIcon("camera").id},{name:"capability",label:t.get("capability"),type:"svg",value:e.getIcon("capability").id},{name:"catalog",label:t.get("catalog"),type:"svg",value:e.getIcon("catalog").id},{name:"message",label:t.get("chat_message"),type:"svg",value:e.getIcon("message").id},{name:"checkout",label:t.get("checkout_cart"),type:"svg",value:e.getIcon("checkout").id},{name:"client",label:t.get("client"),type:"svg",value:e.getIcon("client").id},{name:"clock",label:t.get("clock"),type:"svg",value:e.getIcon("clock").id},{name:"cloud",label:t.get("cloud"),type:"svg",value:e.getIcon("cloud").id},{name:"code",label:t.get("code"),type:"svg",value:e.getIcon("code").id},{name:"data-quality",label:t.get("data_quality"),type:"svg",value:e.getIcon("data-quality").id},{name:"folder",label:t.get("folder"),type:"svg",value:e.getIcon("folder").id},{name:"forum",label:t.get("forum"),type:"svg",value:e.getIcon("forum").id},{name:"glasses",label:t.get("glasses"),type:"svg",value:e.getIcon("glasses").id},{name:"group",label:t.get("group"),type:"svg",value:e.getIcon("group").id},{name:"hat",label:t.get("hat"),type:"svg",value:e.getIcon("hat").id},{name:"headphones",label:t.get("headphone"),type:"svg",value:e.getIcon("headphones").id},{name:"hills",label:t.get("hills"),type:"svg",value:e.getIcon("hills").id},{name:"home",label:t.get("home"),type:"svg",value:e.getIcon("home").id},{name:"idea",label:t.get("idea"),type:"svg",value:e.getIcon("idea").id},{name:"image",label:t.get("image"),type:"svg",value:e.getIcon("image").id},{name:"inventory",label:t.get("inventory"),type:"svg",value:e.getIcon("inventory").id},{name:"like",label:t.get("like"),type:"svg",value:e.getIcon("like").id},{name:"link",label:t.get("link"),type:"svg",value:e.getIcon("link").id},{name:"location",label:t.get("location"),type:"svg",value:e.getIcon("location").id},{name:"pen",label:t.get("pen"),type:"svg",value:e.getIcon("pen").id},{name:"mobile",label:t.get("mobile_phone"),type:"svg",value:e.getIcon("mobile").id},{name:"music",label:t.get("music"),type:"svg",value:e.getIcon("music").id},{name:"notifications",label:t.get("notifications"),type:"svg",value:e.getIcon("notifications").id},{name:"paint",label:t.get("paint"),type:"svg",value:e.getIcon("paint").id},{name:"payment",label:t.get("payment"),type:"svg",value:e.getIcon("payment").id},{name:"password-key",label:t.get("password_key"),type:"svg",value:e.getIcon("password-key").id},{name:"people",label:t.get("people"),type:"svg",value:e.getIcon("people").id},{name:"person",label:t.get("person"),type:"svg",value:e.getIcon("person").id},{name:"phone",label:t.get("phone"),type:"svg",value:e.getIcon("phone").id},{name:"pin",label:t.get("pin"),type:"svg",value:e.getIcon("pin").id},{name:"print",label:t.get("print"),type:"svg",value:e.getIcon("print").id},{name:"recording",label:t.get("recording"),type:"svg",value:e.getIcon("recording").id},{name:"repository",label:t.get("repository"),type:"svg",value:e.getIcon("repository").id},{name:"role",label:t.get("role"),type:"svg",value:e.getIcon("role").id},{name:"search",label:t.get("search"),type:"svg",value:e.getIcon("search").id},{name:"settings",label:t.get("settings"),type:"svg",value:e.getIcon("settings").id},{name:"speaker",label:t.get("speaker"),type:"svg",value:e.getIcon("speaker").id},{name:"star",label:t.get("star"),type:"svg",value:e.getIcon("star").id},{name:"tag",label:t.get("tag"),type:"svg",value:e.getIcon("tag").id},{name:"thumbs-up",label:t.get("thumbs_up"),type:"svg",value:e.getIcon("thumbs-up").id},{name:"thumbs-down",label:t.get("thumbs_down"),type:"svg",value:e.getIcon("thumbs-down").id},{name:"tools",label:t.get("tools"),type:"svg",value:e.getIcon("tools").id},{name:"traffic",label:t.get("traffic"),type:"svg",value:e.getIcon("traffic").id},{name:"trash",label:t.get("trash"),type:"svg",value:e.getIcon("trash").id},{name:"twitter",label:t.get("twitter"),type:"svg",value:e.getIcon("twitter").id},{name:"unknown",label:t.get("unknown"),type:"svg",value:e.getIcon("unknown").id},{name:"user",label:t.get("user"),type:"svg",value:e.getIcon("user").id},{name:"venn-diagram",label:t.get("venn_diagram"),type:"svg",value:e.getIcon("venn-diagram").id},{name:"video",label:t.get("video"),type:"svg",value:e.getIcon("video").id},{name:"view",label:t.get("view"),type:"svg",value:e.getIcon("view").id},{name:"warning",label:t.get("warning"),type:"svg",value:e.getIcon("warning").id},{name:"watch",label:t.get("watch"),type:"svg",value:e.getIcon("watch").id},{name:"watson",label:t.get("watson"),type:"svg",value:e.getIcon("watson").id},{name:"wikis",label:t.get("wikis"),type:"svg",value:e.getIcon("wikis").id},{name:"workspace",label:t.get("workspace"),type:"svg",value:e.getIcon("workspace").id},{name:"world",label:t.get("world"),type:"svg",value:e.getIcon("world").id}]}}})),define("dashboard-core/js/features/content/pageProperties/PagePropertiesProvider",["../../../app/nls/StringResources","../../../lib/@waca/dashboard-common/dist/core/APIFactory","../../../lib/@waca/dashboard-common/dist/api/PropertiesProviderAPI","../util/IconList","underscore","../../../utils/FeatureFlagUtil"],(function(t,e,i,o,n,r){return function(){function a(t){_classCallCheck(this,a),this.dashboard=t.dashboardAPI,this._features=t.features,this.content=t.content,this._api=e.createAPI(this,[i]),t.features.Properties.registerProvider(this._api),r.generateChecker(this.dashboard,this)("_isPropertiesV2Enabled",["dashboard","PropertiesV2","enabled"])}return a.prototype.getAPI=function(){return this._api},a.prototype._isTopLevelPage=function(){return!this.content.getContainer()},a.prototype._getSectionId=function(t){return this._isPropertiesV2Enabled?t.replace("page.",""):t},a.prototype._generateBackgroundColorProperties=function(t){t.push({id:"backgroundColor",editor:{hidden:!0}})},a.prototype.getPropertyList=function(){var e=this,i=[];if(this._generateBackgroundColorProperties(i),this._isTopLevelPage())return i;var r=function(){var t=e._features.Transaction,i=t.startTransaction();e.content.setPropertyValue("tabTextColor","transparent",i),e.content.setPropertyValue("tabSelectedLineColor","transparent",i),e.content.setPropertyValue("tabBackgroundColor","transparent",i),e.content.setPropertyValue("tabIconColor","transparent",i),t.endTransaction(i),e._isPropertiesV2Enabled||e.dashboard.triggerDashboardEvent("properties:refreshChild",{content:e.content,focusSelector:".clickCallback_left_0_tabRestoreDefaults"})},a=this.dashboard.getDashboardCoreSvc("TranslationService"),s=this._getSectionId("page.titleSection"),l=this._getSectionId("page.tabIconArea"),d=this._getSectionId("page.titleBackground"),p=this._features["Dashboard.Icons"],c=void 0;return c=this._isPropertiesV2Enabled?{id:"tabRestoreDefaults",editor:{sectionId:d,uiControl:{type:"SingleLineLinks",justifyContent:"flex-end",alignItems:"center",items:[{align:"left",items:[{type:"text",class:"iconTextLink",grow:!1,value:t.get("propTabRestoreDefaults"),ariaLabel:t.get("propTabRestoreDefaults"),clickCallback:r}]},{align:"right",items:[{type:"icon",class:"iconTextLink",svgIcon:p.getIcon("restore").id,iconTooltip:t.get("propTabRestoreDefaults"),clickCallback:r,tooltipPosition:"left"}]}]}}}:{id:"tabRestoreDefaults",editor:{sectionId:d,uiControl:{type:"SingleLineLinks",items:[{align:"left",items:[{type:"icon",class:"iconTextLink",svgIcon:p.getIcon("restore").id,iconTooltip:t.get("propTabRestoreDefaults"),clickCallback:r}]},{align:"right",items:[{type:"text",class:"iconTextLink",value:t.get("propTabRestoreDefaults"),ariaLabel:t.get("propTabRestoreDefaults"),clickCallback:r}]}]}}},i.push({id:"title",getPropertyValue:function(){return e.getLayoutModel().get("title")},setPropertyValue:function(t){var i=e.getLayoutModel();i&&i.set({title:t},{payloadData:{skipUndoRedo:!0}})},editor:{sectionId:s,uiControl:{type:"InputLabel",label:t.get("propTabTitle"),ariaLabel:t.get("propTabTitle"),handleReturnKey:!0,needsTranslationIcon:function(){if(!a.isInTranslationMode())return!1;var t=e.getLayoutModel();return!!t&&t.getMultilingualAttribute("title").multilingualProperty.needsTranslation()},appendTranslationIcon:a.appendTranslationIcon.bind(a)}}},this._generateColorPickerSpec("tabTextColor",s,"propTabTextColor"),{id:"tabIcon",getPropertyValue:function(){var t=e.getLayoutModel().get("tabIcon");return t&&"transparent"!==t?p.getIcon(t).id:"transparent"},setPropertyValue:function(t){var i=e.getLayoutModel();if(i){var r=o.getTabIcons(p,e._isPropertiesV2Enabled);"string"==typeof t&&(t=(t=n.find(r,(function(e){return e.value===t})))||r[0]),i.set({tabIcon:t.name},{payloadData:{skipUndoRedo:!0}})}},editor:{sectionId:l,uiControl:{type:"CollapsiblePicker",label:t.get("propTabIcon"),ariaLabel:t.get("propTabIcon"),selectedName:this.getLayoutModel().get("tabIcon"),placeholder:{name:"transparent",label:t.get("no_icon"),type:"string",value:"transparent"},contentSize:"small",items:o.getTabIcons(p,this._isPropertiesV2Enabled)}}},this._generateColorPickerSpec("tabIconColor",l,"propTabIconColor"),this._generateColorPickerSpec("tabSelectedLineColor",d,"propTabSelectedBarColor"),this._generateColorPickerSpec("tabBackgroundColor",d,"propTabBackgroundColor"),c),i},a.prototype.getPropertyLayoutList=function(){if(this._isTopLevelPage())return[];var e=[{value:t.get("individualTabProperties"),centerLabel:!0,id:"banner",type:"Banner",backButton:!0,ariaLabel:t.get("individualTabProperties")},{id:"titleSection",type:"Section",collapsible:!1,label:t.get("sectionName_tabTitle")},{id:"titleBackground",type:"Section",collapsible:!1,label:t.get("sectionName_tabBackground")},{id:"tabIconArea",type:"Section",collapsible:!1,label:t.get("propTabIconLabel")}];return this._isPropertiesV2Enabled||e.splice(1,0,{id:"page",type:"Group"}),e},a.prototype.reset=function(){},a.prototype.getLayoutModel=function(){return this._features.internal.getBoardModel().layout.findModel(this.content.getId())},a.prototype._getPropertyValue=function(t){return this.getLayoutModel().get(t)},a.prototype._changeTabColor=function(t,e){var i={};i[t]=e&&"transparent"!==e?this._features.Colors.getColorClassName(e):null,this._features.Colors.prepareForColorModelChange(i,t),this.getLayoutModel().set(i,{sender:this.senderId,payloadData:{skipUndoRedo:!0}})},a.prototype._generateColorPickerSpec=function(e,i,o){var n=this;return this._isPropertiesV2Enabled?{id:e,getPropertyValue:function(){return n._getPropertyValue(e)||"transparent"},setPropertyValue:function(t){return n._changeTabColor(e,t)},editor:{sectionId:i,uiControl:{type:"ColorPicker",label:t.get(o),paletteTitle:t.get("themeLabel"),paletteType:"DashboardColorSet",showHexValue:!0,addButton:!0}}}:{id:e,getPropertyValue:function(){return n._getPropertyValue(e)},setPropertyValue:function(t,i){n._changeTabColor(e,t,i)},editor:{sectionId:i,uiControl:{type:"ColorPicker",label:t.get(o),ariaLabel:t.get(o),paletteType:"DashboardColorSet",open:!1,addButton:!0,showHexValue:!0,onChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.content.setPropertyValue(t,e.name)}}}}},a}()})),define("text!dashboard-core/js/dashboard/views/templates/FilterPDFContainer.html",[],(function(){return'\n<div class="pdfFilterList" style="height:{{!it.height}}pt;">\n\t<div class="filterPDFTitle"><b>{{!it.filterTitle}}</b></div>\n\t{{~it.widgets :widget:index}}\n\t\t\t<div class="widgetText"><b>{{!it.widgetText}} {{!index+1}}</b></div>\n\t\t\t<div class="filterPDFRow">\n\t\t\t{{~widget.filters :filter}}\n\t\t\t\t<div class="filterText">{{!filter.title}} {{!filter.description}}</div>\n\t\t\t{{~}}\n\t\t</div>\n\t{{~}}\n</div>\n'})),define("dashboard-core/js/features/dashboard/print/api/PrintAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.print=function(){},t.prototype.registerContent=function(){},t}()})),define("dashboard-core/js/features/dashboard/print/api/impl/Print",["doT","jquery","../../../../../app/nls/StringResources","../../../../../lib/@waca/core-client/js/core-client/utils/BrowserUtils","../../../../../lib/@waca/core-client/js/core-client/utils/ClassFactory","text!../../../../../dashboard/views/templates/FilterPDFContainer.html","../../../../../lib/@waca/dashboard-common/dist/ui/interaction/Utils","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../PrintAPI"],(function(t,e,i,o,n,r,a,s,l){return function(){function d(t){_classCallCheck(this,d),this._dashboard=t.features.API,this.pdfSizes={Chrome:{Letter:{height:520,width:710},Legal:{height:520,width:930},A4:{height:500,width:770},Tabloid:{height:700,width:1150}},Firefox:{Letter:{height:510,width:670},Legal:{height:510,width:880},A4:{height:470,width:720},Tabloid:{height:660,width:1100}},IE:{Letter:{height:480,width:660},Legal:{height:480,width:810},A4:{height:460,width:680},Tabloid:{height:620,width:980}},Other:{Letter:{height:450,width:620},Legal:{height:450,width:820},A4:{height:440,width:670},Tabloid:{height:620,width:1030}}},this.orientation="portrait",this.pageSize="letter",this.GeneratePDFView={},this.toast={},this.layoutController={},this.tabsHidden=!1,this.contents={}}return d.prototype.getAPI=function(){return s.createAPI(this,[l])},d.prototype.registerContent=function(t,e){this.contents[t]=e},d.prototype.isItemVisible=function(){return!0},d.prototype.print=function(t,e,i){var o=this._getPageSize(i.pageSize),n=requirejs.s.contexts._.config.waitSeconds;this.context=e;var r=this._dashboard.getCanvas().getContent(t).getType();this.subAPI=this.contents[r],requirejs.config({waitSeconds:900});var a=this._dashboard.getCurrentContentView().boardController.layoutController;this.tabsHidden=a.boardModel.layout.get("hideTab");var s=e.glassContext.appController.currentAppView.getCurrentContentView().$el;return this._renderDashboard(a,s,o,i.printFilters).finally((function(){requirejs.config({waitSeconds:n})}))},d.prototype._getPageSize=function(t){var e={};if(e=o.isFirefox()?{height:this.pdfSizes.Firefox[t.pageSize].height,width:this.pdfSizes.Firefox[t.pageSize].width}:o.isChrome()?{height:this.pdfSizes.Chrome[t.pageSize].height,width:this.pdfSizes.Chrome[t.pageSize].width}:o.isIE()?{height:this.pdfSizes.IE[t.pageSize].height,width:this.pdfSizes.IE[t.pageSize].width}:{height:this.pdfSizes.Other[t.pageSize].height,width:this.pdfSizes.Other[t.pageSize].width},this.orientation=t.orientation,this.pageSize=t.pageSize,this.orientation=this.orientation.toLowerCase(),this.pageSize=this.pageSize.toLowerCase(),"portrait"===this.orientation){var i=e.height,n=e.width;e.width=i,e.height=n}return o.isSafari()&&(e.width=e.width+50),e},d.prototype._renderDashboard=function(t,o,n,r){var a=this,s=t.boardModel.layout,l=s.items,d=l.map((function(t){return t.id})),p={modelIds:d,layoutType:s.type,pageElement:o[0],context:this.context,printPageSize:n};return this._showToast().then((function(){return a.subAPI.showContentsForPrint(p),a.tabRenderer(l,t)})).then((function(){var e=[];return Array.from(o[0].querySelectorAll(".widget")).forEach((function(t){var i=t.getAttribute("id");i&&e.push(i)})),a.whenWidgetsRendered(e,t)})).then((function(){var i=[];return e.each(e(o).find(".widget"),function(t,o){e(o).has(".TiledMapBundleRenderer").length>0&&i.push(e(o).attr("id"))}.bind(a)),a.renderMapsForPrint(t,i)})).delay(this._getDelay(o)).then((function(){var i=[];l.forEach((function(t){i.push(t.title)}));var s=[];if(o.find(".pageTabContent").length?e.each(o.find(".pageTabContent"),function(t,e){s.push(this._getDashboardSizes(e))}.bind(a)):o.find(".pagecontainer").length?e.each(o.find(".pagecontainer"),function(t,e){s.push(this._getDashboardSizes(e))}.bind(a)):o.find(".pageabsolute").length&&e.each(o.find(".pageabsolute"),function(t,e){s.push(this._getDashboardSizes(e))}.bind(a)),r){var d=a.getFilters(t,l);a.scaleDashboard(s,i,n,d)}else a.scaleDashboard(s,i,n);return a.toast.remove(0)})).delay(1e3).then((function(){a.isCancelled||window.print()})).catch((function(){a.isCancelled||(a.isCancelled=!0,t.glassContext.appController.showToast(i.get("errorPDF"),{type:"error",preventDuplicates:!0}))})).finally((function(){return a.subAPI.hideContentsAfterPrint(d,o[0]).then((function(){a._removeAllPdfStyles(),a.isCancelled=!1,a.toast&&a.toast.remove(0)}))}))},d.prototype._getDashboardSizes=function(t){var i=this.findPageSize(t),o=this.subAPI.getOffScreenPageSize(t),n=o&&this._dashboard.getCanvas().findContent().length>0?o:i,r=t.id.indexOf(e(t).children().first().attr("id"))?e(t).children().first().next().attr("id"):e(t).children().first().attr("id");return{size:n,id:e(t).attr("id"),childId:r,absolute:this._checkIfPageAbsolute(t)}},d.prototype._getDelay=function(t){var i=2e3;return o.isIE()&&(i=7e3),e(t).find(".TiledMapBundleRenderer").length>0&&(i=1e4),i},d.prototype._showToast=function(){var t=this;return n.loadModule("dashboard-core/js/lib/@waca/core-client/js/core-client/ui/ProgressToast").then((function(e){t.toast=new e({noHideBtn:!0}),t.toast.show(i.get("buildingPDF")),t.toast.indefinite(i.get("buildingPDF")),t.toast.onCancel((function(){t.isCancelled=!0}))}))},d.prototype.getFilters=function(t,i){var o=t.boardModel.widgetInstances,n=[];return e.each(i,function(i,r){var a=[];e.each(o,function(e,i){if("live"===i.type){var o=[];o.push(r.id);var n=r.listWidgets(o);if(this._checkIfWidgetInModel(n,i)){var s=t.getLayoutView(i.id),l=s.widgetAPI.getWidgetLocalFilters();(l=(l=l.concat(s.widgetAPI.getWidgetGlobalFilters())).concat(s.widgetAPI.getWidgetTopBottom())).length>0&&a.push({id:i.id,filters:l})}}}.bind(this)),n.push({id:r.id,widgets:a})}.bind(this)),n},d.prototype._checkIfWidgetInModel=function(t,i){var o=!1;return e.each(t,function(t,e){e===i.id&&(o=!0)}.bind(this)),o},d.prototype.createFilterContainer=function(e,o){return t.template(r)({widgets:e.widgets,widgetText:i.get("pdfWidget"),filterTitle:i.get("filtersPresentPDF"),height:o.height})},d.prototype.numberWidgets=function(t,i){e.each(i,(function(i,o){var n=i+1;e("#"+t.id).find("#"+o.id).append('<div class="widgetPDFNumber">'+n+"</div>")}))},d.prototype.renderMapsForPrint=function(t,e){return Promise.map(e,function(e){return this.isCancelled?Promise.reject():t.widgetLoader.getWidget(e).mapVizRenderForPrint()}.bind(this))},d.prototype.tabRenderer=function(t,e){return Promise.map(t,function(t){return this.isCancelled?Promise.reject():e.getLayoutViewWhenReady(t.id).then((function(t){t.onShow()}))}.bind(this))},d.prototype.whenWidgetsRendered=function(t,e){var i=Promise.map(t,function(t){if(this.isCancelled)return Promise.reject();var i=this._dashboard.getDashboardCoreSvc("widgetLoader").getWidget(t);return i&&i.resize(),i?i.whenRenderComplete():e.whenWidgetRenderComplete(t)}.bind(this));return Promise.all(i)},d.prototype._removeAllPdfStyles=function(){e(".dashboardPdf").remove(),e(".widgetPdf").remove(),e(".widgetPDFNumber").remove(),e(".pdfFilterList").remove()},d.prototype._fixWidgetsStyle=function(t,i){var o="",n=this._dashboard;return e.each(e(t).find(i),(function(t,i){var r=e(i).attr("id"),a=r&&n.getCanvas().getContent(r),s=a&&a.getContainer().getType().indexOf("widget")>=0;if(r){var l=r+" .vis-container [data-area=row] [data-node=content]",d=e(i).css(["width","height","top","left"]),p=d.width,c=d.height,u=d.top,h=d.left,g=e(i).find(".vis-container [data-area=row] [data-node=content]"),f=g&&g.css(["margin-right"]),b=f&&Math.abs(parseInt(f["margin-right"]));o=s?o+" #"+r+"{ width:"+p+" !important; height:"+c+" !important; top: "+u+" !important; left: "+h+" !important; position: relative !important;}":e(i).parent().hasClass("pagegroup")?o+" #"+r+"{ position: absolute !important; top: "+u+" !important; left: "+h+" !important;}":o+" #"+r+"{ width:"+p+" !important; height:"+c+" !important; top: "+u+" !important; left: "+h+" !important; position: fixed !important;}",o=g.length>0&&o+" #"+l+"{ margin-right: "+b+"px !important; }"||o}})),o},d.prototype._fixWidgets=function(t){var i=this._fixWidgetsStyle(t,".widget")+this._fixWidgetsStyle(t,".page.pagegroup");e("head").append('<style class="widgetPdf" rel="stylesheet" type="text/css" media="print">  @media print {'+i+"}</style>")},d.prototype._scaleWidgets=function(t,i){var o="",n=0,r=0;e.each(e(t).find(".widget"),function(t,s){var l=a.getAngleDegree(s),d=e(s).css(["width","height","top","left"]),p=d.width,c=d.height,u=d.top,h=d.left;n=parseFloat(u)*i,r=parseFloat(h)*i,o=e(s).parent().hasClass("pagegroup")||"matrix3d(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1)"===e(s).css("transform")?o+" #"+e(s).attr("id")+"{ position: absolute !important}":o+" #"+e(s).attr("id")+"{ width:"+p+" !important; height:"+c+" !important; top: "+n+"px !important; left: "+r+"px !important; transform:scale("+i+") rotate("+l+"deg) !important; transform-origin: top left !important;}"}.bind(this)),e.each(e(t).find(".page.pagegroup"),function(t,s){var l=a.getAngleDegree(s),d=e(s).css(["width","height","top","left"]),p=d.width,c=d.height,u=d.top,h=d.left;n=parseFloat(u)*i,r=parseFloat(h)*i,o=e(s).parent().hasClass("pagegroup")?o+" #"+e(s).attr("id")+"{ position: absolute !important}":o+" #"+e(s).attr("id")+"{ width:"+p+" !important; height:"+c+" !important; top: "+n+"px !important; left: "+r+"px !important;  transform-origin: top left !important; transform:scale("+i+") rotate("+l+"deg) !important; position: absolute !important;}"}.bind(this)),e("head").append('<style class="widgetPdf" rel="stylesheet" type="text/css" media="print">  @media print {'+o+"}</style>")},d.prototype.findPageSize=function(t){var i=t.querySelector(".pagecontainer");return{height:e(i).height(),width:e(i).width()}},d.prototype._checkIfPageAbsolute=function(t){return!!e(t).find(".pageabsolute").length},d.prototype.scaleDashboard=function(t,i,n,r){var a=0;e.each(t,function(t,s){a=this.scalePageSizes(n,s);var l=e("#"+s.id);if(o.isIE()||l.hasClass("pagecontainer")||l.hasClass("pageabsolute")?this._scaleWidgets(e("#"+s.id),a):this._fixWidgets(e("#"+s.id)),i?this.appendPrintStyles(a,s,i[t],n):this.appendPrintStyles(a,s,i,n),r&&r[t].widgets.length>0){var d=this.createFilterContainer(r[t],n);e("#"+s.id).after(d),this.numberWidgets(s,r[t].widgets)}}.bind(this))},d.prototype.appendPrintStyles=function(t,i,n,r){var a="";t>1?(n&&!this.tabsHidden&&(-1!==n.toString().indexOf("\\")&&(n=n.toString().replace(/\\/g,"\\\\")),-1!==n.toString().indexOf('"')&&(n=n.toString().replace(/"/g,'\\"')),a=a+"#"+i.id+'::before{content:"'+n+'"; display: block; display: block; margin-left: -12px; margin-top: -2px; padding-left: 12px; width:'+e("#page1_tab").width()+"px; background: white;} #"+i.id+"{ width: "+r.width+"pt; height: "+r.height+"pt;}"),a=(a=a+" #"+i.id+"{ width: "+r.width+"pt; height: "+r.height+"pt;}")+" #"+i.id+"{ page-break-after: always !important; page-break-inside: avoid !important;-webkit-column-break-inside: avoid !important; break-inside: avoid !important; display: flex !important; flex-direction: column;\t\t\t\t\tvertical-align: top !important;}"):(n&&!this.tabsHidden&&(a=a+"#"+i.id+'::before{content:"'+n+'"; display: block; margin-left: -12px; margin-top:-2px; padding-left: 12px; width:'+e("#page1_tab").width()+"px; background: white;}"),a=a+" #"+i.id+"{ width: "+r.width+"pt; height: "+r.height+"pt;}",a=o.isIE()?a+" #"+i.id+"{ page-break-after: always !important; -webkit-column-break-inside: avoid !important; break-inside: avoid !important; page-break-inside: avoid;  display: flex !important; flex-direction: column; vertical-align: top !important; overflow: visible !important;} #"+i.childId+"{display: block !important; position:relative !important z-index:10; visibility: visible; overflow: visible !important;}":a+" #"+i.id+"{ page-break-after: always !important; -webkit-column-break-inside: avoid !important; break-inside: avoid !important; page-break-inside: avoid;  display: flex !important; flex-direction: column; vertical-align: top !important; overflow: visible !important;} #"+i.childId+"{width: "+i.size.width+"px; height: "+i.size.height+"px; transform:scale("+t+") !important; transform-origin: 0 0 !important; display: block !important; position:relative !important; z-index:10; visibility: visible; overflow: visible !important;}"),e("head").append('<style class="dashboardPdf" rel="stylesheet" type="text/css" media="print"> @media print { @page { size: '+this.pageSize+" "+this.orientation+";}"+a+" } </style>")},d.prototype.scalePageSizes=function(t,e){var i,o,n=.75*e.size.width,r=.75*e.size.height;return(i=t.width/n)<(o=t.height/r)?i:o},d}()})),define("dashboard-core/js/features/dashboard/dashboardPrint/api/AssetPrintAPI",[],(function(){return function(){function t(){_classCallCheck(this,t)}return t.prototype.showContentsForPrint=function(){},t.prototype.hideContentsAfterPrint=function(){},t.prototype.getOffScreenPageSize=function(){},t}()})),define("dashboard-core/js/features/dashboard/dashboardPrint/api/impl/DashboardPrint",["jquery","../../../../../lib/@waca/dashboard-common/dist/core/APIFactory","../AssetPrintAPI"],(function(t,e,i){return function(){function o(t){_classCallCheck(this,o),this._features=t.features}return o.prototype.getAPI=function(){return e.createAPI(this,[i])},o.prototype.showContentsForPrint=function(e){var i=this;this.blocker=t("<div></div>",{class:"printBlocker"});var o=e.pageElement,n=this._features.Zoom.getZoomMode();this._prevZoomLevel="fitPage"===n||"fitWidth"===n?n:this._features.Zoom.getZoomLevel(),t(o).append(this.blocker),this._features.Zoom.setZoomLevel(1),t(o).find(".tabPageHolder").css("display","block");var r="tab"===e.layoutType,a=t(o).find(".tabPageHolder");return r&&(this.originalParentMap={}),t.each(e.modelIds,(function(e,n){var s=t(o).find("#"+n+"_tab");s.hasClass("selected")||(s.css("display","inline-block"),s.css("z-index",-1)),r&&(i.originalParentMap[n]=s.parent(),a.append(s))})),Promise.resolve()},o.prototype.hideContentsAfterPrint=function(e,i){var o=this;t(i).find(".tabPageHolder").css("display","");var n=!!this.originalParentMap;return t.each(e,(function(e,r){var a=t(i).find("#"+r+"_tab");a.hasClass("selected")||(a.css("display",""),a.css("z-index","")),n&&o.originalParentMap[r].append(a)})),this.originalParentMap=null,"fitPage"===this._prevZoomLevel||"fitWidth"===this._prevZoomLevel?this._features.Zoom.setZoomMode(this._prevZoomLevel):this._features.Zoom.setZoomLevel(this._prevZoomLevel),this.blocker&&(this.blocker.remove(),this.blocker=null),Promise.resolve()},o.prototype.getOffScreenPageSize=function(e){var i=0,o=0;return t.each(t(e).find(".widget"),function(e,n){var r=t(n).position().left,a=t(n).position().top;r+t(n).outerWidth()>i&&(i=r+t(n).outerWidth()),a+t(n).outerHeight()>o&&(o=a+t(n).outerHeight())}.bind(this)),{width:i,height:o}},o}()})),define("dashboard-core/js/consumeProfileBundle",(function(){}));